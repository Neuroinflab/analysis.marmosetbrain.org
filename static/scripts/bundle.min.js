webpackJsonp([0],{

/***/ 11:
/* unknown exports provided */
/* all exports used */
/*!*******************************!*\
  !*** ./js/actions/Actions.js ***!
  \*******************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _AppDispatcher = __webpack_require__(/*! ../dispatcher/AppDispatcher */ 18);\n\nvar _AppDispatcher2 = _interopRequireDefault(_AppDispatcher);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Actions = function () {\n    function Actions() {\n        _classCallCheck(this, Actions);\n    }\n\n    _createClass(Actions, null, [{\n        key: 'saveState',\n\n        /**\n        * @param  {object} candidate\n        */\n        value: function saveState(state) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'SAVE',\n                state: state\n            });\n        }\n    }, {\n        key: 'showInjection',\n        value: function showInjection(inj) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'SHOW_INJECTION',\n                injection: inj\n            });\n        }\n    }, {\n        key: 'pickNode',\n        value: function pickNode(node) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'PICK_NODE',\n                node: node\n            });\n        }\n    }, {\n        key: 'pickTargetArea',\n        value: function pickTargetArea(node) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'PICK_TARGET_AREA',\n                node: node\n            });\n        }\n    }, {\n        key: 'nodeDetail',\n        value: function nodeDetail(node) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'NODE_DETAIL',\n                node: node\n            });\n        }\n    }, {\n        key: 'saveInjectionsStatic',\n        value: function saveInjectionsStatic(injections_static) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'SAVE_INJECTIONS_STATIC',\n                injections: injections_static\n            });\n        }\n    }, {\n        key: 'expandInjection',\n        value: function expandInjection(injection) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'EXPAND_INJECTION',\n                injection: injection\n            });\n        }\n    }, {\n        key: 'hideInjection',\n        value: function hideInjection(injection) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'HIDE_INJECTION',\n                injection: injection\n            });\n        }\n    }, {\n        key: 'highlightEdge',\n        value: function highlightEdge(from_, to, color) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'HIGHLIGHT_EDGE',\n                from_: from_,\n                to: to,\n                color: color\n            });\n        }\n    }, {\n        key: 'unhighlightEdge',\n        value: function unhighlightEdge(from_, to) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'UNHIGHLIGHT_EDGE',\n                from_: from_,\n                to: to\n            });\n        }\n    }, {\n        key: 'boldEdge',\n        value: function boldEdge(from_, to) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'BOLD_EDGE',\n                from_: from_,\n                to: to\n            });\n        }\n    }, {\n        key: 'unboldEdge',\n        value: function unboldEdge(from_, to) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'UNBOLD_EDGE',\n                from_: from_,\n                to: to\n            });\n        }\n    }, {\n        key: 'ajaxProgress',\n        value: function ajaxProgress() {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'AJAX_PROGRESS'\n            });\n        }\n    }, {\n        key: 'set3DIndex',\n        value: function set3DIndex(axis, value) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'SET_3D_INDEX',\n                axis: axis,\n                value: value\n            });\n        }\n    }, {\n        key: 'saveAreas',\n        value: function saveAreas(areas) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'SAVE_AREAS',\n                areas: areas\n            });\n        }\n    }, {\n        key: 'modalHide',\n        value: function modalHide(origin) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'MODAL_HIDE',\n                origin: origin\n            });\n        }\n    }, {\n        key: 'setDownloadLink',\n        value: function setDownloadLink(href, event, filename) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'SET_DOWNLOAD_LINK',\n                href: href,\n                event: event,\n                filename: filename\n\n            });\n        }\n    }, {\n        key: 'setFocusedViewState',\n        value: function setFocusedViewState(state) {\n            if (state == true) {\n                localStorage.setItem('focusedView', true);\n            } else {\n                localStorage.removeItem('focusedView');\n            }\n        }\n    }, {\n        key: 'setDataOverlay',\n        value: function setDataOverlay(overlay) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'SET_DATA_OVERLAY',\n                overlay: overlay\n            });\n        }\n    }, {\n        key: 'processAreas',\n        value: function processAreas(data) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'PROCESS_AREAS',\n                data: data\n            });\n        }\n    }, {\n        key: 'processConnectivity',\n        value: function processConnectivity(data, injectionInfo) {\n            _AppDispatcher2.default.dispatch({\n                actionType: 'PROCESS_CONNECTIVITY',\n                data: data,\n                injectionInfo: injectionInfo\n            });\n        }\n    }]);\n\n    return Actions;\n}();\n\nexports.default = Actions;\n;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvYWN0aW9ucy9BY3Rpb25zLmpzP2I0MzEiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKi9cblxuaW1wb3J0IEFwcERpc3BhdGNoZXIgZnJvbSAnLi4vZGlzcGF0Y2hlci9BcHBEaXNwYXRjaGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWN0aW9ucyB7XG4gICAgLyoqXG4gICAgKiBAcGFyYW0gIHtvYmplY3R9IGNhbmRpZGF0ZVxuICAgICovXG4gICAgc3RhdGljIHNhdmVTdGF0ZShzdGF0ZSkge1xuICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvblR5cGU6ICdTQVZFJyxcbiAgICAgICAgICAgIHN0YXRlOiBzdGF0ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIHNob3dJbmplY3Rpb24oaW5qKSB7XG4gICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uVHlwZTogJ1NIT1dfSU5KRUNUSU9OJyxcbiAgICAgICAgICAgIGluamVjdGlvbjogaW5qXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgcGlja05vZGUobm9kZSkge1xuICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvblR5cGU6ICdQSUNLX05PREUnLFxuICAgICAgICAgICAgbm9kZTogbm9kZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIHBpY2tUYXJnZXRBcmVhKG5vZGUpIHtcbiAgICAgICAgQXBwRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICBhY3Rpb25UeXBlOiAnUElDS19UQVJHRVRfQVJFQScsXG4gICAgICAgICAgICBub2RlOiBub2RlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgbm9kZURldGFpbChub2RlKSB7XG4gICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uVHlwZTogJ05PREVfREVUQUlMJyxcbiAgICAgICAgICAgIG5vZGU6IG5vZGVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBzYXZlSW5qZWN0aW9uc1N0YXRpYyhpbmplY3Rpb25zX3N0YXRpYykge1xuICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvblR5cGU6ICdTQVZFX0lOSkVDVElPTlNfU1RBVElDJyxcbiAgICAgICAgICAgIGluamVjdGlvbnM6IGluamVjdGlvbnNfc3RhdGljXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZXhwYW5kSW5qZWN0aW9uKGluamVjdGlvbikge1xuICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvblR5cGU6ICdFWFBBTkRfSU5KRUNUSU9OJyxcbiAgICAgICAgICAgIGluamVjdGlvbjogaW5qZWN0aW9uXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgaGlkZUluamVjdGlvbihpbmplY3Rpb24pIHtcbiAgICAgICAgQXBwRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICBhY3Rpb25UeXBlOiAnSElERV9JTkpFQ1RJT04nLFxuICAgICAgICAgICAgaW5qZWN0aW9uOiBpbmplY3Rpb25cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBoaWdobGlnaHRFZGdlKGZyb21fLCB0bywgY29sb3IpIHtcbiAgICAgICAgQXBwRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICBhY3Rpb25UeXBlOiAnSElHSExJR0hUX0VER0UnLFxuICAgICAgICAgICAgZnJvbV86IGZyb21fLFxuICAgICAgICAgICAgdG86IHRvLFxuICAgICAgICAgICAgY29sb3I6IGNvbG9yXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgdW5oaWdobGlnaHRFZGdlKGZyb21fLCB0bykge1xuICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvblR5cGU6ICdVTkhJR0hMSUdIVF9FREdFJyxcbiAgICAgICAgICAgIGZyb21fOiBmcm9tXyxcbiAgICAgICAgICAgIHRvOiB0b1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGJvbGRFZGdlKGZyb21fLCB0bykge1xuICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvblR5cGU6ICdCT0xEX0VER0UnLFxuICAgICAgICAgICAgZnJvbV86IGZyb21fLFxuICAgICAgICAgICAgdG86IHRvLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIHVuYm9sZEVkZ2UoZnJvbV8sIHRvKSB7XG4gICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uVHlwZTogJ1VOQk9MRF9FREdFJyxcbiAgICAgICAgICAgIGZyb21fOiBmcm9tXyxcbiAgICAgICAgICAgIHRvOiB0b1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGFqYXhQcm9ncmVzcygpIHtcbiAgICAgICAgQXBwRGlzcGF0Y2hlci5kaXNwYXRjaCh7XG4gICAgICAgICAgICBhY3Rpb25UeXBlOiAnQUpBWF9QUk9HUkVTUydcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBzZXQzREluZGV4KGF4aXMsIHZhbHVlKSB7XG4gICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uVHlwZTogJ1NFVF8zRF9JTkRFWCcsXG4gICAgICAgICAgICBheGlzOiBheGlzLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgc2F2ZUFyZWFzKGFyZWFzKSB7XG4gICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uVHlwZTogJ1NBVkVfQVJFQVMnLFxuICAgICAgICAgICAgYXJlYXM6IGFyZWFzXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgbW9kYWxIaWRlKG9yaWdpbikge1xuICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvblR5cGU6ICdNT0RBTF9ISURFJyxcbiAgICAgICAgICAgIG9yaWdpbjogb3JpZ2luXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgc2V0RG93bmxvYWRMaW5rKGhyZWYsIGV2ZW50LCBmaWxlbmFtZSkge1xuICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvblR5cGU6ICdTRVRfRE9XTkxPQURfTElOSycsXG4gICAgICAgICAgICBocmVmOiBocmVmLFxuICAgICAgICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgICAgICAgZmlsZW5hbWU6IGZpbGVuYW1lXG5cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyBzZXRGb2N1c2VkVmlld1N0YXRlKHN0YXRlKSB7XG4gICAgICAgIGlmIChzdGF0ZSA9PSB0cnVlKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZm9jdXNlZFZpZXcnLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdmb2N1c2VkVmlldycpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXRpYyBzZXREYXRhT3ZlcmxheShvdmVybGF5KSB7XG4gICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uVHlwZTogJ1NFVF9EQVRBX09WRVJMQVknLFxuICAgICAgICAgICAgb3ZlcmxheTogb3ZlcmxheVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIHByb2Nlc3NBcmVhcyhkYXRhKSB7XG4gICAgICAgIEFwcERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICAgICAgICAgICAgYWN0aW9uVHlwZTogJ1BST0NFU1NfQVJFQVMnLFxuICAgICAgICAgICAgZGF0YTogZGF0YVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIHByb2Nlc3NDb25uZWN0aXZpdHkoZGF0YSwgaW5qZWN0aW9uSW5mbykge1xuICAgICAgICBBcHBEaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgIGFjdGlvblR5cGU6ICdQUk9DRVNTX0NPTk5FQ1RJVklUWScsXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgaW5qZWN0aW9uSW5mbzogaW5qZWN0aW9uSW5mb1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8ganMvYWN0aW9ucy9BY3Rpb25zLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7Ozs7Ozs7O0FBU0E7QUFDQTs7Ozs7OztBQUNBOzs7Ozs7OztBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTs7O0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7Ozs7OztBQTNJQTtBQTRJQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 16:
/* unknown exports provided */
/* all exports used */
/*!*************************!*\
  !*** ./js/lib/utils.js ***!
  \*************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Injections = exports.Injection = exports.Areas = exports.Area = undefined;\nexports.toTitleCase = toTitleCase;\nexports.scientificNotion = scientificNotion;\nexports.showTooltipAreaName = showTooltipAreaName;\nexports.showTooltipTargetSummary = showTooltipTargetSummary;\nexports.hideTooltip = hideTooltip;\nexports.getColorFunc = getColorFunc;\nexports.getBlueColorFunc = getBlueColorFunc;\nexports.getLogColorFunc = getLogColorFunc;\nexports.getColorGradient = getColorGradient;\nexports.expandTracerID = expandTracerID;\nexports.humanReadableDate = humanReadableDate;\nexports.humanReadableDiffInMonth = humanReadableDiffInMonth;\nexports.parseAP = parseAP;\nexports.parseML = parseML;\nexports.parseDV = parseDV;\nexports.getOffset = getOffset;\nexports.getBarWidthFunc = getBarWidthFunc;\nexports.getTargetAreaSummaryHTML = getTargetAreaSummaryHTML;\nexports.svgAddHatchLine = svgAddHatchLine;\n\nvar _d = __webpack_require__(/*! d3 */ 12);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _moment = __webpack_require__(/*! moment */ 0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction toTitleCase(str) {\n    //return str.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\n    return str.charAt(0).toUpperCase() + str.substr(1);\n}\n/*\nexport function getColorFunc(min, max) {\n    let w = max - min;\n    min = min - w * 0.1;\n    min = 0, w = 1;\n    max = 1;\n    let colorFunction = d3.scaleLinear().domain([min, min + 0.005 * w, min + 0.13 * w, min + 0.28 * w, min + 0.32 * w, min + 0.74 * w, min + 0.92 * w, max])\n        .range(['rgb(230, 230, 230)', 'rgb(244, 247, 140)', 'rgb(226, 139, 33)', 'rgb(215, 82, 35)', 'rgb(212, 67, 36)', 'rgb(124, 83, 89)', 'rgb(81, 51, 49)', 'rgb(81, 51, 49)']);\n    function _colorFunction(v) {\n        return colorFunction(Math.pow(10, v));\n    }\n    return _colorFunction;\n}\n*/\nfunction scientificNotion(value) {\n    if (value < 0) {\n        value = -value;\n        negative = true;\n    }\n    var exp = Math.floor(Math.log10(value));\n    var base = value;\n    base = base * Math.pow(10, -exp);\n    var v = '';\n    v += base.toFixed(2);\n    if (exp != 0) {\n        v += '&#215;10<sup>' + exp + '</sup>';\n    }\n    return v;\n}\nfunction showTooltipAreaName() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        area = _ref.area,\n        x = _ref.x,\n        y = _ref.y;\n\n    var tooltip = d3.select('div.tooltip');\n    tooltip.style('opacity', .9).classed('matrix-view', false);\n    var x_ = x,\n        y_ = y;\n    if (x_ === null) {\n        x_ = d3.event.pageX + 24;\n    }\n    if (y_ === null) {\n        y_ = d3.event.pageY - 40;\n    }\n    var txt = area.fullname;\n    tooltip.html(txt).style(\"left\", x_ + \"px\").style(\"top\", y_ + \"px\");\n}\nfunction showTooltipTargetSummary() {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        target_area = _ref2.target_area,\n        source_area = _ref2.source_area,\n        matrix = _ref2.matrix,\n        x = _ref2.x,\n        y = _ref2.y;\n\n    var tooltip = d3.select('div.tooltip');\n    tooltip.style('opacity', .9).classed('matrix-view', false);\n    var x_ = x,\n        y_ = y;\n    if (x_ === null) {\n        x_ = d3.event.pageX + 24;\n    }\n    if (y_ === null) {\n        y_ = d3.event.pageY - 40;\n    }\n    var txt = getTargetAreaSummaryHTML(target_area, source_area, matrix);\n    tooltip.html(txt).style(\"left\", x_ + \"px\").style(\"top\", y_ + \"px\");\n}\nfunction hideTooltip() {\n    var tooltip = d3.select('div.tooltip');\n    tooltip.style(\"opacity\", 0);\n}\n\nfunction getColorFunc() {\n    var min = 0,\n        max = 1,\n        w = 1;\n    var colorFunction = d3.scaleLinear().domain([min, min + 0.005 * w, min + 0.13 * w, min + 0.28 * w, min + 0.32 * w, min + 0.74 * w, min + 0.92 * w, max]).range(['rgb(230, 230, 230)', 'rgb(244, 247, 140)', 'rgb(226, 139, 33)', 'rgb(215, 82, 35)', 'rgb(212, 67, 36)', 'rgb(124, 83, 89)', 'rgb(81, 51, 49)', 'rgb(81, 51, 49)']);\n    return colorFunction;\n}\nfunction getBlueColorFunc() {\n    var min = 0,\n        max = 1,\n        w = 1;\n    var domain = [0.0, 0.0156, 0.0312, 0.0469, 0.0625, 0.0781, 0.0938, 0.1094, 0.125, 0.1406, 0.1562, 0.1719, 0.1875, 0.2031, 0.2188, 0.2344, 0.25, 0.2656, 0.2812, 0.2969, 0.3125, 0.3281, 0.3438, 0.3594, 0.375, 0.3906, 0.4062, 0.4219, 0.4375, 0.4531, 0.4688, 0.4844, 0.5, 0.5156, 0.5312, 0.5469, 0.5625, 0.5781, 0.5938, 0.6094, 0.625, 0.6406, 0.6562, 0.6719, 0.6875, 0.7031, 0.7188, 0.7344, 0.75, 0.7656, 0.7812, 0.7969, 0.8125, 0.8281, 0.8438, 0.8594, 0.875, 0.8906, 0.9062, 0.9219, 0.9375, 0.9531, 0.9688, 0.9844, 1.0];\n    var range = ['rgb(180, 4, 38)', 'rgb(191, 7, 41)', 'rgb(202, 11, 44)', 'rgb(212, 15, 48)', 'rgb(223, 20, 51)', 'rgb(233, 24, 55)', 'rgb(242, 30, 58)', 'rgb(252, 35, 62)', 'rgb(255, 41, 65)', 'rgb(255, 45, 67)', 'rgb(255, 50, 70)', 'rgb(255, 56, 72)', 'rgb(255, 61, 75)', 'rgb(255, 67, 78)', 'rgb(255, 72, 81)', 'rgb(255, 78, 85)', 'rgb(255, 85, 89)', 'rgb(255, 91, 93)', 'rgb(255, 98, 98)', 'rgb(255, 105, 103)', 'rgb(255, 113, 109)', 'rgb(255, 121, 115)', 'rgb(255, 129, 122)', 'rgb(255, 138, 130)', 'rgb(255, 147, 139)', 'rgb(255, 157, 148)', 'rgb(255, 168, 159)', 'rgb(255, 180, 170)', 'rgb(255, 192, 184)', 'rgb(255, 206, 198)', 'rgb(245, 213, 207)', 'rgb(235, 218, 215)', 'rgb(223, 223, 223)', 'rgb(214, 221, 226)', 'rgb(204, 218, 229)', 'rgb(195, 215, 231)', 'rgb(186, 212, 233)', 'rgb(177, 209, 236)', 'rgb(169, 205, 238)', 'rgb(161, 201, 239)', 'rgb(153, 197, 241)', 'rgb(146, 193, 242)', 'rgb(139, 188, 243)', 'rgb(132, 184, 244)', 'rgb(126, 179, 245)', 'rgb(120, 174, 245)', 'rgb(114, 169, 245)', 'rgb(109, 164, 244)', 'rgb(103, 159, 244)', 'rgb(99, 153, 243)', 'rgb(94, 148, 242)', 'rgb(90, 143, 240)', 'rgb(86, 137, 238)', 'rgb(83, 132, 236)', 'rgb(79, 127, 233)', 'rgb(76, 121, 231)', 'rgb(74, 116, 227)', 'rgb(71, 111, 224)', 'rgb(69, 106, 220)', 'rgb(67, 101, 216)', 'rgb(65, 96, 212)', 'rgb(63, 91, 207)', 'rgb(61, 86, 203)', 'rgb(60, 81, 198)', 'rgb(59, 76, 192)'];\n    var colorFunction = d3.scaleLinear().domain(domain).range(range);\n    return colorFunction;\n}\n\nfunction getLogColorFunc() {\n    var min = 0,\n        max = 1,\n        w = 1;\n    var colorFunction = d3.scaleLinear().domain([min, min + 0.005 * w, min + 0.13 * w, min + 0.28 * w, min + 0.32 * w, min + 0.74 * w, min + 0.92 * w, max]).range(['rgb(230, 230, 230)', 'rgb(244, 247, 140)', 'rgb(226, 139, 33)', 'rgb(215, 82, 35)', 'rgb(212, 67, 36)', 'rgb(124, 83, 89)', 'rgb(81, 51, 49)', 'rgb(81, 51, 49)']);\n    function _colorFunction(v) {\n        return colorFunction(Math.pow(10, v));\n    }\n    return _colorFunction;\n}\n\nfunction getColorGradient() {\n    var grad = [{ offset: 0, color: 'rgb(230, 230, 230)' }, { offset: 0.005, color: 'rgb(244, 247, 140)' }, { offset: 0.13, color: 'rgb(226, 139, 33)' }, { offset: 0.28, color: 'rgb(215, 82, 35)' }, { offset: 0.32, color: 'rgb(212, 67, 36)' }, { offset: 0.74, color: 'rgb(124, 83, 89)' }, { offset: 0.92, color: 'rgb(81, 51, 49)' }, { offset: 1, color: 'rgb(81, 51, 49)' }];\n    return _.map(grad, function (v) {\n        return {\n            offset: (Math.log10(v.offset) + 6) / 6,\n            color: v.color\n        };\n    });\n}\n\nfunction expandTracerID(t) {\n    switch (t) {\n        case 'DY':\n            return 'Diamidino yellow';\n            break;\n        case 'FB':\n            return 'Fast blue';\n            break;\n        case 'FR':\n            return 'Fluoro ruby';\n            break;\n        case 'FE':\n            return 'Fluoro emerald';\n            break;\n        case 'CTBgr':\n            return 'CTB Green';\n            break;\n        case 'CTBr':\n            return 'CTB Red';\n            break;\n        case 'CTBg':\n            return 'CTB Gold';\n            break;\n        default:\n            return t;\n            break;\n    }\n}\nfunction humanReadableDate(m) {\n    var d = (0, _moment2.default)(m);\n    if (d.isValid()) {\n        return d.format('DD/MMM/YYYY');\n    } else {\n        return 'Not provided';\n    }\n}\nfunction humanReadableDiffInMonth(a, b) {\n    a = (0, _moment2.default)(a);\n    b = (0, _moment2.default)(b);\n    if (!a.isValid() || !b.isValid()) {\n        return null;\n    }\n    var years = Math.floor(a.diff(b, 'years', true));\n    var months = Math.floor(a.diff(b, 'months', true));\n    if (years == 0) {\n        years = '';\n    } else if (years == 1) {\n        years = '' + years + ' year';\n    } else {\n        years = '' + years + ' years';\n    }\n    months = months % 12;\n    if (months == 0) {\n        months = '';\n    } else if (months == 1) {\n        months = '' + months + ' month';\n    } else {\n        months = '' + months + ' months';\n    }\n    if (years == 0) {\n        return months;\n    } else {\n        return years + ' ' + months;\n    }\n}\n\nfunction parseAP(v) {\n    var dist = void 0;\n    if (v == 0) {\n        return 'At interaural line';\n    } else if (v > 0) {\n        dist = parseFloat(v).toFixed(1);\n        return '' + dist + ' mm rostral to interaural line';\n    } else {\n        dist = parseFloat(-v).toFixed(1);\n        return '' + dist + ' mm caudal to interaural line';\n    }\n}\nfunction parseML(v) {\n    var dist = void 0;\n    if (v == 0) {\n        return 'At the midline';\n    } else if (v > 0) {\n        dist = parseFloat(v).toFixed(1);\n        return '' + dist + ' mm lateral to the midline';\n    } else {\n        dist = parseFloat(-v).toFixed(1);\n        return '' + dist + ' mm lateral to the midline';\n    }\n}\nfunction parseDV(v) {\n    var dist = void 0;\n    if (v == 0) {\n        return 'At interaural line';\n    } else if (v > 0) {\n        dist = parseFloat(v).toFixed(1);\n        return '' + dist + ' mm dorsal to the interaural line';\n    } else {\n        dist = parseFloat(-v).toFixed(1);\n        return '' + dist + ' mm ventral to the interaural line';\n    }\n}\nfunction getOffset(el) {\n    var _x = 0;\n    var _y = 0;\n    while (el && !isNaN(el.offsetLeft) && !isNaN(el.offsetTop)) {\n        _x += el.offsetLeft - el.scrollLeft;\n        _y += el.offsetTop - el.scrollTop;\n        el = el.offsetParent;\n    }\n    return { top: _y, left: _x };\n}\nfunction getBarWidthFunc(min, max, width) {\n    var func = d3.scaleLinear().domain([min, max]).range([2, width]);\n    return func;\n}\nfunction getTargetAreaSummaryHTML(target_area, source_area, matrix, mode) {\n    mode = mode || 'FLN';\n    var txt = 'Target: ' + target_area.fullname + '<br/>';\n    txt += 'Source: ' + source_area.fullname + '<br/>';\n    var data = matrix.getData(target_area, source_area);\n    var value = void 0;\n    if (mode == 'SLN') {\n        value = matrix.getData(target_area, source_area).sln;\n    } else {\n        value = matrix.getData(target_area, source_area).flne;\n    }\n    if (value !== undefined && value !== null && (mode == 'SLN' && value >= 0 || mode == 'FLN' && value > 0)) {\n        var colorFunc = void 0,\n            barWidthFunc = void 0,\n            s = void 0;\n        if (mode == 'SLN') {\n            colorFunc = getBlueColorFunc();\n            barWidthFunc = getBarWidthFunc(0, 1, 180);\n            s = value.toFixed(2);\n        } else {\n            colorFunc = getLogColorFunc();\n            barWidthFunc = getBarWidthFunc(-5.5, 0, 180);\n            s = scientificNotion(value);\n        }\n        var _negative = false;\n        var log10 = Math.log10(value).toFixed(2);\n        if (mode == 'FLN') {\n            txt += 'Connection strength: <br/>';\n            txt += '<span style=\"padding-left: 30px;\">' + mode + 'e: ' + s + '</span><br/>';\n        } else {\n            txt += 'Fraction of supragranular extrinsic neurons, <br/>';\n            txt += '<span style=\"padding-left: 30px;\">' + mode + 'e: ' + s + '</span><br/>';\n        }\n        if (mode == 'FLN') {\n            txt += '<span style=\"padding-left: 30px;\">' + 'log<sub>10</sub>(' + mode + 'e): ' + log10 + '</span><br/>';\n        }\n        var summary = void 0;\n        if (mode == 'FLN') {\n            summary = ', log<sub>10</sub>(' + mode + 'e):';\n        } else {\n            summary = ':';\n        }\n        txt += '<div style=\"margin-top: 8px;\">Based on ' + data.injections.length + ' injection' + (data.injections.length > 1 ? 's' : '') + summary + '</div>';\n        txt += '<table class=\"injection-strength\"><tbody>';\n        var injection_strength = [];\n        var injections = data.injections;\n        var _injections = _.sortBy(injections, function (i) {\n            //let injection_id = i.case_id + '-' + i.tracer_id;\n            //let flne = _.find(flne_per_injection[injection_id], {source: source_area.abbrev});\n            if (mode == 'SLN') {\n                if (i.sln >= 0) {\n                    return i.sln;\n                } else {\n                    return Infinity;\n                }\n            } else {\n                if (i.flne > 0) {\n                    return -i.flne;\n                } else {\n                    return Infinity;\n                }\n            }\n            /*\n            let flne = i.sln;\n            if (flne) {\n                return -flne.flne;\n            } else {\n                return Infinity;\n            }\n            */\n        });\n        _.each(_injections, function (_inj) {\n            var injection_id = _inj.injection_id;;\n            var injection_name = (_inj.display_name ? _inj.display_name : _inj.case_id) + '-' + _inj.tracer_id;\n            var value = void 0;\n            if (mode == 'SLN') {\n                value = _inj.sln;\n            } else {\n                value = _inj.flne;\n            }\n            var strength = void 0;\n\n            if (mode == 'SLN') {\n                if (!isNaN(value)) {\n                    strength = '<div class=\"summary-flne\"><div class=\"summary-flne-bar\" style=\"width: ' + barWidthFunc(value) + 'px; background-color: ' + colorFunc(value) + '\"></div>' + '<div class=\"summary-flne-value\">' + value.toFixed(2) + '</div></div>';\n                } else {\n                    strength = '<div class=\"summary-flne\"><div class=\"summary-flne-value nan\">not found</div></div>';\n                }\n                injection_strength.push('<tr><td>' + injection_name + '</td><td>' + strength + '</td></tr>');\n            } else {\n                if (value > 0) {\n                    var log10_value = Math.log10(value);\n                    strength = '<div class=\"summary-flne\"><div class=\"summary-flne-bar\" style=\"width: ' + barWidthFunc(log10_value) + 'px; background-color: ' + colorFunc(log10_value) + '\"></div>' + '<div class=\"summary-flne-value\">' + log10_value.toFixed(2) + '</div></div>';\n                } else {\n                    strength = '<div class=\"summary-flne\"><div class=\"summary-flne-value nan\">not found</div></div>';\n                }\n                injection_strength.push('<tr><td>' + injection_name + '</td><td>' + strength + '</td></tr>');\n            }\n        });\n\n        txt += injection_strength.join('');\n    } else {\n        if (target_area.id === source_area.id) {\n            txt += 'Intrinsic connections not shown<br/>';\n        } else {\n            if (mode == 'SLN' && data.sln_notdefined) {\n                txt += 'SLNe in area ' + source_area.abbrev + ' is not defined.<br/>';\n            } else {\n                txt += 'Connection not detected<br/>';\n            }\n        }\n    }\n    txt += '</tbody></table>';\n    return txt;\n}\n\nvar Area = exports.Area = function Area() {\n    _classCallCheck(this, Area);\n};\n\nvar Areas = exports.Areas = function Areas() {\n    _classCallCheck(this, Areas);\n};\n\nvar Injection = exports.Injection = function Injection() {\n    _classCallCheck(this, Injection);\n};\n\nvar Injections = exports.Injections = function Injections() {\n    _classCallCheck(this, Injections);\n};\n\nfunction svgAddHatchLine(svg) {\n    svg.append('pattern').attr('id', 'diagonalHatch').attr('patternUnits', 'userSpaceOnUse').attr('width', '4').attr('height', '4').append('path').attr('d', 'M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2').attr('style', 'stroke:black; stroke-width:1');\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvbGliL3V0aWxzLmpzPzU5OWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuZXhwb3J0IGZ1bmN0aW9uIHRvVGl0bGVDYXNlKHN0cikge1xuICAgIC8vcmV0dXJuIHN0ci5yZXBsYWNlKC9cXHdcXFMqL2csIGZ1bmN0aW9uKHR4dCl7cmV0dXJuIHR4dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR4dC5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKTt9KTtcbiAgICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnN1YnN0cigxKTtcbn1cbi8qXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29sb3JGdW5jKG1pbiwgbWF4KSB7XG4gICAgbGV0IHcgPSBtYXggLSBtaW47XG4gICAgbWluID0gbWluIC0gdyAqIDAuMTtcbiAgICBtaW4gPSAwLCB3ID0gMTtcbiAgICBtYXggPSAxO1xuICAgIGxldCBjb2xvckZ1bmN0aW9uID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oW21pbiwgbWluICsgMC4wMDUgKiB3LCBtaW4gKyAwLjEzICogdywgbWluICsgMC4yOCAqIHcsIG1pbiArIDAuMzIgKiB3LCBtaW4gKyAwLjc0ICogdywgbWluICsgMC45MiAqIHcsIG1heF0pXG4gICAgICAgIC5yYW5nZShbJ3JnYigyMzAsIDIzMCwgMjMwKScsICdyZ2IoMjQ0LCAyNDcsIDE0MCknLCAncmdiKDIyNiwgMTM5LCAzMyknLCAncmdiKDIxNSwgODIsIDM1KScsICdyZ2IoMjEyLCA2NywgMzYpJywgJ3JnYigxMjQsIDgzLCA4OSknLCAncmdiKDgxLCA1MSwgNDkpJywgJ3JnYig4MSwgNTEsIDQ5KSddKTtcbiAgICBmdW5jdGlvbiBfY29sb3JGdW5jdGlvbih2KSB7XG4gICAgICAgIHJldHVybiBjb2xvckZ1bmN0aW9uKE1hdGgucG93KDEwLCB2KSk7XG4gICAgfVxuICAgIHJldHVybiBfY29sb3JGdW5jdGlvbjtcbn1cbiovXG5leHBvcnQgZnVuY3Rpb24gc2NpZW50aWZpY05vdGlvbih2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHtcbiAgICAgICAgdmFsdWUgPSAtdmFsdWU7XG4gICAgICAgIG5lZ2F0aXZlID0gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IGV4cCA9IE1hdGguZmxvb3IoTWF0aC5sb2cxMCh2YWx1ZSkpO1xuICAgIGxldCBiYXNlID0gdmFsdWU7XG4gICAgYmFzZSA9IGJhc2UgKiBNYXRoLnBvdygxMCwgLWV4cCk7XG4gICAgbGV0IHYgPSAnJztcbiAgICB2ICs9IGJhc2UudG9GaXhlZCgyKTtcbiAgICBpZiAoZXhwICE9IDApIHtcbiAgICAgICAgdiArPSAnJiMyMTU7MTA8c3VwPicgKyAoZXhwKSArICc8L3N1cD4nO1xuICAgIH1cbiAgICByZXR1cm4gdjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaG93VG9vbHRpcEFyZWFOYW1lKHthcmVhLCB4LCB5fSA9IHt9KSB7XG4gICAgbGV0IHRvb2x0aXAgPSBkMy5zZWxlY3QoJ2Rpdi50b29sdGlwJyk7XG4gICAgdG9vbHRpcFxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAuOSlcbiAgICAgICAgLmNsYXNzZWQoJ21hdHJpeC12aWV3JywgZmFsc2UpO1xuICAgIGxldCB4XyA9IHgsIHlfID0geTtcbiAgICBpZiAoeF8gPT09IG51bGwpIHtcbiAgICAgICAgeF8gPSBkMy5ldmVudC5wYWdlWCArIDI0O1xuICAgIH1cbiAgICBpZiAoeV8gPT09IG51bGwpIHtcbiAgICAgICAgeV8gPSBkMy5ldmVudC5wYWdlWSAtIDQwO1xuICAgIH1cbiAgICBsZXQgdHh0ID0gYXJlYS5mdWxsbmFtZTtcbiAgICB0b29sdGlwLmh0bWwodHh0KVxuICAgICAgICAuc3R5bGUoXCJsZWZ0XCIsICh4XykgKyBcInB4XCIpXG4gICAgICAgIC5zdHlsZShcInRvcFwiLCAoeV8pICsgXCJweFwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBzaG93VG9vbHRpcFRhcmdldFN1bW1hcnkoe3RhcmdldF9hcmVhLCBzb3VyY2VfYXJlYSwgbWF0cml4LCB4LCB5fSA9IHt9KSB7XG4gICAgbGV0IHRvb2x0aXAgPSBkMy5zZWxlY3QoJ2Rpdi50b29sdGlwJyk7XG4gICAgdG9vbHRpcFxuICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCAuOSlcbiAgICAgICAgLmNsYXNzZWQoJ21hdHJpeC12aWV3JywgZmFsc2UpO1xuICAgIGxldCB4XyA9IHgsIHlfID0geTtcbiAgICBpZiAoeF8gPT09IG51bGwpIHtcbiAgICAgICAgeF8gPSBkMy5ldmVudC5wYWdlWCArIDI0O1xuICAgIH1cbiAgICBpZiAoeV8gPT09IG51bGwpIHtcbiAgICAgICAgeV8gPSBkMy5ldmVudC5wYWdlWSAtIDQwO1xuICAgIH1cbiAgICBsZXQgdHh0ID0gZ2V0VGFyZ2V0QXJlYVN1bW1hcnlIVE1MKHRhcmdldF9hcmVhLCBzb3VyY2VfYXJlYSwgbWF0cml4KTtcbiAgICB0b29sdGlwLmh0bWwodHh0KVxuICAgICAgICAuc3R5bGUoXCJsZWZ0XCIsICh4XykgKyBcInB4XCIpXG4gICAgICAgIC5zdHlsZShcInRvcFwiLCAoeV8pICsgXCJweFwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBoaWRlVG9vbHRpcCgpIHtcbiAgICBsZXQgdG9vbHRpcCA9IGQzLnNlbGVjdCgnZGl2LnRvb2x0aXAnKTtcbiAgICB0b29sdGlwXG4gICAgICAgIC5zdHlsZShcIm9wYWNpdHlcIiwgMCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb2xvckZ1bmMoKSB7XG4gICAgbGV0IG1pbiA9IDAsIG1heCA9IDEsIHcgPSAxO1xuICAgIGxldCBjb2xvckZ1bmN0aW9uID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oW21pbiwgbWluICsgMC4wMDUgKiB3LCBtaW4gKyAwLjEzICogdywgbWluICsgMC4yOCAqIHcsIG1pbiArIDAuMzIgKiB3LCBtaW4gKyAwLjc0ICogdywgbWluICsgMC45MiAqIHcsIG1heF0pXG4gICAgICAgIC5yYW5nZShbJ3JnYigyMzAsIDIzMCwgMjMwKScsICdyZ2IoMjQ0LCAyNDcsIDE0MCknLCAncmdiKDIyNiwgMTM5LCAzMyknLCAncmdiKDIxNSwgODIsIDM1KScsICdyZ2IoMjEyLCA2NywgMzYpJywgJ3JnYigxMjQsIDgzLCA4OSknLCAncmdiKDgxLCA1MSwgNDkpJywgJ3JnYig4MSwgNTEsIDQ5KSddKTtcbiAgICByZXR1cm4gY29sb3JGdW5jdGlvbjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRCbHVlQ29sb3JGdW5jKCkge1xuICAgIGxldCBtaW4gPSAwLCBtYXggPSAxLCB3ID0gMTtcbiAgICBjb25zdCBkb21haW4gPSBbMC4wLCAwLjAxNTYsIDAuMDMxMiwgMC4wNDY5LCAwLjA2MjUsIDAuMDc4MSwgMC4wOTM4LCAwLjEwOTQsIDAuMTI1LCAwLjE0MDYsIDAuMTU2MiwgMC4xNzE5LCAwLjE4NzUsIDAuMjAzMSwgMC4yMTg4LCAwLjIzNDQsIDAuMjUsIDAuMjY1NiwgMC4yODEyLCAwLjI5NjksIDAuMzEyNSwgMC4zMjgxLCAwLjM0MzgsIDAuMzU5NCwgMC4zNzUsIDAuMzkwNiwgMC40MDYyLCAwLjQyMTksIDAuNDM3NSwgMC40NTMxLCAwLjQ2ODgsIDAuNDg0NCwgMC41LCAwLjUxNTYsIDAuNTMxMiwgMC41NDY5LCAwLjU2MjUsIDAuNTc4MSwgMC41OTM4LCAwLjYwOTQsIDAuNjI1LCAwLjY0MDYsIDAuNjU2MiwgMC42NzE5LCAwLjY4NzUsIDAuNzAzMSwgMC43MTg4LCAwLjczNDQsIDAuNzUsIDAuNzY1NiwgMC43ODEyLCAwLjc5NjksIDAuODEyNSwgMC44MjgxLCAwLjg0MzgsIDAuODU5NCwgMC44NzUsIDAuODkwNiwgMC45MDYyLCAwLjkyMTksIDAuOTM3NSwgMC45NTMxLCAwLjk2ODgsIDAuOTg0NCwgMS4wXTtcbiAgICBjb25zdCByYW5nZSA9IFsncmdiKDE4MCwgNCwgMzgpJywgJ3JnYigxOTEsIDcsIDQxKScsICdyZ2IoMjAyLCAxMSwgNDQpJywgJ3JnYigyMTIsIDE1LCA0OCknLCAncmdiKDIyMywgMjAsIDUxKScsICdyZ2IoMjMzLCAyNCwgNTUpJywgJ3JnYigyNDIsIDMwLCA1OCknLCAncmdiKDI1MiwgMzUsIDYyKScsICdyZ2IoMjU1LCA0MSwgNjUpJywgJ3JnYigyNTUsIDQ1LCA2NyknLCAncmdiKDI1NSwgNTAsIDcwKScsICdyZ2IoMjU1LCA1NiwgNzIpJywgJ3JnYigyNTUsIDYxLCA3NSknLCAncmdiKDI1NSwgNjcsIDc4KScsICdyZ2IoMjU1LCA3MiwgODEpJywgJ3JnYigyNTUsIDc4LCA4NSknLCAncmdiKDI1NSwgODUsIDg5KScsICdyZ2IoMjU1LCA5MSwgOTMpJywgJ3JnYigyNTUsIDk4LCA5OCknLCAncmdiKDI1NSwgMTA1LCAxMDMpJywgJ3JnYigyNTUsIDExMywgMTA5KScsICdyZ2IoMjU1LCAxMjEsIDExNSknLCAncmdiKDI1NSwgMTI5LCAxMjIpJywgJ3JnYigyNTUsIDEzOCwgMTMwKScsICdyZ2IoMjU1LCAxNDcsIDEzOSknLCAncmdiKDI1NSwgMTU3LCAxNDgpJywgJ3JnYigyNTUsIDE2OCwgMTU5KScsICdyZ2IoMjU1LCAxODAsIDE3MCknLCAncmdiKDI1NSwgMTkyLCAxODQpJywgJ3JnYigyNTUsIDIwNiwgMTk4KScsICdyZ2IoMjQ1LCAyMTMsIDIwNyknLCAncmdiKDIzNSwgMjE4LCAyMTUpJywgJ3JnYigyMjMsIDIyMywgMjIzKScsICdyZ2IoMjE0LCAyMjEsIDIyNiknLCAncmdiKDIwNCwgMjE4LCAyMjkpJywgJ3JnYigxOTUsIDIxNSwgMjMxKScsICdyZ2IoMTg2LCAyMTIsIDIzMyknLCAncmdiKDE3NywgMjA5LCAyMzYpJywgJ3JnYigxNjksIDIwNSwgMjM4KScsICdyZ2IoMTYxLCAyMDEsIDIzOSknLCAncmdiKDE1MywgMTk3LCAyNDEpJywgJ3JnYigxNDYsIDE5MywgMjQyKScsICdyZ2IoMTM5LCAxODgsIDI0MyknLCAncmdiKDEzMiwgMTg0LCAyNDQpJywgJ3JnYigxMjYsIDE3OSwgMjQ1KScsICdyZ2IoMTIwLCAxNzQsIDI0NSknLCAncmdiKDExNCwgMTY5LCAyNDUpJywgJ3JnYigxMDksIDE2NCwgMjQ0KScsICdyZ2IoMTAzLCAxNTksIDI0NCknLCAncmdiKDk5LCAxNTMsIDI0MyknLCAncmdiKDk0LCAxNDgsIDI0MiknLCAncmdiKDkwLCAxNDMsIDI0MCknLCAncmdiKDg2LCAxMzcsIDIzOCknLCAncmdiKDgzLCAxMzIsIDIzNiknLCAncmdiKDc5LCAxMjcsIDIzMyknLCAncmdiKDc2LCAxMjEsIDIzMSknLCAncmdiKDc0LCAxMTYsIDIyNyknLCAncmdiKDcxLCAxMTEsIDIyNCknLCAncmdiKDY5LCAxMDYsIDIyMCknLCAncmdiKDY3LCAxMDEsIDIxNiknLCAncmdiKDY1LCA5NiwgMjEyKScsICdyZ2IoNjMsIDkxLCAyMDcpJywgJ3JnYig2MSwgODYsIDIwMyknLCAncmdiKDYwLCA4MSwgMTk4KScsICdyZ2IoNTksIDc2LCAxOTIpJ107XG4gICAgbGV0IGNvbG9yRnVuY3Rpb24gPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihkb21haW4pXG4gICAgICAgIC5yYW5nZShyYW5nZSk7XG4gICAgcmV0dXJuIGNvbG9yRnVuY3Rpb247XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMb2dDb2xvckZ1bmMoKSB7XG4gICAgbGV0IG1pbiA9IDAsIG1heCA9IDEsIHcgPSAxO1xuICAgIGxldCBjb2xvckZ1bmN0aW9uID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oW21pbiwgbWluICsgMC4wMDUgKiB3LCBtaW4gKyAwLjEzICogdywgbWluICsgMC4yOCAqIHcsIG1pbiArIDAuMzIgKiB3LCBtaW4gKyAwLjc0ICogdywgbWluICsgMC45MiAqIHcsIG1heF0pXG4gICAgICAgIC5yYW5nZShbJ3JnYigyMzAsIDIzMCwgMjMwKScsICdyZ2IoMjQ0LCAyNDcsIDE0MCknLCAncmdiKDIyNiwgMTM5LCAzMyknLCAncmdiKDIxNSwgODIsIDM1KScsICdyZ2IoMjEyLCA2NywgMzYpJywgJ3JnYigxMjQsIDgzLCA4OSknLCAncmdiKDgxLCA1MSwgNDkpJywgJ3JnYig4MSwgNTEsIDQ5KSddKTtcbiAgICBmdW5jdGlvbiBfY29sb3JGdW5jdGlvbih2KSB7XG4gICAgICAgIHJldHVybiBjb2xvckZ1bmN0aW9uKE1hdGgucG93KDEwLCB2KSk7XG4gICAgfVxuICAgIHJldHVybiBfY29sb3JGdW5jdGlvbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbG9yR3JhZGllbnQoKSB7XG4gICAgbGV0IGdyYWQgPSBbXG4gICAgICAgIHtvZmZzZXQ6IDAsIGNvbG9yOiAncmdiKDIzMCwgMjMwLCAyMzApJ30sXG4gICAgICAgIHtvZmZzZXQ6IDAuMDA1LCBjb2xvcjogJ3JnYigyNDQsIDI0NywgMTQwKSd9LFxuICAgICAgICB7b2Zmc2V0OiAwLjEzLCBjb2xvcjogJ3JnYigyMjYsIDEzOSwgMzMpJ30sXG4gICAgICAgIHtvZmZzZXQ6IDAuMjgsIGNvbG9yOiAncmdiKDIxNSwgODIsIDM1KSd9LFxuICAgICAgICB7b2Zmc2V0OiAwLjMyLCBjb2xvcjogJ3JnYigyMTIsIDY3LCAzNiknfSxcbiAgICAgICAge29mZnNldDogMC43NCwgY29sb3I6ICdyZ2IoMTI0LCA4MywgODkpJ30sXG4gICAgICAgIHtvZmZzZXQ6IDAuOTIsIGNvbG9yOiAncmdiKDgxLCA1MSwgNDkpJ30sXG4gICAgICAgIHtvZmZzZXQ6IDEsIGNvbG9yOiAncmdiKDgxLCA1MSwgNDkpJ31cbiAgICBdO1xuICAgIHJldHVybiBfLm1hcChncmFkLCB2ID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9mZnNldDogKE1hdGgubG9nMTAodi5vZmZzZXQpICsgNikgLyA2LFxuICAgICAgICAgICAgY29sb3I6IHYuY29sb3JcbiAgICAgICAgfTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4cGFuZFRyYWNlcklEKHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgY2FzZSAnRFknOlxuICAgICAgICAgICAgcmV0dXJuICdEaWFtaWRpbm8geWVsbG93JztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdGQic6XG4gICAgICAgICAgICByZXR1cm4gJ0Zhc3QgYmx1ZSc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRlInOlxuICAgICAgICAgICAgcmV0dXJuICdGbHVvcm8gcnVieSc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRkUnOlxuICAgICAgICAgICAgcmV0dXJuICdGbHVvcm8gZW1lcmFsZCc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnQ1RCZ3InOlxuICAgICAgICAgICAgcmV0dXJuICdDVEIgR3JlZW4nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0NUQnInOlxuICAgICAgICAgICAgcmV0dXJuICdDVEIgUmVkJztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdDVEJnJzpcbiAgICAgICAgICAgIHJldHVybiAnQ1RCIEdvbGQnO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBodW1hblJlYWRhYmxlRGF0ZShtKSB7XG4gICAgbGV0IGQgPSBtb21lbnQobSk7XG4gICAgaWYgKGQuaXNWYWxpZCgpKSB7XG4gICAgICAgIHJldHVybiBkLmZvcm1hdCgnREQvTU1NL1lZWVknKTtcbiAgICB9ICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICdOb3QgcHJvdmlkZWQnO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBodW1hblJlYWRhYmxlRGlmZkluTW9udGgoYSwgYikge1xuICAgIGEgPSBtb21lbnQoYSk7XG4gICAgYiA9IG1vbWVudChiKTtcbiAgICBpZiAoIWEuaXNWYWxpZCgpIHx8ICFiLmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbGV0IHllYXJzID0gTWF0aC5mbG9vcihhLmRpZmYoYiwgJ3llYXJzJywgdHJ1ZSkpO1xuICAgIGxldCBtb250aHMgPSBNYXRoLmZsb29yKGEuZGlmZihiLCAnbW9udGhzJywgdHJ1ZSkpO1xuICAgIGlmICh5ZWFycyA9PSAwKSB7XG4gICAgICAgIHllYXJzID0gJyc7XG4gICAgfSBlbHNlIGlmICh5ZWFycyA9PSAxKSB7XG4gICAgICAgIHllYXJzID0gJycgKyB5ZWFycyArICcgeWVhcic7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgeWVhcnMgPSAnJyArIHllYXJzICsgJyB5ZWFycyc7XG4gICAgfVxuICAgIG1vbnRocyA9IG1vbnRocyAlIDEyO1xuICAgIGlmIChtb250aHMgPT0gMCkge1xuICAgICAgICBtb250aHMgPSAnJztcbiAgICB9IGVsc2UgaWYgKG1vbnRocyA9PSAxKSB7XG4gICAgICAgIG1vbnRocyA9ICcnICsgbW9udGhzICsgJyBtb250aCc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbW9udGhzID0gJycgKyBtb250aHMgKyAnIG1vbnRocyc7XG4gICAgfVxuICAgIGlmICh5ZWFycyA9PSAwKSB7XG4gICAgICAgIHJldHVybiBtb250aHM7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHllYXJzICsgJyAnICsgbW9udGhzO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQVAodikge1xuICAgIGxldCBkaXN0O1xuICAgIGlmICh2ID09IDApIHtcbiAgICAgICAgcmV0dXJuICdBdCBpbnRlcmF1cmFsIGxpbmUnO1xuICAgIH0gZWxzZSBpZiAodiA+IDApIHtcbiAgICAgICAgZGlzdCA9IHBhcnNlRmxvYXQodikudG9GaXhlZCgxKTtcbiAgICAgICAgcmV0dXJuICcnICsgZGlzdCArICcgbW0gcm9zdHJhbCB0byBpbnRlcmF1cmFsIGxpbmUnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRpc3QgPSBwYXJzZUZsb2F0KC12KS50b0ZpeGVkKDEpO1xuICAgICAgICByZXR1cm4gJycgKyBkaXN0ICsgJyBtbSBjYXVkYWwgdG8gaW50ZXJhdXJhbCBsaW5lJztcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNTCh2KSB7XG4gICAgbGV0IGRpc3Q7XG4gICAgaWYgKHYgPT0gMCkge1xuICAgICAgICByZXR1cm4gJ0F0IHRoZSBtaWRsaW5lJztcbiAgICB9IGVsc2UgaWYgKHYgPiAwKSB7XG4gICAgICAgIGRpc3QgPSBwYXJzZUZsb2F0KHYpLnRvRml4ZWQoMSk7XG4gICAgICAgIHJldHVybiAnJyArIGRpc3QgKyAnIG1tIGxhdGVyYWwgdG8gdGhlIG1pZGxpbmUnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRpc3QgPSBwYXJzZUZsb2F0KC12KS50b0ZpeGVkKDEpO1xuICAgICAgICByZXR1cm4gJycgKyBkaXN0ICsgJyBtbSBsYXRlcmFsIHRvIHRoZSBtaWRsaW5lJztcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VEVih2KSB7XG4gICAgbGV0IGRpc3Q7XG4gICAgaWYgKHYgPT0gMCkge1xuICAgICAgICByZXR1cm4gJ0F0IGludGVyYXVyYWwgbGluZSc7XG4gICAgfSBlbHNlIGlmICh2ID4gMCkge1xuICAgICAgICBkaXN0ID0gcGFyc2VGbG9hdCh2KS50b0ZpeGVkKDEpO1xuICAgICAgICByZXR1cm4gJycgKyBkaXN0ICsgJyBtbSBkb3JzYWwgdG8gdGhlIGludGVyYXVyYWwgbGluZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGlzdCA9IHBhcnNlRmxvYXQoLXYpLnRvRml4ZWQoMSk7XG4gICAgICAgIHJldHVybiAnJyArIGRpc3QgKyAnIG1tIHZlbnRyYWwgdG8gdGhlIGludGVyYXVyYWwgbGluZSc7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldE9mZnNldCggZWwgKSB7XG4gICAgdmFyIF94ID0gMDtcbiAgICB2YXIgX3kgPSAwO1xuICAgIHdoaWxlKCBlbCAmJiAhaXNOYU4oIGVsLm9mZnNldExlZnQgKSAmJiAhaXNOYU4oIGVsLm9mZnNldFRvcCApICkge1xuICAgICAgICBfeCArPSBlbC5vZmZzZXRMZWZ0IC0gZWwuc2Nyb2xsTGVmdDtcbiAgICAgICAgX3kgKz0gZWwub2Zmc2V0VG9wIC0gZWwuc2Nyb2xsVG9wO1xuICAgICAgICBlbCA9IGVsLm9mZnNldFBhcmVudDtcbiAgICB9XG4gICAgcmV0dXJuIHsgdG9wOiBfeSwgbGVmdDogX3ggfTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRCYXJXaWR0aEZ1bmMobWluLCBtYXgsIHdpZHRoKSB7XG4gICAgbGV0IGZ1bmMgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbbWluLCBtYXhdKS5yYW5nZShbMiwgd2lkdGhdKTtcbiAgICByZXR1cm4gZnVuYztcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRUYXJnZXRBcmVhU3VtbWFyeUhUTUwodGFyZ2V0X2FyZWEsIHNvdXJjZV9hcmVhLCBtYXRyaXgsIG1vZGUpIHtcbiAgICAgICAgbW9kZSA9IG1vZGUgfHwgJ0ZMTic7XG4gICAgICAgIGxldCB0eHQgPSAnVGFyZ2V0OiAnICsgdGFyZ2V0X2FyZWEuZnVsbG5hbWUgKyAnPGJyLz4nO1xuICAgICAgICB0eHQgKz0gJ1NvdXJjZTogJyArIHNvdXJjZV9hcmVhLmZ1bGxuYW1lICsgJzxici8+JztcbiAgICAgICAgY29uc3QgZGF0YSA9IG1hdHJpeC5nZXREYXRhKHRhcmdldF9hcmVhLCBzb3VyY2VfYXJlYSk7XG4gICAgICAgIGxldCB2YWx1ZTtcbiAgICAgICAgaWYgKG1vZGUgPT0gJ1NMTicpIHtcbiAgICAgICAgICAgIHZhbHVlID0gbWF0cml4LmdldERhdGEodGFyZ2V0X2FyZWEsIHNvdXJjZV9hcmVhKS5zbG47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZSA9IG1hdHJpeC5nZXREYXRhKHRhcmdldF9hcmVhLCBzb3VyY2VfYXJlYSkuZmxuZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCAmJiAobW9kZSA9PSAnU0xOJyAmJiB2YWx1ZSA+PSAwIHx8IG1vZGUgPT0gJ0ZMTicgJiYgdmFsdWUgPiAwKSkge1xuICAgICAgICAgICAgbGV0IGNvbG9yRnVuYywgYmFyV2lkdGhGdW5jLCBzO1xuICAgICAgICAgICAgaWYgKG1vZGUgPT0gJ1NMTicpIHtcbiAgICAgICAgICAgICAgICBjb2xvckZ1bmMgPSBnZXRCbHVlQ29sb3JGdW5jKCk7XG4gICAgICAgICAgICAgICAgYmFyV2lkdGhGdW5jID0gZ2V0QmFyV2lkdGhGdW5jKDAsIDEsIDE4MCk7XG4gICAgICAgICAgICAgICAgcyA9IHZhbHVlLnRvRml4ZWQoMik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbG9yRnVuYyA9IGdldExvZ0NvbG9yRnVuYygpO1xuICAgICAgICAgICAgICAgIGJhcldpZHRoRnVuYyA9IGdldEJhcldpZHRoRnVuYygtNS41LCAwLCAxODApO1xuICAgICAgICAgICAgICAgIHMgPSBzY2llbnRpZmljTm90aW9uKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuZWdhdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGxvZzEwID0gTWF0aC5sb2cxMCh2YWx1ZSkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgIGlmIChtb2RlID09ICdGTE4nKSB7XG4gICAgICAgICAgICAgICAgdHh0ICs9ICdDb25uZWN0aW9uIHN0cmVuZ3RoOiA8YnIvPic7XG4gICAgICAgICAgICAgICAgdHh0ICs9ICc8c3BhbiBzdHlsZT1cInBhZGRpbmctbGVmdDogMzBweDtcIj4nICsgbW9kZSArICdlOiAnICsgcyArICc8L3NwYW4+PGJyLz4nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0eHQgKz0gJ0ZyYWN0aW9uIG9mIHN1cHJhZ3JhbnVsYXIgZXh0cmluc2ljIG5ldXJvbnMsIDxici8+JztcbiAgICAgICAgICAgICAgICB0eHQgKz0gJzxzcGFuIHN0eWxlPVwicGFkZGluZy1sZWZ0OiAzMHB4O1wiPicgKyBtb2RlICsgJ2U6ICcgKyBzICsgJzwvc3Bhbj48YnIvPic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9kZSA9PSAnRkxOJykge1xuICAgICAgICAgICAgICAgIHR4dCArPSAnPHNwYW4gc3R5bGU9XCJwYWRkaW5nLWxlZnQ6IDMwcHg7XCI+JyArICdsb2c8c3ViPjEwPC9zdWI+KCcgKyBtb2RlICsgJ2UpOiAnICsgbG9nMTAgKyAnPC9zcGFuPjxici8+JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzdW1tYXJ5O1xuICAgICAgICAgICAgaWYgKG1vZGUgPT0gJ0ZMTicpIHtcbiAgICAgICAgICAgICAgICBzdW1tYXJ5ID0gJywgbG9nPHN1Yj4xMDwvc3ViPignICsgbW9kZSArICdlKTonO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdW1tYXJ5ID0gJzonO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHh0ICs9ICc8ZGl2IHN0eWxlPVwibWFyZ2luLXRvcDogOHB4O1wiPkJhc2VkIG9uICcgKyBkYXRhLmluamVjdGlvbnMubGVuZ3RoICsgJyBpbmplY3Rpb24nICsgKGRhdGEuaW5qZWN0aW9ucy5sZW5ndGggPiAxID8gJ3MnIDogJycpICsgc3VtbWFyeSArICc8L2Rpdj4nO1xuICAgICAgICAgICAgdHh0ICs9ICc8dGFibGUgY2xhc3M9XCJpbmplY3Rpb24tc3RyZW5ndGhcIj48dGJvZHk+JztcbiAgICAgICAgICAgIGxldCBpbmplY3Rpb25fc3RyZW5ndGggPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IGluamVjdGlvbnMgPSBkYXRhLmluamVjdGlvbnM7XG4gICAgICAgICAgICBsZXQgX2luamVjdGlvbnMgPSBfLnNvcnRCeShpbmplY3Rpb25zLCBpID0+IHtcbiAgICAgICAgICAgICAgICAvL2xldCBpbmplY3Rpb25faWQgPSBpLmNhc2VfaWQgKyAnLScgKyBpLnRyYWNlcl9pZDtcbiAgICAgICAgICAgICAgICAvL2xldCBmbG5lID0gXy5maW5kKGZsbmVfcGVyX2luamVjdGlvbltpbmplY3Rpb25faWRdLCB7c291cmNlOiBzb3VyY2VfYXJlYS5hYmJyZXZ9KTtcbiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PSAnU0xOJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaS5zbG4gPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkuc2xuO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEluZmluaXR5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkuZmxuZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtaS5mbG5lO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEluZmluaXR5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgbGV0IGZsbmUgPSBpLnNsbjtcbiAgICAgICAgICAgICAgICBpZiAoZmxuZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLWZsbmUuZmxuZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSW5maW5pdHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF8uZWFjaChfaW5qZWN0aW9ucywgX2luaiA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGluamVjdGlvbl9pZCA9IF9pbmouaW5qZWN0aW9uX2lkOztcbiAgICAgICAgICAgICAgICBsZXQgaW5qZWN0aW9uX25hbWUgPSAoX2luai5kaXNwbGF5X25hbWUgPyBfaW5qLmRpc3BsYXlfbmFtZSA6IF9pbmouY2FzZV9pZCkgKyAnLScgKyBfaW5qLnRyYWNlcl9pZDtcbiAgICAgICAgICAgICAgICBsZXQgdmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgPT0gJ1NMTicpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfaW5qLnNsbjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IF9pbmouZmxuZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHN0cmVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgPT0gJ1NMTicpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVuZ3RoID0gJzxkaXYgY2xhc3M9XCJzdW1tYXJ5LWZsbmVcIj48ZGl2IGNsYXNzPVwic3VtbWFyeS1mbG5lLWJhclwiIHN0eWxlPVwid2lkdGg6ICcgKyBiYXJXaWR0aEZ1bmModmFsdWUpICsgJ3B4OyBiYWNrZ3JvdW5kLWNvbG9yOiAnICsgY29sb3JGdW5jKHZhbHVlKSArICdcIj48L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInN1bW1hcnktZmxuZS12YWx1ZVwiPicgKyB2YWx1ZS50b0ZpeGVkKDIpICsgJzwvZGl2PjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlbmd0aCA9ICc8ZGl2IGNsYXNzPVwic3VtbWFyeS1mbG5lXCI+PGRpdiBjbGFzcz1cInN1bW1hcnktZmxuZS12YWx1ZSBuYW5cIj5ub3QgZm91bmQ8L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGluamVjdGlvbl9zdHJlbmd0aC5wdXNoKCc8dHI+PHRkPicgKyBpbmplY3Rpb25fbmFtZSArICc8L3RkPjx0ZD4nICsgc3RyZW5ndGggKyAnPC90ZD48L3RyPicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsb2cxMF92YWx1ZSA9IE1hdGgubG9nMTAodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyZW5ndGggPSAnPGRpdiBjbGFzcz1cInN1bW1hcnktZmxuZVwiPjxkaXYgY2xhc3M9XCJzdW1tYXJ5LWZsbmUtYmFyXCIgc3R5bGU9XCJ3aWR0aDogJyArIGJhcldpZHRoRnVuYyhsb2cxMF92YWx1ZSkgKyAncHg7IGJhY2tncm91bmQtY29sb3I6ICcgKyBjb2xvckZ1bmMobG9nMTBfdmFsdWUpICsgJ1wiPjwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic3VtbWFyeS1mbG5lLXZhbHVlXCI+JyArIGxvZzEwX3ZhbHVlLnRvRml4ZWQoMikgKyAnPC9kaXY+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVuZ3RoID0gJzxkaXYgY2xhc3M9XCJzdW1tYXJ5LWZsbmVcIj48ZGl2IGNsYXNzPVwic3VtbWFyeS1mbG5lLXZhbHVlIG5hblwiPm5vdCBmb3VuZDwvZGl2PjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaW5qZWN0aW9uX3N0cmVuZ3RoLnB1c2goJzx0cj48dGQ+JyArIGluamVjdGlvbl9uYW1lICsgJzwvdGQ+PHRkPicgKyBzdHJlbmd0aCArICc8L3RkPjwvdHI+Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHR4dCArPSBpbmplY3Rpb25fc3RyZW5ndGguam9pbignJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0X2FyZWEuaWQgPT09IHNvdXJjZV9hcmVhLmlkKSB7XG4gICAgICAgICAgICAgICAgdHh0ICs9ICdJbnRyaW5zaWMgY29ubmVjdGlvbnMgbm90IHNob3duPGJyLz4nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PSAnU0xOJyAmJiBkYXRhLnNsbl9ub3RkZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHR4dCArPSAnU0xOZSBpbiBhcmVhICcgKyBzb3VyY2VfYXJlYS5hYmJyZXYgKyAnIGlzIG5vdCBkZWZpbmVkLjxici8+JztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0eHQgKz0gJ0Nvbm5lY3Rpb24gbm90IGRldGVjdGVkPGJyLz4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0eHQgKz0gJzwvdGJvZHk+PC90YWJsZT4nO1xuICAgICAgICByZXR1cm4gdHh0O1xufVxuXG5leHBvcnQgY2xhc3MgQXJlYSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEFyZWFzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgSW5qZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgSW5qZWN0aW9ucyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHN2Z0FkZEhhdGNoTGluZShzdmcpIHtcbiAgICBzdmcuYXBwZW5kKCdwYXR0ZXJuJylcbiAgICAgICAgLmF0dHIoJ2lkJywgJ2RpYWdvbmFsSGF0Y2gnKVxuICAgICAgICAuYXR0cigncGF0dGVyblVuaXRzJywgJ3VzZXJTcGFjZU9uVXNlJylcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgJzQnKVxuICAgICAgICAuYXR0cignaGVpZ2h0JywgJzQnKVxuICAgICAgICAuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgLmF0dHIoJ2QnLCAnTS0xLDEgbDIsLTIgTTAsNCBsNCwtNCBNMyw1IGwyLC0yJylcbiAgICAgICAgLmF0dHIoJ3N0eWxlJywgJ3N0cm9rZTpibGFjazsgc3Ryb2tlLXdpZHRoOjEnKTtcblxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGpzL2xpYi91dGlscy5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRUE7QUFrQkE7QUFlQTtBQWlCQTtBQWlCQTtBQU1BO0FBTUE7QUFTQTtBQVVBO0FBbUJBO0FBNEJBO0FBUUE7QUE4QkE7QUFZQTtBQVlBO0FBWUE7QUFVQTtBQUlBO0FBb0lBO0FBQ0E7QUFoWEE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OztBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeEJBO0FBMEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 18:
/* unknown exports provided */
/* all exports used */
/*!****************************************!*\
  !*** ./js/dispatcher/AppDispatcher.js ***!
  \****************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _flux = __webpack_require__(/*! flux */ 252);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DispatcherClass = function (_Dispatcher) {\n  _inherits(DispatcherClass, _Dispatcher);\n\n  function DispatcherClass() {\n    _classCallCheck(this, DispatcherClass);\n\n    return _possibleConstructorReturn(this, (DispatcherClass.__proto__ || Object.getPrototypeOf(DispatcherClass)).apply(this, arguments));\n  }\n\n  return DispatcherClass;\n}(_flux.Dispatcher);\n\nvar AppDispatcher = new DispatcherClass();\nexports.default = AppDispatcher;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvZGlzcGF0Y2hlci9BcHBEaXNwYXRjaGVyLmpzPzNiNmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtEaXNwYXRjaGVyfSBmcm9tICdmbHV4JztcblxuY2xhc3MgRGlzcGF0Y2hlckNsYXNzIGV4dGVuZHMgRGlzcGF0Y2hlciB7XG59XG5cbmNvbnN0IEFwcERpc3BhdGNoZXIgPSBuZXcgRGlzcGF0Y2hlckNsYXNzKCk7XG5leHBvcnQgZGVmYXVsdCBBcHBEaXNwYXRjaGVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGpzL2Rpc3BhdGNoZXIvQXBwRGlzcGF0Y2hlci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBOzs7Ozs7Ozs7Ozs7QUFHQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 21:
/* unknown exports provided */
/* all exports used */
/*!**********************************************!*\
  !*** ./js/components/InjectionList.react.js ***!
  \**********************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _classnames = __webpack_require__(/*! classnames */ 13);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _numberformat = __webpack_require__(/*! ../lib/numberformat */ 31);\n\nvar _numberformat2 = _interopRequireDefault(_numberformat);\n\nvar _d = __webpack_require__(/*! d3 */ 12);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _modal = __webpack_require__(/*! ../lib/modal */ 22);\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nvar _Slider = __webpack_require__(/*! ./Slider.react */ 41);\n\nvar _Slider2 = _interopRequireDefault(_Slider);\n\nvar _Pseudo3D = __webpack_require__(/*! ./Pseudo3D.react */ 75);\n\nvar _Pseudo3D2 = _interopRequireDefault(_Pseudo3D);\n\nvar _MetadataModal = __webpack_require__(/*! ./MetadataModal.react */ 228);\n\nvar _MetadataModal2 = _interopRequireDefault(_MetadataModal);\n\nvar _utils = __webpack_require__(/*! ../lib/utils */ 16);\n\nvar _ToolTip = __webpack_require__(/*! ./ToolTip.react */ 50);\n\nvar _ToolTip2 = _interopRequireDefault(_ToolTip);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nfunction toTitleCase(str) {\n    //return str.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\n    return str.charAt(0).toUpperCase() + str.substr(1);\n}\n\nvar Injection = function (_Component) {\n    _inherits(Injection, _Component);\n\n    function Injection(props, context) {\n        _classCallCheck(this, Injection);\n\n        var _this = _possibleConstructorReturn(this, (Injection.__proto__ || Object.getPrototypeOf(Injection)).call(this, props, context));\n\n        _this.d3Applied = false;\n        _this.barWidthFunc = undefined;\n        _lodash2.default.bindAll(_this, 'handleToggleCollapse', 'drawStrength', 'areaBarMouseOver', 'areaBarMouseOut', 'areaLabelMouseOver', 'areaLabelMouseOut', 'handleDownloadCSV', 'handleDownloadSVG', 'handleDownloadCells', 'handleChange', 'show3DView', 'showCaseMeta', 'handleModalHide');\n        _this.asyncDone = false;\n        _this.state = {\n            meta: null,\n            in_degree: 0\n        };\n        return _this;\n    }\n\n    _createClass(Injection, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var _this2 = this;\n\n            //AppStore.addChangeListener(this.handleChange);\n            $.get('/static/data/metadata/metadata_' + this.props.case_id + '.json').done(function (data) {\n                _this2.asyncDone = true;\n                _this2.setState({ meta: data });\n            });\n            var strength = this.props.strength;\n            var in_degree = 0;\n            if (this.props.mode == 'SLN') {\n                in_degree = _lodash2.default.filter(strength, { sln_notdefined: false }).length;\n                console.log('calculated in_degree', in_degree);\n            } else {\n                in_degree = strength.length;\n            }\n            this.setState({ in_degree: in_degree });\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            //AppStore.removeChangeListener(this.handleChange);\n            var flne = d3.select('#flne-' + this.props.name);\n            //Actions.hideInjection(this.props.injection);\n            flne.remove();\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange() {}\n    }, {\n        key: 'handleToggleCollapse',\n        value: function handleToggleCollapse() {\n            var collapse = !this.props.collapse;\n            if (!collapse) {\n                var other_injections = _lodash2.default.without(_AppStore2.default.getInjectionsToShow(), this.props.injection);\n                _lodash2.default.each(other_injections, function (o) {\n                    _Actions2.default.hideInjection(o);\n                });\n                _Actions2.default.expandInjection(this.props.injection);\n            } else {\n                _Actions2.default.hideInjection(this.props.injection);\n            }\n        }\n    }, {\n        key: 'drawStrength',\n        value: function drawStrength() {\n            var mode = this.props.mode;\n            var that = this;\n            var strength = this.props.strength;\n            var colorFunc = void 0;\n            var data_attr = void 0;\n            if (this.props.mode == 'SLN') {\n                data_attr = 'sln';\n                var _func = (0, _utils.getBlueColorFunc)();\n                colorFunc = function colorFunc(d) {\n                    if (d.source.abbrev == 'Ent') {\n                        console.log('dump Ent', d);\n                    }\n                    if (d.sln_notdefined) {\n                        return 'url(\"#diagonalHatch\")';\n                    } else {\n                        return _func(d[data_attr]);\n                    }\n                };\n            } else {\n                data_attr = 'log10_flne';\n                var _func2 = (0, _utils.getLogColorFunc)();\n                colorFunc = function colorFunc(d) {\n                    return _func2(d[data_attr]);\n                };\n            }\n\n            var _areas = _AppStore2.default.getAreas();\n            var area = _AppStore2.default.getTargetAreaPicked();\n            this.svg_flne_parent = d3.select('#flne-' + this.props.name);\n            var svg = this.svg_flne_parent.append('svg').attr('width', 365).attr('height', 200);\n            var flne = svg.append('g').attr('transform', 'translate(50, 5)');\n            (0, _utils.svgAddHatchLine)(svg);\n\n            var y = null,\n                flne_height = 100;\n            var scaler = void 0,\n                scaler_dom = void 0;\n            if (strength) {\n                var showValue = function showValue(node, d) {\n                    d3.select(node).selectAll('rect').attr('fill', 'brown');\n                    var textAtBehindThreshold = void 0;\n                    if (that.props.mode == 'SLN') {\n                        textAtBehindThreshold = 0.12;\n                    } else {\n                        textAtBehindThreshold = -4.5;\n                    }\n                    var anchor = void 0,\n                        x = void 0,\n                        fill = void 0;\n                    if (d[data_attr] < textAtBehindThreshold) {\n                        anchor = 'begin';\n                        x = barWidthFunc(d[data_attr]) + 5;\n                        fill = 'black';\n                    } else {\n                        anchor = 'end';\n                        x = barWidthFunc(d[data_attr]) - 5;\n                        fill = 'white';\n                    }\n\n                    d3.select(node).append('text').attr('x', x).attr('y', function (d, i) {\n                        return y(d.source.abbrev) + y.bandwidth() / 2;\n                    }).attr('text-anchor', anchor).attr('alignment-baseline', 'middle').attr('stroke', 'none').style('font-weight', 'bold').attr('fill', fill).attr('class', 'num').text(d[data_attr].toFixed(2));\n                };\n\n                flne_height = 10 * strength.length;\n                d3.select('#flne-' + this.props.name + ' svg').attr('height', flne_height + 45);\n                y = d3.scaleBand().range([0, flne_height]);\n                y.round(true);\n                y.paddingInner(.1);\n                flne.selectAll('.row').remove();\n                flne.selectAll('.axis-bottom').remove();\n                strength = _lodash2.default.sortBy(strength, data_attr);\n                if (mode == 'FLN') {\n                    _lodash2.default.reverse(strength);\n                }\n                var srcs = _lodash2.default.map(_lodash2.default.map(strength, 'source'), 'abbrev');\n                y.domain(srcs);\n                var flne_arr = void 0;\n                flne_arr = _lodash2.default.map(strength, data_attr);\n                var min = _lodash2.default.min(flne_arr),\n                    max = _lodash2.default.max(flne_arr);\n                var barWidthFunc = void 0;\n                if (this.props.mode == 'SLN') {\n                    barWidthFunc = this.getBarWidthFunc(-1, 1);\n                } else {\n                    barWidthFunc = this.getBarWidthFunc(min, max);\n                }\n                this.barWidthFunc = barWidthFunc;\n                var row = flne.selectAll('.row').data(strength, function (d) {\n                    return d;\n                });\n                var row_enter = row.enter().append('g').attr('class', 'row');\n                row_enter.append('text').attr('class', 'flne-label');\n                row_enter.append('rect').attr('class', 'flne-rect');\n\n                row_enter.selectAll('.flne-label').attr('x', -6).attr('y', function (d, i) {\n                    return y(d.source.abbrev) + y.bandwidth() / 2;\n                }).attr('text-anchor', 'end').attr('alignment-baseline', 'middle').attr('title', 'testtest').text(function (d) {\n                    return d.source.abbrev;\n                }).on('mouseover', function (d, i) {\n                    var me = d3.select(this);\n                    that.areaBarMouseOver(me, _areas.byAbbrev[d.source.abbrev]);\n                    that.areaLabelMouseOver(me, _areas.byAbbrev[d.source.abbrev]);\n                    showValue(this.parentNode, d);\n                }).on('mouseout', function (d, i) {\n                    var me = d3.select(this);\n                    that.areaBarMouseOut(me, _areas.byAbbrev[d.source.abbrev]);\n                    that.areaLabelMouseOut(me, _areas.byAbbrev[d.source.abbrev]);\n                    d3.select(this.parentNode).selectAll('rect').attr('fill', colorFunc(d));\n                    d3.select(this.parentNode).selectAll('.num').remove();\n                });\n\n                row_enter.selectAll('.flne-rect').attr('x', 0).attr('y', function (d, i) {\n                    return y(d.source.abbrev);\n                }).attr('width', function (d) {\n                    return barWidthFunc(d[data_attr]);\n                }).attr('height', y.bandwidth()).attr('fill', function (d) {\n                    return colorFunc(d);\n                }).on('mouseover', function (d, i) {\n                    var me = d3.select(this);\n                    that.areaLabelMouseOver(me, _areas.byAbbrev[d.source.abbrev]);\n                    that.areaBarMouseOver(me, _areas.byAbbrev[d.source.abbrev]);\n                    showValue(this.parentNode, d);\n                }).on('mouseout', function (d, i, p) {\n                    var me = d3.select(this);\n                    that.areaLabelMouseOut(me, _areas.byAbbrev[d.source.abbrev]);\n                    that.areaBarMouseOut(me, _areas.byAbbrev[d.source.abbrev]);\n                    d3.select(this.parentNode).selectAll('rect').attr('fill', colorFunc(d));\n                    d3.select(this.parentNode).selectAll('.num').remove();\n                });\n\n                if (this.props.mode == 'FLN') {\n                    scaler = d3.axisBottom().scale(barWidthFunc).tickSizeInner(-flne_height).tickSizeOuter(0).tickValues([-5, -4, -3, -2, -1, 0]).tickFormat(d3.format(',d'));\n                    //.ticks(5);\n                } else {\n                    scaler = d3.axisBottom().scale(barWidthFunc).tickSizeInner(-flne_height).tickSizeOuter(0).tickValues([0, 0.2, 0.4, 0.6, 0.8, 1]).tickFormat(d3.format(',.1f'));\n                    //.ticks(5);\n                }\n                scaler_dom = flne.append(\"g\").attr(\"transform\", \"translate(0,\" + flne_height + \")\").attr('class', 'axis-bottom').call(scaler);\n                scaler_dom.selectAll('.tick line').filter(function (d, i, l) {\n                    return i === l.length - 1;\n                }).attr('display', 'none');\n                flne.selectAll('.individual-bar-scale-x-title').remove();\n                var title = flne.append('text').attr('class', 'individual-bar-scale-x-title').attr('transform', 'translate(' + (320 / 2 - 20) + ', ' + (flne_height + 25) + ')').attr('text-anchor', 'middle');\n                if (this.props.mode == 'FLN') {\n                    title.append('tspan').attr('font-size', '12').text('log');\n                    title.append('tspan').text('10').attr('baseline-shift', 'sub');\n                    title.append('tspan').attr('font-size', '12').text('(FLNe)');\n                } else {\n                    title.append('tspan').attr('font-size', '12').text('SLNe');\n                }\n            }\n        }\n    }, {\n        key: 'getBarWidthFunc',\n        value: function getBarWidthFunc(min, max) {\n            if (this.props.mode == 'SLN') {\n                min = 0, max = 1;\n            } else {\n                min = -5.5, max = 0;\n            }\n\n            var func = d3.scaleLinear().domain([min, max]).range([1, 300]);\n            return func;\n        }\n    }, {\n        key: 'areaBarMouseOver',\n        value: function areaBarMouseOver(me, from_) {\n            var target = _AppStore2.default.getNodePicked();\n            _Actions2.default.highlightEdge(from_, target, '#000000');\n            _Actions2.default.boldEdge(from_, target);\n        }\n    }, {\n        key: 'areaBarMouseOut',\n        value: function areaBarMouseOut(me, from_, to) {\n            var target = _AppStore2.default.getNodePicked();\n            _Actions2.default.unhighlightEdge(from_, target);\n            _Actions2.default.unboldEdge(from_, target);\n        }\n    }, {\n        key: 'areaLabelMouseOver',\n        value: function areaLabelMouseOver(me, from_) {\n            var bbox = me.node().getBoundingClientRect();\n            var top = bbox.top + $(document).scrollTop();\n            var target = _AppStore2.default.getNodePicked();\n            (0, _utils.showTooltipAreaName)({ area: from_, x: bbox.left, y: top - 35 });\n        }\n    }, {\n        key: 'areaLabelMouseOut',\n        value: function areaLabelMouseOut(me, from_, to) {\n            (0, _utils.hideTooltip)();\n        }\n    }, {\n        key: 'show3DView',\n        value: function show3DView(e) {\n            var _this3 = this;\n\n            e.stopPropagation();\n            this.setState({ modal: '3dview' }, function () {\n                _this3.modal.show();\n            });\n        }\n    }, {\n        key: 'showCaseMeta',\n        value: function showCaseMeta(e) {\n            var _this4 = this;\n\n            e.stopPropagation();\n            this.setState({ modal: 'case_meta' }, function () {\n                _this4.modal.show();\n            });\n        }\n    }, {\n        key: 'handleDownloadSVG',\n        value: function handleDownloadSVG(e) {\n            var html = this.svg_flne_parent.html();\n            var b64 = btoa(html);\n            var href = 'data:image/svg+xml;base64,\\n' + b64;\n            e.target.href = href;\n            _Actions2.default.setDownloadLink(href, e, 'export_flatmap_graph.svg');\n        }\n    }, {\n        key: 'handleDownloadCSV',\n        value: function handleDownloadCSV(e) {\n            var injection_name = this.props.injection.display_name ? this.props.injection.display_name + '-' + this.props.tracer_id : this.props.name;\n            var href = '/static/data/individual_injections/flne_injection_' + this.props.name + '.csv';\n            var download = 'flne_injection_' + injection_name + '.csv';\n            e.target.href = href;\n            e.target.download = download;\n            _Actions2.default.setDownloadLink(href, e);\n        }\n    }, {\n        key: 'handleDownloadCells',\n        value: function handleDownloadCells(e) {\n            var injection_name = this.props.injection.display_name ? this.props.injection.display_name + '-' + this.props.tracer_id : this.props.name;\n            var href = '/static/data/individual_injections/indivdual_cells_injection_' + this.props.name + '.csv';\n            e.target.href = href;\n            e.target.download = 'individual_cells_injection_' + injection_name + '.csv';\n            _Actions2.default.setDownloadLink(href, e);\n        }\n    }, {\n        key: 'handleModalHide',\n        value: function handleModalHide(e) {\n            _Actions2.default.modalHide('injection');\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this5 = this;\n\n            var href = 'http://www.marmosetbrain.org/goto/' + this.props.case_id + '/' + this.props.section + '/' + this.props.section_x + '/' + this.props.section_y + '/3';\n            var collapse = null;\n            collapse = _react2.default.createElement('span', { className: (0, _classnames2.default)('collapse-toggle', { collapse: !this.props.collapse, expand: this.props.collapse }) });\n            var modal_content = 'Loading';\n            if (this.asyncDone) {\n                if (!this.d3Applied) {\n                    this.drawStrength();\n                    this.d3Applied = true;\n                }\n                var m = this.state.meta;\n                var inj = void 0;\n\n                var meta = _lodash2.default.find(this.state.meta.injections, { tracer: this.props.tracer_id });\n                switch (this.state.modal) {\n                    case 'case_meta':\n                        //inj = _.find(this.state.meta.injections, {tracer: this.props.tracer_id});\n                        var _inj = _AppStore2.default.findInjection(this.props.case_id, this.props.tracer_id);\n                        modal_content = _react2.default.createElement(\n                            'div',\n                            { className: 'metadata-container' },\n                            _react2.default.createElement(\n                                'table',\n                                { className: 'metadata' },\n                                _react2.default.createElement(\n                                    'tbody',\n                                    null,\n                                    _react2.default.createElement(\n                                        'tr',\n                                        null,\n                                        _react2.default.createElement(\n                                            'th',\n                                            null,\n                                            'Case ID'\n                                        ),\n                                        _react2.default.createElement(\n                                            'td',\n                                            null,\n                                            m['case']\n                                        )\n                                    ),\n                                    _react2.default.createElement(\n                                        'tr',\n                                        null,\n                                        _react2.default.createElement(\n                                            'th',\n                                            null,\n                                            'Sex'\n                                        ),\n                                        _react2.default.createElement(\n                                            'td',\n                                            null,\n                                            m.sex\n                                        )\n                                    ),\n                                    _react2.default.createElement(\n                                        'tr',\n                                        null,\n                                        _react2.default.createElement(\n                                            'th',\n                                            null,\n                                            'Tracer'\n                                        ),\n                                        _react2.default.createElement(\n                                            'td',\n                                            null,\n                                            this.props.tracer_id\n                                        )\n                                    ),\n                                    _react2.default.createElement(\n                                        'tr',\n                                        null,\n                                        _react2.default.createElement(\n                                            'th',\n                                            null,\n                                            'Hemisphere'\n                                        ),\n                                        _react2.default.createElement(\n                                            'td',\n                                            null,\n                                            m.hemisphere\n                                        )\n                                    ),\n                                    _react2.default.createElement(\n                                        'tr',\n                                        null,\n                                        _react2.default.createElement(\n                                            'th',\n                                            null,\n                                            'Region'\n                                        ),\n                                        _react2.default.createElement(\n                                            'td',\n                                            null,\n                                            _inj.region\n                                        )\n                                    ),\n                                    _react2.default.createElement(\n                                        'tr',\n                                        null,\n                                        _react2.default.createElement(\n                                            'th',\n                                            null,\n                                            'Atlas Coordinate'\n                                        ),\n                                        _react2.default.createElement(\n                                            'td',\n                                            null,\n                                            'A ',\n                                            _inj.a,\n                                            ' L: ',\n                                            _inj.l,\n                                            ' H: ',\n                                            _inj.h\n                                        )\n                                    ),\n                                    _react2.default.createElement(\n                                        'tr',\n                                        null,\n                                        _react2.default.createElement(\n                                            'th',\n                                            null,\n                                            'Sectioning Plane'\n                                        ),\n                                        _react2.default.createElement(\n                                            'td',\n                                            null,\n                                            m.sectioning_plane\n                                        )\n                                    ),\n                                    _react2.default.createElement(\n                                        'tr',\n                                        null,\n                                        _react2.default.createElement(\n                                            'th',\n                                            null,\n                                            'Date of birth'\n                                        ),\n                                        _react2.default.createElement(\n                                            'td',\n                                            null,\n                                            m.date_of_birth\n                                        )\n                                    ),\n                                    _react2.default.createElement(\n                                        'tr',\n                                        null,\n                                        _react2.default.createElement(\n                                            'th',\n                                            null,\n                                            'Injection date'\n                                        ),\n                                        _react2.default.createElement(\n                                            'td',\n                                            null,\n                                            m.injection_date\n                                        )\n                                    ),\n                                    _react2.default.createElement(\n                                        'tr',\n                                        null,\n                                        _react2.default.createElement(\n                                            'th',\n                                            null,\n                                            'Survival days'\n                                        ),\n                                        _react2.default.createElement(\n                                            'td',\n                                            null,\n                                            m.survival_days\n                                        )\n                                    ),\n                                    _react2.default.createElement(\n                                        'tr',\n                                        null,\n                                        _react2.default.createElement(\n                                            'th',\n                                            null,\n                                            'Memo'\n                                        ),\n                                        _react2.default.createElement(\n                                            'td',\n                                            null,\n                                            _react2.default.createElement(\n                                                'div',\n                                                { className: 'case-meta' },\n                                                m.memo\n                                            ),\n                                            _react2.default.createElement(\n                                                'div',\n                                                { className: 'injection-meta' },\n                                                _inj.memo\n                                            )\n                                        )\n                                    )\n                                )\n                            )\n                        );\n                        modal_content = _react2.default.createElement(_MetadataModal2.default, { injection: _inj, case_: m, meta: meta, case_id: this.props.case_id, injection_name: this.props.name });\n                        break;\n                    case '3dview':\n                        _inj = _AppStore2.default.findInjection(this.props.case_id, this.props.tracer_id);\n                        modal_content = _react2.default.createElement(_Pseudo3D2.default, {\n                            injection: _inj,\n                            injection_name: this.props.name,\n                            meta: meta,\n                            case_id: this.props.case_id,\n                            tracer_id: this.props.tracer_id\n                        });\n                        break;\n                }\n            }\n            var density_map = _react2.default.createElement(\n                'li',\n                { className: 'density-map' },\n                'Download density map [?]',\n                _react2.default.createElement(\n                    'div',\n                    { className: 'density-map' },\n                    'Flatmap (500, 200, 100)',\n                    _react2.default.createElement('br', null),\n                    '3D map (500, 200, 100)'\n                )\n            );\n            density_map = null;\n            /*\n                <a\n                    onMouseOver={this.handleDownloadSVGHelp}\n                    onMouseOut={this.handleCloseDownloadSVGHelp}>[?]</a>\n            */\n            var injection_name = this.props.injection.display_name ? this.props.injection.display_name + '-' + this.props.tracer_id : this.props.name;\n            var title_collapse = this.props.collapse ? 'Click to see connectivity profile for ' + injection_name + ' injection' : 'Click to close the details of ' + injection_name + ' injection';\n            var modalStyle = _lodash2.default.clone(_modal.defaultModalStyle);\n            var connectivity_header = void 0;\n            if (this.props.mode == 'SLN') {\n                connectivity_header = 'SLNe profile';\n            } else {\n                connectivity_header = 'Connectivity profile';\n            }\n            //{numberFormat(this.state.in_degree, 0, '.', '\\u2009')} sources, {numberFormat(this.props.cells_ext, 0, '.', '\\u2009')} extrinsic cells\n            return _react2.default.createElement(\n                'div',\n                { className: 'injection' },\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _classnames2.default)('injection-bar', this.props.tracer_id), onClick: this.handleToggleCollapse, title: title_collapse },\n                    collapse,\n                    _react2.default.createElement(\n                        'span',\n                        { className: (0, _classnames2.default)('injection-name', this.props.tracer_id) },\n                        injection_name\n                    ),\n                    _react2.default.createElement(\n                        'a',\n                        { className: (0, _classnames2.default)('jump-to-injection', this.props.tracer_id),\n                            target: '_blank',\n                            href: href,\n                            title: 'Click to jump to the injection site in high resolution viewer'\n                        },\n                        _react2.default.createElement('span', { className: (0, _classnames2.default)('icon-jump', this.props.tracer_id) })\n                    ),\n                    _react2.default.createElement('a', { className: 'button-metadata',\n                        onClick: this.showCaseMeta,\n                        title: 'Click to show metadata of Case ' + this.props.case_id\n                    }),\n                    _react2.default.createElement(\n                        'a',\n                        { className: 'button-3dview',\n                            onClick: this.show3DView,\n                            title: 'Click to show 3D visualization of the projection pattern'\n                        },\n                        '3D'\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _classnames2.default)('per-injection-detail', { hidden: this.props.collapse }) },\n                    _react2.default.createElement(\n                        'span',\n                        { className: 'injection-cells' },\n                        connectivity_header,\n                        ' for the ',\n                        injection_name,\n                        ' injection',\n                        _react2.default.createElement('br', null)\n                    ),\n                    _react2.default.createElement('div', { className: 'd3 flne-per-injection', id: 'flne-' + this.props.name }),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'download' },\n                        _react2.default.createElement(\n                            'ul',\n                            null,\n                            _react2.default.createElement(\n                                'li',\n                                { className: 'download-svg' },\n                                _react2.default.createElement(\n                                    'a',\n                                    { onClick: this.handleDownloadSVG, download: 'flne_' + this.props.name + '.svg',\n                                        title: 'click to download the FLNe drawing in SVG format' },\n                                    'Download bar chart as SVG drawing'\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'li',\n                                { className: 'download-csv' },\n                                _react2.default.createElement(\n                                    'a',\n                                    { onClick: this.handleDownloadCSV, title: 'click to download FLNe values of injection ' + injection_name + ' in csv format' },\n                                    'Download data as CSV file'\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'li',\n                                { className: 'download-csv' },\n                                _react2.default.createElement(\n                                    'a',\n                                    { onClick: this.handleDownloadCells, title: 'click to download individual cell data in csv format' },\n                                    'Download individual cells'\n                                )\n                            ),\n                            density_map\n                        )\n                    )\n                ),\n                _react2.default.createElement('div', { className: 'clear-both' }),\n                _react2.default.createElement(\n                    _modal2.default,\n                    { ref: function ref(modal) {\n                            return _this5.modal = modal;\n                        }, modalStyle: modalStyle, onHide: this.handleModalHide },\n                    modal_content\n                )\n            );\n        }\n    }]);\n\n    return Injection;\n}(_react.Component);\n\nvar InjectionList = function (_Component2) {\n    _inherits(InjectionList, _Component2);\n\n    function InjectionList(props, context) {\n        _classCallCheck(this, InjectionList);\n\n        var _this6 = _possibleConstructorReturn(this, (InjectionList.__proto__ || Object.getPrototypeOf(InjectionList)).call(this, props, context));\n\n        _lodash2.default.bindAll(_this6, 'handleChange');\n        _this6.state = {\n            injections: []\n        };\n        return _this6;\n    }\n\n    _createClass(InjectionList, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _AppStore2.default.addChangeListener(this.handleChange);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _AppStore2.default.removeChangeListener(this.handleChange);\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange() {\n            //this.setState({stage: AppStore.getActiveStage()});\n            this.setState({\n                nodePicked: _AppStore2.default.getNodePicked(),\n                injections: _AppStore2.default.getInjectionsToShow()\n            });\n        }\n        /**\n         * @return {object}\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this7 = this;\n\n            var mode = this.props.mode;\n            var area_name = null;\n            var nodePicked = this.state.nodePicked;\n            if (nodePicked) {\n                if (mode == 'SLN') {\n                    area_name = _react2.default.createElement(\n                        _ToolTip2.default,\n                        { className: 'area-name', title: toTitleCase(nodePicked.fullname) },\n                        'area ',\n                        nodePicked.abbrev\n                    );\n                } else {\n                    area_name = toTitleCase(nodePicked.fullname) + ' (' + nodePicked.abbrev + ')';\n                }\n            }\n            var info = null;\n            var injection_count = this.state.injections.length;;\n            if (injection_count > 0) {\n                info = _react2.default.createElement(\n                    'div',\n                    { className: 'info-label' },\n                    'Individual injections into ',\n                    _react2.default.createElement(\n                        'span',\n                        { className: 'injection-area-name' },\n                        area_name\n                    ),\n                    _react2.default.createElement('br', null),\n                    '(',\n                    _react2.default.createElement(\n                        'span',\n                        { className: 'injection-count' },\n                        injection_count\n                    ),\n                    ' ',\n                    injection_count > 1 ? 'injections' : 'injection',\n                    ')'\n                );\n            } else {\n                info = _react2.default.createElement(\n                    'div',\n                    { className: 'info-label' },\n                    'No injections into ',\n                    _react2.default.createElement(\n                        'span',\n                        { className: 'injection-area-name' },\n                        area_name\n                    ),\n                    ' in the database.'\n                );\n            }\n            if (nodePicked) {\n                return _react2.default.createElement(\n                    'div',\n                    { className: 'injections-in-area' },\n                    info,\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'injection-detail' },\n                        _lodash2.default.map(this.state.injections, function (inj) {\n                            var strength = void 0;\n                            if (mode == 'SLN') {\n                                var conn = _AppStore2.default.getConnectivity();\n                                var areas = _AppStore2.default.getAreas();\n                                strength = conn.getByTargetAndInjection(areas.getByAbbrev(nodePicked.abbrev), inj.name);\n                            } else {\n                                var _conn = _AppStore2.default.getConnectivity();\n                                var _areas2 = _AppStore2.default.getAreas();\n                                strength = _conn.getByTargetAndInjection(_areas2.getByAbbrev(nodePicked.abbrev), inj.name);\n                            }\n                            return _react2.default.createElement(Injection, { key: inj.name, name: inj.name,\n                                case_id: inj.case_id,\n                                section: inj.section,\n                                section_x: inj.section_x,\n                                section_y: inj.section_y,\n                                in_degree: inj.in_degree,\n                                tracer_id: inj.tracer_id,\n                                cells_ext: inj.cells_ext,\n                                cells_intr: inj.cells_intr,\n                                strength: strength,\n                                injection: inj,\n                                collapse: inj.collapse,\n                                mode: _this7.props.mode\n                            });\n                        })\n                    )\n                );\n            } else {\n                if (app.page == 'main3') {\n                    return _react2.default.createElement(\n                        'div',\n                        { className: 'injections-in-area' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'info-label' },\n                            'No area selected.',\n                            _react2.default.createElement('br', null),\n                            _react2.default.createElement('br', null),\n                            'Please select an area by clicking it on the graph to see detailed information on the retrograde connections.'\n                        )\n                    );\n                } else {\n                    return _react2.default.createElement(\n                        'div',\n                        { className: 'injections-in-area' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'info-label' },\n                            'No area selected.',\n                            _react2.default.createElement('br', null),\n                            _react2.default.createElement('br', null),\n                            'Please select an area by clicking it on the matrix to see detailed information on the retrograde connections.'\n                        )\n                    );\n                }\n            }\n        }\n    }]);\n\n    return InjectionList;\n}(_react.Component);\n\nexports.default = InjectionList;\n;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvY29tcG9uZW50cy9JbmplY3Rpb25MaXN0LnJlYWN0LmpzPzA2YjEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbmltcG9ydCBSZWFjdCwge0NvbXBvbmVudH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IEFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucy9BY3Rpb25zJztcbmltcG9ydCBBcHBTdG9yZSBmcm9tICcuLi9zdG9yZXMvQXBwU3RvcmUnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IG51bWJlckZvcm1hdCBmcm9tICcuLi9saWIvbnVtYmVyZm9ybWF0JztcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCBNb2RhbCwge2RlZmF1bHRNb2RhbFN0eWxlfSBmcm9tICcuLi9saWIvbW9kYWwnO1xuaW1wb3J0IFNsaWRlciBmcm9tICcuL1NsaWRlci5yZWFjdCc7XG5pbXBvcnQgUHNldWRvM0QgZnJvbSAnLi9Qc2V1ZG8zRC5yZWFjdCc7XG5pbXBvcnQgTWV0YWRhdGFNb2RhbCBmcm9tICcuL01ldGFkYXRhTW9kYWwucmVhY3QnO1xuaW1wb3J0IHtzaG93VG9vbHRpcEFyZWFOYW1lLCBoaWRlVG9vbHRpcCwgZ2V0TG9nQ29sb3JGdW5jLCBnZXRCbHVlQ29sb3JGdW5jLFxuICAgIHN2Z0FkZEhhdGNoTGluZX0gZnJvbSAnLi4vbGliL3V0aWxzJztcbmltcG9ydCBUb29sVGlwIGZyb20gJy4vVG9vbFRpcC5yZWFjdCc7XG5cbmZ1bmN0aW9uIHRvVGl0bGVDYXNlKHN0cikge1xuICAgIC8vcmV0dXJuIHN0ci5yZXBsYWNlKC9cXHdcXFMqL2csIGZ1bmN0aW9uKHR4dCl7cmV0dXJuIHR4dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR4dC5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKTt9KTtcbiAgICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnN1YnN0cigxKTtcbn1cblxuY2xhc3MgSW5qZWN0aW9uIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCkge1xuICAgICAgICBzdXBlcihwcm9wcywgY29udGV4dCk7XG4gICAgICAgIHRoaXMuZDNBcHBsaWVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYmFyV2lkdGhGdW5jID0gdW5kZWZpbmVkO1xuICAgICAgICBfLmJpbmRBbGwoXG4gICAgICAgICAgICB0aGlzLCAnaGFuZGxlVG9nZ2xlQ29sbGFwc2UnLCAnZHJhd1N0cmVuZ3RoJyxcbiAgICAgICAgICAgICdhcmVhQmFyTW91c2VPdmVyJywgJ2FyZWFCYXJNb3VzZU91dCcsXG4gICAgICAgICAgICAnYXJlYUxhYmVsTW91c2VPdmVyJywgJ2FyZWFMYWJlbE1vdXNlT3V0JyxcbiAgICAgICAgICAgICdoYW5kbGVEb3dubG9hZENTVicsICdoYW5kbGVEb3dubG9hZFNWRycsXG4gICAgICAgICAgICAnaGFuZGxlRG93bmxvYWRDZWxscycsXG4gICAgICAgICAgICAnaGFuZGxlQ2hhbmdlJywgJ3Nob3czRFZpZXcnLCAnc2hvd0Nhc2VNZXRhJyxcbiAgICAgICAgICAgICdoYW5kbGVNb2RhbEhpZGUnXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuYXN5bmNEb25lID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBtZXRhOiBudWxsLFxuICAgICAgICAgICAgaW5fZGVncmVlOiAwLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgLy9BcHBTdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLmhhbmRsZUNoYW5nZSk7XG4gICAgICAgICQuZ2V0KCcvc3RhdGljL2RhdGEvbWV0YWRhdGEvbWV0YWRhdGFfJyArIHRoaXMucHJvcHMuY2FzZV9pZCArICcuanNvbicpXG4gICAgICAgIC5kb25lKGRhdGEgPT4ge1xuICAgICAgICAgICAgdGhpcy5hc3luY0RvbmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bWV0YTogZGF0YX0pO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHN0cmVuZ3RoID0gdGhpcy5wcm9wcy5zdHJlbmd0aDtcbiAgICAgICAgbGV0IGluX2RlZ3JlZSA9IDA7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLm1vZGUgPT0gJ1NMTicpIHtcbiAgICAgICAgICAgIGluX2RlZ3JlZSA9IF8uZmlsdGVyKHN0cmVuZ3RoLCB7c2xuX25vdGRlZmluZWQ6IGZhbHNlfSkubGVuZ3RoO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NhbGN1bGF0ZWQgaW5fZGVncmVlJywgaW5fZGVncmVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluX2RlZ3JlZSA9IHN0cmVuZ3RoLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKHtpbl9kZWdyZWU6IGluX2RlZ3JlZX0pO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgLy9BcHBTdG9yZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih0aGlzLmhhbmRsZUNoYW5nZSk7XG4gICAgICAgIGxldCBmbG5lID0gZDMuc2VsZWN0KCcjZmxuZS0nICsgdGhpcy5wcm9wcy5uYW1lKTtcbiAgICAgICAgLy9BY3Rpb25zLmhpZGVJbmplY3Rpb24odGhpcy5wcm9wcy5pbmplY3Rpb24pO1xuICAgICAgICBmbG5lLnJlbW92ZSgpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgfVxuICAgIGhhbmRsZVRvZ2dsZUNvbGxhcHNlKCkge1xuICAgICAgICBsZXQgY29sbGFwc2UgPSAhdGhpcy5wcm9wcy5jb2xsYXBzZTtcbiAgICAgICAgaWYgKCFjb2xsYXBzZSkge1xuICAgICAgICAgICAgbGV0IG90aGVyX2luamVjdGlvbnMgPSBfLndpdGhvdXQoQXBwU3RvcmUuZ2V0SW5qZWN0aW9uc1RvU2hvdygpLCB0aGlzLnByb3BzLmluamVjdGlvbik7XG4gICAgICAgICAgICBfLmVhY2gob3RoZXJfaW5qZWN0aW9ucywgbyA9PiB7XG4gICAgICAgICAgICAgICAgQWN0aW9ucy5oaWRlSW5qZWN0aW9uKG8pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBBY3Rpb25zLmV4cGFuZEluamVjdGlvbih0aGlzLnByb3BzLmluamVjdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBBY3Rpb25zLmhpZGVJbmplY3Rpb24odGhpcy5wcm9wcy5pbmplY3Rpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRyYXdTdHJlbmd0aCgpIHtcbiAgICAgICAgY29uc3QgbW9kZSA9IHRoaXMucHJvcHMubW9kZTtcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICBsZXQgc3RyZW5ndGggPSB0aGlzLnByb3BzLnN0cmVuZ3RoO1xuICAgICAgICBsZXQgY29sb3JGdW5jO1xuICAgICAgICBsZXQgZGF0YV9hdHRyO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5tb2RlID09ICdTTE4nKSB7XG4gICAgICAgICAgICBkYXRhX2F0dHIgPSAnc2xuJztcbiAgICAgICAgICAgIGNvbnN0IF9mdW5jID0gZ2V0Qmx1ZUNvbG9yRnVuYygpO1xuICAgICAgICAgICAgY29sb3JGdW5jID0gZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIGlmIChkLnNvdXJjZS5hYmJyZXYgPT0gJ0VudCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2R1bXAgRW50JywgZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkLnNsbl9ub3RkZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAndXJsKFwiI2RpYWdvbmFsSGF0Y2hcIiknO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfZnVuYyhkW2RhdGFfYXR0cl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGFfYXR0ciA9ICdsb2cxMF9mbG5lJztcbiAgICAgICAgICAgIGNvbnN0IF9mdW5jID0gZ2V0TG9nQ29sb3JGdW5jKCk7XG4gICAgICAgICAgICBjb2xvckZ1bmMgPSBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9mdW5jKGRbZGF0YV9hdHRyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgX2FyZWFzID0gQXBwU3RvcmUuZ2V0QXJlYXMoKTtcbiAgICAgICAgbGV0IGFyZWEgPSBBcHBTdG9yZS5nZXRUYXJnZXRBcmVhUGlja2VkKCk7XG4gICAgICAgIHRoaXMuc3ZnX2ZsbmVfcGFyZW50ID0gZDMuc2VsZWN0KCcjZmxuZS0nICsgdGhpcy5wcm9wcy5uYW1lKTtcbiAgICAgICAgbGV0IHN2ZyA9IHRoaXMuc3ZnX2ZsbmVfcGFyZW50LmFwcGVuZCgnc3ZnJylcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIDM2NSlcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCAyMDApO1xuICAgICAgICBsZXQgZmxuZSA9IHN2Z1xuICAgICAgICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSg1MCwgNSknKTtcbiAgICAgICAgc3ZnQWRkSGF0Y2hMaW5lKHN2Zyk7XG5cbiAgICAgICAgbGV0IHkgPSBudWxsLCBmbG5lX2hlaWdodCA9IDEwMDtcbiAgICAgICAgbGV0IHNjYWxlciwgc2NhbGVyX2RvbTtcbiAgICAgICAgaWYgKHN0cmVuZ3RoKSB7XG4gICAgICAgICAgICBmbG5lX2hlaWdodCA9IDEwICogc3RyZW5ndGgubGVuZ3RoO1xuICAgICAgICAgICAgZDMuc2VsZWN0KCcjZmxuZS0nICsgdGhpcy5wcm9wcy5uYW1lICsgJyBzdmcnKS5hdHRyKCdoZWlnaHQnLCBmbG5lX2hlaWdodCArIDQ1KTtcbiAgICAgICAgICAgIHkgPSBkMy5zY2FsZUJhbmQoKS5yYW5nZShbMCwgZmxuZV9oZWlnaHRdKTtcbiAgICAgICAgICAgIHkucm91bmQodHJ1ZSk7XG4gICAgICAgICAgICB5LnBhZGRpbmdJbm5lciguMSk7XG4gICAgICAgICAgICBmbG5lLnNlbGVjdEFsbCgnLnJvdycpLnJlbW92ZSgpO1xuICAgICAgICAgICAgZmxuZS5zZWxlY3RBbGwoJy5heGlzLWJvdHRvbScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgc3RyZW5ndGggPSBfLnNvcnRCeShzdHJlbmd0aCwgZGF0YV9hdHRyKTtcbiAgICAgICAgICAgIGlmIChtb2RlID09ICdGTE4nKSB7XG4gICAgICAgICAgICAgICAgXy5yZXZlcnNlKHN0cmVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzcmNzID0gXy5tYXAoXy5tYXAoc3RyZW5ndGgsICdzb3VyY2UnKSwgJ2FiYnJldicpO1xuICAgICAgICAgICAgeS5kb21haW4oc3Jjcyk7XG4gICAgICAgICAgICBsZXQgZmxuZV9hcnI7XG4gICAgICAgICAgICBmbG5lX2FyciA9IF8ubWFwKHN0cmVuZ3RoLCBkYXRhX2F0dHIpO1xuICAgICAgICAgICAgbGV0IG1pbiA9IF8ubWluKGZsbmVfYXJyKSwgbWF4ID0gXy5tYXgoZmxuZV9hcnIpO1xuICAgICAgICAgICAgbGV0IGJhcldpZHRoRnVuYztcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm1vZGUgPT0gJ1NMTicpIHtcbiAgICAgICAgICAgICAgICBiYXJXaWR0aEZ1bmMgPSB0aGlzLmdldEJhcldpZHRoRnVuYygtMSwgMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJhcldpZHRoRnVuYyA9IHRoaXMuZ2V0QmFyV2lkdGhGdW5jKG1pbiwgbWF4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYmFyV2lkdGhGdW5jID0gYmFyV2lkdGhGdW5jO1xuICAgICAgICAgICAgbGV0IHJvdyA9IGZsbmUuc2VsZWN0QWxsKCcucm93JylcbiAgICAgICAgICAgICAgICAuZGF0YShzdHJlbmd0aCwgZCA9PiBkKTtcbiAgICAgICAgICAgIGxldCByb3dfZW50ZXIgPSByb3cuZW50ZXIoKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdyb3cnKTtcbiAgICAgICAgICAgIHJvd19lbnRlci5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdmbG5lLWxhYmVsJyk7XG4gICAgICAgICAgICByb3dfZW50ZXIuYXBwZW5kKCdyZWN0JylcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZmxuZS1yZWN0Jyk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dWYWx1ZShub2RlLCBkKSB7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KG5vZGUpLnNlbGVjdEFsbCgncmVjdCcpLmF0dHIoJ2ZpbGwnLCAnYnJvd24nKTtcbiAgICAgICAgICAgICAgICBsZXQgdGV4dEF0QmVoaW5kVGhyZXNob2xkO1xuICAgICAgICAgICAgICAgIGlmICh0aGF0LnByb3BzLm1vZGUgPT0gJ1NMTicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dEF0QmVoaW5kVGhyZXNob2xkID0gMC4xMjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0QXRCZWhpbmRUaHJlc2hvbGQgPSAtNC41O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgYW5jaG9yLCB4LCBmaWxsO1xuICAgICAgICAgICAgICAgIGlmIChkW2RhdGFfYXR0cl0gPCB0ZXh0QXRCZWhpbmRUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yID0gJ2JlZ2luJztcbiAgICAgICAgICAgICAgICAgICAgeCA9IGJhcldpZHRoRnVuYyhkW2RhdGFfYXR0cl0pICsgNTtcbiAgICAgICAgICAgICAgICAgICAgZmlsbCA9ICdibGFjayc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yID0gJ2VuZCc7XG4gICAgICAgICAgICAgICAgICAgIHggPSBiYXJXaWR0aEZ1bmMoZFtkYXRhX2F0dHJdKSAtIDU7XG4gICAgICAgICAgICAgICAgICAgIGZpbGwgPSAnd2hpdGUnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGQzLnNlbGVjdChub2RlKS5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigneCcsIHgpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgKGQsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5KGQuc291cmNlLmFiYnJldikgKyB5LmJhbmR3aWR0aCgpIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgYW5jaG9yKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignYWxpZ25tZW50LWJhc2VsaW5lJywgJ21pZGRsZScpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnbm9uZScpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCAnYm9sZCcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgZmlsbClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ251bScpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGRbZGF0YV9hdHRyXS50b0ZpeGVkKDIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvd19lbnRlci5zZWxlY3RBbGwoJy5mbG5lLWxhYmVsJylcbiAgICAgICAgICAgICAgICAuYXR0cigneCcsIC02KVxuICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgKGQsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkoZC5zb3VyY2UuYWJicmV2KSArIHkuYmFuZHdpZHRoKCkgLyAyXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cigndGV4dC1hbmNob3InLCAnZW5kJylcbiAgICAgICAgICAgICAgICAuYXR0cignYWxpZ25tZW50LWJhc2VsaW5lJywgJ21pZGRsZScpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3RpdGxlJywgJ3Rlc3R0ZXN0JylcbiAgICAgICAgICAgICAgICAudGV4dChkID0+IGQuc291cmNlLmFiYnJldilcbiAgICAgICAgICAgICAgICAub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1lID0gZDMuc2VsZWN0KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFyZWFCYXJNb3VzZU92ZXIobWUsIF9hcmVhcy5ieUFiYnJldltkLnNvdXJjZS5hYmJyZXZdKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcmVhTGFiZWxNb3VzZU92ZXIobWUsIF9hcmVhcy5ieUFiYnJldltkLnNvdXJjZS5hYmJyZXZdKTtcbiAgICAgICAgICAgICAgICAgICAgc2hvd1ZhbHVlKHRoaXMucGFyZW50Tm9kZSwgZCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWUgPSBkMy5zZWxlY3QodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJlYUJhck1vdXNlT3V0KG1lLCBfYXJlYXMuYnlBYmJyZXZbZC5zb3VyY2UuYWJicmV2XSk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJlYUxhYmVsTW91c2VPdXQobWUsIF9hcmVhcy5ieUFiYnJldltkLnNvdXJjZS5hYmJyZXZdKTtcbiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSkuc2VsZWN0QWxsKCdyZWN0JykuYXR0cignZmlsbCcsIGNvbG9yRnVuYyhkKSk7XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpLnNlbGVjdEFsbCgnLm51bScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHJvd19lbnRlci5zZWxlY3RBbGwoJy5mbG5lLXJlY3QnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgMClcbiAgICAgICAgICAgICAgICAuYXR0cigneScsIChkLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB5KGQuc291cmNlLmFiYnJldik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cignd2lkdGgnLCBkID0+IGJhcldpZHRoRnVuYyhkW2RhdGFfYXR0cl0pKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCB5LmJhbmR3aWR0aCgpKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgZCA9PiBjb2xvckZ1bmMoZCkpXG4gICAgICAgICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtZSA9IGQzLnNlbGVjdCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcmVhTGFiZWxNb3VzZU92ZXIobWUsIF9hcmVhcy5ieUFiYnJldltkLnNvdXJjZS5hYmJyZXZdKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcmVhQmFyTW91c2VPdmVyKG1lLCBfYXJlYXMuYnlBYmJyZXZbZC5zb3VyY2UuYWJicmV2XSk7XG4gICAgICAgICAgICAgICAgICAgIHNob3dWYWx1ZSh0aGlzLnBhcmVudE5vZGUsIGQpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKGQsIGksIHApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1lID0gZDMuc2VsZWN0KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFyZWFMYWJlbE1vdXNlT3V0KG1lLCBfYXJlYXMuYnlBYmJyZXZbZC5zb3VyY2UuYWJicmV2XSk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJlYUJhck1vdXNlT3V0KG1lLCBfYXJlYXMuYnlBYmJyZXZbZC5zb3VyY2UuYWJicmV2XSk7XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpLnNlbGVjdEFsbCgncmVjdCcpLmF0dHIoJ2ZpbGwnLCBjb2xvckZ1bmMoZCkpO1xuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5zZWxlY3RBbGwoJy5udW0nKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5tb2RlID09ICdGTE4nKSB7XG4gICAgICAgICAgICAgICAgc2NhbGVyID0gZDMuYXhpc0JvdHRvbSgpXG4gICAgICAgICAgICAgICAgICAgIC5zY2FsZShiYXJXaWR0aEZ1bmMpXG4gICAgICAgICAgICAgICAgICAgIC50aWNrU2l6ZUlubmVyKC1mbG5lX2hlaWdodClcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplT3V0ZXIoMClcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tWYWx1ZXMoWy01LCAtNCwgLTMsIC0yLCAtMSwgMF0pXG4gICAgICAgICAgICAgICAgICAgIC50aWNrRm9ybWF0KGQzLmZvcm1hdCgnLGQnKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vLnRpY2tzKDUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzY2FsZXIgPSBkMy5heGlzQm90dG9tKClcbiAgICAgICAgICAgICAgICAgICAgLnNjYWxlKGJhcldpZHRoRnVuYylcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplSW5uZXIoLWZsbmVfaGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAudGlja1NpemVPdXRlcigwKVxuICAgICAgICAgICAgICAgICAgICAudGlja1ZhbHVlcyhbMCwgMC4yLCAwLjQsIDAuNiwgMC44LCAxXSlcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoZDMuZm9ybWF0KCcsLjFmJykpO1xuICAgICAgICAgICAgICAgICAgICAvLy50aWNrcyg1KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNjYWxlcl9kb20gPSBmbG5lLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgZmxuZV9oZWlnaHQgKyBcIilcIilcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYXhpcy1ib3R0b20nKVxuICAgICAgICAgICAgICAgIC5jYWxsKHNjYWxlcik7XG4gICAgICAgICAgICBzY2FsZXJfZG9tLnNlbGVjdEFsbCgnLnRpY2sgbGluZScpLmZpbHRlcigoZCwgaSwgbCkgPT4gKGkgPT09IGwubGVuZ3RoIC0gMSkpLmF0dHIoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgZmxuZS5zZWxlY3RBbGwoJy5pbmRpdmlkdWFsLWJhci1zY2FsZS14LXRpdGxlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICBsZXQgdGl0bGUgPSBmbG5lLmFwcGVuZCgndGV4dCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2luZGl2aWR1YWwtYmFyLXNjYWxlLXgtdGl0bGUnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyAoMzIwIC8gMiAtIDIwKSArICcsICcgKyAoZmxuZV9oZWlnaHQgKyAyNSkgKyAnKScpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5tb2RlID09ICdGTE4nKSB7XG4gICAgICAgICAgICAgICAgdGl0bGUuYXBwZW5kKCd0c3BhbicpLmF0dHIoJ2ZvbnQtc2l6ZScsICcxMicpLnRleHQoJ2xvZycpO1xuICAgICAgICAgICAgICAgIHRpdGxlLmFwcGVuZCgndHNwYW4nKS50ZXh0KCcxMCcpLmF0dHIoJ2Jhc2VsaW5lLXNoaWZ0JywgJ3N1YicpO1xuICAgICAgICAgICAgICAgIHRpdGxlLmFwcGVuZCgndHNwYW4nKS5hdHRyKCdmb250LXNpemUnLCAnMTInKS50ZXh0KCcoRkxOZSknKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGl0bGUuYXBwZW5kKCd0c3BhbicpLmF0dHIoJ2ZvbnQtc2l6ZScsICcxMicpLnRleHQoJ1NMTmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRCYXJXaWR0aEZ1bmMobWluLCBtYXgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMubW9kZSA9PSAnU0xOJykge1xuICAgICAgICAgICAgbWluID0gMCwgbWF4ID0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1pbiA9IC01LjUsIG1heCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZnVuYyA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFttaW4sIG1heF0pLnJhbmdlKFsxLCAzMDBdKTtcbiAgICAgICAgcmV0dXJuIGZ1bmM7XG4gICAgfVxuXG4gICAgYXJlYUJhck1vdXNlT3ZlcihtZSwgZnJvbV8pIHtcbiAgICAgICAgbGV0IHRhcmdldCA9IEFwcFN0b3JlLmdldE5vZGVQaWNrZWQoKTtcbiAgICAgICAgQWN0aW9ucy5oaWdobGlnaHRFZGdlKGZyb21fLCB0YXJnZXQsICcjMDAwMDAwJyk7XG4gICAgICAgIEFjdGlvbnMuYm9sZEVkZ2UoZnJvbV8sIHRhcmdldCk7XG4gICAgfVxuICAgIGFyZWFCYXJNb3VzZU91dChtZSwgZnJvbV8sIHRvKSB7XG4gICAgICAgIGxldCB0YXJnZXQgPSBBcHBTdG9yZS5nZXROb2RlUGlja2VkKCk7XG4gICAgICAgIEFjdGlvbnMudW5oaWdobGlnaHRFZGdlKGZyb21fLCB0YXJnZXQpO1xuICAgICAgICBBY3Rpb25zLnVuYm9sZEVkZ2UoZnJvbV8sIHRhcmdldCk7XG4gICAgfVxuICAgIGFyZWFMYWJlbE1vdXNlT3ZlcihtZSwgZnJvbV8pIHtcbiAgICAgICAgbGV0IGJib3ggPSBtZS5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCB0b3AgPSBiYm94LnRvcCArICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpO1xuICAgICAgICBsZXQgdGFyZ2V0ID0gQXBwU3RvcmUuZ2V0Tm9kZVBpY2tlZCgpO1xuICAgICAgICBzaG93VG9vbHRpcEFyZWFOYW1lKHthcmVhOiBmcm9tXywgeDogYmJveC5sZWZ0LCB5OiB0b3AgLSAzNX0pO1xuICAgIH1cbiAgICBhcmVhTGFiZWxNb3VzZU91dChtZSwgZnJvbV8sIHRvKSB7XG4gICAgICAgIGhpZGVUb29sdGlwKCk7XG4gICAgfVxuICAgIHNob3czRFZpZXcoZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHttb2RhbDogJzNkdmlldyd9LCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm1vZGFsLnNob3coKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNob3dDYXNlTWV0YShlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe21vZGFsOiAnY2FzZV9tZXRhJ30sICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubW9kYWwuc2hvdygpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaGFuZGxlRG93bmxvYWRTVkcoZSkge1xuICAgICAgICBsZXQgaHRtbCA9IHRoaXMuc3ZnX2ZsbmVfcGFyZW50Lmh0bWwoKTtcbiAgICAgICAgbGV0IGI2NCA9IGJ0b2EoaHRtbCk7XG4gICAgICAgIGxldCBocmVmID0gJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsXFxuJyArIGI2NDtcbiAgICAgICAgZS50YXJnZXQuaHJlZiA9IGhyZWY7XG4gICAgICAgIEFjdGlvbnMuc2V0RG93bmxvYWRMaW5rKGhyZWYsIGUsICdleHBvcnRfZmxhdG1hcF9ncmFwaC5zdmcnKTtcbiAgICB9XG4gICAgaGFuZGxlRG93bmxvYWRDU1YoZSkge1xuICAgICAgICBsZXQgaW5qZWN0aW9uX25hbWUgPSB0aGlzLnByb3BzLmluamVjdGlvbi5kaXNwbGF5X25hbWUgPyB0aGlzLnByb3BzLmluamVjdGlvbi5kaXNwbGF5X25hbWUgKyAnLScgKyB0aGlzLnByb3BzLnRyYWNlcl9pZCA6IHRoaXMucHJvcHMubmFtZTtcbiAgICAgICAgbGV0IGhyZWYgPSAnL3N0YXRpYy9kYXRhL2luZGl2aWR1YWxfaW5qZWN0aW9ucy9mbG5lX2luamVjdGlvbl8nICsgdGhpcy5wcm9wcy5uYW1lICsgJy5jc3YnO1xuICAgICAgICBsZXQgZG93bmxvYWQgPSAnZmxuZV9pbmplY3Rpb25fJyArIGluamVjdGlvbl9uYW1lICsgJy5jc3YnO1xuICAgICAgICBlLnRhcmdldC5ocmVmID0gaHJlZjtcbiAgICAgICAgZS50YXJnZXQuZG93bmxvYWQgPSBkb3dubG9hZDtcbiAgICAgICAgQWN0aW9ucy5zZXREb3dubG9hZExpbmsoaHJlZiwgZSk7XG4gICAgfVxuICAgIGhhbmRsZURvd25sb2FkQ2VsbHMoZSkge1xuICAgICAgICBsZXQgaW5qZWN0aW9uX25hbWUgPSB0aGlzLnByb3BzLmluamVjdGlvbi5kaXNwbGF5X25hbWUgPyB0aGlzLnByb3BzLmluamVjdGlvbi5kaXNwbGF5X25hbWUgKyAnLScgKyB0aGlzLnByb3BzLnRyYWNlcl9pZCA6IHRoaXMucHJvcHMubmFtZTtcbiAgICAgICAgbGV0IGhyZWYgPSAnL3N0YXRpYy9kYXRhL2luZGl2aWR1YWxfaW5qZWN0aW9ucy9pbmRpdmR1YWxfY2VsbHNfaW5qZWN0aW9uXycgKyB0aGlzLnByb3BzLm5hbWUgKyAnLmNzdic7XG4gICAgICAgIGUudGFyZ2V0LmhyZWYgPSBocmVmO1xuICAgICAgICBlLnRhcmdldC5kb3dubG9hZCA9ICdpbmRpdmlkdWFsX2NlbGxzX2luamVjdGlvbl8nICsgaW5qZWN0aW9uX25hbWUgKyAnLmNzdic7XG4gICAgICAgIEFjdGlvbnMuc2V0RG93bmxvYWRMaW5rKGhyZWYsIGUpO1xuICAgIH1cbiAgICBoYW5kbGVNb2RhbEhpZGUoZSkge1xuICAgICAgICBBY3Rpb25zLm1vZGFsSGlkZSgnaW5qZWN0aW9uJyk7XG4gICAgfVxuXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgaHJlZj0naHR0cDovL3d3dy5tYXJtb3NldGJyYWluLm9yZy9nb3RvLycgKyB0aGlzLnByb3BzLmNhc2VfaWQgKyAnLydcbiAgICAgICAgICAgICsgdGhpcy5wcm9wcy5zZWN0aW9uICsgJy8nXG4gICAgICAgICAgICArIHRoaXMucHJvcHMuc2VjdGlvbl94ICsgJy8nXG4gICAgICAgICAgICArIHRoaXMucHJvcHMuc2VjdGlvbl95XG4gICAgICAgICAgICArICcvMyc7XG4gICAgICAgIGxldCBjb2xsYXBzZSA9IG51bGw7XG4gICAgICAgIGNvbGxhcHNlID0gKFxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdjb2xsYXBzZS10b2dnbGUnLCB7Y29sbGFwc2U6ICF0aGlzLnByb3BzLmNvbGxhcHNlLCBleHBhbmQ6IHRoaXMucHJvcHMuY29sbGFwc2V9KX0+PC9zcGFuPlxuICAgICAgICApO1xuICAgICAgICBsZXQgbW9kYWxfY29udGVudCA9ICdMb2FkaW5nJztcbiAgICAgICAgaWYgKHRoaXMuYXN5bmNEb25lKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZDNBcHBsaWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3U3RyZW5ndGgoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmQzQXBwbGllZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbSA9IHRoaXMuc3RhdGUubWV0YTtcbiAgICAgICAgICAgIGxldCBpbmo7XG5cbiAgICAgICAgICAgIGxldCBtZXRhID0gXy5maW5kKHRoaXMuc3RhdGUubWV0YS5pbmplY3Rpb25zLCB7dHJhY2VyOiB0aGlzLnByb3BzLnRyYWNlcl9pZH0pO1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlLm1vZGFsKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnY2FzZV9tZXRhJzpcbiAgICAgICAgICAgICAgICAgICAgLy9pbmogPSBfLmZpbmQodGhpcy5zdGF0ZS5tZXRhLmluamVjdGlvbnMsIHt0cmFjZXI6IHRoaXMucHJvcHMudHJhY2VyX2lkfSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbmogPSBBcHBTdG9yZS5maW5kSW5qZWN0aW9uKHRoaXMucHJvcHMuY2FzZV9pZCwgdGhpcy5wcm9wcy50cmFjZXJfaWQpO1xuICAgICAgICAgICAgICAgICAgICBtb2RhbF9jb250ZW50ID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZXRhZGF0YS1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwibWV0YWRhdGFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5DYXNlIElEPC90aD48dGQ+e21bJ2Nhc2UnXX08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+U2V4PC90aD48dGQ+e20uc2V4fTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5UcmFjZXI8L3RoPjx0ZD57dGhpcy5wcm9wcy50cmFjZXJfaWR9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPkhlbWlzcGhlcmU8L3RoPjx0ZD57bS5oZW1pc3BoZXJlfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5SZWdpb248L3RoPjx0ZD57aW5qLnJlZ2lvbn08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+QXRsYXMgQ29vcmRpbmF0ZTwvdGg+PHRkPkEge2luai5hfSBMOiB7aW5qLmx9IEg6IHtpbmouaH08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+U2VjdGlvbmluZyBQbGFuZTwvdGg+PHRkPnttLnNlY3Rpb25pbmdfcGxhbmV9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPkRhdGUgb2YgYmlydGg8L3RoPjx0ZD57bS5kYXRlX29mX2JpcnRofTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5JbmplY3Rpb24gZGF0ZTwvdGg+PHRkPnttLmluamVjdGlvbl9kYXRlfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5TdXJ2aXZhbCBkYXlzPC90aD48dGQ+e20uc3Vydml2YWxfZGF5c308L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+TWVtbzwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhc2UtbWV0YVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bS5tZW1vfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmplY3Rpb24tbWV0YVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aW5qLm1lbW99XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4pO1xuICAgICAgICAgICAgICAgICAgICBtb2RhbF9jb250ZW50ID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgPE1ldGFkYXRhTW9kYWwgaW5qZWN0aW9uPXtpbmp9IGNhc2VfPXttfSBtZXRhPXttZXRhfSBjYXNlX2lkPXt0aGlzLnByb3BzLmNhc2VfaWR9IGluamVjdGlvbl9uYW1lPXt0aGlzLnByb3BzLm5hbWV9IC8+XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJzNkdmlldyc6XG4gICAgICAgICAgICAgICAgICAgIGluaiA9IEFwcFN0b3JlLmZpbmRJbmplY3Rpb24odGhpcy5wcm9wcy5jYXNlX2lkLCB0aGlzLnByb3BzLnRyYWNlcl9pZCk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsX2NvbnRlbnQgPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8UHNldWRvM0RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmplY3Rpb249e2luan1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmplY3Rpb25fbmFtZT17dGhpcy5wcm9wcy5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGE9e21ldGF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZV9pZD17dGhpcy5wcm9wcy5jYXNlX2lkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlcl9pZD17dGhpcy5wcm9wcy50cmFjZXJfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRlbnNpdHlfbWFwID0gKFxuICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT1cImRlbnNpdHktbWFwXCI+XG4gICAgICAgICAgICAgICAgRG93bmxvYWQgZGVuc2l0eSBtYXAgWz9dXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkZW5zaXR5LW1hcFwiPlxuICAgICAgICAgICAgICAgICAgICBGbGF0bWFwICg1MDAsIDIwMCwgMTAwKTxici8+XG4gICAgICAgICAgICAgICAgICAgIDNEIG1hcCAoNTAwLCAyMDAsIDEwMClcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvbGk+KTtcbiAgICAgICAgZGVuc2l0eV9tYXAgPSBudWxsO1xuICAgICAgICAvKlxuICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICBvbk1vdXNlT3Zlcj17dGhpcy5oYW5kbGVEb3dubG9hZFNWR0hlbHB9XG4gICAgICAgICAgICAgICAgb25Nb3VzZU91dD17dGhpcy5oYW5kbGVDbG9zZURvd25sb2FkU1ZHSGVscH0+Wz9dPC9hPlxuICAgICAgICAqL1xuICAgICAgICBsZXQgaW5qZWN0aW9uX25hbWUgPSB0aGlzLnByb3BzLmluamVjdGlvbi5kaXNwbGF5X25hbWUgPyB0aGlzLnByb3BzLmluamVjdGlvbi5kaXNwbGF5X25hbWUgKyAnLScgKyB0aGlzLnByb3BzLnRyYWNlcl9pZCA6IHRoaXMucHJvcHMubmFtZTtcbiAgICAgICAgbGV0IHRpdGxlX2NvbGxhcHNlID0gdGhpcy5wcm9wcy5jb2xsYXBzZSA/ICdDbGljayB0byBzZWUgY29ubmVjdGl2aXR5IHByb2ZpbGUgZm9yICcgKyBpbmplY3Rpb25fbmFtZSArICcgaW5qZWN0aW9uJyA6ICdDbGljayB0byBjbG9zZSB0aGUgZGV0YWlscyBvZiAnICsgaW5qZWN0aW9uX25hbWUgKyAnIGluamVjdGlvbic7XG4gICAgICAgIGxldCBtb2RhbFN0eWxlID0gXy5jbG9uZShkZWZhdWx0TW9kYWxTdHlsZSk7XG4gICAgICAgIGxldCBjb25uZWN0aXZpdHlfaGVhZGVyO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5tb2RlID09ICdTTE4nKSB7XG4gICAgICAgICAgICBjb25uZWN0aXZpdHlfaGVhZGVyID0gJ1NMTmUgcHJvZmlsZSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25uZWN0aXZpdHlfaGVhZGVyID0gJ0Nvbm5lY3Rpdml0eSBwcm9maWxlJztcbiAgICAgICAgfVxuICAgICAgICAvL3tudW1iZXJGb3JtYXQodGhpcy5zdGF0ZS5pbl9kZWdyZWUsIDAsICcuJywgJ1xcdTIwMDknKX0gc291cmNlcywge251bWJlckZvcm1hdCh0aGlzLnByb3BzLmNlbGxzX2V4dCwgMCwgJy4nLCAnXFx1MjAwOScpfSBleHRyaW5zaWMgY2VsbHNcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5qZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2luamVjdGlvbi1iYXInLCB0aGlzLnByb3BzLnRyYWNlcl9pZCl9IG9uQ2xpY2s9e3RoaXMuaGFuZGxlVG9nZ2xlQ29sbGFwc2V9IHRpdGxlPXt0aXRsZV9jb2xsYXBzZX0+XG4gICAgICAgICAgICAgICAgICAgIHtjb2xsYXBzZX1cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdpbmplY3Rpb24tbmFtZScsIHRoaXMucHJvcHMudHJhY2VyX2lkKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7aW5qZWN0aW9uX25hbWV9XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdqdW1wLXRvLWluamVjdGlvbicsIHRoaXMucHJvcHMudHJhY2VyX2lkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmPXtocmVmfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9eydDbGljayB0byBqdW1wIHRvIHRoZSBpbmplY3Rpb24gc2l0ZSBpbiBoaWdoIHJlc29sdXRpb24gdmlld2VyJ31cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnaWNvbi1qdW1wJywgdGhpcy5wcm9wcy50cmFjZXJfaWQpfT48L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiYnV0dG9uLW1ldGFkYXRhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2hvd0Nhc2VNZXRhfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9eydDbGljayB0byBzaG93IG1ldGFkYXRhIG9mIENhc2UgJyArIHRoaXMucHJvcHMuY2FzZV9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJidXR0b24tM2R2aWV3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMuc2hvdzNEVmlld31cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXsnQ2xpY2sgdG8gc2hvdyAzRCB2aXN1YWxpemF0aW9uIG9mIHRoZSBwcm9qZWN0aW9uIHBhdHRlcm4nfVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgM0RcbiAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdwZXItaW5qZWN0aW9uLWRldGFpbCcsIHtoaWRkZW46IHRoaXMucHJvcHMuY29sbGFwc2V9KX0+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImluamVjdGlvbi1jZWxsc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAge2Nvbm5lY3Rpdml0eV9oZWFkZXJ9IGZvciB0aGUge2luamVjdGlvbl9uYW1lfSBpbmplY3Rpb248YnIvPlxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZDMgZmxuZS1wZXItaW5qZWN0aW9uXCIgaWQ9eydmbG5lLScgKyB0aGlzLnByb3BzLm5hbWV9PjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRvd25sb2FkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT1cImRvd25sb2FkLXN2Z1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBvbkNsaWNrPXt0aGlzLmhhbmRsZURvd25sb2FkU1ZHfSBkb3dubG9hZD17J2ZsbmVfJyArIHRoaXMucHJvcHMubmFtZSArICcuc3ZnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXsnY2xpY2sgdG8gZG93bmxvYWQgdGhlIEZMTmUgZHJhd2luZyBpbiBTVkcgZm9ybWF0J30+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb3dubG9hZCBiYXIgY2hhcnQgYXMgU1ZHIGRyYXdpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT1cImRvd25sb2FkLWNzdlwiPjxhIG9uQ2xpY2s9e3RoaXMuaGFuZGxlRG93bmxvYWRDU1Z9IHRpdGxlPXsnY2xpY2sgdG8gZG93bmxvYWQgRkxOZSB2YWx1ZXMgb2YgaW5qZWN0aW9uICcgKyBpbmplY3Rpb25fbmFtZSArICcgaW4gY3N2IGZvcm1hdCd9PkRvd25sb2FkIGRhdGEgYXMgQ1NWIGZpbGU8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3NOYW1lPVwiZG93bmxvYWQtY3N2XCI+PGEgb25DbGljaz17dGhpcy5oYW5kbGVEb3dubG9hZENlbGxzfSB0aXRsZT1cImNsaWNrIHRvIGRvd25sb2FkIGluZGl2aWR1YWwgY2VsbCBkYXRhIGluIGNzdiBmb3JtYXRcIj5Eb3dubG9hZCBpbmRpdmlkdWFsIGNlbGxzPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2RlbnNpdHlfbWFwfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjbGVhci1ib3RoXCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPE1vZGFsIHJlZj17bW9kYWwgPT4gdGhpcy5tb2RhbCA9IG1vZGFsfSBtb2RhbFN0eWxlPXttb2RhbFN0eWxlfSBvbkhpZGU9e3RoaXMuaGFuZGxlTW9kYWxIaWRlfT5cbiAgICAgICAgICAgICAgICAgICAge21vZGFsX2NvbnRlbnR9XG4gICAgICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEluamVjdGlvbkxpc3QgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzLCBjb250ZXh0KSB7XG4gICAgICAgIHN1cGVyKHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgXy5iaW5kQWxsKHRoaXMsICdoYW5kbGVDaGFuZ2UnKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGluamVjdGlvbnM6IFtdLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgQXBwU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5oYW5kbGVDaGFuZ2UpO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgQXBwU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5oYW5kbGVDaGFuZ2UpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgICAgIC8vdGhpcy5zZXRTdGF0ZSh7c3RhZ2U6IEFwcFN0b3JlLmdldEFjdGl2ZVN0YWdlKCl9KTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBub2RlUGlja2VkOiBBcHBTdG9yZS5nZXROb2RlUGlja2VkKCksXG4gICAgICAgICAgICBpbmplY3Rpb25zOiBBcHBTdG9yZS5nZXRJbmplY3Rpb25zVG9TaG93KClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge29iamVjdH1cbiAgICAgKi9cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IG1vZGUgPSB0aGlzLnByb3BzLm1vZGU7XG4gICAgICAgIGxldCBhcmVhX25hbWUgPSBudWxsO1xuICAgICAgICBsZXQgbm9kZVBpY2tlZCA9IHRoaXMuc3RhdGUubm9kZVBpY2tlZDtcbiAgICAgICAgaWYgKG5vZGVQaWNrZWQpIHtcbiAgICAgICAgICAgIGlmIChtb2RlID09ICdTTE4nKSB7XG4gICAgICAgICAgICAgICAgYXJlYV9uYW1lID0gPFRvb2xUaXAgY2xhc3NOYW1lPVwiYXJlYS1uYW1lXCIgdGl0bGU9e3RvVGl0bGVDYXNlKG5vZGVQaWNrZWQuZnVsbG5hbWUpfT5hcmVhIHtub2RlUGlja2VkLmFiYnJldn08L1Rvb2xUaXA+O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcmVhX25hbWUgPSB0b1RpdGxlQ2FzZShub2RlUGlja2VkLmZ1bGxuYW1lKSArICcgKCcgKyBub2RlUGlja2VkLmFiYnJldiArICcpJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgaW5mbyA9IG51bGw7XG4gICAgICAgIGxldCBpbmplY3Rpb25fY291bnQgPSB0aGlzLnN0YXRlLmluamVjdGlvbnMubGVuZ3RoOztcbiAgICAgICAgaWYgKGluamVjdGlvbl9jb3VudCA+IDApIHtcbiAgICAgICAgICAgIGluZm8gPSAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmZvLWxhYmVsXCI+XG4gICAgICAgICAgICAgICAgICAgIEluZGl2aWR1YWwgaW5qZWN0aW9ucyBpbnRvIDxzcGFuIGNsYXNzTmFtZT1cImluamVjdGlvbi1hcmVhLW5hbWVcIj57YXJlYV9uYW1lfTwvc3Bhbj48YnIvPlxuICAgICAgICAgICAgICAgICAgICAoPHNwYW4gY2xhc3NOYW1lPVwiaW5qZWN0aW9uLWNvdW50XCI+e2luamVjdGlvbl9jb3VudH08L3NwYW4+IHtpbmplY3Rpb25fY291bnQgPiAxID8gJ2luamVjdGlvbnMnIDogJ2luamVjdGlvbid9KVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluZm8gPSAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmZvLWxhYmVsXCI+XG4gICAgICAgICAgICAgICAgICAgIE5vIGluamVjdGlvbnMgaW50byA8c3BhbiBjbGFzc05hbWU9XCJpbmplY3Rpb24tYXJlYS1uYW1lXCI+e2FyZWFfbmFtZX08L3NwYW4+IGluIHRoZSBkYXRhYmFzZS5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGVQaWNrZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmplY3Rpb25zLWluLWFyZWFcIj5cbiAgICAgICAgICAgICAgICAgICAge2luZm99XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5qZWN0aW9uLWRldGFpbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge18ubWFwKHRoaXMuc3RhdGUuaW5qZWN0aW9ucywgaW5qID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RyZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGUgPT0gJ1NMTicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29ubiA9IEFwcFN0b3JlLmdldENvbm5lY3Rpdml0eSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmVhcyA9IEFwcFN0b3JlLmdldEFyZWFzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVuZ3RoID0gY29ubi5nZXRCeVRhcmdldEFuZEluamVjdGlvbihhcmVhcy5nZXRCeUFiYnJldihub2RlUGlja2VkLmFiYnJldiksIGluai5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25uID0gQXBwU3RvcmUuZ2V0Q29ubmVjdGl2aXR5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZWFzID0gQXBwU3RvcmUuZ2V0QXJlYXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZW5ndGggPSBjb25uLmdldEJ5VGFyZ2V0QW5kSW5qZWN0aW9uKGFyZWFzLmdldEJ5QWJicmV2KG5vZGVQaWNrZWQuYWJicmV2KSwgaW5qLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5qZWN0aW9uIGtleT17aW5qLm5hbWV9IG5hbWU9e2luai5uYW1lfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZV9pZD17aW5qLmNhc2VfaWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uPXtpbmouc2VjdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25feD17aW5qLnNlY3Rpb25feH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY3Rpb25feT17aW5qLnNlY3Rpb25feX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluX2RlZ3JlZT17aW5qLmluX2RlZ3JlZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlcl9pZD17aW5qLnRyYWNlcl9pZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzX2V4dD17aW5qLmNlbGxzX2V4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxzX2ludHI9e2luai5jZWxsc19pbnRyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZW5ndGg9e3N0cmVuZ3RofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5qZWN0aW9uPXtpbmp9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXBzZT17aW5qLmNvbGxhcHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZT17dGhpcy5wcm9wcy5tb2RlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChhcHAucGFnZSA9PSAnbWFpbjMnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmplY3Rpb25zLWluLWFyZWFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5mby1sYWJlbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vIGFyZWEgc2VsZWN0ZWQuPGJyLz48YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBsZWFzZSBzZWxlY3QgYW4gYXJlYSBieSBjbGlja2luZyBpdCBvbiB0aGUgZ3JhcGggdG8gc2VlIGRldGFpbGVkIGluZm9ybWF0aW9uIG9uIHRoZSByZXRyb2dyYWRlIGNvbm5lY3Rpb25zLlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5qZWN0aW9ucy1pbi1hcmVhXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImluZm8tbGFiZWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBObyBhcmVhIHNlbGVjdGVkLjxici8+PGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQbGVhc2Ugc2VsZWN0IGFuIGFyZWEgYnkgY2xpY2tpbmcgaXQgb24gdGhlIG1hdHJpeCB0byBzZWUgZGV0YWlsZWQgaW5mb3JtYXRpb24gb24gdGhlIHJldHJvZ3JhZGUgY29ubmVjdGlvbnMuXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBqcy9jb21wb25lbnRzL0luamVjdGlvbkxpc3QucmVhY3QuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBU0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUF2QkE7Ozs7Ozs7OztBQXdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBZEE7QUFrQkE7QUFDQTs7O0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBbUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFRQTtBQUNBO0FBakVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBa0NBO0FBR0E7QUFDQTtBQUlBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUtBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFKQTtBQUZBO0FBL0JBO0FBREE7QUFEQTtBQStDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFuRUE7QUFxRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBRkE7QUFPQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBakJBO0FBd0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBREE7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQVhBO0FBREE7QUFMQTtBQXFCQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBL0NBO0FBb0RBOzs7Ozs7QUFFQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFNQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTs7Ozs7O0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQUVBO0FBRkE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFBQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBY0E7QUEzQkE7QUFGQTtBQWlDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBREE7QUFBQTtBQURBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUFBO0FBREE7QUFPQTtBQUNBO0FBQ0E7Ozs7OztBQTNHQTtBQTZHQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 22:
/* unknown exports provided */
/* all exports used */
/*!*************************!*\
  !*** ./js/lib/modal.js ***!
  \*************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar modalFactory = __webpack_require__(/*! boron/modalFactory */ 230);\nvar insertKeyframesRule = __webpack_require__(/*! domkit/insertKeyframesRule */ 234);\nvar appendVendorPrefix = __webpack_require__(/*! domkit/appendVendorPrefix */ 76);\n\nvar animation = {\n    show: {\n        animationDuration: '0s',\n        animationTimingFunction: 'cubic-bezier(0.6,0,0.4,1)'\n    },\n    hide: {\n        animationDuration: '0s',\n        animationTimingFunction: 'ease-out'\n    },\n    showContentAnimation: insertKeyframesRule({\n        '0%': {\n            opacity: 0,\n            transform: 'scale3d(0, 0, 1)'\n        },\n        '100%': {\n            opacity: 1,\n            transform: 'scale3d(1, 1, 1)'\n        }\n    }),\n\n    hideContentAnimation: insertKeyframesRule({\n        '0%': {\n            opacity: 1\n        },\n        '100%': {\n            opacity: 0,\n            transform: 'scale3d(0.5, 0.5, 1)'\n        }\n    }),\n\n    showBackdropAnimation: insertKeyframesRule({\n        '0%': {\n            opacity: 0\n        },\n        '100%': {\n            opacity: 0.9\n        }\n    }),\n\n    hideBackdropAnimation: insertKeyframesRule({\n        '0%': {\n            opacity: 0.9\n        },\n        '100%': {\n            opacity: 0\n        }\n    })\n};\n\nvar showAnimation = animation.show;\nvar hideAnimation = animation.hide;\nvar showContentAnimation = animation.showContentAnimation;\nvar hideContentAnimation = animation.hideContentAnimation;\nvar showBackdropAnimation = animation.showBackdropAnimation;\nvar hideBackdropAnimation = animation.hideBackdropAnimation;\n\nvar factory = modalFactory({\n    getRef: function getRef(willHidden) {\n        return 'content';\n    },\n    getModalStyle: function getModalStyle(willHidden) {\n        return appendVendorPrefix({\n            zIndex: 1050,\n            position: \"fixed\",\n            width: \"500px\",\n            transform: \"translate3d(-50%, -50%, 0)\",\n            top: \"50%\",\n            left: \"50%\"\n        });\n    },\n    getBackdropStyle: function getBackdropStyle(willHidden) {\n        return appendVendorPrefix({\n            position: \"fixed\",\n            top: 0,\n            right: 0,\n            bottom: 0,\n            left: 0,\n            zIndex: 1040,\n            backgroundColor: \"#373A47\",\n            animationFillMode: 'forwards',\n            animationDuration: '0s',\n            animationName: willHidden ? hideBackdropAnimation : showBackdropAnimation,\n            animationTimingFunction: (willHidden ? hideAnimation : showAnimation).animationTimingFunction\n        });\n    },\n    getContentStyle: function getContentStyle(willHidden) {\n        return appendVendorPrefix({\n            margin: 0,\n            backgroundColor: \"white\",\n            animationDuration: (willHidden ? hideAnimation : showAnimation).animationDuration,\n            animationFillMode: 'forwards',\n            animationName: willHidden ? hideContentAnimation : showContentAnimation,\n            animationTimingFunction: (willHidden ? hideAnimation : showAnimation).animationTimingFunction\n        });\n    }\n});\n\nvar defaultModalStyle = exports.defaultModalStyle = {\n    width: '80%',\n    maxWidth: '1200px',\n    scrollX: 'auto',\n    overflow: 'scroll',\n    maxHeight: '100%'\n\n};\nexports.default = factory;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvbGliL21vZGFsLmpzPzZkODQiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIG1vZGFsRmFjdG9yeSA9IHJlcXVpcmUoJ2Jvcm9uL21vZGFsRmFjdG9yeScpO1xudmFyIGluc2VydEtleWZyYW1lc1J1bGUgPSByZXF1aXJlKCdkb21raXQvaW5zZXJ0S2V5ZnJhbWVzUnVsZScpO1xudmFyIGFwcGVuZFZlbmRvclByZWZpeCA9IHJlcXVpcmUoJ2RvbWtpdC9hcHBlbmRWZW5kb3JQcmVmaXgnKTtcblxudmFyIGFuaW1hdGlvbiA9IHtcbiAgICBzaG93OiB7XG4gICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiAnMHMnLFxuICAgICAgICBhbmltYXRpb25UaW1pbmdGdW5jdGlvbjogJ2N1YmljLWJlemllcigwLjYsMCwwLjQsMSknXG4gICAgfSxcbiAgICBoaWRlOiB7XG4gICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiAnMHMnLFxuICAgICAgICBhbmltYXRpb25UaW1pbmdGdW5jdGlvbjogJ2Vhc2Utb3V0J1xuICAgIH0sXG4gICAgc2hvd0NvbnRlbnRBbmltYXRpb246IGluc2VydEtleWZyYW1lc1J1bGUoe1xuICAgICAgICAnMCUnOiB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUzZCgwLCAwLCAxKSdcbiAgICAgICAgfSxcbiAgICAgICAgJzEwMCUnOiB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUzZCgxLCAxLCAxKSdcbiAgICAgICAgfVxuICAgIH0pLFxuXG4gICAgaGlkZUNvbnRlbnRBbmltYXRpb246IGluc2VydEtleWZyYW1lc1J1bGUoe1xuICAgICAgICAnMCUnOiB7XG4gICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgIH0sXG4gICAgICAgICcxMDAlJzoge1xuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlM2QoMC41LCAwLjUsIDEpJ1xuICAgICAgICB9XG4gICAgfSksXG5cbiAgICBzaG93QmFja2Ryb3BBbmltYXRpb246IGluc2VydEtleWZyYW1lc1J1bGUoe1xuICAgICAgICAnMCUnOiB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgIH0sXG4gICAgICAgICcxMDAlJzoge1xuICAgICAgICAgICAgb3BhY2l0eTogMC45XG4gICAgICAgIH0sXG4gICAgfSksXG5cbiAgICBoaWRlQmFja2Ryb3BBbmltYXRpb246IGluc2VydEtleWZyYW1lc1J1bGUoe1xuICAgICAgICAnMCUnOiB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwLjlcbiAgICAgICAgfSxcbiAgICAgICAgJzEwMCUnOiB7XG4gICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgIH1cbiAgICB9KVxufTtcblxudmFyIHNob3dBbmltYXRpb24gPSBhbmltYXRpb24uc2hvdztcbnZhciBoaWRlQW5pbWF0aW9uID0gYW5pbWF0aW9uLmhpZGU7XG52YXIgc2hvd0NvbnRlbnRBbmltYXRpb24gPSBhbmltYXRpb24uc2hvd0NvbnRlbnRBbmltYXRpb247XG52YXIgaGlkZUNvbnRlbnRBbmltYXRpb24gPSBhbmltYXRpb24uaGlkZUNvbnRlbnRBbmltYXRpb247XG52YXIgc2hvd0JhY2tkcm9wQW5pbWF0aW9uID0gYW5pbWF0aW9uLnNob3dCYWNrZHJvcEFuaW1hdGlvbjtcbnZhciBoaWRlQmFja2Ryb3BBbmltYXRpb24gPSBhbmltYXRpb24uaGlkZUJhY2tkcm9wQW5pbWF0aW9uO1xuXG5jb25zdCBmYWN0b3J5ID0gbW9kYWxGYWN0b3J5KHtcbiAgICBnZXRSZWY6IGZ1bmN0aW9uKHdpbGxIaWRkZW4pIHtcbiAgICAgICAgcmV0dXJuICdjb250ZW50JztcbiAgICB9LFxuICAgIGdldE1vZGFsU3R5bGU6IGZ1bmN0aW9uKHdpbGxIaWRkZW4pIHtcbiAgICAgICAgcmV0dXJuIGFwcGVuZFZlbmRvclByZWZpeCh7XG4gICAgICAgICAgICB6SW5kZXg6IDEwNTAsXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJmaXhlZFwiLFxuICAgICAgICAgICAgd2lkdGg6IFwiNTAwcHhcIixcbiAgICAgICAgICAgIHRyYW5zZm9ybTogXCJ0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKVwiLFxuICAgICAgICAgICAgdG9wOiBcIjUwJVwiLFxuICAgICAgICAgICAgbGVmdDogXCI1MCVcIlxuICAgICAgICB9KVxuICAgIH0sXG4gICAgZ2V0QmFja2Ryb3BTdHlsZTogZnVuY3Rpb24od2lsbEhpZGRlbikge1xuICAgICAgICByZXR1cm4gYXBwZW5kVmVuZG9yUHJlZml4KHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICB6SW5kZXg6IDEwNDAsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzM3M0E0N1wiLFxuICAgICAgICAgICAgYW5pbWF0aW9uRmlsbE1vZGU6ICdmb3J3YXJkcycsXG4gICAgICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogJzBzJyxcbiAgICAgICAgICAgIGFuaW1hdGlvbk5hbWU6IHdpbGxIaWRkZW4gPyBoaWRlQmFja2Ryb3BBbmltYXRpb24gOiBzaG93QmFja2Ryb3BBbmltYXRpb24sXG4gICAgICAgICAgICBhbmltYXRpb25UaW1pbmdGdW5jdGlvbjogKHdpbGxIaWRkZW4gPyBoaWRlQW5pbWF0aW9uIDogc2hvd0FuaW1hdGlvbikuYW5pbWF0aW9uVGltaW5nRnVuY3Rpb25cbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRDb250ZW50U3R5bGU6IGZ1bmN0aW9uKHdpbGxIaWRkZW4pIHtcbiAgICAgICAgcmV0dXJuIGFwcGVuZFZlbmRvclByZWZpeCh7XG4gICAgICAgICAgICBtYXJnaW46IDAsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwid2hpdGVcIixcbiAgICAgICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiAod2lsbEhpZGRlbiA/IGhpZGVBbmltYXRpb24gOiBzaG93QW5pbWF0aW9uKS5hbmltYXRpb25EdXJhdGlvbixcbiAgICAgICAgICAgIGFuaW1hdGlvbkZpbGxNb2RlOiAnZm9yd2FyZHMnLFxuICAgICAgICAgICAgYW5pbWF0aW9uTmFtZTogd2lsbEhpZGRlbiA/IGhpZGVDb250ZW50QW5pbWF0aW9uIDogc2hvd0NvbnRlbnRBbmltYXRpb24sXG4gICAgICAgICAgICBhbmltYXRpb25UaW1pbmdGdW5jdGlvbjogKHdpbGxIaWRkZW4gPyBoaWRlQW5pbWF0aW9uIDogc2hvd0FuaW1hdGlvbikuYW5pbWF0aW9uVGltaW5nRnVuY3Rpb25cbiAgICAgICAgfSlcbiAgICB9XG59KTtcblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRNb2RhbFN0eWxlID0ge1xuICAgIHdpZHRoOiAnODAlJyxcbiAgICBtYXhXaWR0aDogJzEyMDBweCcsXG4gICAgc2Nyb2xsWDogJ2F1dG8nLFxuICAgIG92ZXJmbG93OiAnc2Nyb2xsJyxcbiAgICBtYXhIZWlnaHQ6ICcxMDAlJ1xuXG59O1xuZXhwb3J0IGRlZmF1bHQgZmFjdG9yeTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBqcy9saWIvbW9kYWwuanMiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFMQTtBQUNBO0FBVUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUpBO0FBQ0E7QUFTQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUpBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFEQTtBQUpBO0FBdkNBO0FBQ0E7QUFnREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUF0Q0E7QUFDQTtBQXdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 221:
/* unknown exports provided */
/* all exports used */
/*!********************************************!*\
  !*** ./js/components/AnalysisApp.react.js ***!
  \********************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _MainSection = __webpack_require__(/*! ./MainSection.react */ 226);\n\nvar _MainSection2 = _interopRequireDefault(_MainSection);\n\nvar _MainGraph = __webpack_require__(/*! ./MainGraph.react */ 224);\n\nvar _MainGraph2 = _interopRequireDefault(_MainGraph);\n\nvar _MainMatrix = __webpack_require__(/*! ./MainMatrix.react */ 225);\n\nvar _MainMatrix2 = _interopRequireDefault(_MainMatrix);\n\nvar _MainSection3 = __webpack_require__(/*! ./MainSection2.react */ 227);\n\nvar _MainSection4 = _interopRequireDefault(_MainSection3);\n\nvar _SLN = __webpack_require__(/*! ./SLN.react */ 229);\n\nvar _SLN2 = _interopRequireDefault(_SLN);\n\nvar _Header = __webpack_require__(/*! ./Header.react */ 223);\n\nvar _Header2 = _interopRequireDefault(_Header);\n\nvar _Footer = __webpack_require__(/*! ./Footer.react */ 73);\n\nvar _Footer2 = _interopRequireDefault(_Footer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nfunction getState() {\n    return {};\n}\n\nvar AnalysisApp = function (_React$Component) {\n    _inherits(AnalysisApp, _React$Component);\n\n    function AnalysisApp(props, context) {\n        _classCallCheck(this, AnalysisApp);\n\n        var _this = _possibleConstructorReturn(this, (AnalysisApp.__proto__ || Object.getPrototypeOf(AnalysisApp)).call(this, props, context));\n\n        _this.state = getState();\n        _lodash2.default.bindAll(_this, 'handleChange');\n        return _this;\n    }\n\n    _createClass(AnalysisApp, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            //AppStore.addChangeListener(this.handleChange);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {}\n        //AppStore.removeChangeListener(this.handleChange);\n\n\n        /**\n         * @return {object}\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            var page = null;\n            switch (app.page) {\n                case 'graph':\n                    {\n                        page = _react2.default.createElement(_MainGraph2.default, null);\n                    }\n                    break;\n                case 'matrix':\n                    {\n                        page = _react2.default.createElement(_MainMatrix2.default, null);\n                    }\n                    break;\n                case 'main2':\n                    {\n                        page = _react2.default.createElement(_MainSection4.default, null);\n                    }\n                    break;\n                case 'sln':\n                    {\n                        page = _react2.default.createElement(_SLN2.default, null);\n                    }\n                    break;\n                default:\n                    // default no-op;\n                    break;\n\n            }\n            return _react2.default.createElement(\n                'div',\n                { className: 'react-root' },\n                page\n            );\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange() {\n            this.setState(getState());\n        }\n    }]);\n\n    return AnalysisApp;\n}(_react2.default.Component);\n\nexports.default = AnalysisApp;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2pzL2NvbXBvbmVudHMvQW5hbHlzaXNBcHAucmVhY3QuanM/MTZhMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMvQWN0aW9ucyc7XG5pbXBvcnQgQXBwU3RvcmUgZnJvbSAnLi4vc3RvcmVzL0FwcFN0b3JlJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgTWFpblNlY3Rpb24gZnJvbSAnLi9NYWluU2VjdGlvbi5yZWFjdCc7XG5pbXBvcnQgTWFpbkdyYXBoIGZyb20gJy4vTWFpbkdyYXBoLnJlYWN0JztcbmltcG9ydCBNYWluTWF0cml4IGZyb20gJy4vTWFpbk1hdHJpeC5yZWFjdCc7XG5pbXBvcnQgTWFpblNlY3Rpb24yIGZyb20gJy4vTWFpblNlY3Rpb24yLnJlYWN0JztcbmltcG9ydCBTTE4gZnJvbSAnLi9TTE4ucmVhY3QnO1xuaW1wb3J0IEhlYWRlciBmcm9tICcuL0hlYWRlci5yZWFjdCc7XG5pbXBvcnQgRm9vdGVyIGZyb20gJy4vRm9vdGVyLnJlYWN0JztcblxuZnVuY3Rpb24gZ2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIHtcbiAgICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbmFseXNpc0FwcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMsIGNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIocHJvcHMsIGNvbnRleHQpO1xuICAgICAgICB0aGlzLnN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICAgICAgXy5iaW5kQWxsKHRoaXMsICdoYW5kbGVDaGFuZ2UnKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgLy9BcHBTdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLmhhbmRsZUNoYW5nZSk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIC8vQXBwU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5oYW5kbGVDaGFuZ2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge29iamVjdH1cbiAgICAgKi9cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBwYWdlID0gbnVsbDtcbiAgICAgICAgc3dpdGNoIChhcHAucGFnZSkge1xuICAgICAgICAgICAgY2FzZSAnZ3JhcGgnOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZSA9ICg8TWFpbkdyYXBoIC8+KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtYXRyaXgnOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZSA9ICg8TWFpbk1hdHJpeCAvPik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWFpbjInOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZSA9ICg8TWFpblNlY3Rpb24yIC8+KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdzbG4nOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcGFnZSA9ICg8U0xOIC8+KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIGRlZmF1bHQgbm8tb3A7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWFjdC1yb290XCI+XG4gICAgICAgICAgICAgICAge3BhZ2V9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoZ2V0U3RhdGUoKSk7XG4gICAgfVxuXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8ganMvY29tcG9uZW50cy9BbmFseXNpc0FwcC5yZWFjdC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFTQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7Ozs7QUFwQkE7Ozs7Ozs7OztBQXFCQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSUE7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF4QkE7QUEwQkE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBOzs7QUFFQTtBQUNBO0FBQ0E7Ozs7QUF2REE7QUFDQTtBQURBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 223:
/* unknown exports provided */
/* all exports used */
/*!***************************************!*\
  !*** ./js/components/Header.react.js ***!
  \***************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Header = function (_React$Component) {\n    _inherits(Header, _React$Component);\n\n    function Header(props, context) {\n        _classCallCheck(this, Header);\n\n        var _this = _possibleConstructorReturn(this, (Header.__proto__ || Object.getPrototypeOf(Header)).call(this, props, context));\n\n        _lodash2.default.bindAll(_this, 'handleChange');\n        _this.state = {\n            stage: 'initial'\n        };\n        return _this;\n    }\n\n    _createClass(Header, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _AppStore2.default.addChangeListener(this.handleChange);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _AppStore2.default.removeChangeListener(this.handleChange);\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange() {}\n        //this.setState({stage: AppStore.getActiveStage()});\n\n        /**\n         * @return {object}\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            return _react2.default.createElement(\n                'div',\n                { className: 'row-wrapper' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'outer-container' },\n                    _react2.default.createElement(\n                        'header',\n                        null,\n                        _react2.default.createElement('img', { id: 'logo', src: 'static/images/logo.svg' }),\n                        _react2.default.createElement(\n                            'nav',\n                            null,\n                            _react2.default.createElement(\n                                'a',\n                                { href: '#' },\n                                'Home'\n                            ),\n                            _react2.default.createElement(\n                                'a',\n                                { href: '#' },\n                                'About'\n                            ),\n                            _react2.default.createElement(\n                                'a',\n                                { href: '#' },\n                                'Contact'\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return Header;\n}(_react2.default.Component);\n\nexports.default = Header;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2pzL2NvbXBvbmVudHMvSGVhZGVyLnJlYWN0LmpzPzg4ZTkiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL0FjdGlvbnMnO1xuaW1wb3J0IEFwcFN0b3JlIGZyb20gJy4uL3N0b3Jlcy9BcHBTdG9yZSc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWFkZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzLCBjb250ZXh0KSB7XG4gICAgICAgIHN1cGVyKHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgXy5iaW5kQWxsKHRoaXMsICdoYW5kbGVDaGFuZ2UnKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHN0YWdlOiAnaW5pdGlhbCdcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgQXBwU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5oYW5kbGVDaGFuZ2UpO1xuXG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBBcHBTdG9yZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih0aGlzLmhhbmRsZUNoYW5nZSk7XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZSgpIHtcbiAgICAgICAgLy90aGlzLnNldFN0YXRlKHtzdGFnZTogQXBwU3RvcmUuZ2V0QWN0aXZlU3RhZ2UoKX0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAgICovXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3ctd3JhcHBlclwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm91dGVyLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIDxoZWFkZXI+XG4gICAgICAgICAgICAgICAgICA8aW1nIGlkPVwibG9nb1wiIHNyYz1cInN0YXRpYy9pbWFnZXMvbG9nby5zdmdcIiAvPlxuICAgICAgICAgICAgICAgICAgPG5hdj5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNcIj5Ib21lPC9hPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiPkFib3V0PC9hPlxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiPkNvbnRhY3Q8L2E+XG4gICAgICAgICAgICAgICAgICA8L25hdj5cbiAgICAgICAgICAgICAgICA8L2hlYWRlcj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8ganMvY29tcG9uZW50cy9IZWFkZXIucmVhY3QuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBU0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7Ozs7O0FBYkE7Ozs7Ozs7OztBQWNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQU1BO0FBQ0E7OztBQUFBO0FBQ0E7QUFFQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUhBO0FBRkE7QUFEQTtBQURBO0FBYUE7Ozs7QUFwQ0E7QUFDQTtBQURBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 224:
/* unknown exports provided */
/* all exports used */
/*!******************************************!*\
  !*** ./js/components/MainGraph.react.js ***!
  \******************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _d = __webpack_require__(/*! d3 */ 12);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _MainFlne = __webpack_require__(/*! ./MainFlne.react */ 24);\n\nvar _MainFlne2 = _interopRequireDefault(_MainFlne);\n\nvar _ViewSwitch = __webpack_require__(/*! ./ViewSwitch.react */ 42);\n\nvar _ViewSwitch2 = _interopRequireDefault(_ViewSwitch);\n\nvar _InjectionList = __webpack_require__(/*! ./InjectionList.react */ 21);\n\nvar _InjectionList2 = _interopRequireDefault(_InjectionList);\n\nvar _classnames = __webpack_require__(/*! classnames */ 13);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _AppDispatcher = __webpack_require__(/*! ../dispatcher/AppDispatcher */ 18);\n\nvar _AppDispatcher2 = _interopRequireDefault(_AppDispatcher);\n\nvar _utils = __webpack_require__(/*! ../lib/utils */ 16);\n\nvar _connectivity = __webpack_require__(/*! ../lib/connectivity */ 30);\n\nvar _ColorBar = __webpack_require__(/*! ./ColorBar.react */ 26);\n\nvar _ColorBar2 = _interopRequireDefault(_ColorBar);\n\nvar _QuickLinks = __webpack_require__(/*! ./QuickLinks.react */ 40);\n\nvar _QuickLinks2 = _interopRequireDefault(_QuickLinks);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n//\n//function toTitleCase(str) {\n//    //return str.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\n//    return str.charAt(0).toUpperCase() + str.substr(1);\n//}\n\nvar DATA_BASE = '/static/data/';\nvar IMG_BASE = '/static/images/';\n\nvar MainGraph = function (_React$Component) {\n    _inherits(MainGraph, _React$Component);\n\n    function MainGraph(props, context) {\n        _classCallCheck(this, MainGraph);\n\n        window.d3js = d3;\n\n        var _this = _possibleConstructorReturn(this, (MainGraph.__proto__ || Object.getPrototypeOf(MainGraph)).call(this, props, context));\n\n        _lodash2.default.bindAll(_this, 'handleChange', 'handleMouseOverNode', 'handleMouseOutNode', 'handleClick', 'highlightNode', 'handleDownloadSVG', 'handleDownloadGraph', 'handleDownloadCSV', 'ajaxLoad', 'handleSwitchToMatrixView', 'handleMouseOverEdge', 'handleMouseOutEdge', 'handleFocusViewer', 'handleBlurViewer');\n        var state = {\n            strengthExists: false,\n            ajaxDone: false,\n            controlExpanded: true,\n            focused: false\n        };\n\n        var focused = localStorage.getItem('focusedView');\n        var that = _this;\n        if (focused) {\n            state.focused = true;\n            state.controlExpanded = false;\n            $('body').addClass('focused');\n        }\n        _this.state = state;\n        _this._matrix = _AppStore2.default.getConnectivity();\n        _this._areas = {\n            byAbbrev: {},\n            byIndex: {},\n            byId: {}\n        };\n        _this.pendingAjax = [];\n        var pendingAjax = _this.pendingAjax;\n        _this.ajaxLoad('injections_static.json', function (inj) {\n            _this.static_inj = inj;\n            _lodash2.default.each(_this.static_inj, function (inj, key) {\n                inj.name = key;\n                inj.collapse = true;\n            });\n            _Actions2.default.saveInjectionsStatic(inj);\n        });\n        _this.ajaxLoad('flne_gmeannz_areas.json', function (flne) {\n            _this.flne_per_area = flne;\n        });\n        _this.ajaxLoad('flne_gmeannz_injections.json', function (flne) {\n            _this.flne_per_injection = flne;\n            _this.setState({ flne_per_injection: flne });\n        });\n        _this.ajaxLoad('structures.json', function (struct) {\n            _Actions2.default.processAreas(struct);\n            _lodash2.default.each(struct, function (s) {\n                var txt = s.fullname;\n                txt = txt.charAt(0).toUpperCase() + txt.slice(1);\n                s.fullname = txt;\n                var cc = s.color;\n                s.hex_color = 'rgba(' + cc[0] + ',' + cc[1] + ',' + cc[2] + ', 1)';\n            });\n            _this.atlas_struct = struct;\n        });\n        _this.ajaxLoad('connectivity_1_0_1.json', function (conn) {\n\n            var node_lookup = {};\n            var nodes = [];\n            _lodash2.default.each(conn.nodes, function (node, i) {\n                node_lookup[i] = node;\n                nodes.push({\n                    nodeName: node,\n                    abbrev: node,\n                    index: i\n                });\n                _this._areas.byIndex[i] = { abbrev: node, serial: i };\n                _this._areas.byAbbrev[node] = _this._areas.byIndex[i];\n            });\n            var links = [];\n            _lodash2.default.each(conn.links, function (link, i) {\n                var target = node_lookup[link[0]];\n                var source = node_lookup[link[1]];\n                links.push({\n                    target: link[0],\n                    source: link[1],\n                    value: link[2]\n                });\n            });\n            _this.nodes = nodes;\n            _this.links = links;\n        });\n        _this.ajaxLoad('marmoset_brain_connectivity_FLN.json', function (data) {\n            _this._connectivity_data = data;\n        });\n        return _this;\n    }\n\n    _createClass(MainGraph, [{\n        key: 'ajaxLoad',\n        value: function ajaxLoad(file, callback) {\n            var _this2 = this;\n\n            this.pendingAjax.push(file);\n            d3.json(DATA_BASE + file, function (error, data) {\n                if (error) throw error;\n                callback(data);\n                _lodash2.default.pull(_this2.pendingAjax, file);\n                _this2.ajaxProgress();\n            });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _AppStore2.default.addChangeListener(this.handleChange);\n            var that = this;\n            $(window).on('keyup', function (e) {\n                if (e.keyCode == 70 && e.shiftKey) {\n                    /* 70 for letter 'f' */\n                    if (that.state.focused) {\n                        that.handleBlurViewer();\n                    } else {\n                        that.handleFocusViewer();\n                    }\n                } else if (e.keyCode == 77 && e.shiftKey) {\n                    window.location.href = \"/index.html\";\n                }\n            });\n        }\n    }, {\n        key: 'initialDraw',\n        value: function initialDraw() {\n            var that = this;\n            var width = 860,\n                height = 880;\n            this.graph_parent = d3.select('#d3');\n            var svg = this.graph_parent.append('svg').attr('width', width).attr('height', height).attr('xmlns:xlink', 'http://www.w3.org/1999/xlink');\n\n            svg.append(\"svg:defs\").selectAll(\"marker\").data([\"end\", 'end-short']) // Different link/path types can be defined here\n            .enter().append(\"marker\") // This section adds in the arrows\n            .attr(\"id\", String).attr(\"viewBox\", \"0 -5 10 10\")\n            //.attr(\"refX\", d => (d == 'end' ? 40 : 75))\n            .attr('refX', 35).attr(\"refY\", function (d) {\n                return 0;\n            }).attr(\"markerWidth\", 10).attr(\"markerHeight\", 10).attr(\"orient\", \"auto\").style('stroke', '#333333').style('fill', '#333333').append(\"svg:path\").attr(\"d\", \"M1,-4L9,0L1,4\");\n            svg.append('g').style('opacity', '0.1').attr('transform', 'translate(0, 0)').append('image').attr('width', 842).attr('height', 882).attr('xlink:href', IMG_BASE + 'all_injections_on_flatmap.png');\n            svg = svg.append('g').attr('transform', 'translate(20, -50)');\n            var color = d3.scaleOrdinal(d3.schemeCategory20);\n            var flatmapScaleX = d3.scaleLinear().range([0, 960]);\n            var flatmapScaleY = d3.scaleLinear().range([0, 960]);\n            flatmapScaleX.domain([-20, 20]);\n            flatmapScaleY.domain([20, -20]);\n\n            // prepare all the structures\n            var atlas_struct = this.atlas_struct;\n\n            // abbrev_lookup to look for an area by node abbre\n            var abbrev_lookup = {};\n            _lodash2.default.each(atlas_struct, function (area) {\n                abbrev_lookup[area.abbrev] = area;\n                var cc = area.color;\n                area.hex_color = 'rgba(' + cc[0] + ',' + cc[1] + ',' + cc[2] + ', 1)';\n            });\n            this.abbrev_lookup = abbrev_lookup;\n\n            // processing the connectivity data\n            // Compute the distinct nodes from the links.\n            this.nodes.forEach(function (n, i) {\n                n.area = abbrev_lookup[n.abbrev];\n            });\n            var z = d3.scaleLog().domain([1, 676]).clamp(true);\n            var link_hash = {};\n            var alphaScale = d3.scaleLinear().range([.2, .75]);\n            alphaScale.domain([0, 60]).clamp(true);\n            this.links.forEach(function (link) {\n                link.source = that.nodes[link.source].area;\n                link.target = that.nodes[link.target].area;\n                link.source.to = link.source.to || {};\n                link.source.to[link.target.abbrev] = link.target;\n                link.target.from = link.target.from || {};\n                link.target.from[link.source.abbrev] = link.source;\n\n                link.value = +link.value;\n                link.alpha = alphaScale(link.value);\n                //link_hash[link.target.nodeName] = link_hash[link.target.nodeName] || {};\n                //link_hash[link.target.nodeName][link.source.nodeName] = link;\n            });\n\n            //let maxZ = 676;\n            var links = svg.append('g').attr('class', 'links').selectAll('.link').data(this.links).enter().append('g').attr('class', function (d) {\n                return 'link';\n            }).attr('data-from', function (d) {\n                return d.source.abbrev;\n            }).attr('data-to', function (d) {\n                return d.target.abbrev;\n            }).attr('data-alpha', function (d) {\n                return d.alpha;\n            }).style('opacity', function (d) {\n                return d.alpha;\n            }).each(function (d, i) {\n                d3.select(this).selectAll('.link-path').data([d]).enter().append('path').attr('class', 'link-path')\n                //.attr('marker-end', d => d.semi ? 'url(#end-short)' : '')\n                //.attr('stroke-width', function(d) { return Math.sqrt(d.value); });\n                .attr('stroke-width', function (d) {\n                    return 1;\n                }).style('stroke', function (d) {\n                    return 'rgb(50, 50, 50)';\n                }).attr('d', function (d) {\n                    var s_coord = abbrev_lookup[d.source.abbrev].flatmap_coord;\n                    var sx = flatmapScaleX(s_coord[0]);\n                    var sy = flatmapScaleY(s_coord[1]);\n                    var t_coord = abbrev_lookup[d.target.abbrev].flatmap_coord;\n                    var tx = flatmapScaleX(t_coord[0]);\n                    var ty = flatmapScaleY(t_coord[1]);\n                    return 'M' + sx + ',' + sy + ' L' + tx + ',' + ty;\n                }).on('mouseover', function (d, i) {\n                    that.handleMouseOverEdge(this, d);\n                }).on('mouseout', function (d, i) {\n                    that.handleMouseOutEdge(this, d);\n                });\n            });\n            var nodes = svg.append('g').attr('class', 'nodes').selectAll('.node').data(this.nodes).enter().append('g').attr('class', 'node').each(function (d, i) {\n                d3.select(this).selectAll('.node-circle').data([d]).enter().append('circle').attr('r', 18).attr('class', 'node-circle').attr('fill', function (d) {\n                    return d.area.hex_color;\n                }).style('stroke', function (d) {\n                    return 'rgba(0, 0, 0, 0.5)';\n                }).attr('cx', function (d) {\n                    return flatmapScaleX(abbrev_lookup[d.abbrev].flatmap_coord[0]);\n                }).attr('cy', function (d) {\n                    return flatmapScaleY(abbrev_lookup[d.abbrev].flatmap_coord[1]);\n                }).on('mouseover', function (d) {\n                    that.handleMouseOverNode(this, d);\n                }).on('mouseout', function (d) {\n                    that.handleMouseOutNode(this, d);\n                }).on('click', function (n) {\n                    // undo any other hovering if happened\n                    //Actions.unhighlightEdge(src, tgt);\n                    //Actions.unboldEdge(src, tgt);\n                    // create the bar chart to show connectivity strength from each area\n                    var currentNode = _AppStore2.default.getNodePicked();\n                    //let area = that._areas.byAbbrev[n.abbrev];\n                    var area = n.area;\n                    if (currentNode && currentNode != area) {\n                        _Actions2.default.unhighlightEdge(area, currentNode);\n                        _Actions2.default.unboldEdge(area, currentNode);\n                    }\n                    that.handleClick(n);\n                    that.clicked = true;\n\n                    _Actions2.default.pickNode(area);\n                    // continue to furnish injection detail\n                    var injections = _lodash2.default.filter(that.static_inj, { abbrev: n.abbrev });\n                    _Actions2.default.nodeDetail(injections);\n                    var x_ = d3.event.pageX + 24;\n                    var y_ = d3.event.pageY - 20;\n                    var flne = [];\n                    var conn = _AppStore2.default.getConnectivity();\n                    _lodash2.default.each(conn.get_by_target(area), function (s) {\n                        if (s.source !== undefined && s.flne > 0) {\n                            flne.push({\n                                source: s.source.abbrev,\n                                gmeannz: s.gmeannz,\n                                log10_flne: Math.log10(s.flne)\n                            });\n                        }\n                    });\n                    (0, _utils.showTooltipTargetSummary)({\n                        target_area: area,\n                        source_area: area,\n                        matrix: that._matrix,\n                        x: x_,\n                        y: y_ });\n                });\n                d3.select(this).selectAll('.text').data([d]).enter().append('text').attr('class', 'text').text(function (d) {\n                    return d.abbrev.replace('-', '/');\n                }).attr('text-anchor', 'middle').attr(\"pointer-events\", \"none\").attr('x', function (d) {\n                    return flatmapScaleX(abbrev_lookup[d.abbrev].flatmap_coord[0]);\n                }).attr('y', function (d) {\n                    return flatmapScaleY(abbrev_lookup[d.abbrev].flatmap_coord[1]) + 3;\n                });\n            });\n            that.d3_nodes = nodes;\n            that.d3_links = links;\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            return true;\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _AppStore2.default.removeChangeListener(this.handleChange);\n        }\n    }, {\n        key: 'ajaxProgress',\n        value: function ajaxProgress() {\n            var _this3 = this;\n\n            if (this.pendingAjax.length == 0 && !this.state.ajaxDone) {\n                this.setState({ ajaxDone: true }, function () {\n                    _this3.prepare();\n                    _this3.initialDraw();\n                });\n            }\n        }\n    }, {\n        key: 'prepare',\n        value: function prepare() {\n            var _this4 = this;\n\n            var that = this;\n            //let abbrev_lookup = {};\n            _lodash2.default.each(this.atlas_struct, function (area) {\n                var _area = _this4._areas.byAbbrev[area.abbrev];\n                _lodash2.default.assign(_area, area);\n                _this4._areas.byId[_area.id] = _area;\n                var injections = _lodash2.default.filter(that.static_inj, { abbrev: area.abbrev });\n                _area.injections = injections;\n            });\n            _Actions2.default.processConnectivity(this._connectivity_data, that.static_inj);\n            var matrix = that._matrix;\n            _lodash2.default.each(this.links, function (link) {\n                var target = that._areas.byIndex[link.target];\n                var source = that._areas.byIndex[link.source];\n                matrix.link(target, source, { target: target, source: source, value: link.value });\n                //matrix[link.target][link.source].z += link.value;\n                //nodes[link.source].count += link.value;\n                //nodes[link.target].count += link.value;\n            });\n            _AppDispatcher2.default.register(function (action) {\n                _AppDispatcher2.default.waitFor([_AppStore2.default.dispatchToken]);\n                switch (action.actionType) {\n                    case 'HIGHLIGHT_EDGE':\n                        {\n                            var from_ = action.from_;\n                            var to = action.to;\n                            var color = action.color || '#ff0000';\n                            var link = d3.selectAll('g.link').filter('[data-from=' + from_.abbrev + ']').filter('[data-to=' + to.abbrev + ']');\n                            if (!link.empty()) {\n                                link.style('opacity', 1).selectAll('.link-path').style('stroke', color);\n                            }\n                            break;\n                        }\n                    case 'UNHIGHLIGHT_EDGE':\n                        {\n                            var _from_ = action.from_;\n                            var _to = action.to;\n                            var _link = d3.selectAll('g.link').filter('[data-from=' + _from_.abbrev + ']').filter('[data-to=' + _to.abbrev + ']');\n                            if (!_link.empty()) {\n                                _link.style('opacity', _link.attr('data-alpha')).selectAll('.link-path').style('stroke', 'rgb(50, 50, 50)');\n                            }\n                            break;\n                        }\n                    case 'BOLD_EDGE':\n                        {\n                            var _from_2 = action.from_;\n                            var _to2 = action.to;\n                            var _link2 = d3.selectAll('g.link').filter('[data-from=' + _from_2.abbrev + ']').filter('[data-to=' + _to2.abbrev + ']');\n                            if (!_link2.empty()) {\n                                _link2.style('marker-end', 'none');\n                            }\n\n                            _link2.selectAll('.link-path').attr('stroke-width', 3);\n                            break;\n                        }\n                    case 'UNBOLD_EDGE':\n                        {\n                            var _from_3 = action.from_;\n                            var _to3 = action.to;\n                            var _link3 = d3.selectAll('g.link').filter('[data-from=' + _from_3.abbrev + ']').filter('[data-to=' + _to3.abbrev + ']');\n                            if (!_link3.empty()) {\n                                _link3.style('marker-end', 'none');\n                            }\n\n                            _link3.style('marker-end', function (d) {\n                                return d.semi ? 'url(#end-short)' : 'url(#end)';\n                            });\n                            _link3.selectAll('.link-path').attr('stroke-width', 1);\n                            break;\n                        }\n                }\n            });\n            // end preparing work, save it to appState\n            _Actions2.default.saveAreas(that._areas);\n        }\n    }, {\n        key: 'getBarWidthFunc',\n        value: function getBarWidthFunc(min, max) {\n            min = -5, max = 0;\n            var func = d3.scaleLinear().domain([min, max]).range([0, 300]);\n            return func;\n        }\n    }, {\n        key: 'highlightNode',\n        value: function highlightNode(n) {\n            //let strength = this.flne_per_area[n.abbrev];\n            var strength = [];\n            var conn = _AppStore2.default.getConnectivity();\n            var areas = _AppStore2.default.getAreas();\n            _lodash2.default.each(conn.get_by_target(areas.getByAbbrev(n.abbrev)), function (s) {\n                if (s.source !== undefined && s.flne > 0) {\n                    strength.push({\n                        source: s.source.abbrev,\n                        gmeannz: s.gmeannz,\n                        log10_flne: Math.log10(s.flne)\n                    });\n                }\n            });\n\n            var emitter = n.area.from || {};\n            this.d3_nodes.classed('semi', function (d, i) {\n                return d.abbrev != n.abbrev;\n            }).classed('active', function (d, i) {\n                return d.abbrev == n.abbrev;\n            }).sort(function (a, b) {\n                if (a.abbrev != n.abbrev) {\n                    return -1;\n                } else {\n                    return 1;\n                }\n            });\n            var flne_arr = _lodash2.default.map(strength, 'log10_flne');\n            var min = _lodash2.default.min(flne_arr),\n                max = _lodash2.default.max(flne_arr);\n            var colorFunc = (0, _utils.getLogColorFunc)(min, max);\n\n            this.d3_nodes.selectAll('.node-circle').attr('r', function (d) {\n                return d.abbrev == n.abbrev ? 26 : 18;\n            }).attr('fill', function (d) {\n                if (d.abbrev in emitter || d.abbrev == n.abbrev) {\n                    var info = _lodash2.default.find(strength, { source: d.abbrev });\n                    if (info) {\n                        return colorFunc(info.log10_flne);\n                    } else if (d.abbrev == n.abbrev) {\n                        return d.area.hex_color;\n                    } else {\n                        return 'rgba(50, 50, 50, .2)';\n                        //return d.area.hex_color;\n                    }\n                } else {\n                    return 'rgba(50, 50, 50, .2)';\n                }\n            });\n            this.d3_links.classed('hidden', function (d) {\n                if (d.target.abbrev != n.abbrev) {\n                    return true;\n                } else {\n                    var info = _lodash2.default.find(strength, { source: d.source.abbrev });\n                    return !info;\n                }\n            }).attr('marker-end', function (d) {\n                return d.semi ? 'url(#end-short)' : 'url(#end)';\n            }).style('opacity', function (d) {\n                return d.alpha;\n            }).selectAll('path').style('stroke', function (d) {\n                return 'rgba(50, 50, 50)';\n            });\n        }\n    }, {\n        key: 'handleClick',\n        value: function handleClick(n) {\n            this.highlightNode(n);\n            /* function to make links interactive after a node is picked\n            this.links.filter(':not(.hidden)')\n            .on('mouseover', function(n) {\n                d3.select(this).style('opacity', 1).selectAll('.link-path').style('stroke', '#ff0000');\n            })\n            .on('mouseout', function(n) {\n                d3.select(this).style('opacity', n.alpha).selectAll('.link-path').style('stroke', 'rgb(50, 50, 50)');\n            })\n            */\n        }\n    }, {\n        key: 'handleMouseOverNode',\n        value: function handleMouseOverNode(elem, data) {\n            var me = d3.select(elem);\n            var pickedNode = _AppStore2.default.getNodePicked();\n            var bbox = elem.getBoundingClientRect();\n            var top = bbox.top + $(document).scrollTop();\n            if (!this.clicked) {\n                this.highlightNode(data);\n                (0, _utils.showTooltipAreaName)({ area: data.area, x: bbox.left, y: top - 50 });\n            } else {\n                var tgt = this._areas.byAbbrev[pickedNode.abbrev];\n                var src = this._areas.byAbbrev[data.area.abbrev];\n                //let self = (tgt == src);\n                //let strength = this.flne_per_area[tgt.abbrev];\n                //let info = _.find(strength, {source: src.abbrev});\n                var strength = [];\n                var conn = _AppStore2.default.getConnectivity();\n                var areas = _AppStore2.default.getAreas();\n                _lodash2.default.each(conn.get_by_target(areas.getByAbbrev(tgt.abbrev)), function (s) {\n                    if (s.source !== undefined && s.flne > 0) {\n                        strength.push({\n                            source: s.source.abbrev,\n                            gmeannz: s.gmeannz,\n                            log10_flne: Math.log10(s.flne)\n                        });\n                    }\n                });\n\n                _Actions2.default.highlightEdge(src, tgt, '#000000');\n                _Actions2.default.boldEdge(src, tgt);\n                var x_ = bbox.left + 50;\n                var y_ = top;\n                (0, _utils.showTooltipTargetSummary)({\n                    target_area: tgt,\n                    source_area: src,\n                    matrix: this._matrix,\n                    x: x_,\n                    y: y_ });\n            }\n        }\n    }, {\n        key: 'handleMouseOutNode',\n        value: function handleMouseOutNode(elem, data) {\n            if (!this.clicked) {\n                this.d3_nodes.classed('semi', false);\n                this.d3_links.classed('hidden', false);\n                this.d3_links.attr('marker-end', '');\n                this.d3_nodes.selectAll('.node-circle').attr('r', 18).attr('fill', function (d) {\n                    return d.area.hex_color;\n                });\n            } else {\n                var me = d3.select(elem);\n                var pickedNode = _AppStore2.default.getNodePicked();\n                var tgt = this._areas.byAbbrev[pickedNode.abbrev];\n                var src = this._areas.byAbbrev[data.area.abbrev];\n                _Actions2.default.unhighlightEdge(src, tgt);\n                _Actions2.default.unboldEdge(src, tgt);\n            }\n            (0, _utils.hideTooltip)();\n        }\n    }, {\n        key: 'handleMouseOverEdge',\n        value: function handleMouseOverEdge(elem, data) {\n            if (this.clicked) {\n                var me = d3.select(elem);\n                var x_ = d3.event.pageX + 24;\n                var y_ = d3.event.pageY - 20;\n                _Actions2.default.highlightEdge(data.source, data.target, '#000000');\n                _Actions2.default.boldEdge(data.source, data.target);\n                (0, _utils.showTooltipTargetSummary)({\n                    target_area: this._areas.byAbbrev[data.target.abbrev],\n                    source_area: this._areas.byAbbrev[data.source.abbrev],\n                    matrix: this._matrix,\n                    x: x_,\n                    y: y_ });\n            }\n        }\n    }, {\n        key: 'handleMouseOutEdge',\n        value: function handleMouseOutEdge(elem, data) {\n            if (this.clicked) {\n                var me = d3.select(elem);\n                _Actions2.default.unhighlightEdge(data.source, data.target);\n                _Actions2.default.unboldEdge(data.source, data.target);\n                (0, _utils.hideTooltip)();\n            }\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange() {\n            this.setState({ nodePicked: _AppStore2.default.getNodePicked() });\n        }\n    }, {\n        key: 'handleDownloadSVG',\n        value: function handleDownloadSVG(e) {\n            var html = this.svg_flne_parent.html();\n            var b64 = btoa(html);\n            var href = 'data:image/svg+xml;base64,\\n' + b64;\n            e.target.href = href;\n        }\n    }, {\n        key: 'handleDownloadCSV',\n        value: function handleDownloadCSV(e) {\n            e.target.href = DATA_BASE + 'individual_areas/flne_area_' + this.state.nodePicked.abbrev + '.csv';\n        }\n    }, {\n        key: 'handleDownloadGraph',\n        value: function handleDownloadGraph(e) {\n            var html = this.graph_parent.html();\n            var b64 = btoa(html);\n            var href = 'data:image/svg+xml;base64,\\n' + b64;\n            e.target.href = href;\n        }\n    }, {\n        key: 'handleSwitchToMatrixView',\n        value: function handleSwitchToMatrixView(e) {\n            window.location.href = '/';\n        }\n    }, {\n        key: 'showDownloadSVGHelp',\n        value: function showDownloadSVGHelp(e) {}\n    }, {\n        key: 'showDownloadCSVHelp',\n        value: function showDownloadCSVHelp(e) {}\n    }, {\n        key: 'hideDownloadSVGHelp',\n        value: function hideDownloadSVGHelp(e) {}\n    }, {\n        key: 'hideDownloadCSVHelp',\n        value: function hideDownloadCSVHelp(e) {}\n    }, {\n        key: 'handleFocusViewer',\n        value: function handleFocusViewer(e) {\n            this.setState({\n                focused: true,\n                controlExpanded: false\n            });\n            $('body').addClass('focused');\n            _Actions2.default.setFocusedViewState(true);\n        }\n    }, {\n        key: 'handleBlurViewer',\n        value: function handleBlurViewer(e) {\n            this.setState({\n                focused: false,\n                controlExpanded: true\n            });\n            $('body').removeClass('focused');\n            _Actions2.default.setFocusedViewState(false);\n        }\n    }, {\n        key: 'noop',\n        value: function noop() {}\n        /**\n         * @return {object}\n         */\n\n    }, {\n        key: 'renderContent',\n        value: function renderContent() {\n            if (!this.state.ajaxDone) {\n                return _react2.default.createElement(\n                    'section',\n                    { className: 'graph' },\n                    _react2.default.createElement(\n                        'section',\n                        { className: 'graph-container' },\n                        _react2.default.createElement('section', { id: 'd3_control', className: 'd3-control' }),\n                        _react2.default.createElement('div', { className: 'loading' }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'loading-image' },\n                            _react2.default.createElement('img', { src: IMG_BASE + '/loading.svg', width: '120', height: '120' }),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'loading-image-caption' },\n                                'Loading additional data, please be patient...'\n                            )\n                        )\n                    ),\n                    _react2.default.createElement('section', { className: 'info-panel graph-view' })\n                );\n            } else {\n                var sources = null;\n                if (this.state.nodePicked) {\n                    sources = ', ' + this.strength_area_count + ' sources.';\n                }\n                return _react2.default.createElement(\n                    'section',\n                    { className: 'graph' },\n                    _react2.default.createElement(\n                        'section',\n                        { id: 'graph-container' },\n                        _react2.default.createElement(\n                            'section',\n                            { id: 'd3_control', className: 'd3-control' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: (0, _classnames2.default)(['foldable-control', 'thin-control'], { expanded: this.state.controlExpanded }, { folded: !this.state.controlExpanded }) },\n                                _react2.default.createElement('div', { className: 'brief' }),\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'full' },\n                                    _react2.default.createElement(\n                                        'div',\n                                        { className: 'control-row' },\n                                        _react2.default.createElement(\n                                            'div',\n                                            { className: 'control-group' },\n                                            _react2.default.createElement(\n                                                'p',\n                                                null,\n                                                'This view presents the weighed and directed connectivity graph based on the results of ',\n                                                _react2.default.createElement(\n                                                    'a',\n                                                    { href: 'http://www.marmosetbrain.org/whitepaper#tracer_injections', target: '_blank' },\n                                                    'injections of monosynaptic retrograde fluorescent tracers'\n                                                ),\n                                                ' injections.'\n                                            ),\n                                            _react2.default.createElement(\n                                                'p',\n                                                null,\n                                                'The graph view highlights the spatial relations between the connected areas. Pointing at an edge, provides information about the cases in which a specific connection was observed, and clicking reveals further information, including an average connectivity profile, interactive visualizations of the data for each injection, and metadata.'\n                                            )\n                                        )\n                                    )\n                                )\n                            )\n                        ),\n                        _react2.default.createElement('section', { id: 'd3', className: 'd3' }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'color-bar-container' },\n                            _react2.default.createElement(_ColorBar2.default, { style: 'graph' })\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'section',\n                        { id: 'info-panel', className: 'graph-view' },\n                        _react2.default.createElement(_QuickLinks2.default, null),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'injection-info' },\n                            _react2.default.createElement(_MainFlne2.default, { flne: this.flne_per_area, areas: this._areas, mode: 'FLN' }),\n                            _react2.default.createElement(_InjectionList2.default, { flne: this.state.flne_per_injection, mode: 'FLN' })\n                        )\n                    )\n                );\n            }\n        }\n        /**\n         * @return {object}\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            var area_name = null;\n            if (this.state.nodePicked) {\n                area_name = (0, _utils.toTitleCase)(this.state.nodePicked.fullname) + ' (' + this.state.nodePicked.abbrev + ')';\n            }\n            var download_svg = _react2.default.createElement(\n                'div',\n                { className: 'link-button' },\n                _react2.default.createElement(\n                    'a',\n                    { onClick: this.handleDownloadGraph, download: 'export_flatmap_graph.svg' },\n                    'Download the graph as SVG'\n                )\n            );\n            return _react2.default.createElement(\n                'section',\n                { className: 'main' },\n                _react2.default.createElement(_ViewSwitch2.default, { view: 'graph' }),\n                this.renderContent()\n            );\n        }\n    }]);\n\n    return MainGraph;\n}(_react2.default.Component);\n\nexports.default = MainGraph;\n;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2pzL2NvbXBvbmVudHMvTWFpbkdyYXBoLnJlYWN0LmpzP2UyYmYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL0FjdGlvbnMnO1xuaW1wb3J0IEFwcFN0b3JlIGZyb20gJy4uL3N0b3Jlcy9BcHBTdG9yZSc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IE1haW5GbG5lIGZyb20gJy4vTWFpbkZsbmUucmVhY3QnO1xuaW1wb3J0IFZpZXdTd2l0Y2ggZnJvbSAnLi9WaWV3U3dpdGNoLnJlYWN0JztcbmltcG9ydCBJbmplY3Rpb25MaXN0IGZyb20gJy4vSW5qZWN0aW9uTGlzdC5yZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBBcHBEaXNwYXRjaGVyIGZyb20gJy4uL2Rpc3BhdGNoZXIvQXBwRGlzcGF0Y2hlcic7XG5pbXBvcnQge3RvVGl0bGVDYXNlLCBnZXRMb2dDb2xvckZ1bmMsIHNob3dUb29sdGlwQXJlYU5hbWUsIHNob3dUb29sdGlwVGFyZ2V0U3VtbWFyeSwgaGlkZVRvb2x0aXAsIGdldFRhcmdldEFyZWFTdW1tYXJ5SFRNTH0gZnJvbSAnLi4vbGliL3V0aWxzJztcbmltcG9ydCB7Q29ubmVjdGl2aXR5fSBmcm9tICcuLi9saWIvY29ubmVjdGl2aXR5JztcbmltcG9ydCBDb2xvckJhciBmcm9tICcuL0NvbG9yQmFyLnJlYWN0JztcbmltcG9ydCBRdWlja0xpbmtzIGZyb20gJy4vUXVpY2tMaW5rcy5yZWFjdCc7XG4vL1xuLy9mdW5jdGlvbiB0b1RpdGxlQ2FzZShzdHIpIHtcbi8vICAgIC8vcmV0dXJuIHN0ci5yZXBsYWNlKC9cXHdcXFMqL2csIGZ1bmN0aW9uKHR4dCl7cmV0dXJuIHR4dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR4dC5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKTt9KTtcbi8vICAgIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc3Vic3RyKDEpO1xuLy99XG5cbmNvbnN0IERBVEFfQkFTRSA9ICcvc3RhdGljL2RhdGEvJztcbmNvbnN0IElNR19CQVNFID0gJy9zdGF0aWMvaW1hZ2VzLyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYWluR3JhcGggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzLCBjb250ZXh0KSB7XG4gICAgICAgIHdpbmRvdy5kM2pzID0gZDM7XG4gICAgICAgIHN1cGVyKHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgXy5iaW5kQWxsKFxuICAgICAgICAgICAgdGhpcywgJ2hhbmRsZUNoYW5nZScsICdoYW5kbGVNb3VzZU92ZXJOb2RlJywgJ2hhbmRsZU1vdXNlT3V0Tm9kZScsICdoYW5kbGVDbGljaycsICdoaWdobGlnaHROb2RlJyxcbiAgICAgICAgICAgICdoYW5kbGVEb3dubG9hZFNWRycsICdoYW5kbGVEb3dubG9hZEdyYXBoJywgJ2hhbmRsZURvd25sb2FkQ1NWJywgJ2FqYXhMb2FkJywgJ2hhbmRsZVN3aXRjaFRvTWF0cml4VmlldycsXG4gICAgICAgICAgICAnaGFuZGxlTW91c2VPdmVyRWRnZScsICdoYW5kbGVNb3VzZU91dEVkZ2UnLFxuICAgICAgICAgICAgJ2hhbmRsZUZvY3VzVmlld2VyJywgJ2hhbmRsZUJsdXJWaWV3ZXInLFxuICAgICAgICApO1xuICAgICAgICBsZXQgc3RhdGUgPSB7XG4gICAgICAgICAgICBzdHJlbmd0aEV4aXN0czogZmFsc2UsXG4gICAgICAgICAgICBhamF4RG9uZTogZmFsc2UsXG4gICAgICAgICAgICBjb250cm9sRXhwYW5kZWQ6IHRydWUsXG4gICAgICAgICAgICBmb2N1c2VkOiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBmb2N1c2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZvY3VzZWRWaWV3Jyk7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgaWYgKGZvY3VzZWQpIHtcbiAgICAgICAgICAgIHN0YXRlLmZvY3VzZWQgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuY29udHJvbEV4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHRoaXMuX21hdHJpeCA9IEFwcFN0b3JlLmdldENvbm5lY3Rpdml0eSgpO1xuICAgICAgICB0aGlzLl9hcmVhcyA9IHtcbiAgICAgICAgICAgIGJ5QWJicmV2OiB7fSxcbiAgICAgICAgICAgIGJ5SW5kZXg6IHt9LFxuICAgICAgICAgICAgYnlJZDoge31cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wZW5kaW5nQWpheCA9IFtdO1xuICAgICAgICBsZXQgcGVuZGluZ0FqYXggPSB0aGlzLnBlbmRpbmdBamF4O1xuICAgICAgICB0aGlzLmFqYXhMb2FkKCdpbmplY3Rpb25zX3N0YXRpYy5qc29uJywgKGluaikgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0aWNfaW5qID0gaW5qO1xuICAgICAgICAgICAgXy5lYWNoKHRoaXMuc3RhdGljX2luaiwgKGluaiwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaW5qLm5hbWUgPSBrZXk7XG4gICAgICAgICAgICAgICAgaW5qLmNvbGxhcHNlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgQWN0aW9ucy5zYXZlSW5qZWN0aW9uc1N0YXRpYyhpbmopO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hamF4TG9hZCgnZmxuZV9nbWVhbm56X2FyZWFzLmpzb24nLCAoZmxuZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mbG5lX3Blcl9hcmVhID0gZmxuZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWpheExvYWQoJ2ZsbmVfZ21lYW5uel9pbmplY3Rpb25zLmpzb24nLCAoZmxuZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mbG5lX3Blcl9pbmplY3Rpb24gPSBmbG5lO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZmxuZV9wZXJfaW5qZWN0aW9uOiBmbG5lfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFqYXhMb2FkKCdzdHJ1Y3R1cmVzLmpzb24nLCAoc3RydWN0KSA9PiB7XG4gICAgICAgICAgICBBY3Rpb25zLnByb2Nlc3NBcmVhcyhzdHJ1Y3QpO1xuICAgICAgICAgICAgXy5lYWNoKHN0cnVjdCwgcyA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHR4dCA9IHMuZnVsbG5hbWU7XG4gICAgICAgICAgICAgICAgdHh0ID0gdHh0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHh0LnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIHMuZnVsbG5hbWUgPSB0eHQ7XG4gICAgICAgICAgICAgICAgbGV0IGNjID0gcy5jb2xvcjtcbiAgICAgICAgICAgICAgICBzLmhleF9jb2xvciA9ICdyZ2JhKCcgKyBjY1swXSArICcsJyArIGNjWzFdICsgJywnICsgY2NbMl0gKyAnLCAxKSc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuYXRsYXNfc3RydWN0ID0gc3RydWN0O1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hamF4TG9hZCgnY29ubmVjdGl2aXR5XzFfMF8xLmpzb24nLCAoY29ubikgPT4ge1xuXG4gICAgICAgICAgICBsZXQgbm9kZV9sb29rdXAgPSB7fTtcbiAgICAgICAgICAgIGxldCBub2RlcyA9IFtdO1xuICAgICAgICAgICAgXy5lYWNoKGNvbm4ubm9kZXMsIChub2RlLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgbm9kZV9sb29rdXBbaV0gPSBub2RlO1xuICAgICAgICAgICAgICAgIG5vZGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBub2RlTmFtZTogbm9kZSxcbiAgICAgICAgICAgICAgICAgICAgYWJicmV2OiBub2RlLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuX2FyZWFzLmJ5SW5kZXhbaV0gPSB7YWJicmV2OiBub2RlLCBzZXJpYWw6IGl9O1xuICAgICAgICAgICAgICAgIHRoaXMuX2FyZWFzLmJ5QWJicmV2W25vZGVdID0gdGhpcy5fYXJlYXMuYnlJbmRleFtpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IGxpbmtzID0gW107XG4gICAgICAgICAgICBfLmVhY2goY29ubi5saW5rcywgKGxpbmssIGkpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gbm9kZV9sb29rdXBbbGlua1swXV07XG4gICAgICAgICAgICAgICAgbGV0IHNvdXJjZSA9IG5vZGVfbG9va3VwW2xpbmtbMV1dO1xuICAgICAgICAgICAgICAgIGxpbmtzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGxpbmtbMF0sXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogbGlua1sxXSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGxpbmtbMl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5ub2RlcyA9IG5vZGVzO1xuICAgICAgICAgICAgdGhpcy5saW5rcyA9IGxpbmtzO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hamF4TG9hZCgnbWFybW9zZXRfYnJhaW5fY29ubmVjdGl2aXR5X0ZMTi5qc29uJywgKGRhdGEpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpdml0eV9kYXRhID0gZGF0YTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFqYXhMb2FkKGZpbGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ0FqYXgucHVzaChmaWxlKTtcbiAgICAgICAgZDMuanNvbihEQVRBX0JBU0UgKyBmaWxlLCAoZXJyb3IsIGRhdGEpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgIF8ucHVsbCh0aGlzLnBlbmRpbmdBamF4LCBmaWxlKTtcbiAgICAgICAgICAgIHRoaXMuYWpheFByb2dyZXNzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgQXBwU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5oYW5kbGVDaGFuZ2UpO1xuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgICAgICQod2luZG93KS5vbigna2V5dXAnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDcwICYmIGUuc2hpZnRLZXkpIHsgLyogNzAgZm9yIGxldHRlciAnZicgKi9cbiAgICAgICAgICAgICAgICBpZiAodGhhdC5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaGFuZGxlQmx1clZpZXdlcigpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaGFuZGxlRm9jdXNWaWV3ZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PSA3NyAmJiBlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9pbmRleC5odG1sXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbml0aWFsRHJhdygpIHtcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICBsZXQgd2lkdGggPSA4NjAsIGhlaWdodD0gODgwO1xuICAgICAgICB0aGlzLmdyYXBoX3BhcmVudCA9IGQzLnNlbGVjdCgnI2QzJyk7XG4gICAgICAgIGxldCBzdmcgPSB0aGlzLmdyYXBoX3BhcmVudC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCB3aWR0aClcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBoZWlnaHQpXG4gICAgICAgICAgICAuYXR0cigneG1sbnM6eGxpbmsnLCAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycpO1xuXG4gICAgICAgIHN2Zy5hcHBlbmQoXCJzdmc6ZGVmc1wiKS5zZWxlY3RBbGwoXCJtYXJrZXJcIilcbiAgICAgICAgICAgIC5kYXRhKFtcImVuZFwiLCAnZW5kLXNob3J0J10pICAgICAgLy8gRGlmZmVyZW50IGxpbmsvcGF0aCB0eXBlcyBjYW4gYmUgZGVmaW5lZCBoZXJlXG4gICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJtYXJrZXJcIikgICAgLy8gVGhpcyBzZWN0aW9uIGFkZHMgaW4gdGhlIGFycm93c1xuICAgICAgICAgICAgLmF0dHIoXCJpZFwiLCBTdHJpbmcpXG4gICAgICAgICAgICAuYXR0cihcInZpZXdCb3hcIiwgXCIwIC01IDEwIDEwXCIpXG4gICAgICAgICAgICAvLy5hdHRyKFwicmVmWFwiLCBkID0+IChkID09ICdlbmQnID8gNDAgOiA3NSkpXG4gICAgICAgICAgICAuYXR0cigncmVmWCcsIDM1KVxuICAgICAgICAgICAgLmF0dHIoXCJyZWZZXCIsIGQgPT4gMClcbiAgICAgICAgICAgIC5hdHRyKFwibWFya2VyV2lkdGhcIiwgMTApXG4gICAgICAgICAgICAuYXR0cihcIm1hcmtlckhlaWdodFwiLCAxMClcbiAgICAgICAgICAgIC5hdHRyKFwib3JpZW50XCIsIFwiYXV0b1wiKVxuICAgICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCAnIzMzMzMzMycpXG4gICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAnIzMzMzMzMycpXG4gICAgICAgICAgICAuYXBwZW5kKFwic3ZnOnBhdGhcIilcbiAgICAgICAgICAgIC5hdHRyKFwiZFwiLCBcIk0xLC00TDksMEwxLDRcIik7XG4gICAgICAgIHN2Zy5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgJzAuMScpXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCAwKScpXG4gICAgICAgICAgICAuYXBwZW5kKCdpbWFnZScpXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCA4NDIpXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgODgyKVxuICAgICAgICAgICAgLmF0dHIoJ3hsaW5rOmhyZWYnLCBJTUdfQkFTRSArICdhbGxfaW5qZWN0aW9uc19vbl9mbGF0bWFwLnBuZycpO1xuICAgICAgICBzdmcgPSBzdmcuYXBwZW5kKCdnJylcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDIwLCAtNTApJyk7XG4gICAgICAgIGxldCBjb2xvciA9IGQzLnNjYWxlT3JkaW5hbChkMy5zY2hlbWVDYXRlZ29yeTIwKTtcbiAgICAgICAgbGV0IGZsYXRtYXBTY2FsZVggPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFswLCA5NjBdKTtcbiAgICAgICAgbGV0IGZsYXRtYXBTY2FsZVkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFswLCA5NjBdKTtcbiAgICAgICAgZmxhdG1hcFNjYWxlWC5kb21haW4oWy0yMCwgMjBdKTtcbiAgICAgICAgZmxhdG1hcFNjYWxlWS5kb21haW4oWzIwLCAtMjBdKTtcblxuICAgICAgICAvLyBwcmVwYXJlIGFsbCB0aGUgc3RydWN0dXJlc1xuICAgICAgICBsZXQgYXRsYXNfc3RydWN0ID0gdGhpcy5hdGxhc19zdHJ1Y3Q7XG5cbiAgICAgICAgLy8gYWJicmV2X2xvb2t1cCB0byBsb29rIGZvciBhbiBhcmVhIGJ5IG5vZGUgYWJicmVcbiAgICAgICAgbGV0IGFiYnJldl9sb29rdXAgPSB7fTtcbiAgICAgICAgXy5lYWNoKGF0bGFzX3N0cnVjdCwgKGFyZWEpID0+IHtcbiAgICAgICAgICAgIGFiYnJldl9sb29rdXBbYXJlYS5hYmJyZXZdID0gYXJlYTtcbiAgICAgICAgICAgIGxldCBjYyA9IGFyZWEuY29sb3I7XG4gICAgICAgICAgICBhcmVhLmhleF9jb2xvciA9ICdyZ2JhKCcgKyBjY1swXSArICcsJyArIGNjWzFdICsgJywnICsgY2NbMl0gKyAnLCAxKSc7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFiYnJldl9sb29rdXAgPSBhYmJyZXZfbG9va3VwO1xuXG5cbiAgICAgICAgLy8gcHJvY2Vzc2luZyB0aGUgY29ubmVjdGl2aXR5IGRhdGFcbiAgICAgICAgLy8gQ29tcHV0ZSB0aGUgZGlzdGluY3Qgbm9kZXMgZnJvbSB0aGUgbGlua3MuXG4gICAgICAgIHRoaXMubm9kZXMuZm9yRWFjaCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgbi5hcmVhID0gYWJicmV2X2xvb2t1cFtuLmFiYnJldl07XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgeiA9IGQzLnNjYWxlTG9nKCkuZG9tYWluKFsxLCA2NzZdKS5jbGFtcCh0cnVlKTtcbiAgICAgICAgbGV0IGxpbmtfaGFzaCA9IHt9O1xuICAgICAgICBsZXQgYWxwaGFTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoWy4yLCAuNzVdKTtcbiAgICAgICAgYWxwaGFTY2FsZS5kb21haW4oWzAsIDYwXSkuY2xhbXAodHJ1ZSk7XG4gICAgICAgIHRoaXMubGlua3MuZm9yRWFjaChmdW5jdGlvbihsaW5rKSB7XG4gICAgICAgICAgICBsaW5rLnNvdXJjZSA9IHRoYXQubm9kZXNbbGluay5zb3VyY2VdLmFyZWE7XG4gICAgICAgICAgICBsaW5rLnRhcmdldCA9IHRoYXQubm9kZXNbbGluay50YXJnZXRdLmFyZWE7XG4gICAgICAgICAgICBsaW5rLnNvdXJjZS50byA9IGxpbmsuc291cmNlLnRvIHx8IHt9O1xuICAgICAgICAgICAgbGluay5zb3VyY2UudG9bbGluay50YXJnZXQuYWJicmV2XSA9IGxpbmsudGFyZ2V0O1xuICAgICAgICAgICAgbGluay50YXJnZXQuZnJvbSA9IGxpbmsudGFyZ2V0LmZyb20gfHwge307XG4gICAgICAgICAgICBsaW5rLnRhcmdldC5mcm9tW2xpbmsuc291cmNlLmFiYnJldl0gPSBsaW5rLnNvdXJjZTtcblxuICAgICAgICAgICAgbGluay52YWx1ZSA9ICtsaW5rLnZhbHVlO1xuICAgICAgICAgICAgbGluay5hbHBoYSA9IGFscGhhU2NhbGUobGluay52YWx1ZSk7XG4gICAgICAgICAgICAvL2xpbmtfaGFzaFtsaW5rLnRhcmdldC5ub2RlTmFtZV0gPSBsaW5rX2hhc2hbbGluay50YXJnZXQubm9kZU5hbWVdIHx8IHt9O1xuICAgICAgICAgICAgLy9saW5rX2hhc2hbbGluay50YXJnZXQubm9kZU5hbWVdW2xpbmsuc291cmNlLm5vZGVOYW1lXSA9IGxpbms7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vbGV0IG1heFogPSA2NzY7XG4gICAgICAgIGxldCBsaW5rcyA9IHN2Zy5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmtzJylcbiAgICAgICAgICAgIC5zZWxlY3RBbGwoJy5saW5rJylcbiAgICAgICAgICAgIC5kYXRhKHRoaXMubGlua3MpXG4gICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZCA9PiAnbGluaycpXG4gICAgICAgICAgICAuYXR0cignZGF0YS1mcm9tJywgZCA9PiBkLnNvdXJjZS5hYmJyZXYpXG4gICAgICAgICAgICAuYXR0cignZGF0YS10bycsIGQgPT4gZC50YXJnZXQuYWJicmV2KVxuICAgICAgICAgICAgLmF0dHIoJ2RhdGEtYWxwaGEnLCBkID0+IGQuYWxwaGEpXG4gICAgICAgICAgICAuc3R5bGUoJ29wYWNpdHknLCBkID0+IGQuYWxwaGEpXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy5saW5rLXBhdGgnKVxuICAgICAgICAgICAgICAgICAgICAuZGF0YShbZF0pXG4gICAgICAgICAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ3BhdGgnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGluay1wYXRoJylcbiAgICAgICAgICAgICAgICAgICAgLy8uYXR0cignbWFya2VyLWVuZCcsIGQgPT4gZC5zZW1pID8gJ3VybCgjZW5kLXNob3J0KScgOiAnJylcbiAgICAgICAgICAgICAgICAgICAgLy8uYXR0cignc3Ryb2tlLXdpZHRoJywgZnVuY3Rpb24oZCkgeyByZXR1cm4gTWF0aC5zcXJ0KGQudmFsdWUpOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsIGQgPT4gMSlcbiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdzdHJva2UnLCBkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAncmdiKDUwLCA1MCwgNTApJztcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzX2Nvb3JkID0gYWJicmV2X2xvb2t1cFtkLnNvdXJjZS5hYmJyZXZdLmZsYXRtYXBfY29vcmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3ggPSBmbGF0bWFwU2NhbGVYKHNfY29vcmRbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN5ID0gZmxhdG1hcFNjYWxlWShzX2Nvb3JkWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0X2Nvb3JkID0gYWJicmV2X2xvb2t1cFtkLnRhcmdldC5hYmJyZXZdLmZsYXRtYXBfY29vcmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHggPSBmbGF0bWFwU2NhbGVYKHRfY29vcmRbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHR5ID0gZmxhdG1hcFNjYWxlWSh0X2Nvb3JkWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnTScgKyBzeCArICcsJyArIHN5ICsgJyBMJyArIHR4ICsgJywnICsgdHk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5oYW5kbGVNb3VzZU92ZXJFZGdlKHRoaXMsIGQpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5oYW5kbGVNb3VzZU91dEVkZ2UodGhpcywgZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICBsZXQgbm9kZXMgPSBzdmcuYXBwZW5kKCdnJylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdub2RlcycpXG4gICAgICAgICAgICAuc2VsZWN0QWxsKCcubm9kZScpXG4gICAgICAgICAgICAuZGF0YSh0aGlzLm5vZGVzKVxuICAgICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ25vZGUnKVxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgICAgICAgIC5zZWxlY3RBbGwoJy5ub2RlLWNpcmNsZScpXG4gICAgICAgICAgICAgICAgLmRhdGEoW2RdKVxuICAgICAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAgICAgLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgICAgICAgICAgICAuYXR0cigncicsIDE4KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdub2RlLWNpcmNsZScpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAoZCkgPT4gKFxuICAgICAgICAgICAgICAgICAgICBkLmFyZWEuaGV4X2NvbG9yXG4gICAgICAgICAgICAgICAgKSlcbiAgICAgICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIGQgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3JnYmEoMCwgMCwgMCwgMC41KSc7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cignY3gnLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmxhdG1hcFNjYWxlWChhYmJyZXZfbG9va3VwW2QuYWJicmV2XS5mbGF0bWFwX2Nvb3JkWzBdKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjeScsIChkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbGF0bWFwU2NhbGVZKGFiYnJldl9sb29rdXBbZC5hYmJyZXZdLmZsYXRtYXBfY29vcmRbMV0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaGFuZGxlTW91c2VPdmVyTm9kZSh0aGlzLCBkKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaGFuZGxlTW91c2VPdXROb2RlKHRoaXMsIGQpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdW5kbyBhbnkgb3RoZXIgaG92ZXJpbmcgaWYgaGFwcGVuZWRcbiAgICAgICAgICAgICAgICAgICAgLy9BY3Rpb25zLnVuaGlnaGxpZ2h0RWRnZShzcmMsIHRndCk7XG4gICAgICAgICAgICAgICAgICAgIC8vQWN0aW9ucy51bmJvbGRFZGdlKHNyYywgdGd0KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlIHRoZSBiYXIgY2hhcnQgdG8gc2hvdyBjb25uZWN0aXZpdHkgc3RyZW5ndGggZnJvbSBlYWNoIGFyZWFcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnROb2RlID0gQXBwU3RvcmUuZ2V0Tm9kZVBpY2tlZCgpO1xuICAgICAgICAgICAgICAgICAgICAvL2xldCBhcmVhID0gdGhhdC5fYXJlYXMuYnlBYmJyZXZbbi5hYmJyZXZdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYXJlYSA9IG4uYXJlYTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnROb2RlICYmIGN1cnJlbnROb2RlICE9IGFyZWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFjdGlvbnMudW5oaWdobGlnaHRFZGdlKGFyZWEsIGN1cnJlbnROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFjdGlvbnMudW5ib2xkRWRnZShhcmVhLCBjdXJyZW50Tm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhhdC5oYW5kbGVDbGljayhuKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5jbGlja2VkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBBY3Rpb25zLnBpY2tOb2RlKGFyZWEpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb250aW51ZSB0byBmdXJuaXNoIGluamVjdGlvbiBkZXRhaWxcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluamVjdGlvbnMgPSBfLmZpbHRlcih0aGF0LnN0YXRpY19pbmosIHthYmJyZXY6IG4uYWJicmV2fSk7XG4gICAgICAgICAgICAgICAgICAgIEFjdGlvbnMubm9kZURldGFpbChpbmplY3Rpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHhfID0gZDMuZXZlbnQucGFnZVggKyAyNDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHlfID0gZDMuZXZlbnQucGFnZVkgLSAyMDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZsbmUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29ubiA9IEFwcFN0b3JlLmdldENvbm5lY3Rpdml0eSgpO1xuICAgICAgICAgICAgICAgICAgICBfLmVhY2goY29ubi5nZXRfYnlfdGFyZ2V0KGFyZWEpLCBzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLnNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHMuZmxuZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbG5lLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHMuc291cmNlLmFiYnJldixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ21lYW5uejogcy5nbWVhbm56LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cxMF9mbG5lOiBNYXRoLmxvZzEwKHMuZmxuZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNob3dUb29sdGlwVGFyZ2V0U3VtbWFyeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRfYXJlYTogYXJlYSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9hcmVhOiBhcmVhLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0cml4OiB0aGF0Ll9tYXRyaXgsXG4gICAgICAgICAgICAgICAgICAgICAgICB4OiB4XyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHlffSk7XG5cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5zZWxlY3RBbGwoJy50ZXh0JylcbiAgICAgICAgICAgICAgICAuZGF0YShbZF0pLmVudGVyKClcbiAgICAgICAgICAgICAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAndGV4dCcpXG4gICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5hYmJyZXYucmVwbGFjZSgnLScsICcvJyk7IH0pXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJwb2ludGVyLWV2ZW50c1wiLCBcIm5vbmVcIilcbiAgICAgICAgICAgICAgICAuYXR0cigneCcsIChkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbGF0bWFwU2NhbGVYKGFiYnJldl9sb29rdXBbZC5hYmJyZXZdLmZsYXRtYXBfY29vcmRbMF0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmxhdG1hcFNjYWxlWShhYmJyZXZfbG9va3VwW2QuYWJicmV2XS5mbGF0bWFwX2Nvb3JkWzFdKSArIDMgO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhhdC5kM19ub2RlcyA9IG5vZGVzO1xuICAgICAgICB0aGF0LmQzX2xpbmtzID0gbGlua3M7XG4gICAgfVxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIEFwcFN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMuaGFuZGxlQ2hhbmdlKTtcbiAgICB9XG4gICAgYWpheFByb2dyZXNzKCkge1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nQWpheC5sZW5ndGggPT0gMCAmJiAhdGhpcy5zdGF0ZS5hamF4RG9uZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YWpheERvbmU6IHRydWV9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVwYXJlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsRHJhdygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJlcGFyZSgpIHtcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICAvL2xldCBhYmJyZXZfbG9va3VwID0ge307XG4gICAgICAgIF8uZWFjaCh0aGlzLmF0bGFzX3N0cnVjdCwgKGFyZWEpID0+IHtcbiAgICAgICAgICAgIGxldCBfYXJlYSA9IHRoaXMuX2FyZWFzLmJ5QWJicmV2W2FyZWEuYWJicmV2XTtcbiAgICAgICAgICAgIF8uYXNzaWduKF9hcmVhLCBhcmVhKTtcbiAgICAgICAgICAgIHRoaXMuX2FyZWFzLmJ5SWRbX2FyZWEuaWRdID0gX2FyZWE7XG4gICAgICAgICAgICBsZXQgaW5qZWN0aW9ucyA9IF8uZmlsdGVyKHRoYXQuc3RhdGljX2luaiwge2FiYnJldjogYXJlYS5hYmJyZXZ9KTtcbiAgICAgICAgICAgIF9hcmVhLmluamVjdGlvbnMgPSBpbmplY3Rpb25zO1xuICAgICAgICB9KTtcbiAgICAgICAgQWN0aW9ucy5wcm9jZXNzQ29ubmVjdGl2aXR5KHRoaXMuX2Nvbm5lY3Rpdml0eV9kYXRhLCB0aGF0LnN0YXRpY19pbmopO1xuICAgICAgICBsZXQgbWF0cml4ID0gdGhhdC5fbWF0cml4O1xuICAgICAgICBfLmVhY2godGhpcy5saW5rcywgKGxpbmspID0+IHtcbiAgICAgICAgICAgIGxldCB0YXJnZXQgPSB0aGF0Ll9hcmVhcy5ieUluZGV4W2xpbmsudGFyZ2V0XTtcbiAgICAgICAgICAgIGxldCBzb3VyY2UgPSB0aGF0Ll9hcmVhcy5ieUluZGV4W2xpbmsuc291cmNlXTtcbiAgICAgICAgICAgIG1hdHJpeC5saW5rKHRhcmdldCwgc291cmNlLCB7dGFyZ2V0OiB0YXJnZXQsIHNvdXJjZTogc291cmNlLCB2YWx1ZTogbGluay52YWx1ZX0pO1xuICAgICAgICAgICAgLy9tYXRyaXhbbGluay50YXJnZXRdW2xpbmsuc291cmNlXS56ICs9IGxpbmsudmFsdWU7XG4gICAgICAgICAgICAvL25vZGVzW2xpbmsuc291cmNlXS5jb3VudCArPSBsaW5rLnZhbHVlO1xuICAgICAgICAgICAgLy9ub2Rlc1tsaW5rLnRhcmdldF0uY291bnQgKz0gbGluay52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIEFwcERpc3BhdGNoZXIucmVnaXN0ZXIoYWN0aW9uID0+IHtcbiAgICAgICAgICAgIEFwcERpc3BhdGNoZXIud2FpdEZvcihbQXBwU3RvcmUuZGlzcGF0Y2hUb2tlbl0pO1xuICAgICAgICAgICAgc3dpdGNoIChhY3Rpb24uYWN0aW9uVHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ0hJR0hMSUdIVF9FREdFJzoge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZnJvbV8gPSBhY3Rpb24uZnJvbV87XG4gICAgICAgICAgICAgICAgICAgIGxldCB0byA9IGFjdGlvbi50bztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbG9yID0gYWN0aW9uLmNvbG9yIHx8ICcjZmYwMDAwJztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmsgPSBkMy5zZWxlY3RBbGwoJ2cubGluaycpLmZpbHRlcignW2RhdGEtZnJvbT0nICsgZnJvbV8uYWJicmV2ICsgJ10nKS5maWx0ZXIoJ1tkYXRhLXRvPScgKyB0by5hYmJyZXYgKyAnXScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmsuZW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluay5zdHlsZSgnb3BhY2l0eScsIDEpLnNlbGVjdEFsbCgnLmxpbmstcGF0aCcpLnN0eWxlKCdzdHJva2UnLCBjb2xvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ1VOSElHSExJR0hUX0VER0UnOiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmcm9tXyA9IGFjdGlvbi5mcm9tXztcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRvID0gYWN0aW9uLnRvO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGluayA9IGQzLnNlbGVjdEFsbCgnZy5saW5rJykuZmlsdGVyKCdbZGF0YS1mcm9tPScgKyBmcm9tXy5hYmJyZXYgKyAnXScpLmZpbHRlcignW2RhdGEtdG89JyArIHRvLmFiYnJldiArICddJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbGluay5lbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rLnN0eWxlKCdvcGFjaXR5JywgbGluay5hdHRyKCdkYXRhLWFscGhhJykpLnNlbGVjdEFsbCgnLmxpbmstcGF0aCcpLnN0eWxlKCdzdHJva2UnLCAncmdiKDUwLCA1MCwgNTApJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ0JPTERfRURHRSc6IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZyb21fID0gYWN0aW9uLmZyb21fO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdG8gPSBhY3Rpb24udG87XG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5rID0gZDMuc2VsZWN0QWxsKCdnLmxpbmsnKS5maWx0ZXIoJ1tkYXRhLWZyb209JyArIGZyb21fLmFiYnJldiArICddJykuZmlsdGVyKCdbZGF0YS10bz0nICsgdG8uYWJicmV2ICsgJ10nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5rLmVtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsuc3R5bGUoJ21hcmtlci1lbmQnLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbGluay5zZWxlY3RBbGwoJy5saW5rLXBhdGgnKS5hdHRyKCdzdHJva2Utd2lkdGgnLCAzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ1VOQk9MRF9FREdFJzoge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZnJvbV8gPSBhY3Rpb24uZnJvbV87XG4gICAgICAgICAgICAgICAgICAgIGxldCB0byA9IGFjdGlvbi50bztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmsgPSBkMy5zZWxlY3RBbGwoJ2cubGluaycpLmZpbHRlcignW2RhdGEtZnJvbT0nICsgZnJvbV8uYWJicmV2ICsgJ10nKS5maWx0ZXIoJ1tkYXRhLXRvPScgKyB0by5hYmJyZXYgKyAnXScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmsuZW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluay5zdHlsZSgnbWFya2VyLWVuZCcsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBsaW5rLnN0eWxlKCdtYXJrZXItZW5kJywgZCA9PiBkLnNlbWkgPyAndXJsKCNlbmQtc2hvcnQpJyA6ICd1cmwoI2VuZCknKTtcbiAgICAgICAgICAgICAgICAgICAgbGluay5zZWxlY3RBbGwoJy5saW5rLXBhdGgnKS5hdHRyKCdzdHJva2Utd2lkdGgnLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gZW5kIHByZXBhcmluZyB3b3JrLCBzYXZlIGl0IHRvIGFwcFN0YXRlXG4gICAgICAgIEFjdGlvbnMuc2F2ZUFyZWFzKHRoYXQuX2FyZWFzKTtcbiAgICB9XG4gICAgZ2V0QmFyV2lkdGhGdW5jKG1pbiwgbWF4KSB7XG4gICAgICAgIG1pbiA9IC01LCBtYXggPSAwO1xuICAgICAgICBsZXQgZnVuYyA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFttaW4sIG1heF0pLnJhbmdlKFswLCAzMDBdKTtcbiAgICAgICAgcmV0dXJuIGZ1bmM7XG4gICAgfVxuICAgIGhpZ2hsaWdodE5vZGUobikge1xuICAgICAgICAvL2xldCBzdHJlbmd0aCA9IHRoaXMuZmxuZV9wZXJfYXJlYVtuLmFiYnJldl07XG4gICAgICAgIGxldCBzdHJlbmd0aCA9IFtdO1xuICAgICAgICBjb25zdCBjb25uID0gQXBwU3RvcmUuZ2V0Q29ubmVjdGl2aXR5KCk7XG4gICAgICAgIGNvbnN0IGFyZWFzID0gQXBwU3RvcmUuZ2V0QXJlYXMoKTtcbiAgICAgICAgXy5lYWNoKGNvbm4uZ2V0X2J5X3RhcmdldChhcmVhcy5nZXRCeUFiYnJldihuLmFiYnJldikpLCBzID0+IHtcbiAgICAgICAgICAgIGlmIChzLnNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHMuZmxuZSA+IDApIHtcbiAgICAgICAgICAgICAgICBzdHJlbmd0aC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBzLnNvdXJjZS5hYmJyZXYsXG4gICAgICAgICAgICAgICAgICAgIGdtZWFubno6IHMuZ21lYW5ueixcbiAgICAgICAgICAgICAgICAgICAgbG9nMTBfZmxuZTogTWF0aC5sb2cxMChzLmZsbmUpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBlbWl0dGVyID0gbi5hcmVhLmZyb20gfHwge307XG4gICAgICAgIHRoaXMuZDNfbm9kZXMuY2xhc3NlZCgnc2VtaScsIChkLCBpKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZC5hYmJyZXYgIT0gbi5hYmJyZXY7XG4gICAgICAgIH0pXG4gICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCAoZCwgaSkgPT4gZC5hYmJyZXYgPT0gbi5hYmJyZXYpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBpZiAoYS5hYmJyZXYgIT0gbi5hYmJyZXYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBsZXQgZmxuZV9hcnIgPSBfLm1hcChzdHJlbmd0aCwgJ2xvZzEwX2ZsbmUnKTtcbiAgICAgICAgbGV0IG1pbiA9IF8ubWluKGZsbmVfYXJyKSwgbWF4ID0gXy5tYXgoZmxuZV9hcnIpO1xuICAgICAgICBsZXQgY29sb3JGdW5jID0gZ2V0TG9nQ29sb3JGdW5jKG1pbiwgbWF4KTtcblxuICAgICAgICB0aGlzLmQzX25vZGVzLnNlbGVjdEFsbCgnLm5vZGUtY2lyY2xlJykuYXR0cigncicsIGQgPT4gZC5hYmJyZXYgPT0gbi5hYmJyZXYgPyAyNiA6IDE4KVxuICAgICAgICAuYXR0cignZmlsbCcsIGQgPT4ge1xuICAgICAgICAgICAgaWYgKGQuYWJicmV2IGluIGVtaXR0ZXIgfHwgZC5hYmJyZXYgPT0gbi5hYmJyZXYpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5mbyA9IF8uZmluZChzdHJlbmd0aCwge3NvdXJjZTogZC5hYmJyZXZ9KTtcbiAgICAgICAgICAgICAgICBpZiAoaW5mbykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JGdW5jKGluZm8ubG9nMTBfZmxuZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkLmFiYnJldiA9PSBuLmFiYnJldikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5hcmVhLmhleF9jb2xvcjtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAncmdiYSg1MCwgNTAsIDUwLCAuMiknO1xuICAgICAgICAgICAgICAgICAgICAvL3JldHVybiBkLmFyZWEuaGV4X2NvbG9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDUwLCA1MCwgNTAsIC4yKSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuZDNfbGlua3MuY2xhc3NlZCgnaGlkZGVuJywgKGQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZC50YXJnZXQuYWJicmV2ICE9IG4uYWJicmV2KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpbmZvID0gXy5maW5kKHN0cmVuZ3RoLCB7c291cmNlOiBkLnNvdXJjZS5hYmJyZXZ9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFpbmZvO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXR0cignbWFya2VyLWVuZCcsIGQgPT4gZC5zZW1pID8gJ3VybCgjZW5kLXNob3J0KScgOiAndXJsKCNlbmQpJylcbiAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIGQgPT4gZC5hbHBoYSlcbiAgICAgICAgICAgIC5zZWxlY3RBbGwoJ3BhdGgnKS5zdHlsZSgnc3Ryb2tlJywgZCA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDUwLCA1MCwgNTApJztcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbiAgICBoYW5kbGVDbGljayhuKSB7XG4gICAgICAgIHRoaXMuaGlnaGxpZ2h0Tm9kZShuKTtcbiAgICAgICAgLyogZnVuY3Rpb24gdG8gbWFrZSBsaW5rcyBpbnRlcmFjdGl2ZSBhZnRlciBhIG5vZGUgaXMgcGlja2VkXG4gICAgICAgIHRoaXMubGlua3MuZmlsdGVyKCc6bm90KC5oaWRkZW4pJylcbiAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihuKSB7XG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuc3R5bGUoJ29wYWNpdHknLCAxKS5zZWxlY3RBbGwoJy5saW5rLXBhdGgnKS5zdHlsZSgnc3Ryb2tlJywgJyNmZjAwMDAnKTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5zdHlsZSgnb3BhY2l0eScsIG4uYWxwaGEpLnNlbGVjdEFsbCgnLmxpbmstcGF0aCcpLnN0eWxlKCdzdHJva2UnLCAncmdiKDUwLCA1MCwgNTApJyk7XG4gICAgICAgIH0pXG4gICAgICAgICovXG4gICAgfVxuICAgIGhhbmRsZU1vdXNlT3Zlck5vZGUoZWxlbSwgZGF0YSkge1xuICAgICAgICBsZXQgbWUgPSBkMy5zZWxlY3QoZWxlbSk7XG4gICAgICAgIGxldCBwaWNrZWROb2RlID0gQXBwU3RvcmUuZ2V0Tm9kZVBpY2tlZCgpO1xuICAgICAgICBsZXQgYmJveCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCB0b3AgPSBiYm94LnRvcCArICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpO1xuICAgICAgICBpZiAoIXRoaXMuY2xpY2tlZCkge1xuICAgICAgICAgICAgdGhpcy5oaWdobGlnaHROb2RlKGRhdGEpO1xuICAgICAgICAgICAgc2hvd1Rvb2x0aXBBcmVhTmFtZSh7YXJlYTogZGF0YS5hcmVhLCB4OiBiYm94LmxlZnQsIHk6IHRvcCAtIDUwfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgdGd0ID0gdGhpcy5fYXJlYXMuYnlBYmJyZXZbcGlja2VkTm9kZS5hYmJyZXZdO1xuICAgICAgICAgICAgbGV0IHNyYyA9IHRoaXMuX2FyZWFzLmJ5QWJicmV2W2RhdGEuYXJlYS5hYmJyZXZdO1xuICAgICAgICAgICAgLy9sZXQgc2VsZiA9ICh0Z3QgPT0gc3JjKTtcbiAgICAgICAgICAgIC8vbGV0IHN0cmVuZ3RoID0gdGhpcy5mbG5lX3Blcl9hcmVhW3RndC5hYmJyZXZdO1xuICAgICAgICAgICAgLy9sZXQgaW5mbyA9IF8uZmluZChzdHJlbmd0aCwge3NvdXJjZTogc3JjLmFiYnJldn0pO1xuICAgICAgICAgICAgbGV0IHN0cmVuZ3RoID0gW107XG4gICAgICAgICAgICBjb25zdCBjb25uID0gQXBwU3RvcmUuZ2V0Q29ubmVjdGl2aXR5KCk7XG4gICAgICAgICAgICBjb25zdCBhcmVhcyA9IEFwcFN0b3JlLmdldEFyZWFzKCk7XG4gICAgICAgICAgICBfLmVhY2goY29ubi5nZXRfYnlfdGFyZ2V0KGFyZWFzLmdldEJ5QWJicmV2KHRndC5hYmJyZXYpKSwgcyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHMuc291cmNlICE9PSB1bmRlZmluZWQgJiYgcy5mbG5lID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzdHJlbmd0aC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogcy5zb3VyY2UuYWJicmV2LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ21lYW5uejogcy5nbWVhbm56LFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nMTBfZmxuZTogTWF0aC5sb2cxMChzLmZsbmUpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBBY3Rpb25zLmhpZ2hsaWdodEVkZ2Uoc3JjLCB0Z3QsICcjMDAwMDAwJyk7XG4gICAgICAgICAgICBBY3Rpb25zLmJvbGRFZGdlKHNyYywgdGd0KTtcbiAgICAgICAgICAgIGxldCB4XyA9IGJib3gubGVmdCArIDUwO1xuICAgICAgICAgICAgbGV0IHlfID0gdG9wO1xuICAgICAgICAgICAgc2hvd1Rvb2x0aXBUYXJnZXRTdW1tYXJ5KHtcbiAgICAgICAgICAgICAgICB0YXJnZXRfYXJlYTogdGd0LFxuICAgICAgICAgICAgICAgIHNvdXJjZV9hcmVhOiBzcmMsXG4gICAgICAgICAgICAgICAgbWF0cml4OiB0aGlzLl9tYXRyaXgsXG4gICAgICAgICAgICAgICAgeDogeF8sXG4gICAgICAgICAgICAgICAgeTogeV99KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVNb3VzZU91dE5vZGUoZWxlbSwgZGF0YSkge1xuICAgICAgICBpZiAoIXRoaXMuY2xpY2tlZCkge1xuICAgICAgICAgICAgdGhpcy5kM19ub2Rlcy5jbGFzc2VkKCdzZW1pJywgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5kM19saW5rcy5jbGFzc2VkKCdoaWRkZW4nLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLmQzX2xpbmtzLmF0dHIoJ21hcmtlci1lbmQnLCAnJyk7XG4gICAgICAgICAgICB0aGlzLmQzX25vZGVzLnNlbGVjdEFsbCgnLm5vZGUtY2lyY2xlJykuYXR0cigncicsIDE4KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmFyZWEuaGV4X2NvbG9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IG1lID0gZDMuc2VsZWN0KGVsZW0pO1xuICAgICAgICAgICAgbGV0IHBpY2tlZE5vZGUgPSBBcHBTdG9yZS5nZXROb2RlUGlja2VkKCk7XG4gICAgICAgICAgICBsZXQgdGd0ID0gdGhpcy5fYXJlYXMuYnlBYmJyZXZbcGlja2VkTm9kZS5hYmJyZXZdO1xuICAgICAgICAgICAgbGV0IHNyYyA9IHRoaXMuX2FyZWFzLmJ5QWJicmV2W2RhdGEuYXJlYS5hYmJyZXZdO1xuICAgICAgICAgICAgQWN0aW9ucy51bmhpZ2hsaWdodEVkZ2Uoc3JjLCB0Z3QpO1xuICAgICAgICAgICAgQWN0aW9ucy51bmJvbGRFZGdlKHNyYywgdGd0KTtcbiAgICAgICAgfVxuICAgICAgICBoaWRlVG9vbHRpcCgpO1xuICAgIH1cbiAgICBoYW5kbGVNb3VzZU92ZXJFZGdlKGVsZW0sIGRhdGEpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xpY2tlZCkge1xuICAgICAgICAgICAgbGV0IG1lID0gZDMuc2VsZWN0KGVsZW0pO1xuICAgICAgICAgICAgbGV0IHhfID0gZDMuZXZlbnQucGFnZVggKyAyNDtcbiAgICAgICAgICAgIGxldCB5XyA9IGQzLmV2ZW50LnBhZ2VZIC0gMjA7XG4gICAgICAgICAgICBBY3Rpb25zLmhpZ2hsaWdodEVkZ2UoZGF0YS5zb3VyY2UsIGRhdGEudGFyZ2V0LCAnIzAwMDAwMCcpO1xuICAgICAgICAgICAgQWN0aW9ucy5ib2xkRWRnZShkYXRhLnNvdXJjZSwgZGF0YS50YXJnZXQpO1xuICAgICAgICAgICAgc2hvd1Rvb2x0aXBUYXJnZXRTdW1tYXJ5KHtcbiAgICAgICAgICAgICAgICB0YXJnZXRfYXJlYTogdGhpcy5fYXJlYXMuYnlBYmJyZXZbZGF0YS50YXJnZXQuYWJicmV2XSxcbiAgICAgICAgICAgICAgICBzb3VyY2VfYXJlYTogdGhpcy5fYXJlYXMuYnlBYmJyZXZbZGF0YS5zb3VyY2UuYWJicmV2XSxcbiAgICAgICAgICAgICAgICBtYXRyaXg6IHRoaXMuX21hdHJpeCxcbiAgICAgICAgICAgICAgICB4OiB4XyxcbiAgICAgICAgICAgICAgICB5OiB5X30pO1xuXG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlTW91c2VPdXRFZGdlKGVsZW0sIGRhdGEpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xpY2tlZCkge1xuICAgICAgICAgICAgbGV0IG1lID0gZDMuc2VsZWN0KGVsZW0pO1xuICAgICAgICAgICAgQWN0aW9ucy51bmhpZ2hsaWdodEVkZ2UoZGF0YS5zb3VyY2UsIGRhdGEudGFyZ2V0KTtcbiAgICAgICAgICAgIEFjdGlvbnMudW5ib2xkRWRnZShkYXRhLnNvdXJjZSwgZGF0YS50YXJnZXQpO1xuICAgICAgICAgICAgaGlkZVRvb2x0aXAoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe25vZGVQaWNrZWQ6IEFwcFN0b3JlLmdldE5vZGVQaWNrZWQoKX0pO1xuICAgIH1cbiAgICBoYW5kbGVEb3dubG9hZFNWRyhlKSB7XG4gICAgICAgIGxldCBodG1sID0gdGhpcy5zdmdfZmxuZV9wYXJlbnQuaHRtbCgpO1xuICAgICAgICBsZXQgYjY0ID0gYnRvYShodG1sKTtcbiAgICAgICAgbGV0IGhyZWYgPSAnZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxcXG4nICsgYjY0O1xuICAgICAgICBlLnRhcmdldC5ocmVmID0gaHJlZjtcblxuICAgIH1cbiAgICBoYW5kbGVEb3dubG9hZENTVihlKSB7XG4gICAgICAgIGUudGFyZ2V0LmhyZWYgPSBEQVRBX0JBU0UgKyAnaW5kaXZpZHVhbF9hcmVhcy9mbG5lX2FyZWFfJyArIHRoaXMuc3RhdGUubm9kZVBpY2tlZC5hYmJyZXYgKyAnLmNzdic7XG4gICAgfVxuICAgIGhhbmRsZURvd25sb2FkR3JhcGgoZSkge1xuICAgICAgICBsZXQgaHRtbCA9IHRoaXMuZ3JhcGhfcGFyZW50Lmh0bWwoKTtcbiAgICAgICAgbGV0IGI2NCA9IGJ0b2EoaHRtbCk7XG4gICAgICAgIGxldCBocmVmID0gJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsXFxuJyArIGI2NDtcbiAgICAgICAgZS50YXJnZXQuaHJlZiA9IGhyZWY7XG5cbiAgICB9XG4gICAgaGFuZGxlU3dpdGNoVG9NYXRyaXhWaWV3KGUpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLyc7XG4gICAgfVxuXG4gICAgc2hvd0Rvd25sb2FkU1ZHSGVscChlKSB7XG4gICAgfVxuICAgIHNob3dEb3dubG9hZENTVkhlbHAoZSkge1xuICAgIH1cbiAgICBoaWRlRG93bmxvYWRTVkdIZWxwKGUpIHtcbiAgICB9XG4gICAgaGlkZURvd25sb2FkQ1NWSGVscChlKSB7XG4gICAgfVxuICAgIGhhbmRsZUZvY3VzVmlld2VyKGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBmb2N1c2VkOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbEV4cGFuZGVkOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdmb2N1c2VkJyk7XG4gICAgICAgIEFjdGlvbnMuc2V0Rm9jdXNlZFZpZXdTdGF0ZSh0cnVlKTtcbiAgICB9XG4gICAgaGFuZGxlQmx1clZpZXdlcihlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZm9jdXNlZDogZmFsc2UsXG4gICAgICAgICAgICBjb250cm9sRXhwYW5kZWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgICBBY3Rpb25zLnNldEZvY3VzZWRWaWV3U3RhdGUoZmFsc2UpO1xuICAgIH1cbiAgICBub29wKCkge1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAgICovXG4gICAgcmVuZGVyQ29udGVudCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmFqYXhEb25lKSB7XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cImdyYXBoXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cImdyYXBoLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gaWQ9XCJkM19jb250cm9sXCIgY2xhc3NOYW1lPVwiZDMtY29udHJvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibG9hZGluZy1pbWFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPXtJTUdfQkFTRSArICcvbG9hZGluZy5zdmcnfSB3aWR0aD1cIjEyMFwiIGhlaWdodD1cIjEyMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRpbmctaW1hZ2UtY2FwdGlvblwiPkxvYWRpbmcgYWRkaXRpb25hbCBkYXRhLCBwbGVhc2UgYmUgcGF0aWVudC4uLjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwiaW5mby1wYW5lbCBncmFwaC12aWV3XCI+XG4gICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHNvdXJjZXMgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUubm9kZVBpY2tlZCkge1xuICAgICAgICAgICAgICAgIHNvdXJjZXMgPSAnLCAnICsgdGhpcy5zdHJlbmd0aF9hcmVhX2NvdW50ICsgJyBzb3VyY2VzLic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cImdyYXBoXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uIGlkPVwiZ3JhcGgtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBpZD1cImQzX2NvbnRyb2xcIiBjbGFzc05hbWU9XCJkMy1jb250cm9sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoWydmb2xkYWJsZS1jb250cm9sJywgJ3RoaW4tY29udHJvbCddLCB7ZXhwYW5kZWQ6IHRoaXMuc3RhdGUuY29udHJvbEV4cGFuZGVkfSwge2ZvbGRlZDogIXRoaXMuc3RhdGUuY29udHJvbEV4cGFuZGVkfSl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJyaWVmXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udHJvbC1yb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRyb2wtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+VGhpcyB2aWV3IHByZXNlbnRzIHRoZSB3ZWlnaGVkIGFuZCBkaXJlY3RlZCBjb25uZWN0aXZpdHkgZ3JhcGggYmFzZWQgb24gdGhlIHJlc3VsdHMgb2YgPGEgaHJlZj1cImh0dHA6Ly93d3cubWFybW9zZXRicmFpbi5vcmcvd2hpdGVwYXBlciN0cmFjZXJfaW5qZWN0aW9uc1wiIHRhcmdldD1cIl9ibGFua1wiPmluamVjdGlvbnMgb2YgbW9ub3N5bmFwdGljIHJldHJvZ3JhZGUgZmx1b3Jlc2NlbnQgdHJhY2VyczwvYT4gaW5qZWN0aW9ucy48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlRoZSBncmFwaCB2aWV3IGhpZ2hsaWdodHMgdGhlIHNwYXRpYWwgcmVsYXRpb25zIGJldHdlZW4gdGhlIGNvbm5lY3RlZCBhcmVhcy4gUG9pbnRpbmcgYXQgYW4gZWRnZSwgcHJvdmlkZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNhc2VzIGluIHdoaWNoIGEgc3BlY2lmaWMgY29ubmVjdGlvbiB3YXMgb2JzZXJ2ZWQsIGFuZCBjbGlja2luZyByZXZlYWxzIGZ1cnRoZXIgaW5mb3JtYXRpb24sIGluY2x1ZGluZyBhbiBhdmVyYWdlIGNvbm5lY3Rpdml0eSBwcm9maWxlLCBpbnRlcmFjdGl2ZSB2aXN1YWxpemF0aW9ucyBvZiB0aGUgZGF0YSBmb3IgZWFjaCBpbmplY3Rpb24sIGFuZCBtZXRhZGF0YS48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uIGlkPVwiZDNcIiBjbGFzc05hbWU9XCJkM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2xvci1iYXItY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPENvbG9yQmFyIHN0eWxlPVwiZ3JhcGhcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gaWQ9XCJpbmZvLXBhbmVsXCIgY2xhc3NOYW1lPVwiZ3JhcGgtdmlld1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPFF1aWNrTGlua3MvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmplY3Rpb24taW5mb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxNYWluRmxuZSBmbG5lPXt0aGlzLmZsbmVfcGVyX2FyZWF9IGFyZWFzPXt0aGlzLl9hcmVhc30gbW9kZT0nRkxOJyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbmplY3Rpb25MaXN0IGZsbmU9e3RoaXMuc3RhdGUuZmxuZV9wZXJfaW5qZWN0aW9ufSBtb2RlPSdGTE4nIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7b2JqZWN0fVxuICAgICAqL1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IGFyZWFfbmFtZSA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm5vZGVQaWNrZWQpIHtcbiAgICAgICAgICAgIGFyZWFfbmFtZSA9IHRvVGl0bGVDYXNlKHRoaXMuc3RhdGUubm9kZVBpY2tlZC5mdWxsbmFtZSkgKyAnICgnICsgdGhpcy5zdGF0ZS5ub2RlUGlja2VkLmFiYnJldiArICcpJztcbiAgICAgICAgfVxuICAgICAgICBsZXQgZG93bmxvYWRfc3ZnID0gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaW5rLWJ1dHRvblwiPjxhIG9uQ2xpY2s9e3RoaXMuaGFuZGxlRG93bmxvYWRHcmFwaH0gZG93bmxvYWQ9XCJleHBvcnRfZmxhdG1hcF9ncmFwaC5zdmdcIj5Eb3dubG9hZCB0aGUgZ3JhcGggYXMgU1ZHPC9hPjwvZGl2PlxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwibWFpblwiPlxuICAgICAgICAgICAgICAgIDxWaWV3U3dpdGNoIHZpZXc9XCJncmFwaFwiIC8+XG4gICAgICAgICAgICAgICAge3RoaXMucmVuZGVyQ29udGVudCgpfVxuICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICApO1xuICAgIH1cblxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBqcy9jb21wb25lbnRzL01haW5HcmFwaC5yZWFjdC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFTQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUF2QkE7Ozs7Ozs7OztBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdkZBO0FBd0ZBO0FBQ0E7OztBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFBQTtBQUtBO0FBTEE7QUFPQTtBQUFBO0FBUUE7QUFPQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQU1BO0FBQ0E7QUFQQTtBQVFBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBT0E7QUFBQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBSUE7QUFBQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUExQ0E7QUE0Q0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQVNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7OztBQUVBOzs7QUFFQTs7O0FBRUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7OztBQUNBO0FBRUE7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFMQTtBQVVBO0FBWEE7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBREE7QUFEQTtBQUhBO0FBREE7QUFlQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFsQkE7QUFzQkE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQXZCQTtBQWdDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFLQTs7OztBQXByQkE7QUFDQTtBQURBO0FBc3JCQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 225:
/* unknown exports provided */
/* all exports used */
/*!*******************************************!*\
  !*** ./js/components/MainMatrix.react.js ***!
  \*******************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _InjectionList = __webpack_require__(/*! ./InjectionList.react */ 21);\n\nvar _InjectionList2 = _interopRequireDefault(_InjectionList);\n\nvar _ColorBar = __webpack_require__(/*! ./ColorBar.react */ 26);\n\nvar _ColorBar2 = _interopRequireDefault(_ColorBar);\n\nvar _MainFlne = __webpack_require__(/*! ./MainFlne.react */ 24);\n\nvar _MainFlne2 = _interopRequireDefault(_MainFlne);\n\nvar _modal = __webpack_require__(/*! ../lib/modal */ 22);\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nvar _ViewSwitch = __webpack_require__(/*! ./ViewSwitch.react */ 42);\n\nvar _ViewSwitch2 = _interopRequireDefault(_ViewSwitch);\n\nvar _AppDispatcher = __webpack_require__(/*! ../dispatcher/AppDispatcher */ 18);\n\nvar _AppDispatcher2 = _interopRequireDefault(_AppDispatcher);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _d = __webpack_require__(/*! d3 */ 12);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _classnames = __webpack_require__(/*! classnames */ 13);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _utils = __webpack_require__(/*! ../lib/utils */ 16);\n\nvar _connectivity = __webpack_require__(/*! ../lib/connectivity */ 30);\n\nvar _QuickLinks = __webpack_require__(/*! ./QuickLinks.react */ 40);\n\nvar _QuickLinks2 = _interopRequireDefault(_QuickLinks);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar MainMatrix = function (_React$Component) {\n    _inherits(MainMatrix, _React$Component);\n\n    function MainMatrix(props, context) {\n        _classCallCheck(this, MainMatrix);\n\n        var _this = _possibleConstructorReturn(this, (MainMatrix.__proto__ || Object.getPrototypeOf(MainMatrix)).call(this, props, context));\n\n        window.d3js = d3;\n        var that = _this;\n        _lodash2.default.bindAll(_this, 'handleChange', 'ajaxProgress', 'handleChangeOrder', 'showTooltip', 'hideTooltip', 'prepare', 'reorder', 'handleToggleMissingSources', 'handleModalHide', 'handleQLConnectivityTxt', 'handleToggleExpand', 'handleFocusViewer', 'handleBlurViewer', 'handleChangeDataOverlay');\n        _this.pendingAjax = [];\n        var state = {\n            ajaxDone: false,\n            order: 'alphabetically',\n            controlExpanded: true,\n            focused: false\n        };\n        var focused = localStorage.getItem('focusedView');\n        if (focused) {\n            state.focused = true;\n            state.controlExpanded = false;\n            $('body').addClass('focused');\n        }\n        _this.state = state;\n        _this._matrix = _AppStore2.default.getConnectivity();\n        _this._areas = {\n            byAbbrev: {},\n            byIndex: {},\n            byId: {}\n        };\n        _this.ajaxLoad('injections_static.json', function (inj) {\n            _this.static_inj = inj;\n            _lodash2.default.each(_this.static_inj, function (inj, key) {\n                inj.name = key;\n                inj.collapse = true;\n            });\n            _Actions2.default.saveInjectionsStatic(inj);\n        });\n        _this.ajaxLoad('flne_gmeannz_areas.json', function (flne) {\n            _this.flne_per_area = flne;\n        });\n        _this.ajaxLoad('flne_gmeannz_injections.json', function (flne) {\n            _this.flne_per_injection = flne;\n            _this.setState({ flne_per_injection: flne });\n        });\n        _this.ajaxLoad('marmoset_brain_connectivity_FLN.json', function (data) {\n            _this._connectivity_data = data;\n        });\n        _this.ajaxLoad('structures.json', function (struct) {\n            _Actions2.default.processAreas(struct);\n            _lodash2.default.each(struct, function (s) {\n                /* just make the structure name a little more pretty */\n                var txt = s.fullname;\n                txt = txt.charAt(0).toUpperCase() + txt.slice(1);\n                s.fullname = txt;\n                var cc = s.color;\n                s.hex_color = 'rgba(' + cc[0] + ',' + cc[1] + ',' + cc[2] + ', 1)';\n            });\n            _this.atlas_struct = struct;\n            /*\n            let abbrev_lookup = {};\n            _.each(struct, (area) => {\n                abbrev_lookup[area.abbrev] = area;\n            });\n            this.abbrev_lookup = abbrev_lookup;\n            */\n        });\n        _this.ajaxLoad('connectivity_1_0_1.json', function (conn) {\n            var node_lookup = {};\n            var nodes = [];\n            _lodash2.default.each(conn.nodes, function (node, i) {\n                node_lookup[i] = node;\n                nodes.push({\n                    nodeName: node,\n                    index: i\n                });\n                _this._areas.byIndex[i] = { abbrev: node, serial: i };\n                _this._areas.byAbbrev[node] = _this._areas.byIndex[i];\n            });\n            var links = [];\n            _lodash2.default.each(conn.links, function (link, i) {\n                var target = node_lookup[link[0]];\n                var source = node_lookup[link[1]];\n                links.push({\n                    target: link[0],\n                    source: link[1],\n                    value: link[2]\n                });\n            });\n            _this.nodes = nodes;\n            _this.links = links;\n            window.nodes = nodes;\n            window.links = links;\n            //targets = _.difference(orders.y, to_clear);\n            //targets = _.without.apply(_, [orders.y].concat(to_clear));\n            //targets = orders.y;\n            //this.targets = targets;\n        });\n        _this.ajaxLoad('connectivity_matrix_sorting_options.json', function (data) {\n            _this.sortOptions = data;\n        });\n        _this.svgMargin = { top: 80, right: 0, bottom: 10, left: 80 };\n        return _this;\n    }\n\n    _createClass(MainMatrix, [{\n        key: 'ajaxLoad',\n        value: function ajaxLoad(file, callback) {\n            var _this2 = this;\n\n            this.pendingAjax.push(file);\n            d3.json('/static/data/' + file, function (error, data) {\n                if (error) throw error;\n                callback(data);\n                _lodash2.default.pull(_this2.pendingAjax, file);\n                _this2.ajaxProgress();\n            });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _AppStore2.default.addChangeListener(this.handleChange);\n            var that = this;\n            $(window).on('keyup', function (e) {\n                if (e.keyCode == 70 && e.shiftKey) {\n                    if (that.state.focused) {\n                        that.handleBlurViewer();\n                    } else {\n                        that.handleFocusViewer();\n                    }\n                }\n                if (e.keyCode == 71 && e.shiftKey) {\n                    window.location.href = \"/graph.html\";\n                }\n            });\n        }\n    }, {\n        key: 'showTooltip',\n        value: function showTooltip() {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                target_area = _ref.target_area,\n                source_area = _ref.source_area,\n                x = _ref.x,\n                y = _ref.y;\n\n            var that = this;\n            var tooltip = d3.select('div.tooltip');\n            tooltip.classed('matrix-view', true);\n            tooltip.style('opacity', 1);\n            var x_ = x,\n                y_ = y;\n            if (x_ === null || x_ === undefined) {\n                x_ = d3.event.pageX + 24;\n            }\n            if (y_ === null || y_ === undefined) {\n                y_ = d3.event.pageY - 20;\n            }\n            var txt = (0, _utils.getTargetAreaSummaryHTML)(target_area, source_area, that._matrix, 'FLN');\n            tooltip.html(txt).style(\"left\", x_ + \"px\").style(\"top\", y_ + \"px\");\n        }\n    }, {\n        key: 'handleChangeDataOverlay',\n        value: function handleChangeDataOverlay(e) {\n            var value = e.target.value;\n            _Actions2.default.setDataOverlay(value);\n        }\n    }, {\n        key: 'hideTooltip',\n        value: function hideTooltip() {\n            var tooltip = d3.select('div.tooltip');\n            tooltip.style(\"opacity\", 0);\n        }\n    }, {\n        key: 'initialDraw',\n        value: function initialDraw() {\n            var data_attr = 'flne';\n            var that = this;\n            var size = this._matrix.size;\n            /* width should be around 860px */\n            var margin = that.svgMargin,\n                width = 13 * size.x,\n                height = 13 * size.y;\n            //let _left = Math.floor((860 - (width + margin.left)) / 2);\n            var _left = 20;\n            var colorFunction = (0, _utils.getColorFunc)();\n\n            var x = d3.scaleBand().range([0, width]),\n                y = d3.scaleBand().range([0, height]);\n            // let c = d3.scaleOrdinal(d3.schemeCategory10).domain(d3.range(10));\n            //let left_ = margin.left + (860 - (13 * size.x + margin.left)) / 2;\n            var svg = d3.select(\"#d3\").append(\"svg\").attr(\"width\", width + margin.left + 2).attr(\"height\", height + margin.top + 2).attr('class', 'matrix-view').style(\"margin-left\", _left + \"px\");\n\n            that.svgTag = svg;\n\n            svg.append('rect').attr('width', width + 1).attr('height', height + 1).attr('x', margin.left).attr('y', margin.top).attr('class', 'main-graph-border');\n\n            svg = svg.append(\"g\").attr(\"transform\", \"translate(\" + (margin.left + 0) + \",\" + (margin.top + 0) + \")\");\n\n            var matrix = this._matrix,\n                nodes = this.nodes,\n                links = this.links;\n            //y.domain(this.orders.name);\n            //x.domain(this.targets);\n\n            svg.append('rect').attr(\"class\", \"background\").attr(\"x\", 1).attr(\"y\", 1).attr(\"width\", width - 1).attr(\"height\", height - 1);\n            var sources = _lodash2.default.keys(matrix.sources),\n                targets = _lodash2.default.keys(matrix.targets);\n\n            x.domain(targets);\n            y.domain(sources);\n            this.scaleX = x;\n            this.scaleY = y;\n            var areas = _AppStore2.default.getAreas();\n            var m = _lodash2.default.map(d3.range(size.y), function (v, i) {\n                return _lodash2.default.map(d3.range(size.x), function (v, j) {\n                    var src_id = sources[i];\n                    var tar_id = targets[j];\n                    var elem = matrix.getData(areas.get(tar_id), areas.get(src_id));\n                    if (elem.target !== undefined) {\n                        return elem;\n                    } else {\n                        return { source: areas.get(src_id), target: areas.get(tar_id), flne: 0 };\n                    }\n                });\n            });\n            var row = svg.selectAll(\".row\").data(m).enter().append(\"g\").attr(\"class\", \"row\").attr(\"transform\", function (d, i) {\n                var offset_y = y(d[0].source.id);\n                if (offset_y !== NaN) {\n                    return \"translate(0,\" + offset_y + \")\";\n                } else {\n                    console.log('not found in table', d[0].source);\n                }\n            }).each(make_row);\n\n            that.matrixRow = row;\n            /*\n            row.append(\"line\")\n                .each(function(d) {\n                    d3.select(this).classed('row-' + d[0].source.id, true)\n                })\n                .attr(\"x2\", width-margin.left-1);\n            */\n            row.append(\"text\").attr(\"x\", -6).attr(\"y\", x.bandwidth() / 2).attr(\"dy\", \".3em\").attr(\"text-anchor\", \"end\").attr('class', 'label-row').text(function (d, i) {\n                return d[0].source.abbrev;\n            }).each(function (d) {\n                d3.select(this).classed('row-' + d[0].source.id, true);\n                //d3.select(this).classed('column-' + d.target, true)\n            });\n\n            row.append('line').attr('x2', width).attr('y1', x.bandwidth() / 2 + 1).attr('y2', x.bandwidth() / 2 + 1).attr('class', 'crosshair').each(function (d) {\n                d3.select(this).classed('row-' + d[0].source.id, true);\n                //d3.select(this).classed('column-' + d.target, true)\n            });\n\n            var label_column = svg.selectAll('g.column').data(targets).enter().append(\"g\").classed('column', true).attr(\"transform\", function (d, i) {\n                return \"translate(\" + x(d) + \")rotate(-90)\";\n            });\n            /*\n            label_column.append(\"line\")\n                .each(function(d) {\n                    d3.select(this).classed('column-' + d, true)\n                })\n                .attr(\"x1\", -(height - margin.top - 1));\n            */\n            label_column.append('line').attr('x1', -height).attr('y1', x.bandwidth() / 2 + 1).attr('y2', x.bandwidth() / 2 + 1).attr('class', 'crosshair').each(function (d) {\n                d3.select(this).classed('column-' + d, true);\n            });\n\n            label_column.append(\"text\").attr(\"x\", 6).attr(\"y\", y.bandwidth() / 2).attr(\"dy\", \".3em\").attr(\"text-anchor\", \"start\").attr('class', 'label-column').text(function (d, i) {\n                //return nodes[that.targets[i]].nodeName;\n                var area = that._areas.byId[d];\n                return area.abbrev;\n            }).each(function (d) {\n                //d3.select(this).classed('row-' + d.source, true)\n                d3.select(this).classed('column-' + d, true);\n            });\n\n            that.matrixColumn = label_column;\n            function make_row(row) {\n                var r = d3.select(this);\n                r.classed('row-' + row[0].source.id, true);\n                var cell = r.selectAll('.cell').data(row).enter().append(\"rect\").attr(\"class\", \"cell\").classed('pointer', true).each(function (d) {\n                    d3.select(this).classed('row-' + d.source.id, true);\n                    d3.select(this).classed('column-' + d.target.id, true);\n                }).attr(\"x\", function (d, i) {\n                    return x(d.target.id) + 1;\n                }).attr(\"y\", 1).attr(\"width\", x.bandwidth() - 1).attr(\"height\", y.bandwidth() - 1).style(\"fill-opacity\", function (d) {\n                    return d[data_attr] > 0 ? 1 : 1;\n                }).style(\"fill\", function (d) {\n                    if (d.source.id === d.target.id) {\n                        return 'rgba(0, 90, 20, 0.7)';\n                    } else {\n                        if (d[data_attr] > 0) {\n                            return colorFunction(d[data_attr]);\n                        } else {\n                            return '#f9f9f9';\n                        }\n                    }\n                }).attr('data-z', function (d) {\n                    return d[data_attr];\n                }).on('click', function (n) {\n                    //alert('source:'+ nodes[n.x].nodeName);\n                    //let source_node = nodes[n.source];\n                    //let dest_node = nodes[n.target];\n                    //let struct_node = that._areas.byAbbrev[dest_node.nodeName];\n                    //Actions.pickNode({nodeName: dest_node.nodeName, area: struct_node});\n                    var area = that._areas.byId[n.target.id];\n                    _Actions2.default.pickTargetArea(area);\n                    //let injections = _.filter(that.static_inj, {abbrev: area.abbrev});\n                    _Actions2.default.nodeDetail();\n                    //injections);\n                }).on('mouseover', function (n) {\n                    var this_ = d3.select(this);\n                    d3.selectAll('.row-' + n.source.id).classed('highlight', true);\n                    d3.selectAll('.column-' + n.target.id).classed('highlight', true);\n                    if (that.state.hideMissingSources) {\n                        d3.selectAll('rect.row-' + n.target.id + '.column-' + n.source.id).style('stroke', '#000000');\n                    }\n                    // highlight\n                    this_.style('stroke', '#000000');\n                    //d3.selectAll('line.row-' + (n.source.id + 1)).classed('highlight', true);\n                    //d3.selectAll('line.column-' + (n.target.id + 1)).classed('highlight', true);\n                    //let target_area = that._areas.byId[n.target];\n                    //let source_area = that._areas.byId[n.source];\n                    //that.showTooltip(nodes[n.target] + '<br/>Destination' + that._areas.byIndex[n.target].fullname) ;\n                    that.showTooltip({ target_area: n.target, source_area: n.source });\n                }).on('mouseout', function (n) {\n                    var this_ = d3.select(this);\n                    d3.selectAll('.row-' + n.source.id).classed('highlight', false);\n                    d3.selectAll('.column-' + n.target.id).classed('highlight', false);\n                    this_.style('stroke', 'none');\n                    if (that.state.hideMissingSources) {\n                        d3.selectAll('rect.row-' + n.target.id + '.column-' + n.source.id).style('stroke', 'none');\n                    }\n                    //d3.selectAll('line.row-' + (n.source + 1)).classed('highlight', false);\n                    //d3.selectAll('line.column-' + (n.target + 1)).classed('highlight', false);\n                    that.hideTooltip();\n                });\n            }\n\n            /* lastly the title / caption for axis */\n\n            svg.append(\"text\").attr(\"x\", 0).attr(\"y\", 0).attr(\"dy\", \"-4em\").attr(\"text-anchor\", \"middle\").attr('class', 'caption-source').text('Source Area').attr(\"transform\", 'translate(0 ' + (height / 2 + margin.top) + ') rotate(-90)');\n            svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", -60).attr(\"dy\", \".3em\").attr(\"text-anchor\", \"middle\").attr('class', 'caption-target').text('Target Area');\n            this.reorder(this.state.order);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _AppStore2.default.removeChangeListener(this.handleChange);\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange() {\n            if (_AppStore2.default.getNodePicked()) {\n                this.setState({\n                    nodePicked: _AppStore2.default.getNodePicked()\n                });\n            }\n        }\n        /**\n         * This function to be called when every ajax request complete\n         * when all pending ajax completes.\n         * Mark ajaxDone as true to prevent accidental multiple trigger of\n         * initialDraw (though not necessary I guess)\n         * @return\n         */\n\n    }, {\n        key: 'ajaxProgress',\n        value: function ajaxProgress() {\n            var _this3 = this;\n\n            var that = this;\n            if (this.pendingAjax.length == 0 && !this.state.ajaxDone) {\n                this.setState({ ajaxDone: true }, function () {\n                    _this3.prepare();\n                    _this3.initialDraw();\n                    var search = window.location.search.substring(1);\n                    if (search) {\n                        var query = JSON.parse('{\"' + decodeURI(search).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g, '\":\"') + '\"}');\n                        if (query.pickArea) {\n                            var highlight_area = _this3._areas.byAbbrev[query.pickArea];\n                            d3.selectAll('.row-' + highlight_area.serial).classed('highlight', true);\n                            /*\n                            d3.selectAll('.column-' + n.target.id).classed('highlight', true);\n                            if (that.state.hideMissingSources) {\n                                d3.selectAll('rect.row-' + n.target.id + '.column-' + n.source.id).style('stroke', '#000000');\n                            }\n                            // highlight\n                            this_.style('stroke', '#000000');\n                            //d3.selectAll('line.row-' + (n.source.id + 1)).classed('highlight', true);\n                            //d3.selectAll('line.column-' + (n.target.id + 1)).classed('highlight', true);\n                            //let target_area = that._areas.byId[n.target];\n                            //let source_area = that._areas.byId[n.source];\n                            //that.showTooltip(nodes[n.target] + '<br/>Destination' + that._areas.byIndex[n.target].fullname) ;\n                            that.showTooltip({target_area: n.target, source_area: n.source});\n                            */\n                        } else if (query.pickInjection) {\n                            var inj = _this3.static_inj[query.pickInjection];\n                            //let injections = _.filter(that.static_inj, {abbrev: area.abbrev});\n                            var area = that._areas.byAbbrev[inj.abbrev];\n                            _Actions2.default.pickTargetArea(area);\n                            //let injections = _.filter(that.static_inj, {abbrev: area.abbrev});\n                            //Actions.nodeDetail();\n                            _Actions2.default.expandInjection(inj);\n                            d3.selectAll('.column-' + area.id).classed('highlight', true);\n                        }\n                    }\n                });\n            }\n        }\n    }, {\n        key: 'prepare',\n        value: function prepare() {\n            var _this4 = this;\n\n            var that = this;\n            //let abbrev_lookup = {};\n            _lodash2.default.each(this.atlas_struct, function (area) {\n                var _area = _this4._areas.byAbbrev[area.abbrev];\n                _lodash2.default.assign(_area, area);\n                _this4._areas.byId[_area.id] = _area;\n                var injections = _lodash2.default.filter(that.static_inj, { abbrev: area.abbrev });\n                _area.injections = injections;\n            });\n            _Actions2.default.processConnectivity(this._connectivity_data, that.static_inj);\n            var matrix = that._matrix;\n            _lodash2.default.each(this.links, function (link) {\n                var target = that._areas.byIndex[link.target];\n                var source = that._areas.byIndex[link.source];\n                matrix.link(target, source, { target: target, source: source, value: link.value });\n                //matrix[link.target][link.source].z += link.value;\n                //nodes[link.source].count += link.value;\n                //nodes[link.target].count += link.value;\n            });\n            _AppDispatcher2.default.register(function (action) {\n                _AppDispatcher2.default.waitFor([_AppStore2.default.dispatchToken]);\n                switch (action.actionType) {\n                    case 'HIGHLIGHT_EDGE':\n                        {\n                            var from_ = action.from_;\n                            var to = action.to;\n                            var source_id = void 0;\n                            if (typeof from_ === 'string') {\n                                source_id = that._areas.byAbbrev[from_].id;\n                            } else {\n                                source_id = from_.id;\n                            }\n                            var target_id = void 0;\n                            if (typeof to === 'string') {\n                                target_id = that._areas.byAbbrev[to].id;\n                            } else {\n                                target_id = to.id;\n                            }\n                            d3.selectAll('.row-' + source_id).classed('highlight', true);\n                            d3.selectAll('.column-' + target_id).classed('highlight', true);\n                            //this_.style('stroke', '#555555');\n                            break;\n                        }\n                    case 'UNHIGHLIGHT_EDGE':\n                        {\n                            var _from_ = action.from_;\n                            var _to = action.to;\n                            var _source_id = _from_.id;\n                            var _target_id = _to.id;\n                            d3.selectAll('.row-' + _source_id).classed('highlight', false);\n                            d3.selectAll('.column-' + _target_id).classed('highlight', false);\n                            //d3.selectAll('rect.row-' + source_id + '.column-' + target_id).style('stroke', 'none');\n                            break;\n                        }\n                }\n            });\n            _Actions2.default.saveAreas(this._areas);\n            /* work out the sorting options */\n        }\n    }, {\n        key: 'handleChangeOrder',\n        value: function handleChangeOrder(e) {\n            // just be safe, it shouldn't be false\n            if (e.target.value != this.state.order) {\n                this.reorder(e.target.value);\n            }\n            this.setState({ order: e.target.value });\n        }\n    }, {\n        key: 'handleFocusViewer',\n        value: function handleFocusViewer(e) {\n            this.setState({\n                focused: true,\n                controlExpanded: false\n            });\n            $('body').addClass('focused');\n            _Actions2.default.setFocusedViewState(true);\n        }\n    }, {\n        key: 'handleBlurViewer',\n        value: function handleBlurViewer(e) {\n            this.setState({\n                focused: false,\n                controlExpanded: true\n            });\n            $('body').removeClass('focused');\n            _Actions2.default.setFocusedViewState(false);\n        }\n    }, {\n        key: 'reorder',\n        value: function reorder(order) {\n            var that = this;\n            var y = this.scaleY;\n            var x = this.scaleX;\n            /*\n            let sources = _.keys(this._matrix.sources);\n            let newY = _.clone(sources);\n             function sortFunc(a, b) {\n                switch (order) {\n                    case 'alphabetically':\n                        return d3.ascending(that._areas.byId[a].abbrev, that._areas.byId[b].abbrev);\n                        break;\n                    case 'id':\n                        return d3.descending(that._areas.byId[a].id, that._areas.byId[b].id);\n                        break;\n                    case 'flatmapX':\n                        return d3.ascending(that._areas.byId[a].flatmap_coord[0], that._areas.byId[b].flatmap_coord[0]);\n                        break;\n                    case 'custom':\n                        return d3.ascending(that._areas.byId[a].flatmap_coord[1], that._areas.byId[b].flatmap_coord[1]);\n                        return d3.ascending(that._areas.byId[a].id, that._areas.byId[b].id);\n                        break;\n                    case 'hierarchical':\n                        return d3.ascending(that._areas.byId[a].id, that._areas.byId[b].id);\n                        break;\n                    case 'random':\n                        return Math.random() * 2 - 1;\n                        break;\n                }\n            }\n             let targets = _.keys(this._matrix.targets);\n            let newX = _.clone(targets);\n            let selection;\n            */\n            var sources = _lodash2.default.map(_lodash2.default.keys(this._matrix.sources), function (v) {\n                return parseInt(v, 10);\n            });\n            var targets = _lodash2.default.map(_lodash2.default.keys(this._matrix.targets), function (v) {\n                return parseInt(v, 10);\n            });\n            var newY = _lodash2.default.map(that.sortOptions[order].axisSources, function (v) {\n                return that._areas.byAbbrev[v].id;\n            });\n            var newX = _lodash2.default.map(that.sortOptions[order].axisTargets, function (v) {\n                return that._areas.byAbbrev[v].id;\n            });\n            newY = _lodash2.default.intersection(newY, sources);\n            newX = _lodash2.default.intersection(newX, targets);\n            if (this.state.hideMissingSources) {\n                newY = _lodash2.default.intersection(newY, newX);\n            }\n            y.domain(newY);\n            x.domain(newX);\n\n            var height = 13 * newY.length;\n            that.svgTag.attr('height', height + that.svgMargin.top + 2);\n            var range = [0, height];\n            y.range(range);\n\n            var width = 13 * newX.length;\n            that.svgTag.attr('width', width + that.svgMargin.left + 2);\n            range = [0, width];\n            x.range(range);\n\n            that.matrixRow.attr(\"transform\", function (d, i) {\n                var offset_y = y(d[0].source.id);\n                if (offset_y !== undefined) {\n                    //return \"translate(0,\" + y(i) + \")\";\n                    return \"translate(0,\" + offset_y + \")\";\n                } else {\n                    return \"translate(-65535, -65535)\";\n                }\n            });\n\n            that.matrixRow.each(function () {\n                d3.select(this).selectAll('rect').attr(\"x\", function (d, i) {\n                    return x(d.target.id) + 1;\n                });\n            });\n            that.matrixColumn.attr(\"transform\", function (d, i) {\n                return \"translate(\" + x(d) + \")rotate(-90)\";\n            });\n            that.svgTag.selectAll('.caption-source').attr(\"transform\", 'translate(0 ' + height / 2 + ') rotate(-90)');\n            that.svgTag.selectAll('.background').attr('width', width - 1).attr('height', height - 1);\n            that.svgTag.selectAll('rect.main-graph-border').attr('width', width + 1).attr('height', height + 1);\n        }\n    }, {\n        key: 'handleToggleMissingSources',\n        value: function handleToggleMissingSources(e) {\n            var _this5 = this;\n\n            var value = e.target.type === 'checkbox' ? e.target.checked : e.target.value;\n            this.setState({ hideMissingSources: value }, function () {\n                return _this5.reorder(_this5.state.order);\n            });\n        }\n    }, {\n        key: 'handleSwitchToGraphView',\n        value: function handleSwitchToGraphView(e) {\n            window.location.href = '/graph.html';\n        }\n    }, {\n        key: 'handleSwitchToSLNView',\n        value: function handleSwitchToSLNView(e) {\n            window.location.href = '/sln.html';\n        }\n    }, {\n        key: 'handleModalHide',\n        value: function handleModalHide(e) {}\n    }, {\n        key: 'handleQLConnectivityTxt',\n        value: function handleQLConnectivityTxt(e) {\n            this.modal.show();\n        }\n    }, {\n        key: 'handleToggleExpand',\n        value: function handleToggleExpand(e) {\n            var state = !this.state.controlExpanded;\n            this.setState({ controlExpanded: state });\n        }\n        /**\n         * @return {object}\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            var func = (0, _utils.getColorFunc)();\n            /* temporary code to dump color chart\n            function rgb2hex(rgb){\n             rgb = rgb.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\n             return (rgb && rgb.length === 4) ? \"#\" +\n              (\"0\" + parseInt(rgb[1],10).toString(16)).slice(-2) +\n              (\"0\" + parseInt(rgb[2],10).toString(16)).slice(-2) +\n              (\"0\" + parseInt(rgb[3],10).toString(16)).slice(-2) : '';\n            }\n            _.each(_.range(0, -6.25, -0.25), v => {\n                let V = Math.pow(10, v);\n                console.log('<tr><td>' + v + '</td><td style=\"color: ' + func(V) + '\">' + rgb2hex(func(V)) + '</td><td style=\"color: ' + func(V) + '\">' + func(V) + '</td></tr>');\n            });\n            */\n            var modalStyle = {\n                width: '80%',\n                maxWidth: '1200px',\n                scrollX: 'auto',\n                overflow: 'scroll',\n                maxHeight: '100%'\n            };\n\n            var area_name = null;\n            if (this.state.nodePicked) {\n                area_name = (0, _utils.toTitleCase)(this.state.nodePicked.fullname) + ' (' + this.state.nodePicked.abbrev + ')';\n            }\n            var download_svg = _react2.default.createElement(\n                'div',\n                { className: 'link-button' },\n                _react2.default.createElement(\n                    'a',\n                    { onClick: this.handleDownloadGraph, download: 'export_flatmap_graph.svg' },\n                    'Download the graph as SVG'\n                )\n            );\n            var content = null;\n            if (!this.state.ajaxDone) {\n                content = _react2.default.createElement(\n                    'section',\n                    { className: 'main' },\n                    _react2.default.createElement('section', { className: 'switch-view' }),\n                    _react2.default.createElement(\n                        'section',\n                        { className: 'graph' },\n                        _react2.default.createElement(\n                            'section',\n                            { className: 'graph-container' },\n                            _react2.default.createElement('div', { className: 'loading matrix-view' }),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'loading-image' },\n                                _react2.default.createElement('img', { src: '/static/images/loading.svg', width: '120', height: '120' }),\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'loading-image-caption' },\n                                    'Loading additional data, please be patient...'\n                                )\n                            )\n                        ),\n                        _react2.default.createElement('section', { className: 'info-panel' })\n                    )\n                );\n            } else {\n                var sources = null;\n                if (this.state.nodePicked) {\n                    sources = ', ' + this.strength_area_count + ' sources.';\n                }\n                //this.sortOptions = _.sortBy(this.sortOptions, 'index');\n                var sortOptions = _lodash2.default.map(this.sortOptions, function (v, k) {\n                    v.key = k;\n                    return v;\n                });\n                sortOptions = _lodash2.default.sortBy(sortOptions, 'index');\n                var options = _lodash2.default.map(sortOptions, function (opt) {\n                    return _react2.default.createElement(\n                        'option',\n                        { value: opt.key, key: opt.key },\n                        opt.display\n                    );\n                });\n                //<Modal ref={modal => this.modal = modal} modalStyle={modalStyle} onHide={this.handleModalHide}>\n                //  Test modal\n                //</Modal>\n                //let cc = (<a href=\"https://creativecommons.org/licenses/by-sa/3.0/\" target=\"_blank\"><img src=\"/static/images/sa_80x15.png\"/></a>);\n                //<div className=\"foldable-arrow\" onClick={this.handleToggleExpand}>&#x25bf;</div>\n\n                content = _react2.default.createElement(\n                    'section',\n                    { className: 'main' },\n                    _react2.default.createElement(_ViewSwitch2.default, { view: 'matrix' }),\n                    _react2.default.createElement(\n                        'section',\n                        { className: 'matrix' },\n                        _react2.default.createElement(\n                            'section',\n                            { id: 'graph-container' },\n                            _react2.default.createElement(\n                                'section',\n                                { id: 'd3_control', className: 'd3-control' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: (0, _classnames2.default)(['foldable-control', 'thin-control'], { expanded: this.state.controlExpanded }, { folded: !this.state.controlExpanded }) },\n                                    _react2.default.createElement('div', { className: 'brief' }),\n                                    _react2.default.createElement(\n                                        'div',\n                                        { className: 'full' },\n                                        _react2.default.createElement(\n                                            'div',\n                                            { className: 'control-row' },\n                                            _react2.default.createElement(\n                                                'div',\n                                                { className: 'control-group' },\n                                                _react2.default.createElement(\n                                                    'p',\n                                                    null,\n                                                    'This view presents the weighed and directed connectivity matrix based on the results of ',\n                                                    _react2.default.createElement(\n                                                        'a',\n                                                        { href: 'http://www.marmosetbrain.org/whitepaper#tracer_injections', target: '_blank' },\n                                                        'injections of monosynaptic retrograde fluorescent tracers'\n                                                    ),\n                                                    ' injections.'\n                                                ),\n                                                _react2.default.createElement(\n                                                    'p',\n                                                    null,\n                                                    'The rows and columns of the matrix represent individual cortical areas. The ',\n                                                    _react2.default.createElement(\n                                                        'i',\n                                                        null,\n                                                        'Targets'\n                                                    ),\n                                                    ' are the injected areas while the ',\n                                                    _react2.default.createElement(\n                                                        'i',\n                                                        null,\n                                                        'Sources'\n                                                    ),\n                                                    ' indicate the areas in which the projections originate. The intrinsic connections are excluded from the analysis.'\n                                                )\n                                            )\n                                        )\n                                    ),\n                                    _react2.default.createElement(\n                                        'div',\n                                        { className: 'control-row list-areas' },\n                                        _react2.default.createElement(\n                                            'div',\n                                            { className: 'control-group' },\n                                            _react2.default.createElement(\n                                                'div',\n                                                { className: 'control-group-half' },\n                                                _react2.default.createElement(\n                                                    'label',\n                                                    null,\n                                                    'List the areas '\n                                                ),\n                                                _react2.default.createElement(\n                                                    'select',\n                                                    { onChange: this.handleChangeOrder, value: this.state.order },\n                                                    options\n                                                )\n                                            ),\n                                            _react2.default.createElement(\n                                                'div',\n                                                { className: 'control-group-half' },\n                                                _react2.default.createElement(\n                                                    'label',\n                                                    { className: 'clickable', htmlFor: 'switch_edge_complete' },\n                                                    this.state.hideMissingSources ? 'Switch to the full matrix' : 'Switch to the edge-complete matrix'\n                                                ),\n                                                _react2.default.createElement('input', { className: 'hidden', id: 'switch_edge_complete', type: 'checkbox', checked: this.state.hideMissingSources,\n                                                    value: true,\n                                                    onChange: this.handleToggleMissingSources\n                                                })\n                                            )\n                                        )\n                                    )\n                                )\n                            ),\n                            _react2.default.createElement('section', { id: 'd3', className: 'd3' }),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'color-bar-container' },\n                                _react2.default.createElement(_ColorBar2.default, { style: 'matrix', mode: 'FLN' })\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'section',\n                            { id: 'info-panel', className: 'matrix-view' },\n                            _react2.default.createElement(_QuickLinks2.default, null),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'injection-info' },\n                                _react2.default.createElement(_MainFlne2.default, { flne: this.flne_per_area, areas: this._areas, mode: 'FLN' }),\n                                _react2.default.createElement(_InjectionList2.default, { flne: this.state.flne_per_injection, mode: 'FLN' })\n                            )\n                        )\n                    )\n                );\n            }\n            return content;\n        }\n    }]);\n\n    return MainMatrix;\n}(_react2.default.Component);\n\nexports.default = MainMatrix;\n;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2pzL2NvbXBvbmVudHMvTWFpbk1hdHJpeC5yZWFjdC5qcz9mNTU0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucy9BY3Rpb25zJztcbmltcG9ydCBBcHBTdG9yZSBmcm9tICcuLi9zdG9yZXMvQXBwU3RvcmUnO1xuaW1wb3J0IEluamVjdGlvbkxpc3QgZnJvbSAnLi9JbmplY3Rpb25MaXN0LnJlYWN0JztcbmltcG9ydCBDb2xvckJhciBmcm9tICcuL0NvbG9yQmFyLnJlYWN0JztcbmltcG9ydCBNYWluRmxuZSBmcm9tICcuL01haW5GbG5lLnJlYWN0JztcbmltcG9ydCBNb2RhbCBmcm9tICcuLi9saWIvbW9kYWwnO1xuaW1wb3J0IFZpZXdTd2l0Y2ggZnJvbSAnLi9WaWV3U3dpdGNoLnJlYWN0JztcbmltcG9ydCBBcHBEaXNwYXRjaGVyIGZyb20gJy4uL2Rpc3BhdGNoZXIvQXBwRGlzcGF0Y2hlcic7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQge3RvVGl0bGVDYXNlLCBnZXRDb2xvckZ1bmMsIHNjaWVudGlmaWNOb3Rpb24sIGdldFRhcmdldEFyZWFTdW1tYXJ5SFRNTH0gZnJvbSAnLi4vbGliL3V0aWxzJztcbmltcG9ydCB7Q29ubmVjdGl2aXR5fSBmcm9tICcuLi9saWIvY29ubmVjdGl2aXR5JztcbmltcG9ydCBRdWlja0xpbmtzIGZyb20gJy4vUXVpY2tMaW5rcy5yZWFjdCc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYWluTWF0cml4IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCkge1xuICAgICAgICBzdXBlcihwcm9wcywgY29udGV4dCk7XG4gICAgICAgIHdpbmRvdy5kM2pzID0gZDM7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgXy5iaW5kQWxsKHRoaXMsICdoYW5kbGVDaGFuZ2UnLCAnYWpheFByb2dyZXNzJywgJ2hhbmRsZUNoYW5nZU9yZGVyJyxcbiAgICAgICAgICAgICAgICAnc2hvd1Rvb2x0aXAnLCAnaGlkZVRvb2x0aXAnLCAncHJlcGFyZScsICdyZW9yZGVyJyxcbiAgICAgICAgICAgICAgICAnaGFuZGxlVG9nZ2xlTWlzc2luZ1NvdXJjZXMnLCAnaGFuZGxlTW9kYWxIaWRlJyxcbiAgICAgICAgICAgICAgICAnaGFuZGxlUUxDb25uZWN0aXZpdHlUeHQnLCAnaGFuZGxlVG9nZ2xlRXhwYW5kJyxcbiAgICAgICAgICAgICAgICAnaGFuZGxlRm9jdXNWaWV3ZXInLCAnaGFuZGxlQmx1clZpZXdlcicsXG4gICAgICAgICAgICAgICAgJ2hhbmRsZUNoYW5nZURhdGFPdmVybGF5JyxcbiAgICAgICAgICAgICk7XG4gICAgICAgIHRoaXMucGVuZGluZ0FqYXggPSBbXTtcbiAgICAgICAgbGV0IHN0YXRlID0ge1xuICAgICAgICAgICAgYWpheERvbmU6IGZhbHNlLFxuICAgICAgICAgICAgb3JkZXI6ICdhbHBoYWJldGljYWxseScsXG4gICAgICAgICAgICBjb250cm9sRXhwYW5kZWQ6IHRydWUsXG4gICAgICAgICAgICBmb2N1c2VkOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICBsZXQgZm9jdXNlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmb2N1c2VkVmlldycpO1xuICAgICAgICBpZiAoZm9jdXNlZCkge1xuICAgICAgICAgICAgc3RhdGUuZm9jdXNlZCA9IHRydWU7XG4gICAgICAgICAgICBzdGF0ZS5jb250cm9sRXhwYW5kZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5fbWF0cml4ID0gQXBwU3RvcmUuZ2V0Q29ubmVjdGl2aXR5KCk7XG4gICAgICAgIHRoaXMuX2FyZWFzID0ge1xuICAgICAgICAgICAgYnlBYmJyZXY6IHt9LFxuICAgICAgICAgICAgYnlJbmRleDoge30sXG4gICAgICAgICAgICBieUlkOiB7fVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFqYXhMb2FkKCdpbmplY3Rpb25zX3N0YXRpYy5qc29uJywgKGluaikgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0aWNfaW5qID0gaW5qO1xuICAgICAgICAgICAgXy5lYWNoKHRoaXMuc3RhdGljX2luaiwgKGluaiwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaW5qLm5hbWUgPSBrZXk7XG4gICAgICAgICAgICAgICAgaW5qLmNvbGxhcHNlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgQWN0aW9ucy5zYXZlSW5qZWN0aW9uc1N0YXRpYyhpbmopO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hamF4TG9hZCgnZmxuZV9nbWVhbm56X2FyZWFzLmpzb24nLCAoZmxuZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mbG5lX3Blcl9hcmVhID0gZmxuZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWpheExvYWQoJ2ZsbmVfZ21lYW5uel9pbmplY3Rpb25zLmpzb24nLCAoZmxuZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mbG5lX3Blcl9pbmplY3Rpb24gPSBmbG5lO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZmxuZV9wZXJfaW5qZWN0aW9uOiBmbG5lfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFqYXhMb2FkKCdtYXJtb3NldF9icmFpbl9jb25uZWN0aXZpdHlfRkxOLmpzb24nLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fY29ubmVjdGl2aXR5X2RhdGEgPSBkYXRhO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hamF4TG9hZCgnc3RydWN0dXJlcy5qc29uJywgKHN0cnVjdCkgPT4ge1xuICAgICAgICAgICAgQWN0aW9ucy5wcm9jZXNzQXJlYXMoc3RydWN0KTtcbiAgICAgICAgICAgIF8uZWFjaChzdHJ1Y3QsIHMgPT4ge1xuICAgICAgICAgICAgICAgIC8qIGp1c3QgbWFrZSB0aGUgc3RydWN0dXJlIG5hbWUgYSBsaXR0bGUgbW9yZSBwcmV0dHkgKi9cbiAgICAgICAgICAgICAgICBsZXQgdHh0ID0gcy5mdWxsbmFtZTtcbiAgICAgICAgICAgICAgICB0eHQgPSB0eHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eHQuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgcy5mdWxsbmFtZSA9IHR4dDtcbiAgICAgICAgICAgICAgICBsZXQgY2MgPSBzLmNvbG9yO1xuICAgICAgICAgICAgICAgIHMuaGV4X2NvbG9yID0gJ3JnYmEoJyArIGNjWzBdICsgJywnICsgY2NbMV0gKyAnLCcgKyBjY1syXSArICcsIDEpJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5hdGxhc19zdHJ1Y3QgPSBzdHJ1Y3Q7XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgbGV0IGFiYnJldl9sb29rdXAgPSB7fTtcbiAgICAgICAgICAgIF8uZWFjaChzdHJ1Y3QsIChhcmVhKSA9PiB7XG4gICAgICAgICAgICAgICAgYWJicmV2X2xvb2t1cFthcmVhLmFiYnJldl0gPSBhcmVhO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmFiYnJldl9sb29rdXAgPSBhYmJyZXZfbG9va3VwO1xuICAgICAgICAgICAgKi9cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWpheExvYWQoJ2Nvbm5lY3Rpdml0eV8xXzBfMS5qc29uJywgKGNvbm4pID0+IHtcbiAgICAgICAgICAgIGxldCBub2RlX2xvb2t1cCA9IHt9O1xuICAgICAgICAgICAgbGV0IG5vZGVzID0gW107XG4gICAgICAgICAgICBfLmVhY2goY29ubi5ub2RlcywgKG5vZGUsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBub2RlX2xvb2t1cFtpXSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgbm9kZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVOYW1lOiBub2RlLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuX2FyZWFzLmJ5SW5kZXhbaV0gPSB7YWJicmV2OiBub2RlLCBzZXJpYWw6IGl9O1xuICAgICAgICAgICAgICAgIHRoaXMuX2FyZWFzLmJ5QWJicmV2W25vZGVdID0gdGhpcy5fYXJlYXMuYnlJbmRleFtpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IGxpbmtzID0gW107XG4gICAgICAgICAgICBfLmVhY2goY29ubi5saW5rcywgKGxpbmssIGkpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gbm9kZV9sb29rdXBbbGlua1swXV07XG4gICAgICAgICAgICAgICAgbGV0IHNvdXJjZSA9IG5vZGVfbG9va3VwW2xpbmtbMV1dO1xuICAgICAgICAgICAgICAgIGxpbmtzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGxpbmtbMF0sXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogbGlua1sxXSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGxpbmtbMl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5ub2RlcyA9IG5vZGVzO1xuICAgICAgICAgICAgdGhpcy5saW5rcyA9IGxpbmtzO1xuICAgICAgICAgICAgd2luZG93Lm5vZGVzID0gbm9kZXM7XG4gICAgICAgICAgICB3aW5kb3cubGlua3MgPSBsaW5rcztcbiAgICAgICAgICAgIC8vdGFyZ2V0cyA9IF8uZGlmZmVyZW5jZShvcmRlcnMueSwgdG9fY2xlYXIpO1xuICAgICAgICAgICAgLy90YXJnZXRzID0gXy53aXRob3V0LmFwcGx5KF8sIFtvcmRlcnMueV0uY29uY2F0KHRvX2NsZWFyKSk7XG4gICAgICAgICAgICAvL3RhcmdldHMgPSBvcmRlcnMueTtcbiAgICAgICAgICAgIC8vdGhpcy50YXJnZXRzID0gdGFyZ2V0cztcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWpheExvYWQoJ2Nvbm5lY3Rpdml0eV9tYXRyaXhfc29ydGluZ19vcHRpb25zLmpzb24nLCBkYXRhID0+IHtcbiAgICAgICAgICAgIHRoaXMuc29ydE9wdGlvbnMgPSBkYXRhO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdmdNYXJnaW4gPSB7dG9wOiA4MCwgcmlnaHQ6IDAsIGJvdHRvbTogMTAsIGxlZnQ6IDgwfTtcbiAgICB9XG4gICAgYWpheExvYWQoZmlsZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nQWpheC5wdXNoKGZpbGUpO1xuICAgICAgICBkMy5qc29uKCcvc3RhdGljL2RhdGEvJyArIGZpbGUsIChlcnJvciwgZGF0YSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuICAgICAgICAgICAgXy5wdWxsKHRoaXMucGVuZGluZ0FqYXgsIGZpbGUpO1xuICAgICAgICAgICAgdGhpcy5hamF4UHJvZ3Jlc3MoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBBcHBTdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLmhhbmRsZUNoYW5nZSk7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgJCh3aW5kb3cpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gNzAgJiYgZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGF0LnN0YXRlLmZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5oYW5kbGVCbHVyVmlld2VyKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5oYW5kbGVGb2N1c1ZpZXdlcigpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSA3MSAmJiBlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9ncmFwaC5odG1sXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzaG93VG9vbHRpcCh7dGFyZ2V0X2FyZWEsIHNvdXJjZV9hcmVhLCB4LCB5fSA9IHt9KSB7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgbGV0IHRvb2x0aXAgPSBkMy5zZWxlY3QoJ2Rpdi50b29sdGlwJyk7XG4gICAgICAgIHRvb2x0aXAuY2xhc3NlZCgnbWF0cml4LXZpZXcnLCB0cnVlKTtcbiAgICAgICAgdG9vbHRpcFxuICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgMSk7XG4gICAgICAgIGxldCB4XyA9IHgsIHlfID0geTtcbiAgICAgICAgaWYgKHhfID09PSBudWxsIHx8IHhfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHhfID0gZDMuZXZlbnQucGFnZVggKyAyNDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoeV8gPT09IG51bGwgfHwgeV8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgeV8gPSBkMy5ldmVudC5wYWdlWSAtIDIwO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0eHQgPSBnZXRUYXJnZXRBcmVhU3VtbWFyeUhUTUwodGFyZ2V0X2FyZWEsIHNvdXJjZV9hcmVhLCB0aGF0Ll9tYXRyaXgsICdGTE4nKTtcbiAgICAgICAgdG9vbHRpcC5odG1sKHR4dClcbiAgICAgICAgICAgIC5zdHlsZShcImxlZnRcIiwgKHhfKSArIFwicHhcIilcbiAgICAgICAgICAgIC5zdHlsZShcInRvcFwiLCAoeV8pICsgXCJweFwiKTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlRGF0YU92ZXJsYXkoZSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICBBY3Rpb25zLnNldERhdGFPdmVybGF5KHZhbHVlKTtcbiAgICB9XG4gICAgaGlkZVRvb2x0aXAoKSB7XG4gICAgICAgIGxldCB0b29sdGlwID0gZDMuc2VsZWN0KCdkaXYudG9vbHRpcCcpO1xuICAgICAgICB0b29sdGlwXG4gICAgICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDApO1xuICAgIH1cblxuICAgIGluaXRpYWxEcmF3KCkge1xuICAgICAgICBjb25zdCBkYXRhX2F0dHIgPSAnZmxuZSc7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgbGV0IHNpemUgPSB0aGlzLl9tYXRyaXguc2l6ZTtcbiAgICAgICAgLyogd2lkdGggc2hvdWxkIGJlIGFyb3VuZCA4NjBweCAqL1xuICAgICAgICBsZXQgbWFyZ2luID0gdGhhdC5zdmdNYXJnaW4sXG4gICAgICAgICAgICB3aWR0aCA9IDEzICogc2l6ZS54LFxuICAgICAgICAgICAgaGVpZ2h0ID0gMTMgKiBzaXplLnk7XG4gICAgICAgIC8vbGV0IF9sZWZ0ID0gTWF0aC5mbG9vcigoODYwIC0gKHdpZHRoICsgbWFyZ2luLmxlZnQpKSAvIDIpO1xuICAgICAgICBsZXQgX2xlZnQgPSAyMDtcbiAgICAgICAgbGV0IGNvbG9yRnVuY3Rpb24gPSBnZXRDb2xvckZ1bmMoKTtcblxuICAgICAgICBsZXQgeCA9IGQzLnNjYWxlQmFuZCgpLnJhbmdlKFswLCB3aWR0aF0pLFxuICAgICAgICAgICAgeSA9IGQzLnNjYWxlQmFuZCgpLnJhbmdlKFswLCBoZWlnaHRdKTtcbiAgICAgICAgLy8gbGV0IGMgPSBkMy5zY2FsZU9yZGluYWwoZDMuc2NoZW1lQ2F0ZWdvcnkxMCkuZG9tYWluKGQzLnJhbmdlKDEwKSk7XG4gICAgICAgIC8vbGV0IGxlZnRfID0gbWFyZ2luLmxlZnQgKyAoODYwIC0gKDEzICogc2l6ZS54ICsgbWFyZ2luLmxlZnQpKSAvIDI7XG4gICAgICAgIGxldCBzdmcgPSBkMy5zZWxlY3QoXCIjZDNcIikuYXBwZW5kKFwic3ZnXCIpXG4gICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyAyKVxuICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIDIpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbWF0cml4LXZpZXcnKVxuICAgICAgICAgICAgLnN0eWxlKFwibWFyZ2luLWxlZnRcIiwgX2xlZnQgKyBcInB4XCIpXG5cbiAgICAgICAgdGhhdC5zdmdUYWcgPSBzdmc7XG5cbiAgICAgICAgc3ZnLmFwcGVuZCgncmVjdCcpLmF0dHIoJ3dpZHRoJywgd2lkdGggKyAxKS5hdHRyKCdoZWlnaHQnLCBoZWlnaHQgKyAxKVxuICAgICAgICAgICAgLmF0dHIoJ3gnLCBtYXJnaW4ubGVmdClcbiAgICAgICAgICAgIC5hdHRyKCd5JywgbWFyZ2luLnRvcClcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdtYWluLWdyYXBoLWJvcmRlcicpO1xuXG4gICAgICAgIHN2ZyA9IHN2Z1xuICAgICAgICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIChtYXJnaW4ubGVmdCArIDApICsgXCIsXCIgKyAobWFyZ2luLnRvcCArIDApICsgXCIpXCIpXG5cblxuXG4gICAgICAgIGxldCBtYXRyaXggPSB0aGlzLl9tYXRyaXgsIG5vZGVzID0gdGhpcy5ub2RlcywgbGlua3MgPSB0aGlzLmxpbmtzO1xuICAgICAgICAvL3kuZG9tYWluKHRoaXMub3JkZXJzLm5hbWUpO1xuICAgICAgICAvL3guZG9tYWluKHRoaXMudGFyZ2V0cyk7XG5cbiAgICAgICAgc3ZnLmFwcGVuZCgncmVjdCcpXG4gICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYmFja2dyb3VuZFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIDEpXG4gICAgICAgICAgICAuYXR0cihcInlcIiwgMSlcbiAgICAgICAgICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGggLSAxKVxuICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0IC0gMSk7XG4gICAgICAgIGxldCBzb3VyY2VzID0gXy5rZXlzKG1hdHJpeC5zb3VyY2VzKSxcbiAgICAgICAgICAgIHRhcmdldHMgPSBfLmtleXMobWF0cml4LnRhcmdldHMpO1xuXG4gICAgICAgIHguZG9tYWluKHRhcmdldHMpO1xuICAgICAgICB5LmRvbWFpbihzb3VyY2VzKTtcbiAgICAgICAgdGhpcy5zY2FsZVggPSB4O1xuICAgICAgICB0aGlzLnNjYWxlWSA9IHk7XG4gICAgICAgIGNvbnN0IGFyZWFzID0gQXBwU3RvcmUuZ2V0QXJlYXMoKTtcbiAgICAgICAgbGV0IG0gPSBfLm1hcChkMy5yYW5nZShzaXplLnkpLCBmdW5jdGlvbih2LCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5tYXAoZDMucmFuZ2Uoc2l6ZS54KSwgZnVuY3Rpb24odiwgaikge1xuICAgICAgICAgICAgICAgIGxldCBzcmNfaWQgPSBzb3VyY2VzW2ldO1xuICAgICAgICAgICAgICAgIGxldCB0YXJfaWQgPSB0YXJnZXRzW2pdO1xuICAgICAgICAgICAgICAgIGxldCBlbGVtID0gbWF0cml4LmdldERhdGEoYXJlYXMuZ2V0KHRhcl9pZCksIGFyZWFzLmdldChzcmNfaWQpKTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbS50YXJnZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge3NvdXJjZTogYXJlYXMuZ2V0KHNyY19pZCksIHRhcmdldDogYXJlYXMuZ2V0KHRhcl9pZCksIGZsbmU6IDB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHJvdyA9IHN2Zy5zZWxlY3RBbGwoXCIucm93XCIpXG4gICAgICAgICAgICAuZGF0YShtKVxuICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInJvd1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgIGxldCBvZmZzZXRfeSA9IHkoZFswXS5zb3VyY2UuaWQpO1xuICAgICAgICAgICAgICAgIGlmIChvZmZzZXRfeSAhPT0gTmFOKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZSgwLFwiICsgb2Zmc2V0X3kgKyBcIilcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbm90IGZvdW5kIGluIHRhYmxlJywgZFswXS5zb3VyY2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZWFjaChtYWtlX3Jvdyk7XG5cblxuICAgICAgICB0aGF0Lm1hdHJpeFJvdyA9IHJvdztcbiAgICAgICAgLypcbiAgICAgICAgcm93LmFwcGVuZChcImxpbmVcIilcbiAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgncm93LScgKyBkWzBdLnNvdXJjZS5pZCwgdHJ1ZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXR0cihcIngyXCIsIHdpZHRoLW1hcmdpbi5sZWZ0LTEpO1xuICAgICAgICAqL1xuICAgICAgICByb3cuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIC02KVxuICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIHguYmFuZHdpZHRoKCkgLyAyKVxuICAgICAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zZW1cIilcbiAgICAgICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJlbmRcIilcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYWJlbC1yb3cnKVxuICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gZFswXS5zb3VyY2UuYWJicmV2OyB9KVxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdyb3ctJyArIGRbMF0uc291cmNlLmlkLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAvL2QzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdjb2x1bW4tJyArIGQudGFyZ2V0LCB0cnVlKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcm93LmFwcGVuZCgnbGluZScpXG4gICAgICAgICAgICAuYXR0cigneDInLCB3aWR0aClcbiAgICAgICAgICAgIC5hdHRyKCd5MScsIHguYmFuZHdpZHRoKCkgLyAyICsgMSlcbiAgICAgICAgICAgIC5hdHRyKCd5MicsIHguYmFuZHdpZHRoKCkgLyAyICsgMSlcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdjcm9zc2hhaXInKVxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdyb3ctJyArIGRbMF0uc291cmNlLmlkLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAvL2QzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdjb2x1bW4tJyArIGQudGFyZ2V0LCB0cnVlKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGxhYmVsX2NvbHVtbiA9IHN2Zy5zZWxlY3RBbGwoJ2cuY29sdW1uJylcbiAgICAgICAgICAgIC5kYXRhKHRhcmdldHMpXG4gICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuY2xhc3NlZCgnY29sdW1uJywgIHRydWUpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgeChkKSArIFwiKXJvdGF0ZSgtOTApXCI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgLypcbiAgICAgICAgbGFiZWxfY29sdW1uLmFwcGVuZChcImxpbmVcIilcbiAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnY29sdW1uLScgKyBkLCB0cnVlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hdHRyKFwieDFcIiwgLShoZWlnaHQgLSBtYXJnaW4udG9wIC0gMSkpO1xuICAgICAgICAqL1xuICAgICAgICBsYWJlbF9jb2x1bW4uYXBwZW5kKCdsaW5lJylcbiAgICAgICAgICAgIC5hdHRyKCd4MScsIC0oaGVpZ2h0KSlcbiAgICAgICAgICAgIC5hdHRyKCd5MScsIHguYmFuZHdpZHRoKCkgLyAyICsgMSlcbiAgICAgICAgICAgIC5hdHRyKCd5MicsIHguYmFuZHdpZHRoKCkgLyAyICsgMSlcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdjcm9zc2hhaXInKVxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdjb2x1bW4tJyArIGQsIHRydWUpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBsYWJlbF9jb2x1bW4uYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIDYpXG4gICAgICAgICAgICAuYXR0cihcInlcIiwgeS5iYW5kd2lkdGgoKSAvIDIpXG4gICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLjNlbVwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBcInN0YXJ0XCIpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGFiZWwtY29sdW1uJylcbiAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgICAgICAgICAvL3JldHVybiBub2Rlc1t0aGF0LnRhcmdldHNbaV1dLm5vZGVOYW1lO1xuICAgICAgICAgICAgICAgIGxldCBhcmVhID0gdGhhdC5fYXJlYXMuYnlJZFtkXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJlYS5hYmJyZXY7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIC8vZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ3Jvdy0nICsgZC5zb3VyY2UsIHRydWUpXG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ2NvbHVtbi0nICsgZCwgdHJ1ZSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHRoYXQubWF0cml4Q29sdW1uID0gbGFiZWxfY29sdW1uO1xuICAgICAgICBmdW5jdGlvbiBtYWtlX3Jvdyhyb3cpIHtcbiAgICAgICAgICAgIGxldCByID0gZDMuc2VsZWN0KHRoaXMpO1xuICAgICAgICAgICAgci5jbGFzc2VkKCdyb3ctJyArIHJvd1swXS5zb3VyY2UuaWQsIHRydWUpO1xuICAgICAgICAgICAgbGV0IGNlbGwgPSByLnNlbGVjdEFsbCgnLmNlbGwnKVxuICAgICAgICAgICAgICAgIC5kYXRhKHJvdylcbiAgICAgICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImNlbGxcIilcbiAgICAgICAgICAgICAgICAuY2xhc3NlZCgncG9pbnRlcicsIHRydWUpXG4gICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgncm93LScgKyBkLnNvdXJjZS5pZCwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ2NvbHVtbi0nICsgZC50YXJnZXQuaWQsIHRydWUpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geChkLnRhcmdldC5pZCkgKyAxO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIDEpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB4LmJhbmR3aWR0aCgpIC0gMSlcbiAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCB5LmJhbmR3aWR0aCgpIC0gMSlcbiAgICAgICAgICAgICAgICAuc3R5bGUoXCJmaWxsLW9wYWNpdHlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZFtkYXRhX2F0dHJdID4gMCA/IDEgOiAxOyB9KVxuXG4gICAgICAgICAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkLnNvdXJjZS5pZCA9PT0gZC50YXJnZXQuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAncmdiYSgwLCA5MCwgMjAsIDAuNyknO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRbZGF0YV9hdHRyXSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3JGdW5jdGlvbihkW2RhdGFfYXR0cl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyNmOWY5ZjknO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIC5hdHRyKCdkYXRhLXonLCBkID0+IGRbZGF0YV9hdHRyXSlcbiAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24obikge1xuICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KCdzb3VyY2U6Jysgbm9kZXNbbi54XS5ub2RlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vbGV0IHNvdXJjZV9ub2RlID0gbm9kZXNbbi5zb3VyY2VdO1xuICAgICAgICAgICAgICAgICAgICAvL2xldCBkZXN0X25vZGUgPSBub2Rlc1tuLnRhcmdldF07XG4gICAgICAgICAgICAgICAgICAgIC8vbGV0IHN0cnVjdF9ub2RlID0gdGhhdC5fYXJlYXMuYnlBYmJyZXZbZGVzdF9ub2RlLm5vZGVOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgLy9BY3Rpb25zLnBpY2tOb2RlKHtub2RlTmFtZTogZGVzdF9ub2RlLm5vZGVOYW1lLCBhcmVhOiBzdHJ1Y3Rfbm9kZX0pO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYXJlYSA9IHRoYXQuX2FyZWFzLmJ5SWRbbi50YXJnZXQuaWRdO1xuICAgICAgICAgICAgICAgICAgICBBY3Rpb25zLnBpY2tUYXJnZXRBcmVhKGFyZWEpO1xuICAgICAgICAgICAgICAgICAgICAvL2xldCBpbmplY3Rpb25zID0gXy5maWx0ZXIodGhhdC5zdGF0aWNfaW5qLCB7YWJicmV2OiBhcmVhLmFiYnJldn0pO1xuICAgICAgICAgICAgICAgICAgICBBY3Rpb25zLm5vZGVEZXRhaWwoKTtcbiAgICAgICAgICAgICAgICAgICAgLy9pbmplY3Rpb25zKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24obikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGhpc18gPSBkMy5zZWxlY3QodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLnJvdy0nICsgbi5zb3VyY2UuaWQpLmNsYXNzZWQoJ2hpZ2hsaWdodCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5jb2x1bW4tJyArIG4udGFyZ2V0LmlkKS5jbGFzc2VkKCdoaWdobGlnaHQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuc3RhdGUuaGlkZU1pc3NpbmdTb3VyY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJ3JlY3Qucm93LScgKyBuLnRhcmdldC5pZCArICcuY29sdW1uLScgKyBuLnNvdXJjZS5pZCkuc3R5bGUoJ3N0cm9rZScsICcjMDAwMDAwJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gaGlnaGxpZ2h0XG4gICAgICAgICAgICAgICAgICAgIHRoaXNfLnN0eWxlKCdzdHJva2UnLCAnIzAwMDAwMCcpO1xuICAgICAgICAgICAgICAgICAgICAvL2QzLnNlbGVjdEFsbCgnbGluZS5yb3ctJyArIChuLnNvdXJjZS5pZCArIDEpKS5jbGFzc2VkKCdoaWdobGlnaHQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgLy9kMy5zZWxlY3RBbGwoJ2xpbmUuY29sdW1uLScgKyAobi50YXJnZXQuaWQgKyAxKSkuY2xhc3NlZCgnaGlnaGxpZ2h0JywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vbGV0IHRhcmdldF9hcmVhID0gdGhhdC5fYXJlYXMuYnlJZFtuLnRhcmdldF07XG4gICAgICAgICAgICAgICAgICAgIC8vbGV0IHNvdXJjZV9hcmVhID0gdGhhdC5fYXJlYXMuYnlJZFtuLnNvdXJjZV07XG4gICAgICAgICAgICAgICAgICAgIC8vdGhhdC5zaG93VG9vbHRpcChub2Rlc1tuLnRhcmdldF0gKyAnPGJyLz5EZXN0aW5hdGlvbicgKyB0aGF0Ll9hcmVhcy5ieUluZGV4W24udGFyZ2V0XS5mdWxsbmFtZSkgO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnNob3dUb29sdGlwKHt0YXJnZXRfYXJlYTogbi50YXJnZXQsIHNvdXJjZV9hcmVhOiBuLnNvdXJjZX0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRoaXNfID0gZDMuc2VsZWN0KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5yb3ctJyArIG4uc291cmNlLmlkKS5jbGFzc2VkKCdoaWdobGlnaHQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbHVtbi0nICsgbi50YXJnZXQuaWQpLmNsYXNzZWQoJ2hpZ2hsaWdodCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpc18uc3R5bGUoJ3N0cm9rZScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LnN0YXRlLmhpZGVNaXNzaW5nU291cmNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCdyZWN0LnJvdy0nICsgbi50YXJnZXQuaWQgKyAnLmNvbHVtbi0nICsgbi5zb3VyY2UuaWQpLnN0eWxlKCdzdHJva2UnLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vZDMuc2VsZWN0QWxsKCdsaW5lLnJvdy0nICsgKG4uc291cmNlICsgMSkpLmNsYXNzZWQoJ2hpZ2hsaWdodCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgLy9kMy5zZWxlY3RBbGwoJ2xpbmUuY29sdW1uLScgKyAobi50YXJnZXQgKyAxKSkuY2xhc3NlZCgnaGlnaGxpZ2h0JywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmhpZGVUb29sdGlwKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIGxhc3RseSB0aGUgdGl0bGUgLyBjYXB0aW9uIGZvciBheGlzICovXG5cbiAgICAgICAgc3ZnLmFwcGVuZChcInRleHRcIilcbiAgICAgICAgICAgIC5hdHRyKFwieFwiLCAwKVxuICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIDApXG4gICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLTRlbVwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2NhcHRpb24tc291cmNlJylcbiAgICAgICAgICAgIC50ZXh0KCdTb3VyY2UgQXJlYScpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCAndHJhbnNsYXRlKDAgJyArICgoaGVpZ2h0IC8gMikgKyBtYXJnaW4udG9wKSArICcpIHJvdGF0ZSgtOTApJyk7XG4gICAgICAgIHN2Zy5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgd2lkdGggLyAyKVxuICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIC02MClcbiAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuM2VtXCIpXG4gICAgICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnY2FwdGlvbi10YXJnZXQnKVxuICAgICAgICAgICAgLnRleHQoJ1RhcmdldCBBcmVhJyk7XG4gICAgICAgIHRoaXMucmVvcmRlcih0aGlzLnN0YXRlLm9yZGVyKTtcbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIEFwcFN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMuaGFuZGxlQ2hhbmdlKTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKCkge1xuICAgICAgICBpZiAoQXBwU3RvcmUuZ2V0Tm9kZVBpY2tlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBub2RlUGlja2VkOiBBcHBTdG9yZS5nZXROb2RlUGlja2VkKCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIGV2ZXJ5IGFqYXggcmVxdWVzdCBjb21wbGV0ZVxuICAgICAqIHdoZW4gYWxsIHBlbmRpbmcgYWpheCBjb21wbGV0ZXMuXG4gICAgICogTWFyayBhamF4RG9uZSBhcyB0cnVlIHRvIHByZXZlbnQgYWNjaWRlbnRhbCBtdWx0aXBsZSB0cmlnZ2VyIG9mXG4gICAgICogaW5pdGlhbERyYXcgKHRob3VnaCBub3QgbmVjZXNzYXJ5IEkgZ3Vlc3MpXG4gICAgICogQHJldHVyblxuICAgICAqL1xuICAgIGFqYXhQcm9ncmVzcygpIHtcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nQWpheC5sZW5ndGggPT0gMCAmJiAhdGhpcy5zdGF0ZS5hamF4RG9uZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YWpheERvbmU6IHRydWV9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVwYXJlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsRHJhdygpO1xuICAgICAgICAgICAgICAgIGxldCBzZWFyY2ggPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VhcmNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBxdWVyeSA9IEpTT04ucGFyc2UoJ3tcIicgKyBkZWNvZGVVUkkoc2VhcmNoKS5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJykucmVwbGFjZSgvJi9nLCAnXCIsXCInKS5yZXBsYWNlKC89L2csJ1wiOlwiJykgKyAnXCJ9Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChxdWVyeS5waWNrQXJlYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhpZ2hsaWdodF9hcmVhID0gdGhpcy5fYXJlYXMuYnlBYmJyZXZbcXVlcnkucGlja0FyZWFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcucm93LScgKyBoaWdobGlnaHRfYXJlYS5zZXJpYWwpLmNsYXNzZWQoJ2hpZ2hsaWdodCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbHVtbi0nICsgbi50YXJnZXQuaWQpLmNsYXNzZWQoJ2hpZ2hsaWdodCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuc3RhdGUuaGlkZU1pc3NpbmdTb3VyY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCdyZWN0LnJvdy0nICsgbi50YXJnZXQuaWQgKyAnLmNvbHVtbi0nICsgbi5zb3VyY2UuaWQpLnN0eWxlKCdzdHJva2UnLCAnIzAwMDAwMCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaGlnaGxpZ2h0XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzXy5zdHlsZSgnc3Ryb2tlJywgJyMwMDAwMDAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZDMuc2VsZWN0QWxsKCdsaW5lLnJvdy0nICsgKG4uc291cmNlLmlkICsgMSkpLmNsYXNzZWQoJ2hpZ2hsaWdodCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9kMy5zZWxlY3RBbGwoJ2xpbmUuY29sdW1uLScgKyAobi50YXJnZXQuaWQgKyAxKSkuY2xhc3NlZCgnaGlnaGxpZ2h0JywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2xldCB0YXJnZXRfYXJlYSA9IHRoYXQuX2FyZWFzLmJ5SWRbbi50YXJnZXRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9sZXQgc291cmNlX2FyZWEgPSB0aGF0Ll9hcmVhcy5ieUlkW24uc291cmNlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhhdC5zaG93VG9vbHRpcChub2Rlc1tuLnRhcmdldF0gKyAnPGJyLz5EZXN0aW5hdGlvbicgKyB0aGF0Ll9hcmVhcy5ieUluZGV4W24udGFyZ2V0XS5mdWxsbmFtZSkgO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5zaG93VG9vbHRpcCh7dGFyZ2V0X2FyZWE6IG4udGFyZ2V0LCBzb3VyY2VfYXJlYTogbi5zb3VyY2V9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocXVlcnkucGlja0luamVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluaiA9IHRoaXMuc3RhdGljX2lualtxdWVyeS5waWNrSW5qZWN0aW9uXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbGV0IGluamVjdGlvbnMgPSBfLmZpbHRlcih0aGF0LnN0YXRpY19pbmosIHthYmJyZXY6IGFyZWEuYWJicmV2fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYXJlYSA9IHRoYXQuX2FyZWFzLmJ5QWJicmV2W2luai5hYmJyZXZdO1xuICAgICAgICAgICAgICAgICAgICAgICAgQWN0aW9ucy5waWNrVGFyZ2V0QXJlYShhcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbGV0IGluamVjdGlvbnMgPSBfLmZpbHRlcih0aGF0LnN0YXRpY19pbmosIHthYmJyZXY6IGFyZWEuYWJicmV2fSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL0FjdGlvbnMubm9kZURldGFpbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQWN0aW9ucy5leHBhbmRJbmplY3Rpb24oaW5qKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbHVtbi0nICsgYXJlYS5pZCkuY2xhc3NlZCgnaGlnaGxpZ2h0JywgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcmVwYXJlKCkge1xuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgICAgIC8vbGV0IGFiYnJldl9sb29rdXAgPSB7fTtcbiAgICAgICAgXy5lYWNoKHRoaXMuYXRsYXNfc3RydWN0LCAoYXJlYSkgPT4ge1xuICAgICAgICAgICAgbGV0IF9hcmVhID0gdGhpcy5fYXJlYXMuYnlBYmJyZXZbYXJlYS5hYmJyZXZdO1xuICAgICAgICAgICAgXy5hc3NpZ24oX2FyZWEsIGFyZWEpO1xuICAgICAgICAgICAgdGhpcy5fYXJlYXMuYnlJZFtfYXJlYS5pZF0gPSBfYXJlYTtcbiAgICAgICAgICAgIGxldCBpbmplY3Rpb25zID0gXy5maWx0ZXIodGhhdC5zdGF0aWNfaW5qLCB7YWJicmV2OiBhcmVhLmFiYnJldn0pO1xuICAgICAgICAgICAgX2FyZWEuaW5qZWN0aW9ucyA9IGluamVjdGlvbnM7XG4gICAgICAgIH0pO1xuICAgICAgICBBY3Rpb25zLnByb2Nlc3NDb25uZWN0aXZpdHkodGhpcy5fY29ubmVjdGl2aXR5X2RhdGEsIHRoYXQuc3RhdGljX2luaik7XG4gICAgICAgIGxldCBtYXRyaXggPSB0aGF0Ll9tYXRyaXg7XG4gICAgICAgIF8uZWFjaCh0aGlzLmxpbmtzLCAobGluaykgPT4ge1xuICAgICAgICAgICAgbGV0IHRhcmdldCA9IHRoYXQuX2FyZWFzLmJ5SW5kZXhbbGluay50YXJnZXRdO1xuICAgICAgICAgICAgbGV0IHNvdXJjZSA9IHRoYXQuX2FyZWFzLmJ5SW5kZXhbbGluay5zb3VyY2VdO1xuICAgICAgICAgICAgbWF0cml4LmxpbmsodGFyZ2V0LCBzb3VyY2UsIHt0YXJnZXQ6IHRhcmdldCwgc291cmNlOiBzb3VyY2UsIHZhbHVlOiBsaW5rLnZhbHVlfSk7XG4gICAgICAgICAgICAvL21hdHJpeFtsaW5rLnRhcmdldF1bbGluay5zb3VyY2VdLnogKz0gbGluay52YWx1ZTtcbiAgICAgICAgICAgIC8vbm9kZXNbbGluay5zb3VyY2VdLmNvdW50ICs9IGxpbmsudmFsdWU7XG4gICAgICAgICAgICAvL25vZGVzW2xpbmsudGFyZ2V0XS5jb3VudCArPSBsaW5rLnZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgQXBwRGlzcGF0Y2hlci5yZWdpc3RlcihhY3Rpb24gPT4ge1xuICAgICAgICAgICAgQXBwRGlzcGF0Y2hlci53YWl0Rm9yKFtBcHBTdG9yZS5kaXNwYXRjaFRva2VuXSk7XG4gICAgICAgICAgICBzd2l0Y2ggKGFjdGlvbi5hY3Rpb25UeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnSElHSExJR0hUX0VER0UnOiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmcm9tXyA9IGFjdGlvbi5mcm9tXztcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRvID0gYWN0aW9uLnRvO1xuICAgICAgICAgICAgICAgICAgICBsZXQgc291cmNlX2lkO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZyb21fID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlX2lkID0gdGhhdC5fYXJlYXMuYnlBYmJyZXZbZnJvbV9dLmlkO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlX2lkID0gZnJvbV8uaWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldF9pZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0byA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF9pZCA9IHRoYXQuX2FyZWFzLmJ5QWJicmV2W3RvXS5pZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldF9pZCA9IHRvLmlkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLnJvdy0nICsgc291cmNlX2lkKS5jbGFzc2VkKCdoaWdobGlnaHQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sdW1uLScgKyB0YXJnZXRfaWQpLmNsYXNzZWQoJ2hpZ2hsaWdodCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAvL3RoaXNfLnN0eWxlKCdzdHJva2UnLCAnIzU1NTU1NScpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnVU5ISUdITElHSFRfRURHRSc6IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZyb21fID0gYWN0aW9uLmZyb21fO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdG8gPSBhY3Rpb24udG87XG4gICAgICAgICAgICAgICAgICAgIGxldCBzb3VyY2VfaWQgPSBmcm9tXy5pZDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldF9pZCA9IHRvLmlkO1xuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5yb3ctJyArIHNvdXJjZV9pZCkuY2xhc3NlZCgnaGlnaGxpZ2h0JywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5jb2x1bW4tJyArIHRhcmdldF9pZCkuY2xhc3NlZCgnaGlnaGxpZ2h0JywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAvL2QzLnNlbGVjdEFsbCgncmVjdC5yb3ctJyArIHNvdXJjZV9pZCArICcuY29sdW1uLScgKyB0YXJnZXRfaWQpLnN0eWxlKCdzdHJva2UnLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBBY3Rpb25zLnNhdmVBcmVhcyh0aGlzLl9hcmVhcyk7XG4gICAgICAgIC8qIHdvcmsgb3V0IHRoZSBzb3J0aW5nIG9wdGlvbnMgKi9cbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlT3JkZXIoZSkge1xuICAgICAgICAvLyBqdXN0IGJlIHNhZmUsIGl0IHNob3VsZG4ndCBiZSBmYWxzZVxuICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgIT0gdGhpcy5zdGF0ZS5vcmRlcikge1xuICAgICAgICAgICAgdGhpcy5yZW9yZGVyKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKHtvcmRlcjogZS50YXJnZXQudmFsdWV9KTtcbiAgICB9XG4gICAgaGFuZGxlRm9jdXNWaWV3ZXIoZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGZvY3VzZWQ6IHRydWUsXG4gICAgICAgICAgICBjb250cm9sRXhwYW5kZWQ6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2ZvY3VzZWQnKTtcbiAgICAgICAgQWN0aW9ucy5zZXRGb2N1c2VkVmlld1N0YXRlKHRydWUpO1xuICAgIH1cbiAgICBoYW5kbGVCbHVyVmlld2VyKGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBmb2N1c2VkOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbnRyb2xFeHBhbmRlZDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgJCgnYm9keScpLnJlbW92ZUNsYXNzKCdmb2N1c2VkJyk7XG4gICAgICAgIEFjdGlvbnMuc2V0Rm9jdXNlZFZpZXdTdGF0ZShmYWxzZSk7XG4gICAgfVxuICAgIHJlb3JkZXIob3JkZXIpIHtcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICBsZXQgeSA9IHRoaXMuc2NhbGVZO1xuICAgICAgICBsZXQgeCA9IHRoaXMuc2NhbGVYO1xuICAgICAgICAvKlxuICAgICAgICBsZXQgc291cmNlcyA9IF8ua2V5cyh0aGlzLl9tYXRyaXguc291cmNlcyk7XG4gICAgICAgIGxldCBuZXdZID0gXy5jbG9uZShzb3VyY2VzKTtcblxuICAgICAgICBmdW5jdGlvbiBzb3J0RnVuYyhhLCBiKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKG9yZGVyKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYWxwaGFiZXRpY2FsbHknOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDMuYXNjZW5kaW5nKHRoYXQuX2FyZWFzLmJ5SWRbYV0uYWJicmV2LCB0aGF0Ll9hcmVhcy5ieUlkW2JdLmFiYnJldik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2lkJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQzLmRlc2NlbmRpbmcodGhhdC5fYXJlYXMuYnlJZFthXS5pZCwgdGhhdC5fYXJlYXMuYnlJZFtiXS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2ZsYXRtYXBYJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQzLmFzY2VuZGluZyh0aGF0Ll9hcmVhcy5ieUlkW2FdLmZsYXRtYXBfY29vcmRbMF0sIHRoYXQuX2FyZWFzLmJ5SWRbYl0uZmxhdG1hcF9jb29yZFswXSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2N1c3RvbSc6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkMy5hc2NlbmRpbmcodGhhdC5fYXJlYXMuYnlJZFthXS5mbGF0bWFwX2Nvb3JkWzFdLCB0aGF0Ll9hcmVhcy5ieUlkW2JdLmZsYXRtYXBfY29vcmRbMV0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDMuYXNjZW5kaW5nKHRoYXQuX2FyZWFzLmJ5SWRbYV0uaWQsIHRoYXQuX2FyZWFzLmJ5SWRbYl0uaWQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdoaWVyYXJjaGljYWwnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZDMuYXNjZW5kaW5nKHRoYXQuX2FyZWFzLmJ5SWRbYV0uaWQsIHRoYXQuX2FyZWFzLmJ5SWRbYl0uaWQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdyYW5kb20nOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIDIgLSAxO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0YXJnZXRzID0gXy5rZXlzKHRoaXMuX21hdHJpeC50YXJnZXRzKTtcbiAgICAgICAgbGV0IG5ld1ggPSBfLmNsb25lKHRhcmdldHMpO1xuICAgICAgICBsZXQgc2VsZWN0aW9uO1xuICAgICAgICAqL1xuICAgICAgICBsZXQgc291cmNlcyA9IF8ubWFwKF8ua2V5cyh0aGlzLl9tYXRyaXguc291cmNlcyksIHYgPT4gcGFyc2VJbnQodiwgMTApKTtcbiAgICAgICAgbGV0IHRhcmdldHMgPSBfLm1hcChfLmtleXModGhpcy5fbWF0cml4LnRhcmdldHMpLCB2ID0+IHBhcnNlSW50KHYsIDEwKSk7XG4gICAgICAgIGxldCBuZXdZID0gXy5tYXAodGhhdC5zb3J0T3B0aW9uc1tvcmRlcl0uYXhpc1NvdXJjZXMsIHYgPT4gdGhhdC5fYXJlYXMuYnlBYmJyZXZbdl0uaWQpO1xuICAgICAgICBsZXQgbmV3WCA9IF8ubWFwKHRoYXQuc29ydE9wdGlvbnNbb3JkZXJdLmF4aXNUYXJnZXRzLCB2ID0+IHRoYXQuX2FyZWFzLmJ5QWJicmV2W3ZdLmlkKTtcbiAgICAgICAgbmV3WSA9IF8uaW50ZXJzZWN0aW9uKG5ld1ksIHNvdXJjZXMpO1xuICAgICAgICBuZXdYID0gXy5pbnRlcnNlY3Rpb24obmV3WCwgdGFyZ2V0cyk7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmhpZGVNaXNzaW5nU291cmNlcykge1xuICAgICAgICAgICAgbmV3WSA9IF8uaW50ZXJzZWN0aW9uKG5ld1ksIG5ld1gpO1xuICAgICAgICB9XG4gICAgICAgIHkuZG9tYWluKG5ld1kpO1xuICAgICAgICB4LmRvbWFpbihuZXdYKTtcblxuICAgICAgICBsZXQgaGVpZ2h0ID0gMTMgKiBuZXdZLmxlbmd0aDtcbiAgICAgICAgdGhhdC5zdmdUYWcuYXR0cignaGVpZ2h0JywgaGVpZ2h0ICsgdGhhdC5zdmdNYXJnaW4udG9wICsgMik7XG4gICAgICAgIGxldCByYW5nZSA9IFswLCBoZWlnaHRdO1xuICAgICAgICB5LnJhbmdlKHJhbmdlKTtcblxuICAgICAgICBsZXQgd2lkdGggPSAxMyAqIG5ld1gubGVuZ3RoO1xuICAgICAgICB0aGF0LnN2Z1RhZy5hdHRyKCd3aWR0aCcsIHdpZHRoICsgdGhhdC5zdmdNYXJnaW4ubGVmdCArIDIpO1xuICAgICAgICByYW5nZSA9IFswLCB3aWR0aF07XG4gICAgICAgIHgucmFuZ2UocmFuZ2UpO1xuXG4gICAgICAgIHRoYXQubWF0cml4Um93XG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9mZnNldF95ID0geShkWzBdLnNvdXJjZS5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKG9mZnNldF95ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9yZXR1cm4gXCJ0cmFuc2xhdGUoMCxcIiArIHkoaSkgKyBcIilcIjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKDAsXCIgKyBvZmZzZXRfeSArIFwiKVwiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZSgtNjU1MzUsIC02NTUzNSlcIjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHRoYXQubWF0cml4Um93LmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuc2VsZWN0QWxsKCdyZWN0JylcbiAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geChkLnRhcmdldC5pZCkgKyAxO1xuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgfSk7XG4gICAgICAgIHRoYXQubWF0cml4Q29sdW1uXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgeChkKSArIFwiKXJvdGF0ZSgtOTApXCI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhhdC5zdmdUYWcuc2VsZWN0QWxsKCcuY2FwdGlvbi1zb3VyY2UnKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgJ3RyYW5zbGF0ZSgwICcgKyAoKGhlaWdodCkvIDIpICsgJykgcm90YXRlKC05MCknKTtcbiAgICAgICAgdGhhdC5zdmdUYWcuc2VsZWN0QWxsKCcuYmFja2dyb3VuZCcpXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCB3aWR0aCAtIDEpXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0IC0gMSk7XG4gICAgICAgIHRoYXQuc3ZnVGFnLnNlbGVjdEFsbCgncmVjdC5tYWluLWdyYXBoLWJvcmRlcicpXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCB3aWR0aCArIDEpXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0ICsgMSk7XG5cbiAgICB9XG4gICAgaGFuZGxlVG9nZ2xlTWlzc2luZ1NvdXJjZXMoZSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGUudGFyZ2V0LnR5cGUgPT09ICdjaGVja2JveCcgPyBlLnRhcmdldC5jaGVja2VkIDogZS50YXJnZXQudmFsdWU7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2hpZGVNaXNzaW5nU291cmNlczogdmFsdWV9LCAoKSA9PiB0aGlzLnJlb3JkZXIodGhpcy5zdGF0ZS5vcmRlcikpO1xuICAgIH1cbiAgICBoYW5kbGVTd2l0Y2hUb0dyYXBoVmlldyhlKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9ncmFwaC5odG1sJztcbiAgICB9XG4gICAgaGFuZGxlU3dpdGNoVG9TTE5WaWV3KGUpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3Nsbi5odG1sJztcbiAgICB9XG4gICAgaGFuZGxlTW9kYWxIaWRlKGUpIHtcbiAgICB9XG4gICAgaGFuZGxlUUxDb25uZWN0aXZpdHlUeHQoZSkge1xuICAgICAgICB0aGlzLm1vZGFsLnNob3coKTtcbiAgICB9XG4gICAgaGFuZGxlVG9nZ2xlRXhwYW5kKGUpIHtcbiAgICAgICAgbGV0IHN0YXRlID0gIXRoaXMuc3RhdGUuY29udHJvbEV4cGFuZGVkO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtjb250cm9sRXhwYW5kZWQ6IHN0YXRlfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge29iamVjdH1cbiAgICAgKi9cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBmdW5jID0gZ2V0Q29sb3JGdW5jKCk7XG4gICAgICAgIC8qIHRlbXBvcmFyeSBjb2RlIHRvIGR1bXAgY29sb3IgY2hhcnRcbiAgICAgICAgZnVuY3Rpb24gcmdiMmhleChyZ2Ipe1xuICAgICAgICAgcmdiID0gcmdiLm1hdGNoKC9ecmdiYT9bXFxzK10/XFwoW1xccytdPyhcXGQrKVtcXHMrXT8sW1xccytdPyhcXGQrKVtcXHMrXT8sW1xccytdPyhcXGQrKVtcXHMrXT8vaSk7XG4gICAgICAgICByZXR1cm4gKHJnYiAmJiByZ2IubGVuZ3RoID09PSA0KSA/IFwiI1wiICtcbiAgICAgICAgICAoXCIwXCIgKyBwYXJzZUludChyZ2JbMV0sMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpICtcbiAgICAgICAgICAoXCIwXCIgKyBwYXJzZUludChyZ2JbMl0sMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpICtcbiAgICAgICAgICAoXCIwXCIgKyBwYXJzZUludChyZ2JbM10sMTApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTIpIDogJyc7XG4gICAgICAgIH1cbiAgICAgICAgXy5lYWNoKF8ucmFuZ2UoMCwgLTYuMjUsIC0wLjI1KSwgdiA9PiB7XG4gICAgICAgICAgICBsZXQgViA9IE1hdGgucG93KDEwLCB2KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCc8dHI+PHRkPicgKyB2ICsgJzwvdGQ+PHRkIHN0eWxlPVwiY29sb3I6ICcgKyBmdW5jKFYpICsgJ1wiPicgKyByZ2IyaGV4KGZ1bmMoVikpICsgJzwvdGQ+PHRkIHN0eWxlPVwiY29sb3I6ICcgKyBmdW5jKFYpICsgJ1wiPicgKyBmdW5jKFYpICsgJzwvdGQ+PC90cj4nKTtcbiAgICAgICAgfSk7XG4gICAgICAgICovXG4gICAgICAgIGxldCBtb2RhbFN0eWxlID0ge1xuICAgICAgICAgICAgd2lkdGg6ICc4MCUnLFxuICAgICAgICAgICAgbWF4V2lkdGg6ICcxMjAwcHgnLFxuICAgICAgICAgICAgc2Nyb2xsWDogJ2F1dG8nLFxuICAgICAgICAgICAgb3ZlcmZsb3c6ICdzY3JvbGwnLFxuICAgICAgICAgICAgbWF4SGVpZ2h0OiAnMTAwJSdcbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgYXJlYV9uYW1lID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUubm9kZVBpY2tlZCkge1xuICAgICAgICAgICAgYXJlYV9uYW1lID0gdG9UaXRsZUNhc2UodGhpcy5zdGF0ZS5ub2RlUGlja2VkLmZ1bGxuYW1lKSArICcgKCcgKyB0aGlzLnN0YXRlLm5vZGVQaWNrZWQuYWJicmV2ICsgJyknO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkb3dubG9hZF9zdmcgPSAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxpbmstYnV0dG9uXCI+PGEgb25DbGljaz17dGhpcy5oYW5kbGVEb3dubG9hZEdyYXBofSBkb3dubG9hZD1cImV4cG9ydF9mbGF0bWFwX2dyYXBoLnN2Z1wiPkRvd25sb2FkIHRoZSBncmFwaCBhcyBTVkc8L2E+PC9kaXY+XG4gICAgICAgICk7XG4gICAgICAgIGxldCBjb250ZW50ID0gbnVsbDtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmFqYXhEb25lKSB7XG4gICAgICAgICAgICBjb250ZW50ID0gKFxuICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cIm1haW5cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwic3dpdGNoLXZpZXdcIj5cbiAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJncmFwaFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwiZ3JhcGgtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nIG1hdHJpeC12aWV3XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nLWltYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiL3N0YXRpYy9pbWFnZXMvbG9hZGluZy5zdmdcIiB3aWR0aD1cIjEyMFwiIGhlaWdodD1cIjEyMFwiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nLWltYWdlLWNhcHRpb25cIj5Mb2FkaW5nIGFkZGl0aW9uYWwgZGF0YSwgcGxlYXNlIGJlIHBhdGllbnQuLi48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cImluZm8tcGFuZWxcIj48L3NlY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHNvdXJjZXMgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUubm9kZVBpY2tlZCkge1xuICAgICAgICAgICAgICAgIHNvdXJjZXMgPSAnLCAnICsgdGhpcy5zdHJlbmd0aF9hcmVhX2NvdW50ICsgJyBzb3VyY2VzLic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL3RoaXMuc29ydE9wdGlvbnMgPSBfLnNvcnRCeSh0aGlzLnNvcnRPcHRpb25zLCAnaW5kZXgnKTtcbiAgICAgICAgICAgIGxldCBzb3J0T3B0aW9ucyA9IF8ubWFwKHRoaXMuc29ydE9wdGlvbnMsICh2LCBrKSA9PiB7XG4gICAgICAgICAgICAgICAgdi5rZXkgPSBrO1xuICAgICAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzb3J0T3B0aW9ucyA9IF8uc29ydEJ5KHNvcnRPcHRpb25zLCAnaW5kZXgnKTtcbiAgICAgICAgICAgIGxldCBvcHRpb25zID0gXy5tYXAoc29ydE9wdGlvbnMsIChvcHQpID0+ICg8b3B0aW9uIHZhbHVlPXtvcHQua2V5fSBrZXk9e29wdC5rZXl9PntvcHQuZGlzcGxheX08L29wdGlvbj4pKTtcbiAgICAgICAgICAgIC8vPE1vZGFsIHJlZj17bW9kYWwgPT4gdGhpcy5tb2RhbCA9IG1vZGFsfSBtb2RhbFN0eWxlPXttb2RhbFN0eWxlfSBvbkhpZGU9e3RoaXMuaGFuZGxlTW9kYWxIaWRlfT5cbiAgICAgICAgICAgIC8vICBUZXN0IG1vZGFsXG4gICAgICAgICAgICAvLzwvTW9kYWw+XG4gICAgICAgICAgICAvL2xldCBjYyA9ICg8YSBocmVmPVwiaHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LXNhLzMuMC9cIiB0YXJnZXQ9XCJfYmxhbmtcIj48aW1nIHNyYz1cIi9zdGF0aWMvaW1hZ2VzL3NhXzgweDE1LnBuZ1wiLz48L2E+KTtcbiAgICAgICAgICAgIC8vPGRpdiBjbGFzc05hbWU9XCJmb2xkYWJsZS1hcnJvd1wiIG9uQ2xpY2s9e3RoaXMuaGFuZGxlVG9nZ2xlRXhwYW5kfT4mI3gyNWJmOzwvZGl2PlxuXG4gICAgICAgICAgICBjb250ZW50ID0gKFxuICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cIm1haW5cIj5cbiAgICAgICAgICAgICAgICAgICAgPFZpZXdTd2l0Y2ggdmlldz1cIm1hdHJpeFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cIm1hdHJpeFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gaWQ9XCJncmFwaC1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBpZD1cImQzX2NvbnRyb2xcIiBjbGFzc05hbWU9XCJkMy1jb250cm9sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFsnZm9sZGFibGUtY29udHJvbCcsICd0aGluLWNvbnRyb2wnXSwge2V4cGFuZGVkOiB0aGlzLnN0YXRlLmNvbnRyb2xFeHBhbmRlZH0sIHtmb2xkZWQ6ICF0aGlzLnN0YXRlLmNvbnRyb2xFeHBhbmRlZH0pfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnJpZWZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250cm9sLXJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRyb2wtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlRoaXMgdmlldyBwcmVzZW50cyB0aGUgd2VpZ2hlZCBhbmQgZGlyZWN0ZWQgY29ubmVjdGl2aXR5IG1hdHJpeCBiYXNlZCBvbiB0aGUgcmVzdWx0cyBvZiA8YSBocmVmPVwiaHR0cDovL3d3dy5tYXJtb3NldGJyYWluLm9yZy93aGl0ZXBhcGVyI3RyYWNlcl9pbmplY3Rpb25zXCIgdGFyZ2V0PVwiX2JsYW5rXCI+aW5qZWN0aW9ucyBvZiBtb25vc3luYXB0aWMgcmV0cm9ncmFkZSBmbHVvcmVzY2VudCB0cmFjZXJzPC9hPiBpbmplY3Rpb25zLjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlRoZSByb3dzIGFuZCBjb2x1bW5zIG9mIHRoZSBtYXRyaXggcmVwcmVzZW50IGluZGl2aWR1YWwgY29ydGljYWwgYXJlYXMuIFRoZSA8aT5UYXJnZXRzPC9pPiBhcmUgdGhlIGluamVjdGVkIGFyZWFzIHdoaWxlIHRoZSA8aT5Tb3VyY2VzPC9pPiBpbmRpY2F0ZSB0aGUgYXJlYXMgaW4gd2hpY2ggdGhlIHByb2plY3Rpb25zIG9yaWdpbmF0ZS4gVGhlIGludHJpbnNpYyBjb25uZWN0aW9ucyBhcmUgZXhjbHVkZWQgZnJvbSB0aGUgYW5hbHlzaXMuPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250cm9sLXJvdyBsaXN0LWFyZWFzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250cm9sLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udHJvbC1ncm91cC1oYWxmXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+TGlzdCB0aGUgYXJlYXMgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3Qgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlT3JkZXJ9IHZhbHVlPXt0aGlzLnN0YXRlLm9yZGVyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3B0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250cm9sLWdyb3VwLWhhbGZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJjbGlja2FibGVcIiBodG1sRm9yPVwic3dpdGNoX2VkZ2VfY29tcGxldGVcIj57dGhpcy5zdGF0ZS5oaWRlTWlzc2luZ1NvdXJjZXMgPyAnU3dpdGNoIHRvIHRoZSBmdWxsIG1hdHJpeCcgOiAnU3dpdGNoIHRvIHRoZSBlZGdlLWNvbXBsZXRlIG1hdHJpeCd9PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzc05hbWU9XCJoaWRkZW5cIiBpZD1cInN3aXRjaF9lZGdlX2NvbXBsZXRlXCIgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZD17dGhpcy5zdGF0ZS5oaWRlTWlzc2luZ1NvdXJjZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlVG9nZ2xlTWlzc2luZ1NvdXJjZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gaWQ9XCJkM1wiIGNsYXNzTmFtZT1cImQzXCI+PC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sb3ItYmFyLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29sb3JCYXIgc3R5bGU9XCJtYXRyaXhcIiBtb2RlPVwiRkxOXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gaWQ9XCJpbmZvLXBhbmVsXCIgY2xhc3NOYW1lPVwibWF0cml4LXZpZXdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UXVpY2tMaW5rcy8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmplY3Rpb24taW5mb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TWFpbkZsbmUgZmxuZT17dGhpcy5mbG5lX3Blcl9hcmVhfSBhcmVhcz17dGhpcy5fYXJlYXN9IG1vZGU9J0ZMTicgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEluamVjdGlvbkxpc3QgZmxuZT17dGhpcy5zdGF0ZS5mbG5lX3Blcl9pbmplY3Rpb259IG1vZGU9J0ZMTicvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG5cbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8ganMvY29tcG9uZW50cy9NYWluTWF0cml4LnJlYWN0LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQVNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7Ozs7Ozs7OztBQXhCQTs7Ozs7Ozs7O0FBd0JBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXRHQTtBQXVHQTtBQUNBOzs7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTs7Ozs7OztBQU9BO0FBTUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBOzs7Ozs7O0FBT0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQU9BO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQU9BO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE5QkE7QUFnQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBSUE7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBSEE7QUFRQTtBQVRBO0FBSEE7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFEQTtBQURBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFGQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBUEE7QUFEQTtBQVhBO0FBREE7QUErQkE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBakNBO0FBcUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUF0Q0E7QUFGQTtBQWtEQTtBQUNBO0FBQ0E7Ozs7QUF6d0JBO0FBQ0E7QUFEQTtBQTJ3QkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 226:
/* unknown exports provided */
/* all exports used */
/*!********************************************!*\
  !*** ./js/components/MainSection.react.js ***!
  \********************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _d = __webpack_require__(/*! d3 */ 12);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _ColorBar = __webpack_require__(/*! ./ColorBar.react */ 26);\n\nvar _ColorBar2 = _interopRequireDefault(_ColorBar);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar MainSection = function (_React$Component) {\n    _inherits(MainSection, _React$Component);\n\n    function MainSection(props, context) {\n        _classCallCheck(this, MainSection);\n\n        window.d3js = d3;\n\n        var _this = _possibleConstructorReturn(this, (MainSection.__proto__ || Object.getPrototypeOf(MainSection)).call(this, props, context));\n\n        _lodash2.default.bindAll(_this, 'handleChange');\n        _this.state = {\n            stage: 'initial'\n        };\n        return _this;\n    }\n\n    _createClass(MainSection, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _AppStore2.default.addChangeListener(this.handleChange);\n            var margin = { top: 80, right: 0, bottom: 10, left: 80 },\n                width = 1280,\n                height = 1280;\n            //let maxZ = 676;\n            var maxZ = 1000;\n            var colorFunction = d3.scaleLinear().domain([0.0 * maxZ, 0.005 * maxZ, 0.13 * maxZ, 0.28 * maxZ, 0.32 * maxZ, 0.74 * maxZ, 0.92 * maxZ, maxZ]).range(['rgb(230, 230, 230)', 'rgb(244, 247, 140)', 'rgb(226, 139, 33)', 'rgb(215, 82, 35)', 'rgb(212, 67, 36)', 'rgb(124, 83, 89)', 'rgb(81, 51, 49)', 'rgb(81, 51, 49)']);\n\n            var x = d3.scaleBand().range([0, width]),\n                z = d3.scaleLog().domain([1, 676]).clamp(true),\n                c = d3.scaleOrdinal(d3.schemeCategory10).domain(d3.range(10));\n            var svg = d3.select(\"#d3\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom)\n            //.style(\"margin-left\", -margin.left + \"px\")\n            .append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n            d3.json('/static/data/connectivity_1_0_0.json', function (miserables) {\n                var matrix = [],\n                    nodes = miserables.nodes,\n                    n = nodes.length;\n                // Compute index per node.\n                nodes.forEach(function (node, i) {\n                    node.index = i;\n                    node.count = 0;\n                    matrix[i] = d3.range(n).map(function (j) {\n                        return { x: j, y: i, z: 0 };\n                    });\n                });\n\n                // Convert links to matrix; count character occurrences.\n                miserables.links.forEach(function (link) {\n                    //matrix[link.source][link.target].z += link.value;\n                    matrix[link.target][link.source].z += link.value;\n                    //matrix[link.source][link.source].z += link.value;\n                    //matrix[link.target][link.target].z += link.value;\n                    nodes[link.source].count += link.value;\n                    nodes[link.target].count += link.value;\n                });\n\n                // Precompute the orders.\n                var orders = {\n                    name: d3.range(n).sort(function (a, b) {\n                        return d3.ascending(nodes[a].nodeName, nodes[b].nodeName);\n                    }),\n                    count: d3.range(n).sort(function (a, b) {\n                        return nodes[b].count - nodes[a].count;\n                    }),\n                    group: d3.range(n).sort(function (a, b) {\n                        return nodes[b].group - nodes[a].group;\n                    })\n                };\n\n                // The default sort order.\n                x.domain(orders.name);\n\n                svg.append(\"rect\").attr(\"class\", \"background\").attr(\"width\", width).attr(\"height\", height);\n\n                var row = svg.selectAll(\".row\").data(matrix).enter().append(\"g\").attr(\"class\", \"row\").attr(\"transform\", function (d, i) {\n                    return \"translate(0,\" + x(i) + \")\";\n                }).each(row);\n\n                row.append(\"line\").attr(\"x2\", width);\n\n                row.append(\"text\").attr(\"x\", -6).attr(\"y\", x.bandwidth() / 2).attr(\"dy\", \".3em\").attr(\"text-anchor\", \"end\").text(function (d, i) {\n                    return nodes[i].nodeName;\n                });\n\n                var column = svg.selectAll(\".column\").data(matrix).enter().append(\"g\").attr(\"class\", \"column\").attr(\"transform\", function (d, i) {\n                    return \"translate(\" + x(i) + \")rotate(-90)\";\n                });\n\n                column.append(\"line\").attr(\"x1\", -width);\n\n                column.append(\"text\").attr(\"x\", 6).attr(\"y\", x.bandwidth() / 2).attr(\"dy\", \".3em\").attr(\"text-anchor\", \"start\").text(function (d, i) {\n                    return nodes[i].nodeName;\n                });\n\n                function row(row) {\n                    var cell = d3.select(this).selectAll(\".cell\").data(row.filter(function (d) {\n                        return d.z;\n                    }))\n                    //.data(row)\n                    .enter().append(\"rect\").attr(\"class\", \"cell\").attr(\"x\", function (d) {\n                        return x(d.x);\n                    }).attr(\"width\", x.bandwidth()).attr(\"height\", x.bandwidth())\n                    //.style(\"fill-opacity\", function(d) { return z(d.z); })\n                    .style(\"fill-opacity\", function (d) {\n                        return 1;\n                    }).style(\"fill\", function (d) {\n                        return colorFunction(d.z);\n                    }).attr('data-z', function (d) {\n                        return d.z;\n                    }).on('click', function (n) {\n                        console.log('n.x', n.x, 'node', nodes[n.x]);\n                        alert('source:' + nodes[n.x].nodeName);\n                    });\n                    //.on(\"mouseover\", mouseover)\n                    //.on(\"mouseout\", mouseout);\n                }\n                /*\n                function mouseover(p) {\n                    d3.selectAll(\".row text\").classed(\"active\", function(d, i) { return i == p.y; });\n                    d3.selectAll(\".column text\").classed(\"active\", function(d, i) { return i == p.x; });\n                }\n                 function mouseout() {\n                    d3.selectAll(\"text\").classed(\"active\", false);\n                }\n                 d3.select(\"#order\").on(\"change\", function() {\n                    clearTimeout(timeout);\n                    order(this.value);\n                });\n                 function order(value) {\n                    x.domain(orders[value]);\n                     var t = svg.transition().duration(2500);\n                     t.selectAll(\".row\")\n                    .delay(function(d, i) { return x(i) * 4; })\n                    .attr(\"transform\", function(d, i) { return \"translate(0,\" + x(i) + \")\"; })\n                    .selectAll(\".cell\")\n                    .delay(function(d) { return x(d.x) * 4; })\n                    .attr(\"x\", function(d) { return x(d.x); });\n                     t.selectAll(\".column\")\n                    .delay(function(d, i) { return x(i) * 4; })\n                    .attr(\"transform\", function(d, i) { return \"translate(\" + x(i) + \")rotate(-90)\"; });\n                }\n                 var timeout = setTimeout(function() {\n                    order(\"group\");\n                    d3.select(\"#order\").property(\"selectedIndex\", 2).node().focus();\n                }, 5000);\n                */\n            });\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _AppStore2.default.removeChangeListener(this.handleChange);\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange() {\n            this.setState({ stage: _AppStore2.default.getActiveStage() });\n        }\n        /**\n         * @return {object}\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            return _react2.default.createElement(\n                'section',\n                { className: 'main-section' },\n                _react2.default.createElement('section', { id: 'd3', className: 'd3' }),\n                'Test',\n                _react2.default.createElement(_ColorBar2.default, null)\n            );\n        }\n    }]);\n\n    return MainSection;\n}(_react2.default.Component);\n\nexports.default = MainSection;\n;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2pzL2NvbXBvbmVudHMvTWFpblNlY3Rpb24ucmVhY3QuanM/NzM4MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMvQWN0aW9ucyc7XG5pbXBvcnQgQXBwU3RvcmUgZnJvbSAnLi4vc3RvcmVzL0FwcFN0b3JlJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgQ29sb3JCYXIgZnJvbSAnLi9Db2xvckJhci5yZWFjdCc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYWluU2VjdGlvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMsIGNvbnRleHQpIHtcbiAgICAgICAgd2luZG93LmQzanMgPSBkMztcbiAgICAgICAgc3VwZXIocHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBfLmJpbmRBbGwodGhpcywgJ2hhbmRsZUNoYW5nZScpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc3RhZ2U6ICdpbml0aWFsJ1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBBcHBTdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLmhhbmRsZUNoYW5nZSk7XG4gICAgICAgIGxldCBtYXJnaW4gPSB7dG9wOiA4MCwgcmlnaHQ6IDAsIGJvdHRvbTogMTAsIGxlZnQ6IDgwfSxcbiAgICAgICAgICAgIHdpZHRoID0gMTI4MCxcbiAgICAgICAgICAgIGhlaWdodCA9IDEyODA7XG4gICAgICAgICAgICAvL2xldCBtYXhaID0gNjc2O1xuICAgICAgICAgICAgbGV0IG1heFogPSAxMDAwO1xuICAgICAgICAgICAgbGV0IGNvbG9yRnVuY3Rpb24gPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMC4wICogbWF4WiwgMC4wMDUgKiBtYXhaLCAwLjEzICogbWF4WiwgMC4yOCAqIG1heFosIDAuMzIgKiBtYXhaLCAwLjc0ICogbWF4WiwgMC45MiAqIG1heFosIG1heFpdKVxuICAgICAgICAgICAgICAgIC5yYW5nZShbJ3JnYigyMzAsIDIzMCwgMjMwKScsICdyZ2IoMjQ0LCAyNDcsIDE0MCknLCAncmdiKDIyNiwgMTM5LCAzMyknLCAncmdiKDIxNSwgODIsIDM1KScsICdyZ2IoMjEyLCA2NywgMzYpJywgJ3JnYigxMjQsIDgzLCA4OSknLCAncmdiKDgxLCA1MSwgNDkpJywgJ3JnYig4MSwgNTEsIDQ5KSddKTtcbiAgICAgICAgICAgICBcbiAgICAgICAgbGV0IHggPSBkMy5zY2FsZUJhbmQoKS5yYW5nZShbMCwgd2lkdGhdKSxcbiAgICAgICAgICAgIHogPSBkMy5zY2FsZUxvZygpLmRvbWFpbihbMSwgNjc2XSkuY2xhbXAodHJ1ZSksXG4gICAgICAgICAgICBjID0gZDMuc2NhbGVPcmRpbmFsKGQzLnNjaGVtZUNhdGVnb3J5MTApLmRvbWFpbihkMy5yYW5nZSgxMCkpO1xuICAgICAgICBsZXQgc3ZnID0gZDMuc2VsZWN0KFwiI2QzXCIpLmFwcGVuZChcInN2Z1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXG4gICAgICAgICAgICAvLy5zdHlsZShcIm1hcmdpbi1sZWZ0XCIsIC1tYXJnaW4ubGVmdCArIFwicHhcIilcbiAgICAgICAgICAuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcblxuICAgICAgICAgICAgZDMuanNvbignL3N0YXRpYy9kYXRhL2Nvbm5lY3Rpdml0eV8xXzBfMC5qc29uJywgZnVuY3Rpb24obWlzZXJhYmxlcykge1xuICAgICAgICAgICAgICAgIGxldCBtYXRyaXggPSBbXSwgbm9kZXMgPSBtaXNlcmFibGVzLm5vZGVzLCBuID0gbm9kZXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIC8vIENvbXB1dGUgaW5kZXggcGVyIG5vZGUuXG4gICAgICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbihub2RlLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgICAgICBub2RlLmNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgbWF0cml4W2ldID0gZDMucmFuZ2UobikubWFwKGZ1bmN0aW9uKGopIHsgcmV0dXJuIHt4OiBqLCB5OiBpLCB6OiAwfTsgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IGxpbmtzIHRvIG1hdHJpeDsgY291bnQgY2hhcmFjdGVyIG9jY3VycmVuY2VzLlxuICAgICAgICAgICAgICAgIG1pc2VyYWJsZXMubGlua3MuZm9yRWFjaChmdW5jdGlvbihsaW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vbWF0cml4W2xpbmsuc291cmNlXVtsaW5rLnRhcmdldF0ueiArPSBsaW5rLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBtYXRyaXhbbGluay50YXJnZXRdW2xpbmsuc291cmNlXS56ICs9IGxpbmsudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIC8vbWF0cml4W2xpbmsuc291cmNlXVtsaW5rLnNvdXJjZV0ueiArPSBsaW5rLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAvL21hdHJpeFtsaW5rLnRhcmdldF1bbGluay50YXJnZXRdLnogKz0gbGluay52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZXNbbGluay5zb3VyY2VdLmNvdW50ICs9IGxpbmsudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVzW2xpbmsudGFyZ2V0XS5jb3VudCArPSBsaW5rLnZhbHVlO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gUHJlY29tcHV0ZSB0aGUgb3JkZXJzLlxuICAgICAgICAgICAgICAgIHZhciBvcmRlcnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGQzLnJhbmdlKG4pLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gZDMuYXNjZW5kaW5nKG5vZGVzW2FdLm5vZGVOYW1lLCBub2Rlc1tiXS5ub2RlTmFtZSk7IH0pLFxuICAgICAgICAgICAgICAgICAgICBjb3VudDogZDMucmFuZ2Uobikuc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBub2Rlc1tiXS5jb3VudCAtIG5vZGVzW2FdLmNvdW50OyB9KSxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXA6IGQzLnJhbmdlKG4pLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gbm9kZXNbYl0uZ3JvdXAgLSBub2Rlc1thXS5ncm91cDsgfSlcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgc29ydCBvcmRlci5cbiAgICAgICAgICAgICAgICB4LmRvbWFpbihvcmRlcnMubmFtZSk7XG5cbiAgICAgICAgICAgICAgICBzdmcuYXBwZW5kKFwicmVjdFwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJiYWNrZ3JvdW5kXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQpO1xuXG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHN2Zy5zZWxlY3RBbGwoXCIucm93XCIpXG4gICAgICAgICAgICAgICAgLmRhdGEobWF0cml4KVxuICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwicm93XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoMCxcIiArIHgoaSkgKyBcIilcIjsgfSlcbiAgICAgICAgICAgICAgICAuZWFjaChyb3cpO1xuXG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZChcImxpbmVcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcIngyXCIsIHdpZHRoKTtcblxuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIC02KVxuICAgICAgICAgICAgICAgIC5hdHRyKFwieVwiLCB4LmJhbmR3aWR0aCgpIC8gMilcbiAgICAgICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLjNlbVwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwidGV4dC1hbmNob3JcIiwgXCJlbmRcIilcbiAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbihkLCBpKSB7IHJldHVybiBub2Rlc1tpXS5ub2RlTmFtZTsgfSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gc3ZnLnNlbGVjdEFsbChcIi5jb2x1bW5cIilcbiAgICAgICAgICAgICAgICAuZGF0YShtYXRyaXgpXG4gICAgICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJjb2x1bW5cIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkLCBpKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIHgoaSkgKyBcIilyb3RhdGUoLTkwKVwiOyB9KTtcblxuICAgICAgICAgICAgICAgIGNvbHVtbi5hcHBlbmQoXCJsaW5lXCIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ4MVwiLCAtd2lkdGgpO1xuXG4gICAgICAgICAgICAgICAgY29sdW1uLmFwcGVuZChcInRleHRcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgNilcbiAgICAgICAgICAgICAgICAuYXR0cihcInlcIiwgeC5iYW5kd2lkdGgoKSAvIDIpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zZW1cIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwic3RhcnRcIilcbiAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbihkLCBpKSB7IHJldHVybiBub2Rlc1tpXS5ub2RlTmFtZTsgfSk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiByb3cocm93KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZWxsID0gZDMuc2VsZWN0KHRoaXMpLnNlbGVjdEFsbChcIi5jZWxsXCIpXG4gICAgICAgICAgICAgICAgICAgIC5kYXRhKHJvdy5maWx0ZXIoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC56OyB9KSlcbiAgICAgICAgICAgICAgICAgICAgLy8uZGF0YShyb3cpXG4gICAgICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZChcInJlY3RcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImNlbGxcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHgoZC54KTsgfSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB4LmJhbmR3aWR0aCgpKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcImhlaWdodFwiLCB4LmJhbmR3aWR0aCgpKVxuICAgICAgICAgICAgICAgICAgICAvLy5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiB6KGQueik7IH0pXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiAxOyB9KVxuXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZShcImZpbGxcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gY29sb3JGdW5jdGlvbihkLnopOyB9KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignZGF0YS16JywgZCA9PiBkLnopXG4gICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbihuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbi54Jywgbi54LCAnbm9kZScsIG5vZGVzW24ueF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ3NvdXJjZTonKyBub2Rlc1tuLnhdLm5vZGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLy8ub24oXCJtb3VzZW92ZXJcIiwgbW91c2VvdmVyKVxuICAgICAgICAgICAgICAgICAgICAvLy5vbihcIm1vdXNlb3V0XCIsIG1vdXNlb3V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtb3VzZW92ZXIocCkge1xuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoXCIucm93IHRleHRcIikuY2xhc3NlZChcImFjdGl2ZVwiLCBmdW5jdGlvbihkLCBpKSB7IHJldHVybiBpID09IHAueTsgfSk7XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbChcIi5jb2x1bW4gdGV4dFwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIGkgPT0gcC54OyB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtb3VzZW91dCgpIHtcbiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKFwidGV4dFwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoXCIjb3JkZXJcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgb3JkZXIodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvcmRlcih2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB4LmRvbWFpbihvcmRlcnNbdmFsdWVdKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHN2Zy50cmFuc2l0aW9uKCkuZHVyYXRpb24oMjUwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdC5zZWxlY3RBbGwoXCIucm93XCIpXG4gICAgICAgICAgICAgICAgICAgIC5kZWxheShmdW5jdGlvbihkLCBpKSB7IHJldHVybiB4KGkpICogNDsgfSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoMCxcIiArIHgoaSkgKyBcIilcIjsgfSlcbiAgICAgICAgICAgICAgICAgICAgLnNlbGVjdEFsbChcIi5jZWxsXCIpXG4gICAgICAgICAgICAgICAgICAgIC5kZWxheShmdW5jdGlvbihkKSB7IHJldHVybiB4KGQueCkgKiA0OyB9KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4geChkLngpOyB9KTtcblxuICAgICAgICAgICAgICAgICAgICB0LnNlbGVjdEFsbChcIi5jb2x1bW5cIilcbiAgICAgICAgICAgICAgICAgICAgLmRlbGF5KGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIHgoaSkgKiA0OyB9KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkLCBpKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIHgoaSkgKyBcIilyb3RhdGUoLTkwKVwiOyB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIG9yZGVyKFwiZ3JvdXBcIik7XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdChcIiNvcmRlclwiKS5wcm9wZXJ0eShcInNlbGVjdGVkSW5kZXhcIiwgMikubm9kZSgpLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfSwgNTAwMCk7XG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIEFwcFN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMuaGFuZGxlQ2hhbmdlKTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzdGFnZTogQXBwU3RvcmUuZ2V0QWN0aXZlU3RhZ2UoKX0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAgICovXG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwibWFpbi1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgPHNlY3Rpb24gaWQ9XCJkM1wiIGNsYXNzTmFtZT1cImQzXCI+XG4gICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgIFRlc3RcbiAgICAgICAgICAgICAgICA8Q29sb3JCYXIgLz5cbiAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgKTtcbiAgICB9XG5cbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8ganMvY29tcG9uZW50cy9NYWluU2VjdGlvbi5yZWFjdC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFTQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBZkE7Ozs7Ozs7OztBQWVBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRkE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBSkE7QUFPQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUdBO0FBSEE7QUFDQTtBQU1BO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBSEE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUlBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUtBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBS0E7QUFBQTtBQUdBO0FBUkE7QUFTQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBcUNBO0FBRUE7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBSkE7QUFPQTs7OztBQS9LQTtBQUNBO0FBREE7QUFpTEEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 227:
/* unknown exports provided */
/* all exports used */
/*!*********************************************!*\
  !*** ./js/components/MainSection2.react.js ***!
  \*********************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _d = __webpack_require__(/*! d3 */ 12);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _MainFlne = __webpack_require__(/*! ./MainFlne.react */ 24);\n\nvar _MainFlne2 = _interopRequireDefault(_MainFlne);\n\nvar _InjectionList = __webpack_require__(/*! ./InjectionList.react */ 21);\n\nvar _InjectionList2 = _interopRequireDefault(_InjectionList);\n\nvar _numberformat = __webpack_require__(/*! ../lib/numberformat */ 31);\n\nvar _numberformat2 = _interopRequireDefault(_numberformat);\n\nvar _classnames = __webpack_require__(/*! classnames */ 13);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _AppDispatcher = __webpack_require__(/*! ../dispatcher/AppDispatcher */ 18);\n\nvar _AppDispatcher2 = _interopRequireDefault(_AppDispatcher);\n\nvar _modal = __webpack_require__(/*! ../lib/modal */ 22);\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nvar _ColorBar = __webpack_require__(/*! ./ColorBar.react */ 26);\n\nvar _ColorBar2 = _interopRequireDefault(_ColorBar);\n\nvar _utils = __webpack_require__(/*! ../lib/utils */ 16);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n//\n//function toTitleCase(str) {\n//    //return str.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\n//    return str.charAt(0).toUpperCase() + str.substr(1);\n//}\nvar MainSection2 = function (_React$Component) {\n    _inherits(MainSection2, _React$Component);\n\n    function MainSection2(props, context) {\n        _classCallCheck(this, MainSection2);\n\n        window.d3js = d3;\n\n        var _this = _possibleConstructorReturn(this, (MainSection2.__proto__ || Object.getPrototypeOf(MainSection2)).call(this, props, context));\n\n        _lodash2.default.bindAll(_this, 'handleChange', 'handleMouseOver', 'handleMouseOut', 'handleClick', 'highlightNode', 'handleDownloadSVG', 'handleDownloadGraph', 'handleDownloadCSV', 'ajaxLoad', 'handleSwitchToMatrixView');\n        _this.state = {\n            strengthExists: false,\n            ajaxDone: false\n        };\n        _this._areas = {\n            byAbbrev: {},\n            byIndex: {},\n            byId: {}\n        };\n        _this.pendingAjax = [];\n        var pendingAjax = _this.pendingAjax;\n        _this.ajaxLoad('injections_static.json', function (inj) {\n            _this.static_inj = inj;\n            _lodash2.default.each(_this.static_inj, function (inj, key) {\n                inj.name = key;\n                inj.collapse = true;\n            });\n            _Actions2.default.saveInjectionsStatic(inj);\n        });\n        _this.ajaxLoad('flne_gmeannz_areas.json', function (flne) {\n            _this.flne_per_area = flne;\n        });\n        _this.ajaxLoad('flne_gmeannz_injections.json', function (flne) {\n            _this.flne_per_injection = flne;\n            _this.setState({ flne_per_injection: flne });\n        });\n        _this.ajaxLoad('structures.json', function (struct) {\n            _lodash2.default.each(struct, function (s) {\n                var txt = s.fullname;\n                txt = txt.charAt(0).toUpperCase() + txt.slice(1);\n                s.fullname = txt;\n                var cc = s.color;\n                s.hex_color = 'rgba(' + cc[0] + ',' + cc[1] + ',' + cc[2] + ', 1)';\n            });\n            _this.atlas_struct = struct;\n        });\n        _this.ajaxLoad('connectivity_1_0_0.json', function (conn) {\n            var that = _this;\n            _this.connectivity = conn;\n            var nodes = conn.nodes;\n            var n = nodes.length;\n            _lodash2.default.each(nodes, function (node, i) {\n                node.index = i;\n                that._areas.byIndex[i] = { abbrev: node.nodeName, serial: i };\n                that._areas.byAbbrev[node.nodeName] = that._areas.byIndex[i];\n            });\n        });\n        return _this;\n    }\n\n    _createClass(MainSection2, [{\n        key: 'ajaxLoad',\n        value: function ajaxLoad(file, callback) {\n            var _this2 = this;\n\n            this.pendingAjax.push(file);\n            d3.json('/static/data/' + file, function (error, data) {\n                if (error) throw error;\n                callback(data);\n                _lodash2.default.pull(_this2.pendingAjax, file);\n                _this2.ajaxProgress();\n            });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _AppStore2.default.addChangeListener(this.handleChange);\n        }\n    }, {\n        key: 'initialDraw',\n        value: function initialDraw() {\n            var that = this;\n            var width = 860,\n                height = 880;\n            this.graph_parent = d3.select('#d3');\n            var svg = this.graph_parent.append('svg').attr('width', width).attr('height', height);\n\n            svg.append(\"svg:defs\").selectAll(\"marker\").data([\"end\", 'end-short']) // Different link/path types can be defined here\n            .enter().append(\"marker\") // This section adds in the arrows\n            .attr(\"id\", String).attr(\"viewBox\", \"0 -5 10 10\")\n            //.attr(\"refX\", d => (d == 'end' ? 40 : 75))\n            .attr('refX', 35).attr(\"refY\", function (d) {\n                return 0;\n            }).attr(\"markerWidth\", 10).attr(\"markerHeight\", 10).attr(\"orient\", \"auto\").style('stroke', '#333333').style('fill', '#333333').append(\"svg:path\").attr(\"d\", \"M1,-4L9,0L1,4\");\n            svg.append('g').style('opacity', '0.1').attr('transform', 'translate(0, 0)').append('image').attr('href', '/static/images/all_injections_on_flatmap.png');\n            svg = svg.append('g').attr('transform', 'translate(20, -50)');\n            var color = d3.scaleOrdinal(d3.schemeCategory20);\n            var flatmapScaleX = d3.scaleLinear().range([0, 960]);\n            var flatmapScaleY = d3.scaleLinear().range([0, 960]);\n            flatmapScaleX.domain([-20, 20]);\n            flatmapScaleY.domain([20, -20]);\n\n            // prepare all the structures\n            var atlas_struct = this.atlas_struct;\n            var abbrev_lookup = {};\n            _lodash2.default.each(atlas_struct, function (area) {\n                abbrev_lookup[area.abbrev] = area;\n                var cc = area.color;\n                area.hex_color = 'rgba(' + cc[0] + ',' + cc[1] + ',' + cc[2] + ', 1)';\n            });\n            this.abbrev_lookup = abbrev_lookup;\n\n            // processing the connectivity data\n            var connectivity = this.connectivity;\n            // Compute the distinct nodes from the links.\n            connectivity.nodes.forEach(function (n, i) {\n                n.index = i;\n                n.area = abbrev_lookup[n.nodeName];\n            });\n            var z = d3.scaleLog().domain([1, 676]).clamp(true);\n            var link_hash = {};\n            var alphaScale = d3.scaleLinear().range([.2, .75]);\n            alphaScale.domain([0, 60]).clamp(true);\n            connectivity.links.forEach(function (link) {\n                link.source = connectivity.nodes[link.source];\n                link.target = connectivity.nodes[link.target];\n                link.source.to = link.source.to || {};\n                link.source.to[link.target.nodeName] = link.target;\n                link.target.from = link.target.from || {};\n                link.target.from[link.source.nodeName] = link.source;\n\n                link.value = +link.value;\n                link.alpha = alphaScale(link.value);\n                //link_hash[link.target.nodeName] = link_hash[link.target.nodeName] || {};\n                //link_hash[link.target.nodeName][link.source.nodeName] = link;\n            });\n\n            //let maxZ = 676;\n            var links = svg.append('g').attr('class', 'links').selectAll('line').data(connectivity.links).enter().append('g').attr('class', function (d) {\n                return 'link';\n            }).attr('data-from', function (d) {\n                return d.source.nodeName;\n            }).attr('data-to', function (d) {\n                return d.target.nodeName;\n            }).attr('data-alpha', function (d) {\n                return d.alpha;\n            }).style('opacity', function (d) {\n                return d.alpha;\n            }).each(function (d, i) {\n                d3.select(this).selectAll('.link-path').data([d]).enter().append('path').attr('class', 'link-path')\n                //.attr('marker-end', d => d.semi ? 'url(#end-short)' : '')\n                //.attr('stroke-width', function(d) { return Math.sqrt(d.value); });\n                .attr('stroke-width', function (d) {\n                    return 1;\n                }).style('stroke', function (d) {\n                    return 'rgb(50, 50, 50)';\n                }).attr('d', function (d) {\n                    var s_coord = abbrev_lookup[d.source.nodeName].flatmap_coord;\n                    var sx = flatmapScaleX(s_coord[0]);\n                    var sy = flatmapScaleY(s_coord[1]);\n                    var t_coord = abbrev_lookup[d.target.nodeName].flatmap_coord;\n                    var tx = flatmapScaleX(t_coord[0]);\n                    var ty = flatmapScaleY(t_coord[1]);\n                    return 'M' + sx + ',' + sy + ' L' + tx + ',' + ty;\n                });\n            });\n            /*\n            this.svg_flne_parent = d3.select('.flne-bar');\n            this.svg_flne = this.svg_flne_parent.append('svg')\n                .attr('width', 365)\n                .attr('height', 200)\n            let flne = this.svg_flne\n                .append('g')\n                .attr('transform', 'translate(50, 5)');\n            let scaler, scaler_dom;\n            */\n            var nodes = svg.append('g').attr('class', 'nodes').selectAll('.node').data(connectivity.nodes).enter().append('g').attr('class', 'node').each(function (d, i) {\n                d3.select(this).selectAll('.node-circle').data([d]).enter().append('circle').attr('r', 18).attr('class', 'node-circle').attr('fill', function (d) {\n                    return d.area.hex_color;\n                }).style('stroke', function (d) {\n                    return 'rgba(0, 0, 0, 0.5)';\n                }).attr('cx', function (d) {\n                    return flatmapScaleX(abbrev_lookup[d.nodeName].flatmap_coord[0]);\n                }).attr('cy', function (d) {\n                    return flatmapScaleY(abbrev_lookup[d.nodeName].flatmap_coord[1]);\n                }).on('mouseover', function (n) {\n                    var elem = d3.select(this);\n                    that.handleMouseOver(n, elem);\n                }).on('mouseout', function (n) {\n                    that.handleMouseOut(n);\n                }).on('click', function (n) {\n                    // create the bar chart to show connectivity strength from each area\n                    that.handleClick(n);\n                    that.clicked = true;\n                    //d3.selectAll('.injection-area-name')\n                    //    .text(toTitleCase(n.area.fullname) + ' (' + n.nodeName + ')');\n\n                    _Actions2.default.pickNode(that._areas.byAbbrev[n.nodeName]);\n\n                    /*\n                    let strength = that.flne_per_area[n.nodeName];\n                    let y = null, flne_height = 100;\n                    if (strength) {\n                        that.strength_area_count = strength.length;\n                        that.setState({strengthExists: true});\n                        flne_height = 10 * strength.length;\n                        d3.select('.flne-bar svg').attr('height', flne_height + 45);\n                        y = d3.scaleBand().range([0, flne_height]);\n                        y.round(true);\n                        y.paddingInner(.1);\n                        flne.selectAll('.row').remove();\n                        flne.selectAll('.axis-bottom').remove();\n                        let srcs = _.map(strength, 'source');\n                        y.domain(srcs);\n                        let flne_arr = _.map(strength, 'log10_flne');\n                        let min = _.min(flne_arr), max = _.max(flne_arr);\n                        let colorFunc = getColorFunc(min, max);\n                        let barWidthFunc = that.getBarWidthFunc(min, max);\n                        let row = flne.selectAll('.row')\n                            .data(strength, d => d);\n                        let row_enter = row.enter()\n                            .append('g')\n                            .attr('class', 'row');\n                        row_enter.append('text')\n                            .attr('class', 'flne-label');\n                        row_enter.append('rect')\n                            .attr('class', 'flne-rect');\n                         row_enter.selectAll('.flne-label')\n                            .attr('x', -6)\n                            .attr('y', (d, i) => {\n                                return y(d.source) + y.bandwidth() / 2\n                            })\n                            .attr('text-anchor', 'end')\n                            .attr('alignment-baseline', 'middle')\n                            .text(d => d.source)\n                            .on('mouseover', function(d, i) {\n                                let me = d3.select(this);\n                                that.areaBarMouseOver(me, d.source, n.nodeName);\n                                that.areaLabelMouseOver(me, d.source, n.nodeName);\n                                d3.select(this.parentNode).selectAll('rect').attr('fill', 'brown');\n                                d3.select(this.parentNode).append('text')\n                                    .attr('x', barWidthFunc(d.log10_flne) - 5)\n                                    .attr('y', (d, i) => y(d.source) + y.bandwidth() / 2)\n                                    .attr('text-anchor', 'end')\n                                    .attr('alignment-baseline', 'middle')\n                                    .attr('stroke', 'none')\n                                    .style('font-weight', 'bold')\n                                    .attr('fill', 'white')\n                                    .attr('class', 'num')\n                                    .text(d.log10_flne.toFixed(2));\n                            })\n                            .on('mouseout', function(d, i) {\n                                let me = d3.select(this);\n                                that.areaBarMouseOut(me, d.source, n.nodeName);\n                                that.areaLabelMouseOut(me, d.source, n.nodeName);\n                                //d3.select(this).attr('fill', colorFunc(d.log10_flne));\n                                d3.select(this.parentNode).selectAll('rect').attr('fill', colorFunc(d.log10_flne));\n                                d3.select(this.parentNode).selectAll('.num').remove();\n                            })\n                        row_enter.selectAll('.flne-rect')\n                            .attr('x', 0)\n                            .attr('y', (d, i) => y(d.source))\n                            .attr('width', d => barWidthFunc(d.log10_flne))\n                            .attr('height', y.bandwidth())\n                            .attr('fill', d => colorFunc(d.log10_flne))\n                            .on('mouseover', function(d, i) {\n                                let me = d3.select(this);\n                                that.areaBarMouseOver(me, d.source, n.nodeName);\n                                that.areaLabelMouseOver(me, d.source, n.nodeName);\n                                d3.select(this).attr('fill', 'brown');\n                                d3.select(this.parentNode).append('text')\n                                    .attr('x', barWidthFunc(d.log10_flne) - 5)\n                                    .attr('y', (d, i) => y(d.source) + y.bandwidth() / 2)\n                                    .attr('text-anchor', 'end')\n                                    .attr('alignment-baseline', 'middle')\n                                    .attr('stroke', 'none')\n                                    .style('font-weight', 'bold')\n                                    .attr('fill', 'white')\n                                    .attr('class', 'num')\n                                    .text(d.log10_flne.toFixed(2));\n                            })\n                            .on('mouseout', function(d, i, p) {\n                                let me = d3.select(this);\n                                that.areaBarMouseOut(me, d.source, n.nodeName);\n                                that.areaLabelMouseOut(me, d.source, n.nodeName);\n                                d3.select(this).attr('fill', colorFunc(d.log10_flne));\n                                d3.select(this.parentNode).selectAll('.num').remove();\n                            })\n                        scaler = d3.axisBottom()\n                            .scale(barWidthFunc)\n                            .tickSizeInner(-flne_height)\n                            .tickSizeOuter(0)\n                            .ticks(5);\n                        scaler_dom = flne.append(\"g\")\n                            .attr(\"transform\", \"translate(0,\" + flne_height + \")\")\n                            .attr('class', 'axis-bottom')\n                            .call(scaler);\n                        scaler_dom.selectAll('.tick line').filter((d, i, l) => i == 0 || (i === l.length - 1)).attr('display', 'none');\n                        d3.selectAll('.main-bar-scale-x-title').remove();\n                        let title = flne.append('text')\n                            .attr('class', 'main-bar-scale-x-title')\n                            .attr('transform', 'translate(' + (320 / 2 - 20) + ', ' + (flne_height + 25) + ')')\n                            .attr('text-anchor', 'middle')\n                        title.append('tspan').attr('font-size', '12').text('log');\n                        title.append('tspan').text('10').attr('baseline-shift', 'sub');\n                        title.append('tspan').attr('font-size', '12').text('(FLNe)');\n                    } else {\n                        that.setState({strengthExists: false});\n                        flne.selectAll('.row').remove();\n                        d3.select('.flne-bar svg').attr('height', flne_height);\n                        if (scaler_dom) {\n                            scaler_dom.remove();\n                        }\n                    }\n                    */\n                    // continue to furnish injection detail\n                    var injections = _lodash2.default.filter(that.static_inj, { abbrev: n.nodeName });\n                    _Actions2.default.nodeDetail(injections);\n                });\n                d3.select(this).selectAll('.text').data([d]).enter().append('text').attr('class', 'text').text(function (d) {\n                    return d.nodeName.replace('-', '/');\n                }).attr('text-anchor', 'middle').attr(\"pointer-events\", \"none\").attr('x', function (d) {\n                    return flatmapScaleX(abbrev_lookup[d.nodeName].flatmap_coord[0]);\n                }).attr('y', function (d) {\n                    return flatmapScaleY(abbrev_lookup[d.nodeName].flatmap_coord[1]) + 3;\n                });\n            });\n            that.nodes = nodes;\n            that.links = links;\n        }\n    }, {\n        key: 'shouldComponentUpdate',\n        value: function shouldComponentUpdate(nextProps, nextState) {\n            return true;\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _AppStore2.default.removeChangeListener(this.handleChange);\n        }\n    }, {\n        key: 'ajaxProgress',\n        value: function ajaxProgress() {\n            var _this3 = this;\n\n            if (this.pendingAjax.length == 0 && !this.state.ajaxDone) {\n                this.setState({ ajaxDone: true }, function () {\n                    _this3.prepare();\n                    _this3.initialDraw();\n                });\n            }\n        }\n    }, {\n        key: 'prepare',\n        value: function prepare() {\n            var _this4 = this;\n\n            var that = this;\n            //let abbrev_lookup = {};\n            _lodash2.default.each(this.atlas_struct, function (area) {\n                var _area = _this4._areas.byAbbrev[area.abbrev];\n                _lodash2.default.assign(_area, area);\n                _this4._areas.byId[_area.id] = _area;\n                var injections = _lodash2.default.filter(that.static_inj, { abbrev: area.abbrev });\n                _area.injections = injections;\n            });\n            var matrix = that._matrix;\n            _lodash2.default.each(this.links, function (link) {\n                var target = that._areas.byIndex[link.target];\n                var source = that._areas.byIndex[link.source];\n                matrix.link(target, source, { target: target, source: source, value: link.value });\n                //matrix[link.target][link.source].z += link.value;\n                //nodes[link.source].count += link.value;\n                //nodes[link.target].count += link.value;\n            });\n            _AppDispatcher2.default.register(function (action) {\n                _AppDispatcher2.default.waitFor([_AppStore2.default.dispatchToken]);\n                switch (action.actionType) {\n                    case 'HIGHLIGHT_EDGE':\n                        {\n                            var from_ = action.from_;\n                            var to = action.to;\n                            var link = d3.selectAll('g.link').filter('[data-from=' + from_.abbrev + ']').filter('[data-to=' + to.abbrev + ']');\n                            if (!link.empty()) {\n                                link.style('opacity', 1).selectAll('.link-path').style('stroke', '#ff0000');\n                            }\n                            break;\n                        }\n                    case 'UNHIGHLIGHT_EDGE':\n                        {\n                            var _from_ = action.from_;\n                            var _to = action.to;\n                            var _link = d3.selectAll('g.link').filter('[data-from=' + _from_.abbrev + ']').filter('[data-to=' + _to.abbrev + ']');\n                            if (!_link.empty()) {\n                                _link.style('opacity', _link.attr('data-alpha')).selectAll('.link-path').style('stroke', 'rgb(50, 50, 50)');\n                            }\n                            break;\n                        }\n                }\n            });\n            // end preparing work, save it to appState\n            _Actions2.default.saveAreas(that._areas);\n        }\n    }, {\n        key: 'getBarWidthFunc',\n        value: function getBarWidthFunc(min, max) {\n            min = -5, max = 0;\n            var func = d3.scaleLinear().domain([min, max]).range([0, 300]);\n            return func;\n        }\n    }, {\n        key: 'highlightNode',\n        value: function highlightNode(n) {\n            var strength = this.flne_per_area[n.nodeName];\n            var emitter = n.from || {};\n            this.nodes.classed('semi', function (d, i) {\n                return d.nodeName != n.nodeName;\n            }).classed('active', function (d, i) {\n                return d.nodeName == n.nodeName;\n            }).sort(function (a, b) {\n                if (a.nodeName != n.nodeName) {\n                    return -1;\n                } else {\n                    return 1;\n                }\n            });\n            var flne_arr = _lodash2.default.map(strength, 'log10_flne');\n            var min = _lodash2.default.min(flne_arr),\n                max = _lodash2.default.max(flne_arr);\n            var colorFunc = (0, _utils.getLogColorFunc)(min, max);\n\n            this.nodes.selectAll('.node-circle').attr('r', function (d) {\n                return d.nodeName == n.nodeName ? 26 : 18;\n            }).attr('fill', function (d) {\n                if (d.nodeName in emitter || d.nodeName == n.nodeName) {\n                    var info = _lodash2.default.find(strength, { source: d.nodeName });\n                    if (info) {\n                        return colorFunc(info.log10_flne);\n                    } else {\n                        return d.area.hex_color;\n                    }\n                } else {\n                    return 'rgba(50, 50, 50, .2)';\n                }\n            });\n            this.links.classed('hidden', function (d) {\n                return d.target.nodeName != n.nodeName;\n            }).attr('marker-end', function (d) {\n                return d.semi ? 'url(#end-short)' : 'url(#end)';\n            }).style('opacity', function (d) {\n                return d.alpha;\n            }).selectAll('path').style('stroke', function (d) {\n                return 'rgba(50, 50, 50)';\n                //let info = _.find(strength, {source: d.source.nodeName});\n                //if (info) {\n                //    return colorFunc(info.log10_flne);\n                //} else {\n                //    return 'rgb(50, 50, 50)';\n                //}\n            });\n        }\n    }, {\n        key: 'handleClick',\n        value: function handleClick(n) {\n            this.highlightNode(n);\n            /* function to make links interactive after a node is picked\n            this.links.filter(':not(.hidden)')\n            .on('mouseover', function(n) {\n                d3.select(this).style('opacity', 1).selectAll('.link-path').style('stroke', '#ff0000');\n            })\n            .on('mouseout', function(n) {\n                d3.select(this).style('opacity', n.alpha).selectAll('.link-path').style('stroke', 'rgb(50, 50, 50)');\n            })\n            */\n        }\n    }, {\n        key: 'handleMouseOver',\n        value: function handleMouseOver(n, elem) {\n            if (!this.clicked) {\n                this.highlightNode(n);\n            }\n            var bbox = elem.node().getBoundingClientRect();\n            var top = bbox.top + $(document).scrollTop();\n            (0, _utils.showTooltipAreaName)({ area: this._areas.byAbbrev[n.area.abbrev], x: bbox.left, y: top - 50 });\n        }\n    }, {\n        key: 'handleMouseOut',\n        value: function handleMouseOut(n) {\n            if (!this.clicked) {\n                //elem.selectAll('.node').classed('semi', false);\n                this.nodes.classed('semi', false);\n                //_.each(links, (v) => {\n                //    v.semi = false;\n                //});\n                this.links.classed('hidden', false);\n                this.links.attr('marker-end', '');\n                this.nodes.selectAll('.node-circle').attr('r', 18).attr('fill', function (d) {\n                    return d.area.hex_color;\n                });\n            }\n            (0, _utils.hideTooltip)();\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange() {\n            this.setState({ nodePicked: _AppStore2.default.getNodePicked() });\n        }\n    }, {\n        key: 'handleDownloadSVG',\n        value: function handleDownloadSVG(e) {\n            var html = this.svg_flne_parent.html();\n            var b64 = btoa(html);\n            var href = 'data:image/svg+xml;base64,\\n' + b64;\n            e.target.href = href;\n        }\n    }, {\n        key: 'handleDownloadCSV',\n        value: function handleDownloadCSV(e) {\n            e.target.href = '/static/data/individual_areas/flne_area_' + this.state.nodePicked.abbrev + '.csv';\n        }\n    }, {\n        key: 'handleDownloadGraph',\n        value: function handleDownloadGraph(e) {\n            var html = this.graph_parent.html();\n            var b64 = btoa(html);\n            var href = 'data:image/svg+xml;base64,\\n' + b64;\n            e.target.href = href;\n        }\n    }, {\n        key: 'handleSwitchToMatrixView',\n        value: function handleSwitchToMatrixView(e) {\n            window.location.href = '/';\n        }\n    }, {\n        key: 'showDownloadSVGHelp',\n        value: function showDownloadSVGHelp(e) {}\n    }, {\n        key: 'showDownloadCSVHelp',\n        value: function showDownloadCSVHelp(e) {}\n    }, {\n        key: 'hideDownloadSVGHelp',\n        value: function hideDownloadSVGHelp(e) {}\n    }, {\n        key: 'hideDownloadCSVHelp',\n        value: function hideDownloadCSVHelp(e) {}\n        /**\n         * @return {object}\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this5 = this;\n\n            /*\n                                <div className={classNames('main-flne', {hidden: !this.state.strengthExists})}>\n                                    <div className=\"info-label\">\n                                        Connectivity profile for the<br/>\n                                        <span className=\"injection-area-name\">{area_name}{sources}</span>\n                                    </div>\n                                    <div className=\"flne-bar\">\n                                    </div>\n                                    <div className=\"download\">\n                                        <ul>\n                                            <li className=\"download-svg\"><a onClick={this.handleDownloadSVG} download=\"export_svg.svg\">Download bar chart as SVG drawing</a>\n                                                <a\n                                                    onMouseOver={this.handleDownloadSVGHelp}\n                                                    onMouseOut={this.handleCloseDownloadSVGHelp}></a>&nbsp;\n                                                <a onMouseOver={this.showDownloadSVGHelp}>[?]</a></li>\n                                            <li className=\"download-csv\"><a onClick={this.handleDownloadCSV} target=\"_blank\">Download data as CSV file</a>&nbsp;\n                                                <a onMouseOver={this.showDownloadCSVHelp}>[?]</a></li>\n                                        </ul>\n                                    </div>\n                                </div>\n                                */\n            var modalStyle = {\n                width: '80%',\n                maxWidth: '1200px',\n                scrollX: 'auto',\n                overflow: 'scroll',\n                maxHeight: '100%'\n            };\n\n            var area_name = null;\n            if (this.state.nodePicked) {\n                area_name = (0, _utils.toTitleCase)(this.state.nodePicked.fullname) + ' (' + this.state.nodePicked.abbrev + ')';\n            }\n            var download_svg = _react2.default.createElement(\n                'div',\n                { className: 'link-button' },\n                _react2.default.createElement(\n                    'a',\n                    { onClick: this.handleDownloadGraph, download: 'export_flatmap_graph.svg' },\n                    'Download the graph as SVG'\n                )\n            );\n            var content = null;\n            if (!this.state.ajaxDone) {\n                content = _react2.default.createElement(\n                    'section',\n                    { className: 'main' },\n                    _react2.default.createElement(\n                        'section',\n                        { className: 'graph-container' },\n                        _react2.default.createElement('div', { className: 'loading' }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'loading-image' },\n                            _react2.default.createElement('img', { src: '/static/images/loading.svg', width: '120', height: '120' }),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'loading-image-caption' },\n                                'Loading additional data, please be patient...'\n                            )\n                        )\n                    ),\n                    _react2.default.createElement('section', { className: 'info-panel' })\n                );\n            } else {\n                var sources = null;\n                if (this.state.nodePicked) {\n                    sources = ', ' + this.strength_area_count + ' sources.';\n                }\n                content = _react2.default.createElement(\n                    'section',\n                    { className: 'main' },\n                    _react2.default.createElement(\n                        'section',\n                        { id: 'graph-container' },\n                        _react2.default.createElement(\n                            'section',\n                            { id: 'd3_control', className: 'd3-control' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'control-row' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'control-group' },\n                                    _react2.default.createElement('input', { type: 'radio', onChange: this.handleSwitchToMatrixView }),\n                                    _react2.default.createElement(\n                                        'label',\n                                        null,\n                                        'Matrix View'\n                                    ),\n                                    _react2.default.createElement('input', { type: 'radio', checked: true }),\n                                    _react2.default.createElement(\n                                        'label',\n                                        null,\n                                        'Graph View'\n                                    )\n                                )\n                            )\n                        ),\n                        _react2.default.createElement('section', { id: 'd3', className: 'd3' }),\n                        _react2.default.createElement(_ColorBar2.default, { style: 'graph' })\n                    ),\n                    _react2.default.createElement(\n                        'section',\n                        { id: 'info-panel' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'injection-info' },\n                            _react2.default.createElement(_MainFlne2.default, { flne: this.flne_per_area, areas: this._areas }),\n                            _react2.default.createElement(_InjectionList2.default, { flne: this.state.flne_per_injection })\n                        )\n                    ),\n                    _react2.default.createElement(\n                        _modal2.default,\n                        { ref: function ref(modal) {\n                                return _this5.modal = modal;\n                            }, modalStyle: modalStyle },\n                        'Test modal'\n                    )\n                );\n            }\n            return content;\n        }\n    }]);\n\n    return MainSection2;\n}(_react2.default.Component);\n\nexports.default = MainSection2;\n;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2pzL2NvbXBvbmVudHMvTWFpblNlY3Rpb24yLnJlYWN0LmpzP2ZjMzkiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL0FjdGlvbnMnO1xuaW1wb3J0IEFwcFN0b3JlIGZyb20gJy4uL3N0b3Jlcy9BcHBTdG9yZSc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuaW1wb3J0IE1haW5GbG5lIGZyb20gJy4vTWFpbkZsbmUucmVhY3QnO1xuaW1wb3J0IEluamVjdGlvbkxpc3QgZnJvbSAnLi9JbmplY3Rpb25MaXN0LnJlYWN0JztcbmltcG9ydCBudW1iZXJGb3JtYXQgZnJvbSAnLi4vbGliL251bWJlcmZvcm1hdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBBcHBEaXNwYXRjaGVyIGZyb20gJy4uL2Rpc3BhdGNoZXIvQXBwRGlzcGF0Y2hlcic7XG5pbXBvcnQgTW9kYWwgZnJvbSAnLi4vbGliL21vZGFsJzsgXG5pbXBvcnQgQ29sb3JCYXIgZnJvbSAnLi9Db2xvckJhci5yZWFjdCc7XG5pbXBvcnQge3RvVGl0bGVDYXNlLCBnZXRMb2dDb2xvckZ1bmMsIHNob3dUb29sdGlwQXJlYU5hbWUsIGhpZGVUb29sdGlwfSBmcm9tICcuLi9saWIvdXRpbHMnO1xuLy9cbi8vZnVuY3Rpb24gdG9UaXRsZUNhc2Uoc3RyKSB7XG4vLyAgICAvL3JldHVybiBzdHIucmVwbGFjZSgvXFx3XFxTKi9nLCBmdW5jdGlvbih0eHQpe3JldHVybiB0eHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eHQuc3Vic3RyKDEpLnRvTG93ZXJDYXNlKCk7fSk7XG4vLyAgICByZXR1cm4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnN1YnN0cigxKTtcbi8vfVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFpblNlY3Rpb24yIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCkge1xuICAgICAgICB3aW5kb3cuZDNqcyA9IGQzO1xuICAgICAgICBzdXBlcihwcm9wcywgY29udGV4dCk7XG4gICAgICAgIF8uYmluZEFsbChcbiAgICAgICAgICAgIHRoaXMsICdoYW5kbGVDaGFuZ2UnLCAnaGFuZGxlTW91c2VPdmVyJywgJ2hhbmRsZU1vdXNlT3V0JywgJ2hhbmRsZUNsaWNrJywgJ2hpZ2hsaWdodE5vZGUnLFxuICAgICAgICAgICAgJ2hhbmRsZURvd25sb2FkU1ZHJywgJ2hhbmRsZURvd25sb2FkR3JhcGgnLCAnaGFuZGxlRG93bmxvYWRDU1YnLCAnYWpheExvYWQnLCAnaGFuZGxlU3dpdGNoVG9NYXRyaXhWaWV3J1xuICAgICAgICApO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc3RyZW5ndGhFeGlzdHM6IGZhbHNlLFxuICAgICAgICAgICAgYWpheERvbmU6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9hcmVhcyA9IHtcbiAgICAgICAgICAgIGJ5QWJicmV2OiB7fSxcbiAgICAgICAgICAgIGJ5SW5kZXg6IHt9LFxuICAgICAgICAgICAgYnlJZDoge31cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wZW5kaW5nQWpheCA9IFtdO1xuICAgICAgICBsZXQgcGVuZGluZ0FqYXggPSB0aGlzLnBlbmRpbmdBamF4O1xuICAgICAgICB0aGlzLmFqYXhMb2FkKCdpbmplY3Rpb25zX3N0YXRpYy5qc29uJywgKGluaikgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0aWNfaW5qID0gaW5qO1xuICAgICAgICAgICAgXy5lYWNoKHRoaXMuc3RhdGljX2luaiwgKGluaiwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaW5qLm5hbWUgPSBrZXk7XG4gICAgICAgICAgICAgICAgaW5qLmNvbGxhcHNlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgQWN0aW9ucy5zYXZlSW5qZWN0aW9uc1N0YXRpYyhpbmopO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hamF4TG9hZCgnZmxuZV9nbWVhbm56X2FyZWFzLmpzb24nLCAoZmxuZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mbG5lX3Blcl9hcmVhID0gZmxuZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWpheExvYWQoJ2ZsbmVfZ21lYW5uel9pbmplY3Rpb25zLmpzb24nLCAoZmxuZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mbG5lX3Blcl9pbmplY3Rpb24gPSBmbG5lO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZmxuZV9wZXJfaW5qZWN0aW9uOiBmbG5lfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFqYXhMb2FkKCdzdHJ1Y3R1cmVzLmpzb24nLCAoc3RydWN0KSA9PiB7XG4gICAgICAgICAgICBfLmVhY2goc3RydWN0LCBzID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdHh0ID0gcy5mdWxsbmFtZTtcbiAgICAgICAgICAgICAgICB0eHQgPSB0eHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eHQuc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgcy5mdWxsbmFtZSA9IHR4dDtcbiAgICAgICAgICAgICAgICBsZXQgY2MgPSBzLmNvbG9yO1xuICAgICAgICAgICAgICAgIHMuaGV4X2NvbG9yID0gJ3JnYmEoJyArIGNjWzBdICsgJywnICsgY2NbMV0gKyAnLCcgKyBjY1syXSArICcsIDEpJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5hdGxhc19zdHJ1Y3QgPSBzdHJ1Y3Q7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFqYXhMb2FkKCdjb25uZWN0aXZpdHlfMV8wXzAuanNvbicsIChjb25uKSA9PiB7XG4gICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpdml0eSA9IGNvbm47XG4gICAgICAgICAgICBsZXQgbm9kZXMgPSBjb25uLm5vZGVzO1xuICAgICAgICAgICAgbGV0IG4gPSBub2Rlcy5sZW5ndGg7XG4gICAgICAgICAgICBfLmVhY2gobm9kZXMsIChub2RlLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgbm9kZS5pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgdGhhdC5fYXJlYXMuYnlJbmRleFtpXSA9IHthYmJyZXY6IG5vZGUubm9kZU5hbWUsIHNlcmlhbDogaX07XG4gICAgICAgICAgICAgICAgdGhhdC5fYXJlYXMuYnlBYmJyZXZbbm9kZS5ub2RlTmFtZV0gPSB0aGF0Ll9hcmVhcy5ieUluZGV4W2ldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhamF4TG9hZChmaWxlLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLnBlbmRpbmdBamF4LnB1c2goZmlsZSk7XG4gICAgICAgIGQzLmpzb24oJy9zdGF0aWMvZGF0YS8nICsgZmlsZSwgKGVycm9yLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgICAgICBfLnB1bGwodGhpcy5wZW5kaW5nQWpheCwgZmlsZSk7XG4gICAgICAgICAgICB0aGlzLmFqYXhQcm9ncmVzcygpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIEFwcFN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMuaGFuZGxlQ2hhbmdlKTtcbiAgICB9XG4gICAgaW5pdGlhbERyYXcoKSB7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgbGV0IHdpZHRoID0gODYwLCBoZWlnaHQ9IDg4MDtcbiAgICAgICAgdGhpcy5ncmFwaF9wYXJlbnQgPSBkMy5zZWxlY3QoJyNkMycpO1xuICAgICAgICBsZXQgc3ZnID0gdGhpcy5ncmFwaF9wYXJlbnQuYXBwZW5kKCdzdmcnKVxuICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgd2lkdGgpXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0KTtcblxuICAgICAgICBzdmcuYXBwZW5kKFwic3ZnOmRlZnNcIikuc2VsZWN0QWxsKFwibWFya2VyXCIpXG4gICAgICAgICAgICAuZGF0YShbXCJlbmRcIiwgJ2VuZC1zaG9ydCddKSAgICAgIC8vIERpZmZlcmVudCBsaW5rL3BhdGggdHlwZXMgY2FuIGJlIGRlZmluZWQgaGVyZVxuICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwibWFya2VyXCIpICAgIC8vIFRoaXMgc2VjdGlvbiBhZGRzIGluIHRoZSBhcnJvd3NcbiAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgU3RyaW5nKVxuICAgICAgICAgICAgLmF0dHIoXCJ2aWV3Qm94XCIsIFwiMCAtNSAxMCAxMFwiKVxuICAgICAgICAgICAgLy8uYXR0cihcInJlZlhcIiwgZCA9PiAoZCA9PSAnZW5kJyA/IDQwIDogNzUpKVxuICAgICAgICAgICAgLmF0dHIoJ3JlZlgnLCAzNSlcbiAgICAgICAgICAgIC5hdHRyKFwicmVmWVwiLCBkID0+IDApXG4gICAgICAgICAgICAuYXR0cihcIm1hcmtlcldpZHRoXCIsIDEwKVxuICAgICAgICAgICAgLmF0dHIoXCJtYXJrZXJIZWlnaHRcIiwgMTApXG4gICAgICAgICAgICAuYXR0cihcIm9yaWVudFwiLCBcImF1dG9cIilcbiAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgJyMzMzMzMzMnKVxuICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgJyMzMzMzMzMnKVxuICAgICAgICAgICAgLmFwcGVuZChcInN2ZzpwYXRoXCIpXG4gICAgICAgICAgICAuYXR0cihcImRcIiwgXCJNMSwtNEw5LDBMMSw0XCIpO1xuICAgICAgICBzdmcuYXBwZW5kKCdnJylcbiAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsICcwLjEnKVxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMCwgMCknKVxuICAgICAgICAgICAgLmFwcGVuZCgnaW1hZ2UnKVxuICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCAnL3N0YXRpYy9pbWFnZXMvYWxsX2luamVjdGlvbnNfb25fZmxhdG1hcC5wbmcnKTtcbiAgICAgICAgc3ZnID0gc3ZnLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgyMCwgLTUwKScpO1xuICAgICAgICBsZXQgY29sb3IgPSBkMy5zY2FsZU9yZGluYWwoZDMuc2NoZW1lQ2F0ZWdvcnkyMCk7XG4gICAgICAgIGxldCBmbGF0bWFwU2NhbGVYID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbMCwgOTYwXSk7XG4gICAgICAgIGxldCBmbGF0bWFwU2NhbGVZID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbMCwgOTYwXSk7XG4gICAgICAgIGZsYXRtYXBTY2FsZVguZG9tYWluKFstMjAsIDIwXSk7XG4gICAgICAgIGZsYXRtYXBTY2FsZVkuZG9tYWluKFsyMCwgLTIwXSk7XG5cbiAgICAgICAgLy8gcHJlcGFyZSBhbGwgdGhlIHN0cnVjdHVyZXNcbiAgICAgICAgbGV0IGF0bGFzX3N0cnVjdCA9IHRoaXMuYXRsYXNfc3RydWN0O1xuICAgICAgICBsZXQgYWJicmV2X2xvb2t1cCA9IHt9O1xuICAgICAgICBfLmVhY2goYXRsYXNfc3RydWN0LCAoYXJlYSkgPT4ge1xuICAgICAgICAgICAgYWJicmV2X2xvb2t1cFthcmVhLmFiYnJldl0gPSBhcmVhO1xuICAgICAgICAgICAgbGV0IGNjID0gYXJlYS5jb2xvcjtcbiAgICAgICAgICAgIGFyZWEuaGV4X2NvbG9yID0gJ3JnYmEoJyArIGNjWzBdICsgJywnICsgY2NbMV0gKyAnLCcgKyBjY1syXSArICcsIDEpJztcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWJicmV2X2xvb2t1cCA9IGFiYnJldl9sb29rdXA7XG5cblxuICAgICAgICAvLyBwcm9jZXNzaW5nIHRoZSBjb25uZWN0aXZpdHkgZGF0YVxuICAgICAgICBsZXQgY29ubmVjdGl2aXR5ID0gdGhpcy5jb25uZWN0aXZpdHk7XG4gICAgICAgIC8vIENvbXB1dGUgdGhlIGRpc3RpbmN0IG5vZGVzIGZyb20gdGhlIGxpbmtzLlxuICAgICAgICBjb25uZWN0aXZpdHkubm9kZXMuZm9yRWFjaCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgbi5pbmRleCA9IGk7XG4gICAgICAgICAgICBuLmFyZWEgPSBhYmJyZXZfbG9va3VwW24ubm9kZU5hbWVdO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHogPSBkMy5zY2FsZUxvZygpLmRvbWFpbihbMSwgNjc2XSkuY2xhbXAodHJ1ZSk7XG4gICAgICAgIGxldCBsaW5rX2hhc2ggPSB7fTtcbiAgICAgICAgbGV0IGFscGhhU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFsuMiwgLjc1XSk7XG4gICAgICAgIGFscGhhU2NhbGUuZG9tYWluKFswLCA2MF0pLmNsYW1wKHRydWUpO1xuICAgICAgICBjb25uZWN0aXZpdHkubGlua3MuZm9yRWFjaChmdW5jdGlvbihsaW5rKSB7XG4gICAgICAgICAgICBsaW5rLnNvdXJjZSA9IGNvbm5lY3Rpdml0eS5ub2Rlc1tsaW5rLnNvdXJjZV1cbiAgICAgICAgICAgIGxpbmsudGFyZ2V0ID0gY29ubmVjdGl2aXR5Lm5vZGVzW2xpbmsudGFyZ2V0XVxuICAgICAgICAgICAgbGluay5zb3VyY2UudG8gPSBsaW5rLnNvdXJjZS50byB8fCB7fTtcbiAgICAgICAgICAgIGxpbmsuc291cmNlLnRvW2xpbmsudGFyZ2V0Lm5vZGVOYW1lXSA9IGxpbmsudGFyZ2V0O1xuICAgICAgICAgICAgbGluay50YXJnZXQuZnJvbSA9IGxpbmsudGFyZ2V0LmZyb20gfHwge307XG4gICAgICAgICAgICBsaW5rLnRhcmdldC5mcm9tW2xpbmsuc291cmNlLm5vZGVOYW1lXSA9IGxpbmsuc291cmNlO1xuXG4gICAgICAgICAgICBsaW5rLnZhbHVlID0gK2xpbmsudmFsdWU7XG4gICAgICAgICAgICBsaW5rLmFscGhhID0gYWxwaGFTY2FsZShsaW5rLnZhbHVlKTtcbiAgICAgICAgICAgIC8vbGlua19oYXNoW2xpbmsudGFyZ2V0Lm5vZGVOYW1lXSA9IGxpbmtfaGFzaFtsaW5rLnRhcmdldC5ub2RlTmFtZV0gfHwge307XG4gICAgICAgICAgICAvL2xpbmtfaGFzaFtsaW5rLnRhcmdldC5ub2RlTmFtZV1bbGluay5zb3VyY2Uubm9kZU5hbWVdID0gbGluaztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9sZXQgbWF4WiA9IDY3NjtcbiAgICAgICAgbGV0IGxpbmtzID0gc3ZnLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGlua3MnKVxuICAgICAgICAgICAgLnNlbGVjdEFsbCgnbGluZScpXG4gICAgICAgICAgICAuZGF0YShjb25uZWN0aXZpdHkubGlua3MpXG4gICAgICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgZCA9PiAnbGluaycpXG4gICAgICAgICAgICAuYXR0cignZGF0YS1mcm9tJywgZCA9PiBkLnNvdXJjZS5ub2RlTmFtZSlcbiAgICAgICAgICAgIC5hdHRyKCdkYXRhLXRvJywgZCA9PiBkLnRhcmdldC5ub2RlTmFtZSlcbiAgICAgICAgICAgIC5hdHRyKCdkYXRhLWFscGhhJywgZCA9PiBkLmFscGhhKVxuICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgZCA9PiBkLmFscGhhKVxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0QWxsKCcubGluay1wYXRoJylcbiAgICAgICAgICAgICAgICAgICAgLmRhdGEoW2RdKVxuICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKSBcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgncGF0aCcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5rLXBhdGgnKVxuICAgICAgICAgICAgICAgICAgICAvLy5hdHRyKCdtYXJrZXItZW5kJywgZCA9PiBkLnNlbWkgPyAndXJsKCNlbmQtc2hvcnQpJyA6ICcnKVxuICAgICAgICAgICAgICAgICAgICAvLy5hdHRyKCdzdHJva2Utd2lkdGgnLCBmdW5jdGlvbihkKSB7IHJldHVybiBNYXRoLnNxcnQoZC52YWx1ZSk7IH0pO1xuICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgZCA9PiAxKVxuICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIGQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdyZ2IoNTAsIDUwLCA1MCknO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignZCcsIGQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNfY29vcmQgPSBhYmJyZXZfbG9va3VwW2Quc291cmNlLm5vZGVOYW1lXS5mbGF0bWFwX2Nvb3JkO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN4ID0gZmxhdG1hcFNjYWxlWChzX2Nvb3JkWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzeSA9IGZsYXRtYXBTY2FsZVkoc19jb29yZFsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdF9jb29yZCA9IGFiYnJldl9sb29rdXBbZC50YXJnZXQubm9kZU5hbWVdLmZsYXRtYXBfY29vcmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHggPSBmbGF0bWFwU2NhbGVYKHRfY29vcmRbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHR5ID0gZmxhdG1hcFNjYWxlWSh0X2Nvb3JkWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnTScgKyBzeCArICcsJyArIHN5ICsgJyBMJyArIHR4ICsgJywnICsgdHk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgLypcbiAgICAgICAgdGhpcy5zdmdfZmxuZV9wYXJlbnQgPSBkMy5zZWxlY3QoJy5mbG5lLWJhcicpO1xuICAgICAgICB0aGlzLnN2Z19mbG5lID0gdGhpcy5zdmdfZmxuZV9wYXJlbnQuYXBwZW5kKCdzdmcnKVxuICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgMzY1KVxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIDIwMClcbiAgICAgICAgbGV0IGZsbmUgPSB0aGlzLnN2Z19mbG5lXG4gICAgICAgICAgICAuYXBwZW5kKCdnJylcbiAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDUwLCA1KScpO1xuICAgICAgICBsZXQgc2NhbGVyLCBzY2FsZXJfZG9tO1xuICAgICAgICAqL1xuICAgICAgICBsZXQgbm9kZXMgPSBzdmcuYXBwZW5kKCdnJylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdub2RlcycpXG4gICAgICAgICAgICAuc2VsZWN0QWxsKCcubm9kZScpXG4gICAgICAgICAgICAuZGF0YShjb25uZWN0aXZpdHkubm9kZXMpXG4gICAgICAgICAgICAuZW50ZXIoKVxuICAgICAgICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbm9kZScpXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgICAgICAgLnNlbGVjdEFsbCgnLm5vZGUtY2lyY2xlJylcbiAgICAgICAgICAgICAgICAuZGF0YShbZF0pXG4gICAgICAgICAgICAgICAgLmVudGVyKClcbiAgICAgICAgICAgICAgICAuYXBwZW5kKCdjaXJjbGUnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgMTgpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ25vZGUtY2lyY2xlJylcbiAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsIChkKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIGQuYXJlYS5oZXhfY29sb3JcbiAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgIC5zdHlsZSgnc3Ryb2tlJywgZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAncmdiYSgwLCAwLCAwLCAwLjUpJztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjeCcsIChkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbGF0bWFwU2NhbGVYKGFiYnJldl9sb29rdXBbZC5ub2RlTmFtZV0uZmxhdG1hcF9jb29yZFswXSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cignY3knLCAoZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmxhdG1hcFNjYWxlWShhYmJyZXZfbG9va3VwW2Qubm9kZU5hbWVdLmZsYXRtYXBfY29vcmRbMV0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihuKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlbGVtID0gZDMuc2VsZWN0KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmhhbmRsZU1vdXNlT3ZlcihuLCBlbGVtKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCBmdW5jdGlvbihuKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaGFuZGxlTW91c2VPdXQobik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24obikge1xuICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgdGhlIGJhciBjaGFydCB0byBzaG93IGNvbm5lY3Rpdml0eSBzdHJlbmd0aCBmcm9tIGVhY2ggYXJlYVxuICAgICAgICAgICAgICAgICAgICB0aGF0LmhhbmRsZUNsaWNrKG4pO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmNsaWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAvL2QzLnNlbGVjdEFsbCgnLmluamVjdGlvbi1hcmVhLW5hbWUnKVxuICAgICAgICAgICAgICAgICAgICAvLyAgICAudGV4dCh0b1RpdGxlQ2FzZShuLmFyZWEuZnVsbG5hbWUpICsgJyAoJyArIG4ubm9kZU5hbWUgKyAnKScpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgQWN0aW9ucy5waWNrTm9kZSh0aGF0Ll9hcmVhcy5ieUFiYnJldltuLm5vZGVOYW1lXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0cmVuZ3RoID0gdGhhdC5mbG5lX3Blcl9hcmVhW24ubm9kZU5hbWVdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgeSA9IG51bGwsIGZsbmVfaGVpZ2h0ID0gMTAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc3RyZW5ndGhfYXJlYV9jb3VudCA9IHN0cmVuZ3RoLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0U3RhdGUoe3N0cmVuZ3RoRXhpc3RzOiB0cnVlfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbG5lX2hlaWdodCA9IDEwICogc3RyZW5ndGgubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcuZmxuZS1iYXIgc3ZnJykuYXR0cignaGVpZ2h0JywgZmxuZV9oZWlnaHQgKyA0NSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB5ID0gZDMuc2NhbGVCYW5kKCkucmFuZ2UoWzAsIGZsbmVfaGVpZ2h0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB5LnJvdW5kKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeS5wYWRkaW5nSW5uZXIoLjEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmxuZS5zZWxlY3RBbGwoJy5yb3cnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsbmUuc2VsZWN0QWxsKCcuYXhpcy1ib3R0b20nKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcmNzID0gXy5tYXAoc3RyZW5ndGgsICdzb3VyY2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHkuZG9tYWluKHNyY3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZsbmVfYXJyID0gXy5tYXAoc3RyZW5ndGgsICdsb2cxMF9mbG5lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWluID0gXy5taW4oZmxuZV9hcnIpLCBtYXggPSBfLm1heChmbG5lX2Fycik7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29sb3JGdW5jID0gZ2V0Q29sb3JGdW5jKG1pbiwgbWF4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiYXJXaWR0aEZ1bmMgPSB0aGF0LmdldEJhcldpZHRoRnVuYyhtaW4sIG1heCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcm93ID0gZmxuZS5zZWxlY3RBbGwoJy5yb3cnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5kYXRhKHN0cmVuZ3RoLCBkID0+IGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJvd19lbnRlciA9IHJvdy5lbnRlcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3JvdycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93X2VudGVyLmFwcGVuZCgndGV4dCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2ZsbmUtbGFiZWwnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd19lbnRlci5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdmbG5lLXJlY3QnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcm93X2VudGVyLnNlbGVjdEFsbCgnLmZsbmUtbGFiZWwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgLTYpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAoZCwgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geShkLnNvdXJjZSkgKyB5LmJhbmR3aWR0aCgpIC8gMlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ2VuZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2FsaWdubWVudC1iYXNlbGluZScsICdtaWRkbGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KGQgPT4gZC5zb3VyY2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZSA9IGQzLnNlbGVjdCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5hcmVhQmFyTW91c2VPdmVyKG1lLCBkLnNvdXJjZSwgbi5ub2RlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuYXJlYUxhYmVsTW91c2VPdmVyKG1lLCBkLnNvdXJjZSwgbi5ub2RlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpLnNlbGVjdEFsbCgncmVjdCcpLmF0dHIoJ2ZpbGwnLCAnYnJvd24nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSkuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgYmFyV2lkdGhGdW5jKGQubG9nMTBfZmxuZSkgLSA1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAoZCwgaSkgPT4geShkLnNvdXJjZSkgKyB5LmJhbmR3aWR0aCgpIC8gMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdlbmQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2FsaWdubWVudC1iYXNlbGluZScsICdtaWRkbGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3N0cm9rZScsICdub25lJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCAnYm9sZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsICd3aGl0ZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbnVtJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50ZXh0KGQubG9nMTBfZmxuZS50b0ZpeGVkKDIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZSA9IGQzLnNlbGVjdCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5hcmVhQmFyTW91c2VPdXQobWUsIGQuc291cmNlLCBuLm5vZGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5hcmVhTGFiZWxNb3VzZU91dChtZSwgZC5zb3VyY2UsIG4ubm9kZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2QzLnNlbGVjdCh0aGlzKS5hdHRyKCdmaWxsJywgY29sb3JGdW5jKGQubG9nMTBfZmxuZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5zZWxlY3RBbGwoJ3JlY3QnKS5hdHRyKCdmaWxsJywgY29sb3JGdW5jKGQubG9nMTBfZmxuZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5zZWxlY3RBbGwoJy5udW0nKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgcm93X2VudGVyLnNlbGVjdEFsbCgnLmZsbmUtcmVjdCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgKGQsIGkpID0+IHkoZC5zb3VyY2UpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIGQgPT4gYmFyV2lkdGhGdW5jKGQubG9nMTBfZmxuZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIHkuYmFuZHdpZHRoKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBkID0+IGNvbG9yRnVuYyhkLmxvZzEwX2ZsbmUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWUgPSBkMy5zZWxlY3QodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuYXJlYUJhck1vdXNlT3ZlcihtZSwgZC5zb3VyY2UsIG4ubm9kZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmFyZWFMYWJlbE1vdXNlT3ZlcihtZSwgZC5zb3VyY2UsIG4ubm9kZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXR0cignZmlsbCcsICdicm93bicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCBiYXJXaWR0aEZ1bmMoZC5sb2cxMF9mbG5lKSAtIDUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigneScsIChkLCBpKSA9PiB5KGQuc291cmNlKSArIHkuYmFuZHdpZHRoKCkgLyAyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ2VuZCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignYWxpZ25tZW50LWJhc2VsaW5lJywgJ21pZGRsZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgJ25vbmUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmb250LXdlaWdodCcsICdib2xkJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJ3doaXRlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdudW0nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQoZC5sb2cxMF9mbG5lLnRvRml4ZWQoMikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKGQsIGksIHApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lID0gZDMuc2VsZWN0KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmFyZWFCYXJNb3VzZU91dChtZSwgZC5zb3VyY2UsIG4ubm9kZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmFyZWFMYWJlbE1vdXNlT3V0KG1lLCBkLnNvdXJjZSwgbi5ub2RlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKCdmaWxsJywgY29sb3JGdW5jKGQubG9nMTBfZmxuZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5zZWxlY3RBbGwoJy5udW0nKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVyID0gZDMuYXhpc0JvdHRvbSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNjYWxlKGJhcldpZHRoRnVuYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGlja1NpemVJbm5lcigtZmxuZV9oZWlnaHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplT3V0ZXIoMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGlja3MoNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZXJfZG9tID0gZmxuZS5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGZsbmVfaGVpZ2h0ICsgXCIpXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2F4aXMtYm90dG9tJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2FsbChzY2FsZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVyX2RvbS5zZWxlY3RBbGwoJy50aWNrIGxpbmUnKS5maWx0ZXIoKGQsIGksIGwpID0+IGkgPT0gMCB8fCAoaSA9PT0gbC5sZW5ndGggLSAxKSkuYXR0cignZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5tYWluLWJhci1zY2FsZS14LXRpdGxlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGl0bGUgPSBmbG5lLmFwcGVuZCgndGV4dCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ21haW4tYmFyLXNjYWxlLXgtdGl0bGUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyAoMzIwIC8gMiAtIDIwKSArICcsICcgKyAoZmxuZV9oZWlnaHQgKyAyNSkgKyAnKScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZS5hcHBlbmQoJ3RzcGFuJykuYXR0cignZm9udC1zaXplJywgJzEyJykudGV4dCgnbG9nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZS5hcHBlbmQoJ3RzcGFuJykudGV4dCgnMTAnKS5hdHRyKCdiYXNlbGluZS1zaGlmdCcsICdzdWInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlLmFwcGVuZCgndHNwYW4nKS5hdHRyKCdmb250LXNpemUnLCAnMTInKS50ZXh0KCcoRkxOZSknKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2V0U3RhdGUoe3N0cmVuZ3RoRXhpc3RzOiBmYWxzZX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmxuZS5zZWxlY3RBbGwoJy5yb3cnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmZsbmUtYmFyIHN2ZycpLmF0dHIoJ2hlaWdodCcsIGZsbmVfaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY2FsZXJfZG9tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVyX2RvbS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAqLyBcbiAgICAgICAgICAgICAgICAgICAgLy8gY29udGludWUgdG8gZnVybmlzaCBpbmplY3Rpb24gZGV0YWlsXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbmplY3Rpb25zID0gXy5maWx0ZXIodGhhdC5zdGF0aWNfaW5qLCB7YWJicmV2OiBuLm5vZGVOYW1lfSk7XG4gICAgICAgICAgICAgICAgICAgIEFjdGlvbnMubm9kZURldGFpbChpbmplY3Rpb25zKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5zZWxlY3RBbGwoJy50ZXh0JylcbiAgICAgICAgICAgICAgICAuZGF0YShbZF0pLmVudGVyKClcbiAgICAgICAgICAgICAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAndGV4dCcpXG4gICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5ub2RlTmFtZS5yZXBsYWNlKCctJywgJy8nKTsgfSlcbiAgICAgICAgICAgICAgICAuYXR0cigndGV4dC1hbmNob3InLCAnbWlkZGxlJylcbiAgICAgICAgICAgICAgICAuYXR0cihcInBvaW50ZXItZXZlbnRzXCIsIFwibm9uZVwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZsYXRtYXBTY2FsZVgoYWJicmV2X2xvb2t1cFtkLm5vZGVOYW1lXS5mbGF0bWFwX2Nvb3JkWzBdKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgKGQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZsYXRtYXBTY2FsZVkoYWJicmV2X2xvb2t1cFtkLm5vZGVOYW1lXS5mbGF0bWFwX2Nvb3JkWzFdKSArIDMgO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhhdC5ub2RlcyA9IG5vZGVzO1xuICAgICAgICB0aGF0LmxpbmtzID0gbGlua3M7XG4gICAgfVxuICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMsIG5leHRTdGF0ZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIEFwcFN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMuaGFuZGxlQ2hhbmdlKTtcbiAgICB9XG4gICAgYWpheFByb2dyZXNzKCkge1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nQWpheC5sZW5ndGggPT0gMCAmJiAhdGhpcy5zdGF0ZS5hamF4RG9uZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YWpheERvbmU6IHRydWV9LCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVwYXJlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsRHJhdygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJlcGFyZSgpIHtcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICAvL2xldCBhYmJyZXZfbG9va3VwID0ge307XG4gICAgICAgIF8uZWFjaCh0aGlzLmF0bGFzX3N0cnVjdCwgKGFyZWEpID0+IHtcbiAgICAgICAgICAgIGxldCBfYXJlYSA9IHRoaXMuX2FyZWFzLmJ5QWJicmV2W2FyZWEuYWJicmV2XTtcbiAgICAgICAgICAgIF8uYXNzaWduKF9hcmVhLCBhcmVhKTtcbiAgICAgICAgICAgIHRoaXMuX2FyZWFzLmJ5SWRbX2FyZWEuaWRdID0gX2FyZWE7XG4gICAgICAgICAgICBsZXQgaW5qZWN0aW9ucyA9IF8uZmlsdGVyKHRoYXQuc3RhdGljX2luaiwge2FiYnJldjogYXJlYS5hYmJyZXZ9KTtcbiAgICAgICAgICAgIF9hcmVhLmluamVjdGlvbnMgPSBpbmplY3Rpb25zO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IG1hdHJpeCA9IHRoYXQuX21hdHJpeDtcbiAgICAgICAgXy5lYWNoKHRoaXMubGlua3MsIChsaW5rKSA9PiB7XG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gdGhhdC5fYXJlYXMuYnlJbmRleFtsaW5rLnRhcmdldF07XG4gICAgICAgICAgICBsZXQgc291cmNlID0gdGhhdC5fYXJlYXMuYnlJbmRleFtsaW5rLnNvdXJjZV07XG4gICAgICAgICAgICBtYXRyaXgubGluayh0YXJnZXQsIHNvdXJjZSwge3RhcmdldDogdGFyZ2V0LCBzb3VyY2U6IHNvdXJjZSwgdmFsdWU6IGxpbmsudmFsdWV9KTtcbiAgICAgICAgICAgIC8vbWF0cml4W2xpbmsudGFyZ2V0XVtsaW5rLnNvdXJjZV0ueiArPSBsaW5rLnZhbHVlO1xuICAgICAgICAgICAgLy9ub2Rlc1tsaW5rLnNvdXJjZV0uY291bnQgKz0gbGluay52YWx1ZTtcbiAgICAgICAgICAgIC8vbm9kZXNbbGluay50YXJnZXRdLmNvdW50ICs9IGxpbmsudmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICBBcHBEaXNwYXRjaGVyLnJlZ2lzdGVyKGFjdGlvbiA9PiB7XG4gICAgICAgICAgICBBcHBEaXNwYXRjaGVyLndhaXRGb3IoW0FwcFN0b3JlLmRpc3BhdGNoVG9rZW5dKTtcbiAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uLmFjdGlvblR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdISUdITElHSFRfRURHRSc6IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZyb21fID0gYWN0aW9uLmZyb21fO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdG8gPSBhY3Rpb24udG87XG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5rID0gZDMuc2VsZWN0QWxsKCdnLmxpbmsnKS5maWx0ZXIoJ1tkYXRhLWZyb209JyArIGZyb21fLmFiYnJldiArICddJykuZmlsdGVyKCdbZGF0YS10bz0nICsgdG8uYWJicmV2ICsgJ10nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5rLmVtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsuc3R5bGUoJ29wYWNpdHknLCAxKS5zZWxlY3RBbGwoJy5saW5rLXBhdGgnKS5zdHlsZSgnc3Ryb2tlJywgJyNmZjAwMDAnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FzZSAnVU5ISUdITElHSFRfRURHRSc6IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZyb21fID0gYWN0aW9uLmZyb21fO1xuICAgICAgICAgICAgICAgICAgICBsZXQgdG8gPSBhY3Rpb24udG87XG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5rID0gZDMuc2VsZWN0QWxsKCdnLmxpbmsnKS5maWx0ZXIoJ1tkYXRhLWZyb209JyArIGZyb21fLmFiYnJldiArICddJykuZmlsdGVyKCdbZGF0YS10bz0nICsgdG8uYWJicmV2ICsgJ10nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5rLmVtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmsuc3R5bGUoJ29wYWNpdHknLCBsaW5rLmF0dHIoJ2RhdGEtYWxwaGEnKSkuc2VsZWN0QWxsKCcubGluay1wYXRoJykuc3R5bGUoJ3N0cm9rZScsICdyZ2IoNTAsIDUwLCA1MCknKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBlbmQgcHJlcGFyaW5nIHdvcmssIHNhdmUgaXQgdG8gYXBwU3RhdGVcbiAgICAgICAgQWN0aW9ucy5zYXZlQXJlYXModGhhdC5fYXJlYXMpO1xuICAgIH0gXG4gICAgZ2V0QmFyV2lkdGhGdW5jKG1pbiwgbWF4KSB7XG4gICAgICAgIG1pbiA9IC01LCBtYXggPSAwO1xuICAgICAgICBsZXQgZnVuYyA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFttaW4sIG1heF0pLnJhbmdlKFswLCAzMDBdKTtcbiAgICAgICAgcmV0dXJuIGZ1bmM7XG4gICAgfVxuICAgIGhpZ2hsaWdodE5vZGUobikge1xuICAgICAgICBsZXQgc3RyZW5ndGggPSB0aGlzLmZsbmVfcGVyX2FyZWFbbi5ub2RlTmFtZV07XG4gICAgICAgIGxldCBlbWl0dGVyID0gbi5mcm9tIHx8IHt9O1xuICAgICAgICB0aGlzLm5vZGVzLmNsYXNzZWQoJ3NlbWknLCAoZCwgaSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGQubm9kZU5hbWUgIT0gbi5ub2RlTmFtZTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIChkLCBpKSA9PiBkLm5vZGVOYW1lID09IG4ubm9kZU5hbWUpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBpZiAoYS5ub2RlTmFtZSAhPSBuLm5vZGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgbGV0IGZsbmVfYXJyID0gXy5tYXAoc3RyZW5ndGgsICdsb2cxMF9mbG5lJyk7XG4gICAgICAgIGxldCBtaW4gPSBfLm1pbihmbG5lX2FyciksIG1heCA9IF8ubWF4KGZsbmVfYXJyKTtcbiAgICAgICAgbGV0IGNvbG9yRnVuYyA9IGdldExvZ0NvbG9yRnVuYyhtaW4sIG1heCk7XG5cbiAgICAgICAgdGhpcy5ub2Rlcy5zZWxlY3RBbGwoJy5ub2RlLWNpcmNsZScpLmF0dHIoJ3InLCBkID0+IGQubm9kZU5hbWUgPT0gbi5ub2RlTmFtZSA/IDI2IDogMTgpXG4gICAgICAgIC5hdHRyKCdmaWxsJywgZCA9PiB7XG4gICAgICAgICAgICBpZiAoZC5ub2RlTmFtZSBpbiBlbWl0dGVyIHx8IGQubm9kZU5hbWUgPT0gbi5ub2RlTmFtZSkge1xuICAgICAgICAgICAgICAgIGxldCBpbmZvID0gXy5maW5kKHN0cmVuZ3RoLCB7c291cmNlOiBkLm5vZGVOYW1lfSk7XG4gICAgICAgICAgICAgICAgaWYgKGluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yRnVuYyhpbmZvLmxvZzEwX2ZsbmUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLmFyZWEuaGV4X2NvbG9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDUwLCA1MCwgNTAsIC4yKSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMubGlua3MuY2xhc3NlZCgnaGlkZGVuJywgKGQpID0+IChkLnRhcmdldC5ub2RlTmFtZSAhPSBuLm5vZGVOYW1lKSlcbiAgICAgICAgICAgIC5hdHRyKCdtYXJrZXItZW5kJywgZCA9PiBkLnNlbWkgPyAndXJsKCNlbmQtc2hvcnQpJyA6ICd1cmwoI2VuZCknKVxuICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgZCA9PiBkLmFscGhhKVxuICAgICAgICAgICAgLnNlbGVjdEFsbCgncGF0aCcpLnN0eWxlKCdzdHJva2UnLCBkID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3JnYmEoNTAsIDUwLCA1MCknO1xuICAgICAgICAgICAgICAgIC8vbGV0IGluZm8gPSBfLmZpbmQoc3RyZW5ndGgsIHtzb3VyY2U6IGQuc291cmNlLm5vZGVOYW1lfSk7XG4gICAgICAgICAgICAgICAgLy9pZiAoaW5mbykge1xuICAgICAgICAgICAgICAgIC8vICAgIHJldHVybiBjb2xvckZ1bmMoaW5mby5sb2cxMF9mbG5lKTtcbiAgICAgICAgICAgICAgICAvL30gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gICAgcmV0dXJuICdyZ2IoNTAsIDUwLCA1MCknO1xuICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhbmRsZUNsaWNrKG4pIHtcbiAgICAgICAgdGhpcy5oaWdobGlnaHROb2RlKG4pO1xuICAgICAgICAvKiBmdW5jdGlvbiB0byBtYWtlIGxpbmtzIGludGVyYWN0aXZlIGFmdGVyIGEgbm9kZSBpcyBwaWNrZWRcbiAgICAgICAgdGhpcy5saW5rcy5maWx0ZXIoJzpub3QoLmhpZGRlbiknKVxuICAgICAgICAub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5zdHlsZSgnb3BhY2l0eScsIDEpLnNlbGVjdEFsbCgnLmxpbmstcGF0aCcpLnN0eWxlKCdzdHJva2UnLCAnI2ZmMDAwMCcpO1xuICAgICAgICB9KVxuICAgICAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24obikge1xuICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLnN0eWxlKCdvcGFjaXR5Jywgbi5hbHBoYSkuc2VsZWN0QWxsKCcubGluay1wYXRoJykuc3R5bGUoJ3N0cm9rZScsICdyZ2IoNTAsIDUwLCA1MCknKTtcbiAgICAgICAgfSlcbiAgICAgICAgKi9cbiAgICB9XG4gICAgaGFuZGxlTW91c2VPdmVyKG4sIGVsZW0pIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWNrZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0Tm9kZShuKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgYmJveCA9IGVsZW0ubm9kZSgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBsZXQgdG9wID0gYmJveC50b3AgKyAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgc2hvd1Rvb2x0aXBBcmVhTmFtZSh7YXJlYTogdGhpcy5fYXJlYXMuYnlBYmJyZXZbbi5hcmVhLmFiYnJldl0sIHg6IGJib3gubGVmdCwgeTogdG9wIC0gNTB9KTtcbiAgICB9XG4gICAgaGFuZGxlTW91c2VPdXQobikge1xuICAgICAgICBpZiAoIXRoaXMuY2xpY2tlZCkge1xuICAgICAgICAgICAgLy9lbGVtLnNlbGVjdEFsbCgnLm5vZGUnKS5jbGFzc2VkKCdzZW1pJywgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5ub2Rlcy5jbGFzc2VkKCdzZW1pJywgZmFsc2UpO1xuICAgICAgICAgICAgLy9fLmVhY2gobGlua3MsICh2KSA9PiB7XG4gICAgICAgICAgICAvLyAgICB2LnNlbWkgPSBmYWxzZTtcbiAgICAgICAgICAgIC8vfSk7XG4gICAgICAgICAgICB0aGlzLmxpbmtzLmNsYXNzZWQoJ2hpZGRlbicsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMubGlua3MuYXR0cignbWFya2VyLWVuZCcsICcnKTtcbiAgICAgICAgICAgIHRoaXMubm9kZXMuc2VsZWN0QWxsKCcubm9kZS1jaXJjbGUnKS5hdHRyKCdyJywgMTgpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQuYXJlYS5oZXhfY29sb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaGlkZVRvb2x0aXAoKTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtub2RlUGlja2VkOiBBcHBTdG9yZS5nZXROb2RlUGlja2VkKCl9KTtcbiAgICB9XG4gICAgaGFuZGxlRG93bmxvYWRTVkcoZSkge1xuICAgICAgICBsZXQgaHRtbCA9IHRoaXMuc3ZnX2ZsbmVfcGFyZW50Lmh0bWwoKTtcbiAgICAgICAgbGV0IGI2NCA9IGJ0b2EoaHRtbCk7XG4gICAgICAgIGxldCBocmVmID0gJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsXFxuJyArIGI2NDtcbiAgICAgICAgZS50YXJnZXQuaHJlZiA9IGhyZWY7XG5cbiAgICB9XG4gICAgaGFuZGxlRG93bmxvYWRDU1YoZSkge1xuICAgICAgICBlLnRhcmdldC5ocmVmID0gJy9zdGF0aWMvZGF0YS9pbmRpdmlkdWFsX2FyZWFzL2ZsbmVfYXJlYV8nICsgdGhpcy5zdGF0ZS5ub2RlUGlja2VkLmFiYnJldiArICcuY3N2JztcbiAgICB9XG4gICAgaGFuZGxlRG93bmxvYWRHcmFwaChlKSB7XG4gICAgICAgIGxldCBodG1sID0gdGhpcy5ncmFwaF9wYXJlbnQuaHRtbCgpO1xuICAgICAgICBsZXQgYjY0ID0gYnRvYShodG1sKTtcbiAgICAgICAgbGV0IGhyZWYgPSAnZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxcXG4nICsgYjY0O1xuICAgICAgICBlLnRhcmdldC5ocmVmID0gaHJlZjtcblxuICAgIH1cbiAgICBoYW5kbGVTd2l0Y2hUb01hdHJpeFZpZXcoZSkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJztcbiAgICB9XG5cbiAgICBzaG93RG93bmxvYWRTVkdIZWxwKGUpIHtcbiAgICB9XG4gICAgc2hvd0Rvd25sb2FkQ1NWSGVscChlKSB7XG4gICAgfVxuICAgIGhpZGVEb3dubG9hZFNWR0hlbHAoZSkge1xuICAgIH1cbiAgICBoaWRlRG93bmxvYWRDU1ZIZWxwKGUpIHtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7b2JqZWN0fVxuICAgICAqL1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnbWFpbi1mbG5lJywge2hpZGRlbjogIXRoaXMuc3RhdGUuc3RyZW5ndGhFeGlzdHN9KX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5mby1sYWJlbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29ubmVjdGl2aXR5IHByb2ZpbGUgZm9yIHRoZTxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmplY3Rpb24tYXJlYS1uYW1lXCI+e2FyZWFfbmFtZX17c291cmNlc308L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsbmUtYmFyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRvd25sb2FkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT1cImRvd25sb2FkLXN2Z1wiPjxhIG9uQ2xpY2s9e3RoaXMuaGFuZGxlRG93bmxvYWRTVkd9IGRvd25sb2FkPVwiZXhwb3J0X3N2Zy5zdmdcIj5Eb3dubG9hZCBiYXIgY2hhcnQgYXMgU1ZHIGRyYXdpbmc8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlT3Zlcj17dGhpcy5oYW5kbGVEb3dubG9hZFNWR0hlbHB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlT3V0PXt0aGlzLmhhbmRsZUNsb3NlRG93bmxvYWRTVkdIZWxwfT48L2E+Jm5ic3A7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIG9uTW91c2VPdmVyPXt0aGlzLnNob3dEb3dubG9hZFNWR0hlbHB9Pls/XTwvYT48L2xpPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJkb3dubG9hZC1jc3ZcIj48YSBvbkNsaWNrPXt0aGlzLmhhbmRsZURvd25sb2FkQ1NWfSB0YXJnZXQ9XCJfYmxhbmtcIj5Eb3dubG9hZCBkYXRhIGFzIENTViBmaWxlPC9hPiZuYnNwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBvbk1vdXNlT3Zlcj17dGhpcy5zaG93RG93bmxvYWRDU1ZIZWxwfT5bP108L2E+PC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgIGxldCBtb2RhbFN0eWxlID0ge1xuICAgICAgICAgICAgd2lkdGg6ICc4MCUnLFxuICAgICAgICAgICAgbWF4V2lkdGg6ICcxMjAwcHgnLFxuICAgICAgICAgICAgc2Nyb2xsWDogJ2F1dG8nLFxuICAgICAgICAgICAgb3ZlcmZsb3c6ICdzY3JvbGwnLFxuICAgICAgICAgICAgbWF4SGVpZ2h0OiAnMTAwJSdcbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgYXJlYV9uYW1lID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUubm9kZVBpY2tlZCkge1xuICAgICAgICAgICAgYXJlYV9uYW1lID0gdG9UaXRsZUNhc2UodGhpcy5zdGF0ZS5ub2RlUGlja2VkLmZ1bGxuYW1lKSArICcgKCcgKyB0aGlzLnN0YXRlLm5vZGVQaWNrZWQuYWJicmV2ICsgJyknO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkb3dubG9hZF9zdmcgPSAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxpbmstYnV0dG9uXCI+PGEgb25DbGljaz17dGhpcy5oYW5kbGVEb3dubG9hZEdyYXBofSBkb3dubG9hZD1cImV4cG9ydF9mbGF0bWFwX2dyYXBoLnN2Z1wiPkRvd25sb2FkIHRoZSBncmFwaCBhcyBTVkc8L2E+PC9kaXY+XG4gICAgICAgICk7XG4gICAgICAgIGxldCBjb250ZW50ID0gbnVsbDtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLmFqYXhEb25lKSB7XG4gICAgICAgICAgICBjb250ZW50ID0gKFxuICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cIm1haW5cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwiZ3JhcGgtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRpbmdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nLWltYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIvc3RhdGljL2ltYWdlcy9sb2FkaW5nLnN2Z1wiIHdpZHRoPVwiMTIwXCIgaGVpZ2h0PVwiMTIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibG9hZGluZy1pbWFnZS1jYXB0aW9uXCI+TG9hZGluZyBhZGRpdGlvbmFsIGRhdGEsIHBsZWFzZSBiZSBwYXRpZW50Li4uPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJpbmZvLXBhbmVsXCI+XG4gICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHNvdXJjZXMgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUubm9kZVBpY2tlZCkge1xuICAgICAgICAgICAgICAgIHNvdXJjZXMgPSAnLCAnICsgdGhpcy5zdHJlbmd0aF9hcmVhX2NvdW50ICsgJyBzb3VyY2VzLic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZW50ID0gKFxuICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cIm1haW5cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gaWQ9XCJncmFwaC1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uIGlkPVwiZDNfY29udHJvbFwiIGNsYXNzTmFtZT1cImQzLWNvbnRyb2xcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRyb2wtcm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udHJvbC1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVN3aXRjaFRvTWF0cml4Vmlld30gLz48bGFiZWw+TWF0cml4IFZpZXc8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIGNoZWNrZWQgLz48bGFiZWw+R3JhcGggVmlldzwvbGFiZWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gaWQ9XCJkM1wiIGNsYXNzTmFtZT1cImQzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Q29sb3JCYXIgc3R5bGU9XCJncmFwaFwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gaWQ9XCJpbmZvLXBhbmVsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImluamVjdGlvbi1pbmZvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPE1haW5GbG5lIGZsbmU9e3RoaXMuZmxuZV9wZXJfYXJlYX0gYXJlYXM9e3RoaXMuX2FyZWFzfSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbmplY3Rpb25MaXN0IGZsbmU9e3RoaXMuc3RhdGUuZmxuZV9wZXJfaW5qZWN0aW9ufSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPE1vZGFsIHJlZj17bW9kYWwgPT4gdGhpcy5tb2RhbCA9IG1vZGFsfSBtb2RhbFN0eWxlPXttb2RhbFN0eWxlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIFRlc3QgbW9kYWxcbiAgICAgICAgICAgICAgICAgICAgPC9Nb2RhbD5cbiAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH1cblxufTtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGpzL2NvbXBvbmVudHMvTWFpblNlY3Rpb24yLnJlYWN0LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQVNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7Ozs7O0FBdEJBOzs7Ozs7Ozs7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRkE7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXJEQTtBQXNEQTtBQUNBOzs7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBS0E7QUFMQTtBQU9BO0FBQUE7QUFRQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBTUE7QUFDQTtBQVBBO0FBUUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQVVBO0FBUUE7QUFPQTtBQUFBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsQkE7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQVNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTs7O0FBRUE7OztBQUVBOzs7QUFFQTtBQUVBOzs7Ozs7QUFHQTtBQUFBO0FBQ0E7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBcUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBSEE7QUFRQTtBQVRBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBREE7QUFEQTtBQVFBO0FBRUE7QUFYQTtBQWFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFwQkE7QUF5QkE7QUFDQTtBQUNBOzs7O0FBdG5CQTtBQUNBO0FBREE7QUF3bkJBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 228:
/* unknown exports provided */
/* all exports used */
/*!**********************************************!*\
  !*** ./js/components/MetadataModal.react.js ***!
  \**********************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _classnames = __webpack_require__(/*! classnames */ 13);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _numberformat = __webpack_require__(/*! ../lib/numberformat */ 31);\n\nvar _numberformat2 = _interopRequireDefault(_numberformat);\n\nvar _d = __webpack_require__(/*! d3 */ 12);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _Slider = __webpack_require__(/*! ./Slider.react */ 41);\n\nvar _Slider2 = _interopRequireDefault(_Slider);\n\nvar _moment = __webpack_require__(/*! moment */ 0);\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _utils = __webpack_require__(/*! ../lib/utils */ 16);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar MetadataModal = function (_Component) {\n    _inherits(MetadataModal, _Component);\n\n    function MetadataModal(props, context) {\n        _classCallCheck(this, MetadataModal);\n\n        var _this = _possibleConstructorReturn(this, (MetadataModal.__proto__ || Object.getPrototypeOf(MetadataModal)).call(this, props, context));\n\n        _lodash2.default.bindAll(_this, 'handleChange', 'handleEnhanceBorder', 'handleSet3D', 'handleShowCoordTip', 'handleHideCoordTip', 'handle3DEnter', 'handle3DLeave', 'handleShowFlatmapTip', 'handleHideFlatmapTip', 'handleShow3DTip', 'handleHide3DTip', 'handleShowCrossSectionTip', 'handleHideCrossSectionTip', 'handleUpdateCrossSectionTip', 'handle3DReset');\n        _this.state = {\n            p3d: _AppStore2.default.getPseudo3D(),\n            top_lowres: false,\n            bottom_lowres: false,\n            top_done: false,\n            bottom_done: false,\n            showTip: false,\n            showCrossSectionTip: false,\n            showReset: false\n        };\n        return _this;\n    }\n\n    _createClass(MetadataModal, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _AppStore2.default.addChangeListener(this.handleChange);\n            var this_ = this;\n\n            var top_lowres = new Image();\n            top_lowres.onload = function () {\n                this_.setState({\n                    top_lowres: true\n                });\n                var top_img = new Image();\n                top_img.onload = function () {\n                    this_.setState({\n                        top_done: true\n                    });\n                };\n                top_img.src = '/static/data/individual_injections_3d_visualization/' + this_.props.injection_name + '_website_view_midthickness_opaque.jpg';\n            };\n            top_lowres.src = '/static/data/individual_injections_3d_visualization/lowres/' + this.props.injection_name + '_website_view_midthickness_opaque.jpg';\n\n            var bottom_lowres = new Image();\n            bottom_lowres.onload = function () {\n                this_.setState({\n                    bottom_lowres: true\n                });\n                var bottom_img = new Image();\n                bottom_img.onload = function () {\n                    this_.setState({\n                        bottom_done: true\n                    });\n                };\n                bottom_img.src = '/static/data/individual_injections_3d_visualization/' + this_.props.injection_name + '_website_view_midthickness_transparent.jpg';\n            };\n            bottom_lowres.src = '/static/data/individual_injections_3d_visualization/lowres/' + this.props.injection_name + '_website_view_midthickness_transparent.jpg';\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _AppStore2.default.removeChangeListener(this.handleChange);\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange() {\n            this.setState({\n                p3d: _AppStore2.default.getPseudo3D()\n            });\n        }\n    }, {\n        key: 'handleEnhanceBorder',\n        value: function handleEnhanceBorder(e) {\n            var checked = e.target.checked;\n            if (checked) {\n                _Actions2.default.set3DIndex('borderAlpha', 100);\n            } else {\n                _Actions2.default.set3DIndex('borderAlpha', 0);\n            }\n        }\n    }, {\n        key: 'handleSet3D',\n        value: function handleSet3D(e) {\n            var dest = $(e.target).data('dest');\n            switch (dest) {\n                case 'dorsal':\n                    _Actions2.default.set3DIndex('y', 0);\n                    break;\n                case 'ventral':\n                    _Actions2.default.set3DIndex('y', 6);\n                    break;\n                case 'left':\n                    _Actions2.default.set3DIndex('x', -12);\n                    break;\n                case 'right':\n                    _Actions2.default.set3DIndex('x', 12);\n                    break;\n                case 'transparent':\n                    _Actions2.default.set3DIndex('alpha', 100);\n                    break;\n                case 'opaque':\n                    _Actions2.default.set3DIndex('alpha', 0);\n                    break;\n            }\n        }\n    }, {\n        key: 'handleShowCoordTip',\n        value: function handleShowCoordTip() {\n            //this.setState({showTip: true});\n        }\n    }, {\n        key: 'handleHideCoordTip',\n        value: function handleHideCoordTip() {\n            //this.setState({showTip: false});\n        }\n    }, {\n        key: 'handleShowCrossSectionTip',\n        value: function handleShowCrossSectionTip() {\n            this.setState({ showCrossSectionTip: true });\n        }\n    }, {\n        key: 'handleHideCrossSectionTip',\n        value: function handleHideCrossSectionTip() {\n            this.setState({ showCrossSectionTip: false });\n        }\n    }, {\n        key: 'handleUpdateCrossSectionTip',\n        value: function handleUpdateCrossSectionTip(e) {\n            if (this.state.showCrossSectionTip) {\n                var tooltip = d3.select(this.tt);\n                var x_ = e.clientX + 0;\n                var y_ = e.clientY - 80;\n                /*\n                let offset = getOffset($('.injection-detail-container')[0]);\n                x_ -= offset.left;\n                y_ -= offset.top;\n                console.log('offset', offset);\n                console.log('x, y', x_, y_);\n                    var node = $('.injection-detail-container')[0];\n                    var curtop = 0;\n                    var curtopscroll = 0;\n                    if (node.offsetParent) {\n                        do {\n                            curtop += node.offsetTop;\n                            curtopscroll += node.offsetParent ? node.offsetParent.scrollTop : 0;\n                        } while (node = node.offsetParent);\n                         y_ -= (curtop - curtopscroll);\n                        console.log('offset i get', (curtop - curtopscroll));\n                        y_ += 400;\n                    }\n                */\n                var bbox = $('.injection-detail-container')[0].getBoundingClientRect();\n                x_ -= bbox.left;\n                y_ -= bbox.top;\n                tooltip.style(\"left\", x_ + \"px\").style(\"top\", y_ + \"px\");\n            }\n        }\n    }, {\n        key: 'handle3DEnter',\n        value: function handle3DEnter() {\n            this.setState({ showReset: true });\n        }\n    }, {\n        key: 'handle3DLeave',\n        value: function handle3DLeave() {\n            this.setState({ showReset: false });\n        }\n    }, {\n        key: 'handle3DReset',\n        value: function handle3DReset() {\n            var default_ = _AppStore2.default.getDefault3D();\n            _Actions2.default.set3DIndex('x', default_.x);\n            _Actions2.default.set3DIndex('y', default_.y);\n            _Actions2.default.set3DIndex('alpha', default_.alpha);\n        }\n    }, {\n        key: 'handleShowFlatmapTip',\n        value: function handleShowFlatmapTip() {\n            this.setState({ showFlatmapTip: true });\n        }\n    }, {\n        key: 'handleHideFlatmapTip',\n        value: function handleHideFlatmapTip() {\n            this.setState({ showFlatmapTip: false });\n        }\n    }, {\n        key: 'handleShow3DTip',\n        value: function handleShow3DTip() {\n            this.setState({ show3DTip: true });\n        }\n    }, {\n        key: 'handleHide3DTip',\n        value: function handleHide3DTip() {\n            this.setState({ show3DTip: false });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var loading = void 0;\n            var injection_name = this.props.injection.display_name ? this.props.injection.display_name : this.props.injection_name;\n            loading = _react2.default.createElement(\n                'div',\n                { className: 'preloading' },\n                'Loading Metadata for ',\n                injection_name\n            );\n            var area = void 0;\n            var nodePicked = _AppStore2.default.getNodePicked();\n            var title = _react2.default.createElement(\n                'div',\n                { className: 'main-title' },\n                injection_name,\n                ',  Injection into the ',\n                _react2.default.createElement(\n                    'span',\n                    { className: 'area-fullname' },\n                    nodePicked.fullname\n                ),\n                ', ',\n                nodePicked.abbrev\n            );\n            var jump_href = 'http://www.marmosetbrain.org/goto/' + this.props.case_['case'] + '/' + this.props.injection.section + '/' + this.props.injection.section_x + '/' + this.props.injection.section_y + '/3';\n\n            //<a className={classNames('jump', this.props.meta.tracer)} href={jump_href} target=\"_blank\"><span className={classNames('icon-jump', this.props.meta.tracer)}/></a>\n            var sub_title = _react2.default.createElement(\n                'div',\n                { className: 'sub-title' },\n                _react2.default.createElement(\n                    'span',\n                    { className: 'coordinates', onMouseEnter: this.handleShowCoordTip, onMouseLeave: this.handleHideCoordTip },\n                    (0, _utils.parseML)(this.props.meta.l),\n                    ' ',\n                    _react2.default.createElement('br', null),\n                    (0, _utils.parseAP)(this.props.meta.a),\n                    ' ',\n                    _react2.default.createElement('br', null),\n                    (0, _utils.parseDV)(this.props.meta.h)\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _classnames2.default)('tooltip', { hidden: !this.state.showTip }) },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'tip-title' },\n                        'Stereotaxic coordinates (mm)'\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'tip-item' },\n                        'ML: Mediolateral, lateral to the midsagittal plane'\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'tip-item' },\n                        'AP: Rostrocaudal,',\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'tip-subitem' },\n                            'Positive: Caudal to interaural line',\n                            _react2.default.createElement('br', null),\n                            'Negative: Rostral to interaural line'\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'tip-item' },\n                        'DV: Dorsoventral, Dorsal to the interaural line'\n                    )\n                )\n            );\n            var sex = void 0;\n            switch (this.props.case_.sex) {\n                case 'M':\n                    sex = 'Male';\n                    break;\n                case 'F':\n                    sex = 'Female';\n                    break;\n                default:\n                    sex = 'Unknown';\n                    break;\n            }\n            var dob = (0, _utils.humanReadableDate)(this.props.case_.date_of_birth);\n            var injection_date = (0, _utils.humanReadableDate)(this.props.case_.injection_date);\n            var age = (0, _utils.humanReadableDiffInMonth)(this.props.case_.injection_date, this.props.case_.date_of_birth);\n            var perfusion_date = (0, _utils.humanReadableDate)(this.props.case_.perfusion_date);\n            var survival = void 0;\n            if (this.props.case_.survival_days) {\n                survival = '' + this.props.case_.survival_days + ' day' + (this.props.case_.survival_days > 1 ? 's' : '');\n            }\n            //<td>A {this.props.injection.a} L: {this.props.injection.l} H: {this.props.injection.h}</td>\n            var case_memo = this.props.case_.memo;\n            if (/^\\s*$/.test(case_memo)) {\n                case_memo = 'No case specific memo provided';\n            }\n            var injection_memo = this.props.meta.memo;\n            if (/^\\s*$/.test(injection_memo)) {\n                injection_memo = 'No injection specific memo provided';\n            }\n            //<span className=\"cursor-pointer\" onMouseEnter={this.handleShowFlatmapTip} onMouseLeave={this.handleHideFlatmapTip}>[?]</span>\n            //<span className=\"\" onMouseEnter={this.handleShow3DTip} onMouseLeave={this.handleHide3DTip}>[?]</span>\n            return _react2.default.createElement(\n                'div',\n                { className: 'modal-content' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'modal-title' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'title-box' },\n                        title\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'case-detail-container' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'caption' },\n                        'Case details'\n                    ),\n                    _react2.default.createElement(\n                        'table',\n                        { className: 'case-detail' },\n                        _react2.default.createElement(\n                            'tbody',\n                            null,\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement(\n                                    'th',\n                                    null,\n                                    'Case ID:'\n                                ),\n                                _react2.default.createElement(\n                                    'td',\n                                    null,\n                                    this.props.case_id\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement(\n                                    'th',\n                                    null,\n                                    'Sex:'\n                                ),\n                                _react2.default.createElement(\n                                    'td',\n                                    null,\n                                    sex\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement(\n                                    'th',\n                                    null,\n                                    'Date of birth:'\n                                ),\n                                _react2.default.createElement(\n                                    'td',\n                                    null,\n                                    dob\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement(\n                                    'th',\n                                    null,\n                                    'Injection date:'\n                                ),\n                                _react2.default.createElement(\n                                    'td',\n                                    null,\n                                    injection_date,\n                                    ' \\xA0\\xA0 ',\n                                    age ? '(' + age + ' old)' : ''\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement(\n                                    'th',\n                                    null,\n                                    'Perfusion date:'\n                                ),\n                                _react2.default.createElement(\n                                    'td',\n                                    null,\n                                    perfusion_date,\n                                    ' \\xA0\\xA0',\n                                    survival ? '(' + survival + ' survival time)' : ''\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement(\n                                    'th',\n                                    { colSpan: '2', className: 'case-memo' },\n                                    'Memo:'\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement(\n                                    'td',\n                                    { colSpan: '2' },\n                                    case_memo\n                                )\n                            )\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'note' },\n                        'Hit [',\n                        _react2.default.createElement(\n                            'strong',\n                            null,\n                            'Esc'\n                        ),\n                        '] to close the window.',\n                        _react2.default.createElement('br', null)\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'injection-detail-container' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'caption' },\n                        'Injection details'\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: (0, _classnames2.default)('tooltip', 'p3d-tip', { hidden: !this.state.show3DTip }) },\n                        'Individual cells plotted against the mid-thickness cortical surface.',\n                        _react2.default.createElement('br', null),\n                        'The tip of the cone denotes the center of mass of the injection.'\n                    ),\n                    _react2.default.createElement(\n                        'table',\n                        { className: 'injection-detail' },\n                        _react2.default.createElement(\n                            'tbody',\n                            null,\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement(\n                                    'th',\n                                    null,\n                                    'Tracer:'\n                                ),\n                                _react2.default.createElement(\n                                    'td',\n                                    null,\n                                    this.props.meta.tracer,\n                                    ' (',\n                                    (0, _utils.expandTracerID)(this.props.meta.tracer),\n                                    ')'\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement('td', null),\n                                _react2.default.createElement('td', null)\n                            ),\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement(\n                                    'th',\n                                    null,\n                                    'Injection hemisphere:'\n                                ),\n                                _react2.default.createElement(\n                                    'td',\n                                    null,\n                                    this.props.meta.hemisphere == 'R' ? 'Right hemisphere' : 'Left hemisphere'\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement(\n                                    'th',\n                                    null,\n                                    'Area:'\n                                ),\n                                _react2.default.createElement(\n                                    'td',\n                                    null,\n                                    nodePicked.fullname,\n                                    ', ',\n                                    this.props.meta.region\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement(\n                                    'td',\n                                    { colSpan: '2', className: 'cross-section' },\n                                    _react2.default.createElement(\n                                        'div',\n                                        { className: 'cross-section-caption' },\n                                        'Injection site plotted against the reference template'\n                                    ),\n                                    _react2.default.createElement(\n                                        'div',\n                                        { className: 'cross-section-sub-caption' },\n                                        _react2.default.createElement(\n                                            'div',\n                                            { className: 'coronal label' },\n                                            'Coronal'\n                                        ),\n                                        _react2.default.createElement(\n                                            'div',\n                                            { className: 'sagittal label' },\n                                            'Sagittal'\n                                        ),\n                                        _react2.default.createElement(\n                                            'div',\n                                            { className: 'axial label' },\n                                            'Horizontal'\n                                        )\n                                    ),\n                                    _react2.default.createElement(\n                                        'div',\n                                        { className: 'cross-section-image-container' },\n                                        _react2.default.createElement(\n                                            'a',\n                                            { href: jump_href, target: '_blank' },\n                                            _react2.default.createElement('img', { src: '/static/data/cross_sections/cross_section_' + this.props.injection_name + '.png?_=' + Date.now(),\n                                                onMouseEnter: this.handleShowCrossSectionTip,\n                                                onMouseLeave: this.handleHideCrossSectionTip,\n                                                onMouseMove: this.handleUpdateCrossSectionTip\n                                            })\n                                        )\n                                    ),\n                                    _react2.default.createElement(\n                                        'div',\n                                        { className: (0, _classnames2.default)('tooltip', { hidden: !this.state.showCrossSectionTip }), ref: function ref(tt) {\n                                                _this2.tt = tt;\n                                            } },\n                                        _react2.default.createElement(\n                                            'div',\n                                            { className: 'tip-title' },\n                                            'Click to view the injection site in the high-resolution viewer'\n                                        )\n                                    )\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement(\n                                    'th',\n                                    null,\n                                    'Injection coordinates:'\n                                ),\n                                _react2.default.createElement(\n                                    'td',\n                                    null,\n                                    sub_title\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement(\n                                    'th',\n                                    { colSpan: '2', className: 'injection-memo' },\n                                    'Comments:'\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'tr',\n                                null,\n                                _react2.default.createElement(\n                                    'td',\n                                    { colSpan: '2' },\n                                    injection_memo\n                                )\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return MetadataModal;\n}(_react.Component);\n\nexports.default = MetadataModal;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2pzL2NvbXBvbmVudHMvTWV0YWRhdGFNb2RhbC5yZWFjdC5qcz81MWNlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG5pbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMvQWN0aW9ucyc7XG5pbXBvcnQgQXBwU3RvcmUgZnJvbSAnLi4vc3RvcmVzL0FwcFN0b3JlJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBudW1iZXJGb3JtYXQgZnJvbSAnLi4vbGliL251bWJlcmZvcm1hdCc7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgU2xpZGVyIGZyb20gJy4vU2xpZGVyLnJlYWN0JztcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCB7ZXhwYW5kVHJhY2VySUQsIGh1bWFuUmVhZGFibGVEYXRlLCBodW1hblJlYWRhYmxlRGlmZkluTW9udGgsIHBhcnNlQVAsIHBhcnNlTUwsIHBhcnNlRFYsIGdldE9mZnNldH0gZnJvbSAnLi4vbGliL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWV0YWRhdGFNb2RhbCBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMsIGNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIocHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBfLmJpbmRBbGwodGhpcywgJ2hhbmRsZUNoYW5nZScsICdoYW5kbGVFbmhhbmNlQm9yZGVyJyxcbiAgICAgICAgICAgICAgICAgICdoYW5kbGVTZXQzRCcsICdoYW5kbGVTaG93Q29vcmRUaXAnLCAnaGFuZGxlSGlkZUNvb3JkVGlwJyxcbiAgICAgICAgICAgICAgICAgICdoYW5kbGUzREVudGVyJywgJ2hhbmRsZTNETGVhdmUnLFxuICAgICAgICAgICAgICAgICAgJ2hhbmRsZVNob3dGbGF0bWFwVGlwJywgJ2hhbmRsZUhpZGVGbGF0bWFwVGlwJyxcbiAgICAgICAgICAgICAgICAgICdoYW5kbGVTaG93M0RUaXAnLCAnaGFuZGxlSGlkZTNEVGlwJyxcbiAgICAgICAgICAgICAgICAgICdoYW5kbGVTaG93Q3Jvc3NTZWN0aW9uVGlwJywgJ2hhbmRsZUhpZGVDcm9zc1NlY3Rpb25UaXAnLCAnaGFuZGxlVXBkYXRlQ3Jvc3NTZWN0aW9uVGlwJyxcbiAgICAgICAgICAgICAgICAgICdoYW5kbGUzRFJlc2V0J1xuICAgICAgICAgICAgICAgICApO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgcDNkOiBBcHBTdG9yZS5nZXRQc2V1ZG8zRCgpLFxuICAgICAgICAgICAgdG9wX2xvd3JlczogZmFsc2UsXG4gICAgICAgICAgICBib3R0b21fbG93cmVzOiBmYWxzZSxcbiAgICAgICAgICAgIHRvcF9kb25lOiBmYWxzZSxcbiAgICAgICAgICAgIGJvdHRvbV9kb25lOiBmYWxzZSxcbiAgICAgICAgICAgIHNob3dUaXA6IGZhbHNlLFxuICAgICAgICAgICAgc2hvd0Nyb3NzU2VjdGlvblRpcDogZmFsc2UsXG4gICAgICAgICAgICBzaG93UmVzZXQ6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBBcHBTdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLmhhbmRsZUNoYW5nZSk7XG4gICAgICAgIGxldCB0aGlzXyA9IHRoaXM7XG5cbiAgICAgICAgbGV0IHRvcF9sb3dyZXMgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgdG9wX2xvd3Jlcy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXNfLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICB0b3BfbG93cmVzOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCB0b3BfaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICB0b3BfaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXNfLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgdG9wX2RvbmU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0b3BfaW1nLnNyYyA9ICcvc3RhdGljL2RhdGEvaW5kaXZpZHVhbF9pbmplY3Rpb25zXzNkX3Zpc3VhbGl6YXRpb24vJyArIHRoaXNfLnByb3BzLmluamVjdGlvbl9uYW1lICsgJ193ZWJzaXRlX3ZpZXdfbWlkdGhpY2tuZXNzX29wYXF1ZS5qcGcnO1xuICAgICAgICB9XG4gICAgICAgIHRvcF9sb3dyZXMuc3JjID0gJy9zdGF0aWMvZGF0YS9pbmRpdmlkdWFsX2luamVjdGlvbnNfM2RfdmlzdWFsaXphdGlvbi9sb3dyZXMvJyArIHRoaXMucHJvcHMuaW5qZWN0aW9uX25hbWUgKyAnX3dlYnNpdGVfdmlld19taWR0aGlja25lc3Nfb3BhcXVlLmpwZyc7XG5cbiAgICAgICAgbGV0IGJvdHRvbV9sb3dyZXMgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgYm90dG9tX2xvd3Jlcy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXNfLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBib3R0b21fbG93cmVzOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBib3R0b21faW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBib3R0b21faW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXNfLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tX2RvbmU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBib3R0b21faW1nLnNyYyA9ICcvc3RhdGljL2RhdGEvaW5kaXZpZHVhbF9pbmplY3Rpb25zXzNkX3Zpc3VhbGl6YXRpb24vJyArIHRoaXNfLnByb3BzLmluamVjdGlvbl9uYW1lICsgJ193ZWJzaXRlX3ZpZXdfbWlkdGhpY2tuZXNzX3RyYW5zcGFyZW50LmpwZyc7XG4gICAgICAgIH1cbiAgICAgICAgYm90dG9tX2xvd3Jlcy5zcmMgPSAnL3N0YXRpYy9kYXRhL2luZGl2aWR1YWxfaW5qZWN0aW9uc18zZF92aXN1YWxpemF0aW9uL2xvd3Jlcy8nICsgdGhpcy5wcm9wcy5pbmplY3Rpb25fbmFtZSArICdfd2Vic2l0ZV92aWV3X21pZHRoaWNrbmVzc190cmFuc3BhcmVudC5qcGcnO1xuXG5cbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIEFwcFN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMuaGFuZGxlQ2hhbmdlKTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIHAzZDogQXBwU3RvcmUuZ2V0UHNldWRvM0QoKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaGFuZGxlRW5oYW5jZUJvcmRlcihlKSB7XG4gICAgICAgIGxldCBjaGVja2VkID0gZS50YXJnZXQuY2hlY2tlZDtcbiAgICAgICAgaWYgKGNoZWNrZWQpIHtcbiAgICAgICAgICAgIEFjdGlvbnMuc2V0M0RJbmRleCgnYm9yZGVyQWxwaGEnLCAxMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQWN0aW9ucy5zZXQzREluZGV4KCdib3JkZXJBbHBoYScsIDApO1xuICAgICAgICB9XG4gICAgfSBcbiAgICBoYW5kbGVTZXQzRChlKSB7XG4gICAgICAgIGxldCBkZXN0ID0gJChlLnRhcmdldCkuZGF0YSgnZGVzdCcpO1xuICAgICAgICBzd2l0Y2ggKGRlc3QpIHtcbiAgICAgICAgICAgIGNhc2UgJ2RvcnNhbCc6XG4gICAgICAgICAgICAgICAgQWN0aW9ucy5zZXQzREluZGV4KCd5JywgMCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd2ZW50cmFsJzpcbiAgICAgICAgICAgICAgICBBY3Rpb25zLnNldDNESW5kZXgoJ3knLCA2KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2xlZnQnOlxuICAgICAgICAgICAgICAgIEFjdGlvbnMuc2V0M0RJbmRleCgneCcsIC0xMik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgQWN0aW9ucy5zZXQzREluZGV4KCd4JywgMTIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndHJhbnNwYXJlbnQnOlxuICAgICAgICAgICAgICAgIEFjdGlvbnMuc2V0M0RJbmRleCgnYWxwaGEnLCAxMDApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnb3BhcXVlJzpcbiAgICAgICAgICAgICAgICBBY3Rpb25zLnNldDNESW5kZXgoJ2FscGhhJywgMCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgIH1cbiAgICBoYW5kbGVTaG93Q29vcmRUaXAoKSB7XG4gICAgICAgIC8vdGhpcy5zZXRTdGF0ZSh7c2hvd1RpcDogdHJ1ZX0pO1xuICAgIH1cbiAgICBoYW5kbGVIaWRlQ29vcmRUaXAoKSB7XG4gICAgICAgIC8vdGhpcy5zZXRTdGF0ZSh7c2hvd1RpcDogZmFsc2V9KTtcbiAgICB9XG4gICAgaGFuZGxlU2hvd0Nyb3NzU2VjdGlvblRpcCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2hvd0Nyb3NzU2VjdGlvblRpcDogdHJ1ZX0pO1xuICAgIH1cbiAgICBoYW5kbGVIaWRlQ3Jvc3NTZWN0aW9uVGlwKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93Q3Jvc3NTZWN0aW9uVGlwOiBmYWxzZX0pO1xuICAgIH1cbiAgICBoYW5kbGVVcGRhdGVDcm9zc1NlY3Rpb25UaXAoZSkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zaG93Q3Jvc3NTZWN0aW9uVGlwKSB7XG4gICAgICAgICAgICBsZXQgdG9vbHRpcCA9IGQzLnNlbGVjdCh0aGlzLnR0KTtcbiAgICAgICAgICAgIGxldCB4XyA9IGUuY2xpZW50WCArIDA7XG4gICAgICAgICAgICBsZXQgeV8gPSBlLmNsaWVudFkgLSA4MDtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICBsZXQgb2Zmc2V0ID0gZ2V0T2Zmc2V0KCQoJy5pbmplY3Rpb24tZGV0YWlsLWNvbnRhaW5lcicpWzBdKTtcbiAgICAgICAgICAgIHhfIC09IG9mZnNldC5sZWZ0O1xuICAgICAgICAgICAgeV8gLT0gb2Zmc2V0LnRvcDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvZmZzZXQnLCBvZmZzZXQpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3gsIHknLCB4XywgeV8pO1xuICAgICAgICAgICAgICAgIHZhciBub2RlID0gJCgnLmluamVjdGlvbi1kZXRhaWwtY29udGFpbmVyJylbMF07XG4gICAgICAgICAgICAgICAgdmFyIGN1cnRvcCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnRvcHNjcm9sbCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUub2Zmc2V0UGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnRvcCArPSBub2RlLm9mZnNldFRvcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnRvcHNjcm9sbCArPSBub2RlLm9mZnNldFBhcmVudCA/IG5vZGUub2Zmc2V0UGFyZW50LnNjcm9sbFRvcCA6IDA7XG4gICAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKG5vZGUgPSBub2RlLm9mZnNldFBhcmVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgeV8gLT0gKGN1cnRvcCAtIGN1cnRvcHNjcm9sbCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvZmZzZXQgaSBnZXQnLCAoY3VydG9wIC0gY3VydG9wc2Nyb2xsKSk7XG4gICAgICAgICAgICAgICAgICAgIHlfICs9IDQwMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgbGV0IGJib3ggPSAkKCcuaW5qZWN0aW9uLWRldGFpbC1jb250YWluZXInKVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHhfIC09IGJib3gubGVmdDtcbiAgICAgICAgICAgIHlfIC09IGJib3gudG9wO1xuICAgICAgICAgICAgdG9vbHRpcFxuICAgICAgICAgICAgICAgIC5zdHlsZShcImxlZnRcIiwgKHhfKSArIFwicHhcIilcbiAgICAgICAgICAgICAgICAuc3R5bGUoXCJ0b3BcIiwgKHlfKSArIFwicHhcIik7ICAgIFxuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZTNERW50ZXIoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dSZXNldDogdHJ1ZX0pO1xuICAgIH1cbiAgICBoYW5kbGUzRExlYXZlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93UmVzZXQ6IGZhbHNlfSk7XG4gICAgfVxuICAgIGhhbmRsZTNEUmVzZXQoKSB7XG4gICAgICAgIGxldCBkZWZhdWx0XyA9IEFwcFN0b3JlLmdldERlZmF1bHQzRCgpO1xuICAgICAgICBBY3Rpb25zLnNldDNESW5kZXgoJ3gnLCBkZWZhdWx0Xy54KTtcbiAgICAgICAgQWN0aW9ucy5zZXQzREluZGV4KCd5JywgZGVmYXVsdF8ueSk7XG4gICAgICAgIEFjdGlvbnMuc2V0M0RJbmRleCgnYWxwaGEnLCBkZWZhdWx0Xy5hbHBoYSk7XG4gICAgfVxuICAgIGhhbmRsZVNob3dGbGF0bWFwVGlwKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93RmxhdG1hcFRpcDogdHJ1ZX0pO1xuICAgIH1cbiAgICBoYW5kbGVIaWRlRmxhdG1hcFRpcCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2hvd0ZsYXRtYXBUaXA6IGZhbHNlfSk7XG4gICAgfVxuICAgIGhhbmRsZVNob3czRFRpcCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2hvdzNEVGlwOiB0cnVlfSk7XG4gICAgfVxuICAgIGhhbmRsZUhpZGUzRFRpcCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2hvdzNEVGlwOiBmYWxzZX0pO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBsb2FkaW5nO1xuICAgICAgICBsZXQgaW5qZWN0aW9uX25hbWUgPSB0aGlzLnByb3BzLmluamVjdGlvbi5kaXNwbGF5X25hbWUgPyB0aGlzLnByb3BzLmluamVjdGlvbi5kaXNwbGF5X25hbWUgOiB0aGlzLnByb3BzLmluamVjdGlvbl9uYW1lO1xuICAgICAgICBsb2FkaW5nID0gKDxkaXYgY2xhc3NOYW1lPVwicHJlbG9hZGluZ1wiPkxvYWRpbmcgTWV0YWRhdGEgZm9yIHtpbmplY3Rpb25fbmFtZX08L2Rpdj4pO1xuICAgICAgICBsZXQgYXJlYTtcbiAgICAgICAgbGV0IG5vZGVQaWNrZWQgPSBBcHBTdG9yZS5nZXROb2RlUGlja2VkKCk7XG4gICAgICAgIGxldCB0aXRsZSA9ICg8ZGl2IGNsYXNzTmFtZT1cIm1haW4tdGl0bGVcIj57aW5qZWN0aW9uX25hbWV9LCAgSW5qZWN0aW9uIGludG8gdGhlIDxzcGFuIGNsYXNzTmFtZT1cImFyZWEtZnVsbG5hbWVcIj57bm9kZVBpY2tlZC5mdWxsbmFtZX08L3NwYW4+LCB7bm9kZVBpY2tlZC5hYmJyZXZ9PC9kaXY+KTtcbiAgICAgICAgbGV0IGp1bXBfaHJlZiA9ICdodHRwOi8vd3d3Lm1hcm1vc2V0YnJhaW4ub3JnL2dvdG8vJyArIHRoaXMucHJvcHMuY2FzZV9bJ2Nhc2UnXSArICcvJ1xuICAgICAgICAgICAgKyB0aGlzLnByb3BzLmluamVjdGlvbi5zZWN0aW9uICsgJy8nXG4gICAgICAgICAgICArIHRoaXMucHJvcHMuaW5qZWN0aW9uLnNlY3Rpb25feCArICcvJ1xuICAgICAgICAgICAgKyB0aGlzLnByb3BzLmluamVjdGlvbi5zZWN0aW9uX3lcbiAgICAgICAgICAgICsgJy8zJztcbiBcbiAgICAgICAgLy88YSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2p1bXAnLCB0aGlzLnByb3BzLm1ldGEudHJhY2VyKX0gaHJlZj17anVtcF9ocmVmfSB0YXJnZXQ9XCJfYmxhbmtcIj48c3BhbiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2ljb24tanVtcCcsIHRoaXMucHJvcHMubWV0YS50cmFjZXIpfS8+PC9hPlxuICAgICAgICBsZXQgc3ViX3RpdGxlID0gKDxkaXYgY2xhc3NOYW1lPVwic3ViLXRpdGxlXCI+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjb29yZGluYXRlc1wiIG9uTW91c2VFbnRlcj17dGhpcy5oYW5kbGVTaG93Q29vcmRUaXB9IG9uTW91c2VMZWF2ZT17dGhpcy5oYW5kbGVIaWRlQ29vcmRUaXB9PlxuICAgICAgICAgICAgICAgIHtwYXJzZU1MKHRoaXMucHJvcHMubWV0YS5sKX0gPGJyLz5cbiAgICAgICAgICAgICAgICB7cGFyc2VBUCh0aGlzLnByb3BzLm1ldGEuYSl9IDxici8+XG4gICAgICAgICAgICAgICAge3BhcnNlRFYodGhpcy5wcm9wcy5tZXRhLmgpfTwvc3Bhbj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCd0b29sdGlwJywge2hpZGRlbjogIXRoaXMuc3RhdGUuc2hvd1RpcH0pfT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRpcC10aXRsZVwiPlxuICAgICAgICAgICAgICAgICAgICBTdGVyZW90YXhpYyBjb29yZGluYXRlcyAobW0pXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0aXAtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICBNTDogTWVkaW9sYXRlcmFsLCBsYXRlcmFsIHRvIHRoZSBtaWRzYWdpdHRhbCBwbGFuZVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGlwLWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgQVA6IFJvc3Ryb2NhdWRhbCxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0aXAtc3ViaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgUG9zaXRpdmU6IENhdWRhbCB0byBpbnRlcmF1cmFsIGxpbmU8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgTmVnYXRpdmU6IFJvc3RyYWwgdG8gaW50ZXJhdXJhbCBsaW5lXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGlwLWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgRFY6IERvcnNvdmVudHJhbCwgRG9yc2FsIHRvIHRoZSBpbnRlcmF1cmFsIGxpbmVcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj4pO1xuICAgICAgICBsZXQgc2V4O1xuICAgICAgICBzd2l0Y2ggKHRoaXMucHJvcHMuY2FzZV8uc2V4KSB7XG4gICAgICAgICAgICBjYXNlICdNJzpcbiAgICAgICAgICAgICAgICBzZXggPSAnTWFsZSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdGJzpcbiAgICAgICAgICAgICAgICBzZXggPSAnRmVtYWxlJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgc2V4ID0gJ1Vua25vd24nO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkb2IgPSBodW1hblJlYWRhYmxlRGF0ZSh0aGlzLnByb3BzLmNhc2VfLmRhdGVfb2ZfYmlydGgpO1xuICAgICAgICBsZXQgaW5qZWN0aW9uX2RhdGUgPSBodW1hblJlYWRhYmxlRGF0ZSh0aGlzLnByb3BzLmNhc2VfLmluamVjdGlvbl9kYXRlKTtcbiAgICAgICAgbGV0IGFnZSA9IGh1bWFuUmVhZGFibGVEaWZmSW5Nb250aCh0aGlzLnByb3BzLmNhc2VfLmluamVjdGlvbl9kYXRlLCB0aGlzLnByb3BzLmNhc2VfLmRhdGVfb2ZfYmlydGgpO1xuICAgICAgICBsZXQgcGVyZnVzaW9uX2RhdGUgPSBodW1hblJlYWRhYmxlRGF0ZSh0aGlzLnByb3BzLmNhc2VfLnBlcmZ1c2lvbl9kYXRlKTtcbiAgICAgICAgbGV0IHN1cnZpdmFsO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5jYXNlXy5zdXJ2aXZhbF9kYXlzKSB7XG4gICAgICAgICAgICBzdXJ2aXZhbCA9ICcnICsgdGhpcy5wcm9wcy5jYXNlXy5zdXJ2aXZhbF9kYXlzICsgJyBkYXknICsgKHRoaXMucHJvcHMuY2FzZV8uc3Vydml2YWxfZGF5cyA+IDEgPyAncycgOiAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy88dGQ+QSB7dGhpcy5wcm9wcy5pbmplY3Rpb24uYX0gTDoge3RoaXMucHJvcHMuaW5qZWN0aW9uLmx9IEg6IHt0aGlzLnByb3BzLmluamVjdGlvbi5ofTwvdGQ+XG4gICAgICAgIGxldCBjYXNlX21lbW8gPSB0aGlzLnByb3BzLmNhc2VfLm1lbW87XG4gICAgICAgIGlmICgvXlxccyokLy50ZXN0KGNhc2VfbWVtbykpIHtcbiAgICAgICAgICAgIGNhc2VfbWVtbyA9ICdObyBjYXNlIHNwZWNpZmljIG1lbW8gcHJvdmlkZWQnO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpbmplY3Rpb25fbWVtbyA9IHRoaXMucHJvcHMubWV0YS5tZW1vO1xuICAgICAgICBpZiAoL15cXHMqJC8udGVzdChpbmplY3Rpb25fbWVtbykpIHtcbiAgICAgICAgICAgIGluamVjdGlvbl9tZW1vID0gJ05vIGluamVjdGlvbiBzcGVjaWZpYyBtZW1vIHByb3ZpZGVkJztcbiAgICAgICAgfVxuICAgICAgICAvLzxzcGFuIGNsYXNzTmFtZT1cImN1cnNvci1wb2ludGVyXCIgb25Nb3VzZUVudGVyPXt0aGlzLmhhbmRsZVNob3dGbGF0bWFwVGlwfSBvbk1vdXNlTGVhdmU9e3RoaXMuaGFuZGxlSGlkZUZsYXRtYXBUaXB9Pls/XTwvc3Bhbj5cbiAgICAgICAgLy88c3BhbiBjbGFzc05hbWU9XCJcIiBvbk1vdXNlRW50ZXI9e3RoaXMuaGFuZGxlU2hvdzNEVGlwfSBvbk1vdXNlTGVhdmU9e3RoaXMuaGFuZGxlSGlkZTNEVGlwfT5bP108L3NwYW4+XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vZGFsLWNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vZGFsLXRpdGxlXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGl0bGUtYm94XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dGl0bGV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FzZS1kZXRhaWwtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FwdGlvblwiPkNhc2UgZGV0YWlsczwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwiY2FzZS1kZXRhaWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5DYXNlIElEOjwvdGg+PHRkPnt0aGlzLnByb3BzLmNhc2VfaWR9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoPlNleDo8L3RoPjx0ZD57c2V4fTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5EYXRlIG9mIGJpcnRoOjwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57ZG9ifTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5JbmplY3Rpb24gZGF0ZTo8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e2luamVjdGlvbl9kYXRlfSAmbmJzcDsmbmJzcDsge2FnZSA/ICcoJyArIGFnZSArICcgb2xkKScgOiAnJ308L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+UGVyZnVzaW9uIGRhdGU6PC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3BlcmZ1c2lvbl9kYXRlfSAmbmJzcDsmbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdXJ2aXZhbCA/ICcoJyArIHN1cnZpdmFsICsgJyBzdXJ2aXZhbCB0aW1lKScgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGNvbFNwYW49XCIyXCIgY2xhc3NOYW1lPVwiY2FzZS1tZW1vXCI+TWVtbzo8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj1cIjJcIj57Y2FzZV9tZW1vfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibm90ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgSGl0IFs8c3Ryb25nPkVzYzwvc3Ryb25nPl0gdG8gY2xvc2UgdGhlIHdpbmRvdy48YnIvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImluamVjdGlvbi1kZXRhaWwtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FwdGlvblwiPkluamVjdGlvbiBkZXRhaWxzPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCd0b29sdGlwJywgJ3AzZC10aXAnLCB7aGlkZGVuOiAhdGhpcy5zdGF0ZS5zaG93M0RUaXB9KX0+XG4gICAgICAgICAgICAgICAgICAgICAgICBJbmRpdmlkdWFsIGNlbGxzIHBsb3R0ZWQgYWdhaW5zdCB0aGUgbWlkLXRoaWNrbmVzcyBjb3J0aWNhbCBzdXJmYWNlLjxici8+VGhlIHRpcCBvZiB0aGUgY29uZSBkZW5vdGVzIHRoZSBjZW50ZXIgb2YgbWFzcyBvZiB0aGUgaW5qZWN0aW9uLlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cImluamVjdGlvbi1kZXRhaWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aD5UcmFjZXI6PC90aD48dGQ+e3RoaXMucHJvcHMubWV0YS50cmFjZXJ9ICh7ZXhwYW5kVHJhY2VySUQodGhpcy5wcm9wcy5tZXRhLnRyYWNlcil9KTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD48L3RkPjx0ZD48L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+SW5qZWN0aW9uIGhlbWlzcGhlcmU6PC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnt0aGlzLnByb3BzLm1ldGEuaGVtaXNwaGVyZSA9PSAnUicgPyAnUmlnaHQgaGVtaXNwaGVyZScgOiAnTGVmdCBoZW1pc3BoZXJlJ308L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+QXJlYTo8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e25vZGVQaWNrZWQuZnVsbG5hbWV9LCB7dGhpcy5wcm9wcy5tZXRhLnJlZ2lvbn08L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj1cIjJcIiBjbGFzc05hbWU9XCJjcm9zcy1zZWN0aW9uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNyb3NzLXNlY3Rpb24tY2FwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluamVjdGlvbiBzaXRlIHBsb3R0ZWQgYWdhaW5zdCB0aGUgcmVmZXJlbmNlIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY3Jvc3Mtc2VjdGlvbi1zdWItY2FwdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29yb25hbCBsYWJlbFwiPkNvcm9uYWw8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNhZ2l0dGFsIGxhYmVsXCI+U2FnaXR0YWw8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImF4aWFsIGxhYmVsXCI+SG9yaXpvbnRhbDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNyb3NzLXNlY3Rpb24taW1hZ2UtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17anVtcF9ocmVmfSB0YXJnZXQ9XCJfYmxhbmtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9eycvc3RhdGljL2RhdGEvY3Jvc3Nfc2VjdGlvbnMvY3Jvc3Nfc2VjdGlvbl8nICsgdGhpcy5wcm9wcy5pbmplY3Rpb25fbmFtZSArICcucG5nP189JyArIERhdGUubm93KCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9e3RoaXMuaGFuZGxlU2hvd0Nyb3NzU2VjdGlvblRpcH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17dGhpcy5oYW5kbGVIaWRlQ3Jvc3NTZWN0aW9uVGlwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Nb3VzZU1vdmU9e3RoaXMuaGFuZGxlVXBkYXRlQ3Jvc3NTZWN0aW9uVGlwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPjwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3Rvb2x0aXAnLCB7aGlkZGVuOiAhdGhpcy5zdGF0ZS5zaG93Q3Jvc3NTZWN0aW9uVGlwfSl9IHJlZj17dHQgPT4ge3RoaXMudHQgPSB0dDsgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0aXAtdGl0bGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2xpY2sgdG8gdmlldyB0aGUgaW5qZWN0aW9uIHNpdGUgaW4gdGhlIGhpZ2gtcmVzb2x1dGlvbiB2aWV3ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGg+SW5qZWN0aW9uIGNvb3JkaW5hdGVzOjwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57c3ViX3RpdGxlfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aCBjb2xTcGFuPVwiMlwiIGNsYXNzTmFtZT1cImluamVjdGlvbi1tZW1vXCI+Q29tbWVudHM6PC90aD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkIGNvbFNwYW49XCIyXCI+e2luamVjdGlvbl9tZW1vfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj4pO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBqcy9jb21wb25lbnRzL01ldGFkYXRhTW9kYWwucmVhY3QuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBU0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7Ozs7QUFuQkE7Ozs7Ozs7OztBQW9CQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFWQTtBQW9CQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsQkE7QUFxQkE7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb0JBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFGQTtBQUVBO0FBQ0E7QUFIQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUZBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWRBO0FBTEE7QUF3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBREE7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBRkE7QUFGQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQXpCQTtBQURBO0FBK0JBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBQ0E7QUFEQTtBQWpDQTtBQXFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUhBO0FBS0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQURBO0FBREE7QUFRQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBakJBO0FBREE7QUF5QkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQS9DQTtBQURBO0FBTEE7QUEzQ0E7QUF1R0E7Ozs7OztBQXBWQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 229:
/* unknown exports provided */
/* all exports used */
/*!************************************!*\
  !*** ./js/components/SLN.react.js ***!
  \************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _InjectionList = __webpack_require__(/*! ./InjectionList.react */ 21);\n\nvar _InjectionList2 = _interopRequireDefault(_InjectionList);\n\nvar _ColorBar = __webpack_require__(/*! ./ColorBar.react */ 26);\n\nvar _ColorBar2 = _interopRequireDefault(_ColorBar);\n\nvar _MainFlne = __webpack_require__(/*! ./MainFlne.react */ 24);\n\nvar _MainFlne2 = _interopRequireDefault(_MainFlne);\n\nvar _ViewSwitch = __webpack_require__(/*! ./ViewSwitch.react */ 42);\n\nvar _ViewSwitch2 = _interopRequireDefault(_ViewSwitch);\n\nvar _modal = __webpack_require__(/*! ../lib/modal */ 22);\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nvar _AppDispatcher = __webpack_require__(/*! ../dispatcher/AppDispatcher */ 18);\n\nvar _AppDispatcher2 = _interopRequireDefault(_AppDispatcher);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _d = __webpack_require__(/*! d3 */ 12);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _classnames = __webpack_require__(/*! classnames */ 13);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _utils = __webpack_require__(/*! ../lib/utils */ 16);\n\nvar _connectivity = __webpack_require__(/*! ../lib/connectivity */ 30);\n\nvar _QuickLinks = __webpack_require__(/*! ./QuickLinks.react */ 40);\n\nvar _QuickLinks2 = _interopRequireDefault(_QuickLinks);\n\nvar _ToolTip = __webpack_require__(/*! ./ToolTip.react */ 50);\n\nvar _ToolTip2 = _interopRequireDefault(_ToolTip);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar SLN = function (_React$Component) {\n    _inherits(SLN, _React$Component);\n\n    function SLN(props, context) {\n        _classCallCheck(this, SLN);\n\n        var _this = _possibleConstructorReturn(this, (SLN.__proto__ || Object.getPrototypeOf(SLN)).call(this, props, context));\n\n        var that = _this;\n        _lodash2.default.bindAll(_this, 'handleChange', 'ajaxProgress', 'handleChangeOrder', 'showTooltip', 'hideTooltip', 'prepare', 'reorder', 'handleToggleMissingSources', 'handleModalHide', 'handleQLConnectivityTxt', 'handleToggleExpand', 'handleFocusViewer', 'handleBlurViewer', 'handleChangeDataOverlay');\n        _this.pendingAjax = [];\n        _this.dataOverlay = 'SLN';\n        var state = {\n            ajaxDone: false,\n            order: 'alphabetically',\n            controlExpanded: true,\n            focused: false\n        };\n        var focused = localStorage.getItem('focusedView');\n        if (focused) {\n            state.focused = true;\n            state.controlExpanded = false;\n            $('body').addClass('focused');\n        }\n        _this.state = state;\n        _this._matrix = _AppStore2.default.getConnectivity();\n        _this._areas = {\n            byAbbrev: {},\n            byIndex: {},\n            byId: {}\n        };\n        _this.ajaxLoad('injections_static.json', function (inj) {\n            _this.static_inj = inj;\n            _lodash2.default.each(_this.static_inj, function (inj, key) {\n                if (inj.display_name) {\n                    inj.name = inj.display_name + inj.tracer_id;\n                }\n                inj.name = key;\n                inj.collapse = true;\n            });\n            _Actions2.default.saveInjectionsStatic(inj);\n        });\n        _this.ajaxLoad('flne_gmeannz_areas.json', function (flne) {\n            _this.flne_per_area = flne;\n        });\n        _this.ajaxLoad('flne_gmeannz_injections.json', function (flne) {\n            _this.flne_per_injection = flne;\n            _this.setState({ flne_per_injection: flne });\n        });\n        _this.ajaxLoad('structures.json', function (struct) {\n            _Actions2.default.processAreas(struct);\n            _lodash2.default.each(struct, function (s) {\n                /* just make the structure name a little more pretty */\n                var txt = s.fullname;\n                txt = txt.charAt(0).toUpperCase() + txt.slice(1);\n                s.fullname = txt;\n                var cc = s.color;\n                s.hex_color = 'rgba(' + cc[0] + ',' + cc[1] + ',' + cc[2] + ', 1)';\n            });\n            _this.atlas_struct = struct;\n        });\n        _this.ajaxLoad('connectivity_1_0_1.json', function (conn) {\n            var node_lookup = {};\n            var nodes = [];\n            _lodash2.default.each(conn.nodes, function (node, i) {\n                node_lookup[i] = node;\n                nodes.push({\n                    nodeName: node,\n                    index: i\n                });\n                _this._areas.byIndex[i] = { abbrev: node, serial: i };\n                _this._areas.byAbbrev[node] = _this._areas.byIndex[i];\n            });\n            var links = [];\n            _lodash2.default.each(conn.links, function (link, i) {\n                var target = node_lookup[link[0]];\n                var source = node_lookup[link[1]];\n                links.push({\n                    target: link[0],\n                    source: link[1],\n                    value: link[2]\n                });\n            });\n            _this.nodes = nodes;\n            _this.links = links;\n        });\n        _this.ajaxLoad('connectivity_matrix_sorting_options.json', function (data) {\n            _this.sortOptions = data;\n        });\n        _this.svgMargin = { top: 80, right: 0, bottom: 10, left: 80 };\n        _this.ajaxLoad('marmoset_brain_connectivity_FLN.json', function (data) {\n            _this._connectivity_data = data;\n        });\n        return _this;\n    }\n\n    _createClass(SLN, [{\n        key: 'ajaxLoad',\n        value: function ajaxLoad(file, callback) {\n            var _this2 = this;\n\n            this.pendingAjax.push(file);\n            d3.json('/static/data/' + file, function (error, data) {\n                if (error) throw error;\n                callback(data);\n                _lodash2.default.pull(_this2.pendingAjax, file);\n                _this2.ajaxProgress();\n            });\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _AppStore2.default.addChangeListener(this.handleChange);\n            var that = this;\n            $(window).on('keyup', function (e) {\n                if (e.keyCode == 70 && e.shiftKey) {\n                    if (that.state.focused) {\n                        that.handleBlurViewer();\n                    } else {\n                        that.handleFocusViewer();\n                    }\n                }\n                if (e.keyCode == 71 && e.shiftKey) {\n                    window.location.href = \"/graph.html\";\n                }\n            });\n        }\n    }, {\n        key: 'showTooltip',\n        value: function showTooltip() {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                target_area = _ref.target_area,\n                source_area = _ref.source_area,\n                x = _ref.x,\n                y = _ref.y;\n\n            var that = this;\n            var tooltip = d3.select('div.tooltip');\n            tooltip.classed('matrix-view', true);\n            tooltip.style('opacity', 1);\n            var x_ = x,\n                y_ = y;\n            if (x_ === null || x_ === undefined) {\n                x_ = d3.event.pageX + 24;\n            }\n            if (y_ === null || y_ === undefined) {\n                y_ = d3.event.pageY - 20;\n            }\n            var txt = (0, _utils.getTargetAreaSummaryHTML)(target_area, source_area, that._matrix, this.dataOverlay);\n            tooltip.html(txt).style(\"left\", x_ + \"px\").style(\"top\", y_ + \"px\");\n        }\n    }, {\n        key: 'handleChangeDataOverlay',\n        value: function handleChangeDataOverlay(e) {\n            var value = e.target.value;\n            _Actions2.default.setDataOverlay(value);\n        }\n    }, {\n        key: 'hideTooltip',\n        value: function hideTooltip() {\n            var tooltip = d3.select('div.tooltip');\n            tooltip.style(\"opacity\", 0);\n        }\n    }, {\n        key: 'initialDraw',\n        value: function initialDraw() {\n            var that = this;\n            var size = this._matrix.size;\n            var areas = _AppStore2.default.getAreas();\n            /* width should be around 860px */\n            var grid_size = [13, 13];\n            var margin = that.svgMargin,\n                width = grid_size[0] * size.x,\n                height = grid_size[1] * size.y;\n            //let _left = Math.floor((860 - (width + margin.left)) / 2);\n            var _left = 20;\n            var colorFunction = (0, _utils.getBlueColorFunc)();\n\n            var x = d3.scaleBand().range([0, width]),\n                y = d3.scaleBand().range([0, height]);\n            // let c = d3.scaleOrdinal(d3.schemeCategory10).domain(d3.range(10));\n            //let left_ = margin.left + (860 - (13 * size.x + margin.left)) / 2;\n            var svg = d3.select(\"#d3\").append(\"svg\").attr(\"width\", width + margin.left + 2).attr(\"height\", height + margin.top + 2).attr('class', 'matrix-view').style(\"margin-left\", _left + \"px\");\n\n            (0, _utils.svgAddHatchLine)(svg);\n\n            that.svgTag = svg;\n\n            svg.append('rect').attr('width', width + 1).attr('height', height + 1).attr('x', margin.left).attr('y', margin.top).attr('class', 'main-graph-border');\n\n            svg = svg.append(\"g\").attr(\"transform\", \"translate(\" + (margin.left + 0) + \",\" + (margin.top + 0) + \")\");\n\n            var matrix = this._matrix,\n                nodes = this.nodes,\n                links = this.links;\n            //y.domain(this.orders.name);\n            //x.domain(this.targets);\n\n            svg.append('rect').attr(\"class\", \"background\").attr(\"x\", 1).attr(\"y\", 1).attr(\"width\", width - 1).attr(\"height\", height - 1);\n            var sources = _lodash2.default.keys(matrix.sources),\n                targets = _lodash2.default.keys(matrix.targets);\n\n            x.domain(targets);\n            y.domain(sources);\n            this.scaleX = x;\n            this.scaleY = y;\n            window.areas = areas;\n            var m = _lodash2.default.map(d3.range(size.y), function (v, i) {\n                return _lodash2.default.map(d3.range(size.x), function (v, j) {\n                    var src = areas.get(sources[i]);\n                    var tar = areas.get(targets[j]);\n                    var elem = matrix.get_sln(tar, src);\n                    if (elem.source === undefined) {\n                        console.log('missing elem is', elem, src, tar, sources[i], targets[j]);\n                    }\n                    if (elem !== undefined) {\n                        return elem;\n                    } else {\n                        return { source: src, target: tar, z: 0 };\n                    }\n                    return elem;\n                    /*\n                    if (elem.value !== undefined) {\n                        return {source: elem.source, target: elem.target, z: elem.value};\n                    } else {\n                        return {source: that._areas.byId[sources[i]], target: that._areas.byId[targets[j]], z: 0};\n                    }\n                    */\n                });\n            });\n            var row = svg.selectAll(\".row\").data(m).enter().append(\"g\").attr(\"class\", \"row\").attr(\"transform\", function (d, i) {\n                var offset_y = y(d[0].source.id);\n                if (offset_y !== NaN) {\n                    return \"translate(0,\" + offset_y + \")\";\n                } else {\n                    console.log('not found in table', d[0].source);\n                }\n            }).each(make_row);\n\n            that.matrixRow = row;\n            /*\n            row.append(\"line\")\n                .each(function(d) {\n                    d3.select(this).classed('row-' + d[0].source.id, true)\n                })\n                .attr(\"x2\", width-margin.left-1);\n            */\n            var label_row = row.append(\"text\").attr(\"x\", -6).attr(\"y\", x.bandwidth() / 2).attr(\"dy\", \".3em\").attr(\"text-anchor\", \"end\").attr('class', 'label-row').text(function (d, i) {\n                return d[0].source.abbrev;\n            }).each(function (d) {\n                d3.select(this).classed('row-' + d[0].source.id, true);\n                //d3.select(this).classed('column-' + d.target, true)\n            });\n\n            row.append('line').attr('x2', width).attr('y1', x.bandwidth() / 2 + 1).attr('y2', x.bandwidth() / 2 + 1).attr('class', 'crosshair').each(function (d) {\n                d3.select(this).classed('row-' + d[0].source.id, true);\n                //d3.select(this).classed('column-' + d.target, true)\n            });\n\n            var label_column = svg.selectAll('g.column').data(targets).enter().append(\"g\").classed('column', true).attr(\"transform\", function (d, i) {\n                return \"translate(\" + x(d) + \")rotate(-90)\";\n            });\n            /*\n            label_column.append(\"line\")\n                .each(function(d) {\n                    d3.select(this).classed('column-' + d, true)\n                })\n                .attr(\"x1\", -(height - margin.top - 1));\n            */\n            label_column.append('line').attr('x1', -height).attr('y1', x.bandwidth() / 2 + 1).attr('y2', x.bandwidth() / 2 + 1).attr('class', 'crosshair').each(function (d) {\n                d3.select(this).classed('column-' + d, true);\n            });\n\n            label_column.append(\"text\").attr(\"x\", 6).attr(\"y\", y.bandwidth() / 2).attr(\"dy\", \".3em\").attr(\"text-anchor\", \"start\").attr('class', 'label-column').text(function (d, i) {\n                var area = areas.get(d);\n                return area.abbrev;\n            }).each(function (d) {\n                //d3.select(this).classed('row-' + d.source, true)\n                d3.select(this).classed('column-' + d, true);\n            });\n\n            that.matrixColumn = label_column;\n            function make_row(row) {\n                var r = d3.select(this);\n                r.classed('row-' + row[0].source.id, true);\n                var cell = r.selectAll('.cell')\n                //.data(row.filter(function(d) { return d.z > 0; }))\n                .data(row).enter().append(\"rect\").attr(\"class\", \"cell\").classed('pointer', true).each(function (d) {\n                    d3.select(this).classed('row-' + d.source.id, true);\n                    d3.select(this).classed('column-' + d.target.id, true);\n                }).attr(\"x\", function (d, i) {\n                    return x(d.target.id) + 1;\n                }).attr(\"y\", 1).attr(\"width\", x.bandwidth() - 1).attr(\"height\", y.bandwidth() - 1).style(\"fill-opacity\", function (d) {\n                    return d.sln >= 0 ? 1 : 1;\n                }).style(\"fill\", function (d) {\n                    if (d.sln_notdefined) {\n                        return 'url(\"#diagonalHatch\")';\n                    } else {\n                        if (d.source.id === d.target.id) {\n                            //return 'url(\"#diagonalHatch\")';\n                            return 'rgba(0, 90, 20, 0.7)';\n                        } else {\n                            if (d.sln >= 0) {\n                                return colorFunction(d.sln);\n                            } else {\n                                return '#f9f9f9';\n                            }\n                        }\n                    }\n                }).attr('data-z', function (d) {\n                    return d.sln;\n                }).on('click', function (n) {\n                    var area = that._areas.byId[n.target.id];\n                    _Actions2.default.pickTargetArea(area);\n                    _Actions2.default.nodeDetail();\n                }).on('mouseover', function (n) {\n                    var this_ = d3.select(this);\n                    d3.selectAll('.row-' + n.source.id).classed('highlight', true);\n                    d3.selectAll('.column-' + n.target.id).classed('highlight', true);\n                    if (that.state.hideMissingSources) {\n                        d3.selectAll('rect.row-' + n.target.id + '.column-' + n.source.id).style('stroke', '#000000');\n                    }\n                    // highlight\n                    this_.style('stroke', '#000000');\n                    that.showTooltip({ target_area: n.target, source_area: n.source });\n                }).on('mouseout', function (n) {\n                    var this_ = d3.select(this);\n                    d3.selectAll('.row-' + n.source.id).classed('highlight', false);\n                    d3.selectAll('.column-' + n.target.id).classed('highlight', false);\n                    this_.style('stroke', 'none');\n                    if (that.state.hideMissingSources) {\n                        d3.selectAll('rect.row-' + n.target.id + '.column-' + n.source.id).style('stroke', 'none');\n                    }\n                    //d3.selectAll('line.row-' + (n.source + 1)).classed('highlight', false);\n                    //d3.selectAll('line.column-' + (n.target + 1)).classed('highlight', false);\n                    that.hideTooltip();\n                });\n                //.on(\"mouseover\", mouseover)\n                //.on(\"mouseout\", mouseout);\n            }\n            /* lastly the title / caption for axis */\n\n            svg.append(\"text\").attr(\"x\", 0).attr(\"y\", 0).attr(\"dy\", \"-4em\").attr(\"text-anchor\", \"middle\").attr('class', 'caption-source').text('Source Area').attr(\"transform\", 'translate(0 ' + (height / 2 + margin.top) + ') rotate(-90)');\n            svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", -60).attr(\"dy\", \".3em\").attr(\"text-anchor\", \"middle\").attr('class', 'caption-target').text('Target Area');\n            this.reorder(this.state.order);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _AppStore2.default.removeChangeListener(this.handleChange);\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange() {\n            if (_AppStore2.default.getNodePicked()) {\n                this.setState({\n                    nodePicked: _AppStore2.default.getNodePicked(),\n                    dataOverlay: _AppStore2.default.getDataOverlay()\n                });\n            } else {\n                this.setState({\n                    dataOverlay: _AppStore2.default.getDataOverlay()\n                });\n            }\n        }\n        /**\n         * This function to be called when every ajax request complete\n         * when all pending ajax completes.\n         * Mark ajaxDone as true to prevent accidental multiple trigger of\n         * initialDraw (though not necessary I guess)\n         * @return\n         */\n\n    }, {\n        key: 'ajaxProgress',\n        value: function ajaxProgress() {\n            var _this3 = this;\n\n            var that = this;\n            if (this.pendingAjax.length == 0 && !this.state.ajaxDone) {\n                this.setState({ ajaxDone: true }, function () {\n                    _this3.prepare();\n                    _this3.initialDraw();\n                    var search = window.location.search.substring(1);\n                    if (search) {\n                        var query = JSON.parse('{\"' + decodeURI(search).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g, '\":\"') + '\"}');\n                        if (query.pickArea) {\n                            var highlight_area = _this3._areas.byAbbrev[query.pickArea];\n                            d3.selectAll('.row-' + highlight_area.serial).classed('highlight', true);\n                        } else if (query.pickInjection) {\n                            var inj = _this3.static_inj[query.pickInjection];\n                            //let injections = _.filter(that.static_inj, {abbrev: area.abbrev});\n                            var area = that._areas.byAbbrev[inj.abbrev];\n                            _Actions2.default.pickTargetArea(area);\n                            //let injections = _.filter(that.static_inj, {abbrev: area.abbrev});\n                            //Actions.nodeDetail();\n                            _Actions2.default.expandInjection(inj);\n                            d3.selectAll('.column-' + area.id).classed('highlight', true);\n                        }\n                    }\n                });\n            }\n        }\n    }, {\n        key: 'prepare',\n        value: function prepare() {\n            var _this4 = this;\n\n            var that = this;\n            //let abbrev_lookup = {};\n            _Actions2.default.processConnectivity(this._connectivity_data, that.static_inj);\n            _lodash2.default.each(this.atlas_struct, function (area) {\n                var _area = _this4._areas.byAbbrev[area.abbrev];\n                _lodash2.default.assign(_area, area);\n                _this4._areas.byId[_area.id] = _area;\n                var injections = _lodash2.default.filter(that.static_inj, { abbrev: area.abbrev });\n                _area.injections = injections;\n            });\n            var matrix = that._matrix;\n            _lodash2.default.each(this.links, function (link) {\n                var target = that._areas.byIndex[link.target];\n                var source = that._areas.byIndex[link.source];\n                matrix.link(target, source, { target: target, source: source, value: link.value });\n            });\n            _AppDispatcher2.default.register(function (action) {\n                _AppDispatcher2.default.waitFor([_AppStore2.default.dispatchToken]);\n                switch (action.actionType) {\n                    case 'HIGHLIGHT_EDGE':\n                        {\n                            var from_ = action.from_;\n                            var to = action.to;\n                            var source_id = void 0;\n                            if (typeof from_ === 'string') {\n                                source_id = that._areas.byAbbrev[from_].id;\n                            } else {\n                                source_id = from_.id;\n                            }\n                            var target_id = void 0;\n                            if (typeof to === 'string') {\n                                target_id = that._areas.byAbbrev[to].id;\n                            } else {\n                                target_id = to.id;\n                            }\n                            d3.selectAll('.row-' + source_id).classed('highlight', true);\n                            d3.selectAll('.column-' + target_id).classed('highlight', true);\n                            //this_.style('stroke', '#555555');\n                            break;\n                        }\n                    case 'UNHIGHLIGHT_EDGE':\n                        {\n                            var _from_ = action.from_;\n                            var _to = action.to;\n                            var _source_id = _from_.id;\n                            var _target_id = _to.id;\n                            d3.selectAll('.row-' + _source_id).classed('highlight', false);\n                            d3.selectAll('.column-' + _target_id).classed('highlight', false);\n                            //d3.selectAll('rect.row-' + source_id + '.column-' + target_id).style('stroke', 'none');\n                            break;\n                        }\n                }\n            });\n            _Actions2.default.saveAreas(this._areas);\n            /* work out the sorting options */\n        }\n    }, {\n        key: 'handleChangeOrder',\n        value: function handleChangeOrder(e) {\n            // just be safe, it shouldn't be false\n            if (e.target.value != this.state.order) {\n                this.reorder(e.target.value);\n            }\n            this.setState({ order: e.target.value });\n        }\n    }, {\n        key: 'handleFocusViewer',\n        value: function handleFocusViewer(e) {\n            this.setState({\n                focused: true,\n                controlExpanded: false\n            });\n            $('body').addClass('focused');\n            _Actions2.default.setFocusedViewState(true);\n        }\n    }, {\n        key: 'handleBlurViewer',\n        value: function handleBlurViewer(e) {\n            this.setState({\n                focused: false,\n                controlExpanded: true\n            });\n            $('body').removeClass('focused');\n            _Actions2.default.setFocusedViewState(false);\n        }\n    }, {\n        key: 'reorder',\n        value: function reorder(order) {\n            var that = this;\n            var y = this.scaleY;\n            var x = this.scaleX;\n            var sources = _lodash2.default.map(_lodash2.default.keys(this._matrix.sources), function (v) {\n                return parseInt(v, 10);\n            });\n            var targets = _lodash2.default.map(_lodash2.default.keys(this._matrix.targets), function (v) {\n                return parseInt(v, 10);\n            });\n            var newY = _lodash2.default.map(that.sortOptions[order].axisSources, function (v) {\n                return that._areas.byAbbrev[v].id;\n            });\n            var newX = _lodash2.default.map(that.sortOptions[order].axisTargets, function (v) {\n                return that._areas.byAbbrev[v].id;\n            });\n            newY = _lodash2.default.intersection(newY, sources);\n            newX = _lodash2.default.intersection(newX, targets);\n            if (this.state.hideMissingSources) {\n                newY = _lodash2.default.intersection(newY, newX);\n            }\n            y.domain(newY);\n            x.domain(newX);\n\n            var height = 13 * newY.length;\n            that.svgTag.attr('height', height + that.svgMargin.top + 2);\n            var range = [0, height];\n            y.range(range);\n\n            var width = 13 * newX.length;\n            that.svgTag.attr('width', width + that.svgMargin.left + 2);\n            range = [0, width];\n            x.range(range);\n\n            that.matrixRow.attr(\"transform\", function (d, i) {\n                var offset_y = y(d[0].source.id);\n                if (offset_y !== undefined) {\n                    //return \"translate(0,\" + y(i) + \")\";\n                    return \"translate(0,\" + offset_y + \")\";\n                } else {\n                    return \"translate(-65535, -65535)\";\n                }\n            });\n\n            that.matrixRow.each(function () {\n                d3.select(this).selectAll('rect').attr(\"x\", function (d, i) {\n                    return x(d.target.id) + 1;\n                });\n            });\n            that.matrixColumn.attr(\"transform\", function (d, i) {\n                return \"translate(\" + x(d) + \")rotate(-90)\";\n            });\n            that.svgTag.selectAll('.caption-source').attr(\"transform\", 'translate(0 ' + height / 2 + ') rotate(-90)');\n            that.svgTag.selectAll('.background').attr('width', width - 1).attr('height', height - 1);\n            that.svgTag.selectAll('rect.main-graph-border').attr('width', width + 1).attr('height', height + 1);\n        }\n    }, {\n        key: 'handleToggleMissingSources',\n        value: function handleToggleMissingSources(e) {\n            var _this5 = this;\n\n            var value = e.target.type === 'checkbox' ? e.target.checked : e.target.value;\n            this.setState({ hideMissingSources: value }, function () {\n                return _this5.reorder(_this5.state.order);\n            });\n        }\n    }, {\n        key: 'handleSwitchToGraphView',\n        value: function handleSwitchToGraphView(e) {\n            window.location.href = '/graph.html';\n        }\n    }, {\n        key: 'handleModalHide',\n        value: function handleModalHide(e) {}\n    }, {\n        key: 'handleQLConnectivityTxt',\n        value: function handleQLConnectivityTxt(e) {\n            this.modal.show();\n        }\n    }, {\n        key: 'handleToggleExpand',\n        value: function handleToggleExpand(e) {\n            var state = !this.state.controlExpanded;\n            this.setState({ controlExpanded: state });\n        }\n        /**\n         * @return {object}\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            var func = (0, _utils.getBlueColorFunc)();\n            /* temporary code to dump color chart\n            function rgb2hex(rgb){\n             rgb = rgb.match(/^rgba?[\\s+]?\\([\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?,[\\s+]?(\\d+)[\\s+]?/i);\n             return (rgb && rgb.length === 4) ? \"#\" +\n              (\"0\" + parseInt(rgb[1],10).toString(16)).slice(-2) +\n              (\"0\" + parseInt(rgb[2],10).toString(16)).slice(-2) +\n              (\"0\" + parseInt(rgb[3],10).toString(16)).slice(-2) : '';\n            }\n            _.each(_.range(0, -6.25, -0.25), v => {\n                let V = Math.pow(10, v);\n                console.log('<tr><td>' + v + '</td><td style=\"color: ' + func(V) + '\">' + rgb2hex(func(V)) + '</td><td style=\"color: ' + func(V) + '\">' + func(V) + '</td></tr>');\n            });\n            */\n            var modalStyle = {\n                width: '80%',\n                maxWidth: '1200px',\n                scrollX: 'auto',\n                overflow: 'scroll',\n                maxHeight: '100%'\n            };\n\n            var area_name = null;\n            if (this.state.nodePicked) {\n                area_name = (0, _utils.toTitleCase)(this.state.nodePicked.fullname) + ' (' + this.state.nodePicked.abbrev + ')';\n            }\n            var download_svg = _react2.default.createElement(\n                'div',\n                { className: 'link-button' },\n                _react2.default.createElement(\n                    'a',\n                    { onClick: this.handleDownloadGraph, download: 'export_flatmap_graph.svg' },\n                    'Download the graph as SVG'\n                )\n            );\n            var content = null;\n            if (!this.state.ajaxDone) {\n                content = _react2.default.createElement(\n                    'section',\n                    { className: 'main' },\n                    _react2.default.createElement('section', { className: 'switch-view' }),\n                    _react2.default.createElement(\n                        'section',\n                        { className: 'graph' },\n                        _react2.default.createElement(\n                            'section',\n                            { className: 'graph-container' },\n                            _react2.default.createElement('div', { className: 'loading matrix-view' }),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'loading-image' },\n                                _react2.default.createElement('img', { src: '/static/images/loading.svg', width: '120', height: '120' }),\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'loading-image-caption' },\n                                    'Loading additional data, please be patient...'\n                                )\n                            )\n                        ),\n                        _react2.default.createElement('section', { className: 'info-panel' })\n                    )\n                );\n            } else {\n                var sources = null;\n                if (this.state.nodePicked) {\n                    sources = ', ' + this.strength_area_count + ' sources.';\n                }\n                //this.sortOptions = _.sortBy(this.sortOptions, 'index');\n                var sortOptions = _lodash2.default.map(this.sortOptions, function (v, k) {\n                    v.key = k;\n                    return v;\n                });\n                sortOptions = _lodash2.default.sortBy(sortOptions, 'index');\n                var options = _lodash2.default.map(sortOptions, function (opt) {\n                    return _react2.default.createElement(\n                        'option',\n                        { value: opt.key, key: opt.key },\n                        opt.display\n                    );\n                });\n\n                content = _react2.default.createElement(\n                    'section',\n                    { className: 'main' },\n                    _react2.default.createElement(_ViewSwitch2.default, { view: 'SLN' }),\n                    _react2.default.createElement(\n                        'section',\n                        { className: 'matrix' },\n                        _react2.default.createElement(\n                            'section',\n                            { id: 'graph-container' },\n                            _react2.default.createElement(\n                                'section',\n                                { id: 'd3_control', className: 'd3-control' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: (0, _classnames2.default)(['foldable-control', 'thin-control'], { expanded: this.state.controlExpanded }, { folded: !this.state.controlExpanded }) },\n                                    _react2.default.createElement('div', { className: 'brief' }),\n                                    _react2.default.createElement(\n                                        'div',\n                                        { className: 'full' },\n                                        _react2.default.createElement(\n                                            'div',\n                                            { className: 'control-row' },\n                                            _react2.default.createElement(\n                                                'div',\n                                                { className: 'control-group' },\n                                                _react2.default.createElement(\n                                                    'p',\n                                                    null,\n                                                    'This view presents the weighed and directed connectivity matrix based on the results of ',\n                                                    _react2.default.createElement(\n                                                        'a',\n                                                        { href: 'http://www.marmosetbrain.org/whitepaper#tracer_injections', target: '_blank' },\n                                                        'injections of monosynaptic retrograde fluorescent tracers'\n                                                    ),\n                                                    ' injections.'\n                                                ),\n                                                _react2.default.createElement(\n                                                    'p',\n                                                    null,\n                                                    'The rows and columns of the matrix represent individual cortical areas. The ',\n                                                    _react2.default.createElement(\n                                                        'i',\n                                                        null,\n                                                        'Targets'\n                                                    ),\n                                                    ' are the injected areas while the ',\n                                                    _react2.default.createElement(\n                                                        'i',\n                                                        null,\n                                                        'Sources'\n                                                    ),\n                                                    ' indicate the areas in which the projections originate. The intrinsic connections are excluded from the analysis.'\n                                                )\n                                            )\n                                        )\n                                    ),\n                                    _react2.default.createElement(\n                                        'div',\n                                        { className: 'control-row list-areas' },\n                                        _react2.default.createElement(\n                                            'div',\n                                            { className: 'control-group' },\n                                            _react2.default.createElement(\n                                                'div',\n                                                { className: 'control-group-half' },\n                                                _react2.default.createElement(\n                                                    'label',\n                                                    null,\n                                                    'List the areas '\n                                                ),\n                                                _react2.default.createElement(\n                                                    'select',\n                                                    { onChange: this.handleChangeOrder, value: this.state.order },\n                                                    options\n                                                )\n                                            ),\n                                            _react2.default.createElement(\n                                                'div',\n                                                { className: 'control-group-half' },\n                                                _react2.default.createElement(\n                                                    'label',\n                                                    { className: 'clickable', htmlFor: 'switch_edge_complete' },\n                                                    this.state.hideMissingSources ? 'Switch to the full matrix' : 'Switch to the edge-complete matrix'\n                                                ),\n                                                _react2.default.createElement('input', { className: 'hidden', id: 'switch_edge_complete', type: 'checkbox', checked: this.state.hideMissingSources,\n                                                    value: true,\n                                                    onChange: this.handleToggleMissingSources\n                                                })\n                                            )\n                                        )\n                                    )\n                                )\n                            ),\n                            _react2.default.createElement('section', { id: 'd3', className: 'd3' }),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'color-bar-container' },\n                                _react2.default.createElement(_ColorBar2.default, { style: 'matrix', mode: 'SLN' })\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'section',\n                            { id: 'info-panel', className: 'matrix-view' },\n                            _react2.default.createElement(_QuickLinks2.default, null),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'injection-info' },\n                                _react2.default.createElement(_MainFlne2.default, { flne: this.flne_per_area, areas: this._areas, mode: this.dataOverlay }),\n                                _react2.default.createElement(_InjectionList2.default, { flne: this.state.flne_per_injection, mode: this.dataOverlay })\n                            )\n                        )\n                    )\n                );\n            }\n            return content;\n        }\n    }]);\n\n    return SLN;\n}(_react2.default.Component);\n\nexports.default = SLN;\n;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2pzL2NvbXBvbmVudHMvU0xOLnJlYWN0LmpzPzUwZDciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL0FjdGlvbnMnO1xuaW1wb3J0IEFwcFN0b3JlIGZyb20gJy4uL3N0b3Jlcy9BcHBTdG9yZSc7XG5pbXBvcnQgSW5qZWN0aW9uTGlzdCBmcm9tICcuL0luamVjdGlvbkxpc3QucmVhY3QnO1xuaW1wb3J0IENvbG9yQmFyIGZyb20gJy4vQ29sb3JCYXIucmVhY3QnO1xuaW1wb3J0IE1haW5GbG5lIGZyb20gJy4vTWFpbkZsbmUucmVhY3QnO1xuaW1wb3J0IFZpZXdTd2l0Y2ggZnJvbSAnLi9WaWV3U3dpdGNoLnJlYWN0JztcbmltcG9ydCBNb2RhbCBmcm9tICcuLi9saWIvbW9kYWwnO1xuaW1wb3J0IEFwcERpc3BhdGNoZXIgZnJvbSAnLi4vZGlzcGF0Y2hlci9BcHBEaXNwYXRjaGVyJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7dG9UaXRsZUNhc2UsIGdldEJsdWVDb2xvckZ1bmMsIHNjaWVudGlmaWNOb3Rpb24sIGdldFRhcmdldEFyZWFTdW1tYXJ5SFRNTCwgc3ZnQWRkSGF0Y2hMaW5lfSBmcm9tICcuLi9saWIvdXRpbHMnO1xuaW1wb3J0IHtDb25uZWN0aXZpdHl9IGZyb20gJy4uL2xpYi9jb25uZWN0aXZpdHknO1xuaW1wb3J0IFF1aWNrTGlua3MgZnJvbSAnLi9RdWlja0xpbmtzLnJlYWN0JztcbmltcG9ydCB7QXJlYSwgQXJlYXMsIEluamVjdGlvbiwgSW5qZWN0aW9uc30gZnJvbSAnLi4vbGliL3V0aWxzJztcbmltcG9ydCBUb29sVGlwIGZyb20gJy4vVG9vbFRpcC5yZWFjdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNMTiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMsIGNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIocHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgICAgIF8uYmluZEFsbCh0aGlzLCAnaGFuZGxlQ2hhbmdlJywgJ2FqYXhQcm9ncmVzcycsICdoYW5kbGVDaGFuZ2VPcmRlcicsXG4gICAgICAgICAgICAgICAgJ3Nob3dUb29sdGlwJywgJ2hpZGVUb29sdGlwJywgJ3ByZXBhcmUnLCAncmVvcmRlcicsXG4gICAgICAgICAgICAgICAgJ2hhbmRsZVRvZ2dsZU1pc3NpbmdTb3VyY2VzJywgJ2hhbmRsZU1vZGFsSGlkZScsXG4gICAgICAgICAgICAgICAgJ2hhbmRsZVFMQ29ubmVjdGl2aXR5VHh0JywgJ2hhbmRsZVRvZ2dsZUV4cGFuZCcsXG4gICAgICAgICAgICAgICAgJ2hhbmRsZUZvY3VzVmlld2VyJywgJ2hhbmRsZUJsdXJWaWV3ZXInLFxuICAgICAgICAgICAgICAgICdoYW5kbGVDaGFuZ2VEYXRhT3ZlcmxheScsXG4gICAgICAgICAgICApO1xuICAgICAgICB0aGlzLnBlbmRpbmdBamF4ID0gW107XG4gICAgICAgIHRoaXMuZGF0YU92ZXJsYXkgPSAnU0xOJztcbiAgICAgICAgbGV0IHN0YXRlID0ge1xuICAgICAgICAgICAgYWpheERvbmU6IGZhbHNlLFxuICAgICAgICAgICAgb3JkZXI6ICdhbHBoYWJldGljYWxseScsXG4gICAgICAgICAgICBjb250cm9sRXhwYW5kZWQ6IHRydWUsXG4gICAgICAgICAgICBmb2N1c2VkOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICBsZXQgZm9jdXNlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmb2N1c2VkVmlldycpO1xuICAgICAgICBpZiAoZm9jdXNlZCkge1xuICAgICAgICAgICAgc3RhdGUuZm9jdXNlZCA9IHRydWU7XG4gICAgICAgICAgICBzdGF0ZS5jb250cm9sRXhwYW5kZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5fbWF0cml4ID0gQXBwU3RvcmUuZ2V0Q29ubmVjdGl2aXR5KCk7XG4gICAgICAgIHRoaXMuX2FyZWFzID0ge1xuICAgICAgICAgICAgYnlBYmJyZXY6IHt9LFxuICAgICAgICAgICAgYnlJbmRleDoge30sXG4gICAgICAgICAgICBieUlkOiB7fVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFqYXhMb2FkKCdpbmplY3Rpb25zX3N0YXRpYy5qc29uJywgKGluaikgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0aWNfaW5qID0gaW5qO1xuICAgICAgICAgICAgXy5lYWNoKHRoaXMuc3RhdGljX2luaiwgKGluaiwga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGluai5kaXNwbGF5X25hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5qLm5hbWUgPSBpbmouZGlzcGxheV9uYW1lICsgaW5qLnRyYWNlcl9pZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5qLm5hbWUgPSBrZXk7XG4gICAgICAgICAgICAgICAgaW5qLmNvbGxhcHNlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgQWN0aW9ucy5zYXZlSW5qZWN0aW9uc1N0YXRpYyhpbmopO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hamF4TG9hZCgnZmxuZV9nbWVhbm56X2FyZWFzLmpzb24nLCAoZmxuZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mbG5lX3Blcl9hcmVhID0gZmxuZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWpheExvYWQoJ2ZsbmVfZ21lYW5uel9pbmplY3Rpb25zLmpzb24nLCAoZmxuZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5mbG5lX3Blcl9pbmplY3Rpb24gPSBmbG5lO1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZmxuZV9wZXJfaW5qZWN0aW9uOiBmbG5lfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFqYXhMb2FkKCdzdHJ1Y3R1cmVzLmpzb24nLCAoc3RydWN0KSA9PiB7XG4gICAgICAgICAgICBBY3Rpb25zLnByb2Nlc3NBcmVhcyhzdHJ1Y3QpO1xuICAgICAgICAgICAgXy5lYWNoKHN0cnVjdCwgcyA9PiB7XG4gICAgICAgICAgICAgICAgLyoganVzdCBtYWtlIHRoZSBzdHJ1Y3R1cmUgbmFtZSBhIGxpdHRsZSBtb3JlIHByZXR0eSAqL1xuICAgICAgICAgICAgICAgIGxldCB0eHQgPSBzLmZ1bGxuYW1lO1xuICAgICAgICAgICAgICAgIHR4dCA9IHR4dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR4dC5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICBzLmZ1bGxuYW1lID0gdHh0O1xuICAgICAgICAgICAgICAgIGxldCBjYyA9IHMuY29sb3I7XG4gICAgICAgICAgICAgICAgcy5oZXhfY29sb3IgPSAncmdiYSgnICsgY2NbMF0gKyAnLCcgKyBjY1sxXSArICcsJyArIGNjWzJdICsgJywgMSknO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmF0bGFzX3N0cnVjdCA9IHN0cnVjdDtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWpheExvYWQoJ2Nvbm5lY3Rpdml0eV8xXzBfMS5qc29uJywgKGNvbm4pID0+IHtcbiAgICAgICAgICAgIGxldCBub2RlX2xvb2t1cCA9IHt9O1xuICAgICAgICAgICAgbGV0IG5vZGVzID0gW107XG4gICAgICAgICAgICBfLmVhY2goY29ubi5ub2RlcywgKG5vZGUsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBub2RlX2xvb2t1cFtpXSA9IG5vZGU7XG4gICAgICAgICAgICAgICAgbm9kZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5vZGVOYW1lOiBub2RlLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuX2FyZWFzLmJ5SW5kZXhbaV0gPSB7YWJicmV2OiBub2RlLCBzZXJpYWw6IGl9O1xuICAgICAgICAgICAgICAgIHRoaXMuX2FyZWFzLmJ5QWJicmV2W25vZGVdID0gdGhpcy5fYXJlYXMuYnlJbmRleFtpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IGxpbmtzID0gW107XG4gICAgICAgICAgICBfLmVhY2goY29ubi5saW5rcywgKGxpbmssIGkpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gbm9kZV9sb29rdXBbbGlua1swXV07XG4gICAgICAgICAgICAgICAgbGV0IHNvdXJjZSA9IG5vZGVfbG9va3VwW2xpbmtbMV1dO1xuICAgICAgICAgICAgICAgIGxpbmtzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGxpbmtbMF0sXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogbGlua1sxXSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGxpbmtbMl1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5ub2RlcyA9IG5vZGVzO1xuICAgICAgICAgICAgdGhpcy5saW5rcyA9IGxpbmtzO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hamF4TG9hZCgnY29ubmVjdGl2aXR5X21hdHJpeF9zb3J0aW5nX29wdGlvbnMuanNvbicsIGRhdGEgPT4ge1xuICAgICAgICAgICAgdGhpcy5zb3J0T3B0aW9ucyA9IGRhdGE7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN2Z01hcmdpbiA9IHt0b3A6IDgwLCByaWdodDogMCwgYm90dG9tOiAxMCwgbGVmdDogODB9O1xuICAgICAgICB0aGlzLmFqYXhMb2FkKCdtYXJtb3NldF9icmFpbl9jb25uZWN0aXZpdHlfRkxOLmpzb24nLCBkYXRhID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2Nvbm5lY3Rpdml0eV9kYXRhID0gZGF0YTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFqYXhMb2FkKGZpbGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ0FqYXgucHVzaChmaWxlKTtcbiAgICAgICAgZDMuanNvbignL3N0YXRpYy9kYXRhLycgKyBmaWxlLCAoZXJyb3IsIGRhdGEpID0+IHtcbiAgICAgICAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgICAgIF8ucHVsbCh0aGlzLnBlbmRpbmdBamF4LCBmaWxlKTtcbiAgICAgICAgICAgIHRoaXMuYWpheFByb2dyZXNzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgQXBwU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5oYW5kbGVDaGFuZ2UpO1xuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgICAgICQod2luZG93KS5vbigna2V5dXAnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDcwICYmIGUuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhhdC5zdGF0ZS5mb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaGFuZGxlQmx1clZpZXdlcigpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuaGFuZGxlRm9jdXNWaWV3ZXIoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gNzEgJiYgZS5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvZ3JhcGguaHRtbFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2hvd1Rvb2x0aXAoe3RhcmdldF9hcmVhLCBzb3VyY2VfYXJlYSwgeCwgeX0gPSB7fSkge1xuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgICAgIGxldCB0b29sdGlwID0gZDMuc2VsZWN0KCdkaXYudG9vbHRpcCcpO1xuICAgICAgICB0b29sdGlwLmNsYXNzZWQoJ21hdHJpeC12aWV3JywgdHJ1ZSk7XG4gICAgICAgIHRvb2x0aXBcbiAgICAgICAgICAgIC5zdHlsZSgnb3BhY2l0eScsIDEpO1xuICAgICAgICBsZXQgeF8gPSB4LCB5XyA9IHk7XG4gICAgICAgIGlmICh4XyA9PT0gbnVsbCB8fCB4XyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB4XyA9IGQzLmV2ZW50LnBhZ2VYICsgMjQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHlfID09PSBudWxsIHx8IHlfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHlfID0gZDMuZXZlbnQucGFnZVkgLSAyMDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgdHh0ID0gZ2V0VGFyZ2V0QXJlYVN1bW1hcnlIVE1MKHRhcmdldF9hcmVhLCBzb3VyY2VfYXJlYSwgdGhhdC5fbWF0cml4LCB0aGlzLmRhdGFPdmVybGF5KTtcbiAgICAgICAgdG9vbHRpcC5odG1sKHR4dClcbiAgICAgICAgICAgIC5zdHlsZShcImxlZnRcIiwgKHhfKSArIFwicHhcIilcbiAgICAgICAgICAgIC5zdHlsZShcInRvcFwiLCAoeV8pICsgXCJweFwiKTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlRGF0YU92ZXJsYXkoZSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICBBY3Rpb25zLnNldERhdGFPdmVybGF5KHZhbHVlKTtcbiAgICB9XG4gICAgaGlkZVRvb2x0aXAoKSB7XG4gICAgICAgIGxldCB0b29sdGlwID0gZDMuc2VsZWN0KCdkaXYudG9vbHRpcCcpO1xuICAgICAgICB0b29sdGlwXG4gICAgICAgICAgICAuc3R5bGUoXCJvcGFjaXR5XCIsIDApO1xuICAgIH1cblxuICAgIGluaXRpYWxEcmF3KCkge1xuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgICAgIGxldCBzaXplID0gdGhpcy5fbWF0cml4LnNpemU7XG4gICAgICAgIGNvbnN0IGFyZWFzID0gQXBwU3RvcmUuZ2V0QXJlYXMoKTtcbiAgICAgICAgLyogd2lkdGggc2hvdWxkIGJlIGFyb3VuZCA4NjBweCAqL1xuICAgICAgICBjb25zdCBncmlkX3NpemUgPSBbMTMsIDEzXTtcbiAgICAgICAgbGV0IG1hcmdpbiA9IHRoYXQuc3ZnTWFyZ2luLFxuICAgICAgICAgICAgd2lkdGggPSBncmlkX3NpemVbMF0gKiBzaXplLngsXG4gICAgICAgICAgICBoZWlnaHQgPSBncmlkX3NpemVbMV0gKiBzaXplLnk7XG4gICAgICAgIC8vbGV0IF9sZWZ0ID0gTWF0aC5mbG9vcigoODYwIC0gKHdpZHRoICsgbWFyZ2luLmxlZnQpKSAvIDIpO1xuICAgICAgICBsZXQgX2xlZnQgPSAyMDtcbiAgICAgICAgbGV0IGNvbG9yRnVuY3Rpb24gPSBnZXRCbHVlQ29sb3JGdW5jKCk7XG5cbiAgICAgICAgbGV0IHggPSBkMy5zY2FsZUJhbmQoKS5yYW5nZShbMCwgd2lkdGhdKSxcbiAgICAgICAgICAgIHkgPSBkMy5zY2FsZUJhbmQoKS5yYW5nZShbMCwgaGVpZ2h0XSk7XG4gICAgICAgIC8vIGxldCBjID0gZDMuc2NhbGVPcmRpbmFsKGQzLnNjaGVtZUNhdGVnb3J5MTApLmRvbWFpbihkMy5yYW5nZSgxMCkpO1xuICAgICAgICAvL2xldCBsZWZ0XyA9IG1hcmdpbi5sZWZ0ICsgKDg2MCAtICgxMyAqIHNpemUueCArIG1hcmdpbi5sZWZ0KSkgLyAyO1xuICAgICAgICBsZXQgc3ZnID0gZDMuc2VsZWN0KFwiI2QzXCIpLmFwcGVuZChcInN2Z1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgMilcbiAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyAyKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ21hdHJpeC12aWV3JylcbiAgICAgICAgICAgIC5zdHlsZShcIm1hcmdpbi1sZWZ0XCIsIF9sZWZ0ICsgXCJweFwiKVxuXG4gICAgICAgIHN2Z0FkZEhhdGNoTGluZShzdmcpO1xuXG4gICAgICAgIHRoYXQuc3ZnVGFnID0gc3ZnO1xuXG4gICAgICAgIHN2Zy5hcHBlbmQoJ3JlY3QnKS5hdHRyKCd3aWR0aCcsIHdpZHRoICsgMSkuYXR0cignaGVpZ2h0JywgaGVpZ2h0ICsgMSlcbiAgICAgICAgICAgIC5hdHRyKCd4JywgbWFyZ2luLmxlZnQpXG4gICAgICAgICAgICAuYXR0cigneScsIG1hcmdpbi50b3ApXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbWFpbi1ncmFwaC1ib3JkZXInKTtcblxuICAgICAgICBzdmcgPSBzdmdcbiAgICAgICAgICAuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyAobWFyZ2luLmxlZnQgKyAwKSArIFwiLFwiICsgKG1hcmdpbi50b3AgKyAwKSArIFwiKVwiKVxuXG5cblxuICAgICAgICBsZXQgbWF0cml4ID0gdGhpcy5fbWF0cml4LCBub2RlcyA9IHRoaXMubm9kZXMsIGxpbmtzID0gdGhpcy5saW5rcztcbiAgICAgICAgLy95LmRvbWFpbih0aGlzLm9yZGVycy5uYW1lKTtcbiAgICAgICAgLy94LmRvbWFpbih0aGlzLnRhcmdldHMpO1xuXG4gICAgICAgIHN2Zy5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImJhY2tncm91bmRcIilcbiAgICAgICAgICAgIC5hdHRyKFwieFwiLCAxKVxuICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIDEpXG4gICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoIC0gMSlcbiAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCAtIDEpO1xuICAgICAgICBsZXQgc291cmNlcyA9IF8ua2V5cyhtYXRyaXguc291cmNlcyksXG4gICAgICAgICAgICB0YXJnZXRzID0gXy5rZXlzKG1hdHJpeC50YXJnZXRzKTtcblxuICAgICAgICB4LmRvbWFpbih0YXJnZXRzKTtcbiAgICAgICAgeS5kb21haW4oc291cmNlcyk7XG4gICAgICAgIHRoaXMuc2NhbGVYID0geDtcbiAgICAgICAgdGhpcy5zY2FsZVkgPSB5O1xuICAgICAgICB3aW5kb3cuYXJlYXMgPSBhcmVhcztcbiAgICAgICAgbGV0IG0gPSBfLm1hcChkMy5yYW5nZShzaXplLnkpLCBmdW5jdGlvbih2LCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5tYXAoZDMucmFuZ2Uoc2l6ZS54KSwgZnVuY3Rpb24odiwgaikge1xuICAgICAgICAgICAgICAgIGxldCBzcmMgPSBhcmVhcy5nZXQoc291cmNlc1tpXSk7XG4gICAgICAgICAgICAgICAgbGV0IHRhciA9IGFyZWFzLmdldCh0YXJnZXRzW2pdKTtcbiAgICAgICAgICAgICAgICBsZXQgZWxlbSA9IG1hdHJpeC5nZXRfc2xuKHRhciwgc3JjKTtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbS5zb3VyY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbWlzc2luZyBlbGVtIGlzJywgZWxlbSwgc3JjLCB0YXIsIHNvdXJjZXNbaV0sIHRhcmdldHNbal0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZWxlbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7c291cmNlOiBzcmMsIHRhcmdldDogdGFyLCB6OiAwfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW07XG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICBpZiAoZWxlbS52YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7c291cmNlOiBlbGVtLnNvdXJjZSwgdGFyZ2V0OiBlbGVtLnRhcmdldCwgejogZWxlbS52YWx1ZX07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtzb3VyY2U6IHRoYXQuX2FyZWFzLmJ5SWRbc291cmNlc1tpXV0sIHRhcmdldDogdGhhdC5fYXJlYXMuYnlJZFt0YXJnZXRzW2pdXSwgejogMH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCByb3cgPSBzdmcuc2VsZWN0QWxsKFwiLnJvd1wiKVxuICAgICAgICAgICAgLmRhdGEobSlcbiAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJyb3dcIilcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgICAgICAgICBsZXQgb2Zmc2V0X3kgPSB5KGRbMF0uc291cmNlLmlkKTtcbiAgICAgICAgICAgICAgICBpZiAob2Zmc2V0X3kgIT09IE5hTikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoMCxcIiArIG9mZnNldF95ICsgXCIpXCI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25vdCBmb3VuZCBpbiB0YWJsZScsIGRbMF0uc291cmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVhY2gobWFrZV9yb3cpO1xuXG5cbiAgICAgICAgdGhhdC5tYXRyaXhSb3cgPSByb3c7XG4gICAgICAgIC8qXG4gICAgICAgIHJvdy5hcHBlbmQoXCJsaW5lXCIpXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ3Jvdy0nICsgZFswXS5zb3VyY2UuaWQsIHRydWUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmF0dHIoXCJ4MlwiLCB3aWR0aC1tYXJnaW4ubGVmdC0xKTtcbiAgICAgICAgKi9cbiAgICAgICAgbGV0IGxhYmVsX3JvdyA9IHJvdy5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgLTYpXG4gICAgICAgICAgICAuYXR0cihcInlcIiwgeC5iYW5kd2lkdGgoKSAvIDIpXG4gICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLjNlbVwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBcImVuZFwiKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xhYmVsLXJvdycpXG4gICAgICAgICAgICAudGV4dChmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRbMF0uc291cmNlLmFiYnJldjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ3Jvdy0nICsgZFswXS5zb3VyY2UuaWQsIHRydWUpO1xuICAgICAgICAgICAgICAgIC8vZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ2NvbHVtbi0nICsgZC50YXJnZXQsIHRydWUpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICByb3cuYXBwZW5kKCdsaW5lJylcbiAgICAgICAgICAgIC5hdHRyKCd4MicsIHdpZHRoKVxuICAgICAgICAgICAgLmF0dHIoJ3kxJywgeC5iYW5kd2lkdGgoKSAvIDIgKyAxKVxuICAgICAgICAgICAgLmF0dHIoJ3kyJywgeC5iYW5kd2lkdGgoKSAvIDIgKyAxKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2Nyb3NzaGFpcicpXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ3Jvdy0nICsgZFswXS5zb3VyY2UuaWQsIHRydWUpO1xuICAgICAgICAgICAgICAgIC8vZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ2NvbHVtbi0nICsgZC50YXJnZXQsIHRydWUpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB2YXIgbGFiZWxfY29sdW1uID0gc3ZnLnNlbGVjdEFsbCgnZy5jb2x1bW4nKVxuICAgICAgICAgICAgLmRhdGEodGFyZ2V0cylcbiAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgIC5jbGFzc2VkKCdjb2x1bW4nLCAgdHJ1ZSlcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyB4KGQpICsgXCIpcm90YXRlKC05MClcIjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAvKlxuICAgICAgICBsYWJlbF9jb2x1bW4uYXBwZW5kKFwibGluZVwiKVxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdjb2x1bW4tJyArIGQsIHRydWUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmF0dHIoXCJ4MVwiLCAtKGhlaWdodCAtIG1hcmdpbi50b3AgLSAxKSk7XG4gICAgICAgICovXG4gICAgICAgIGxhYmVsX2NvbHVtbi5hcHBlbmQoJ2xpbmUnKVxuICAgICAgICAgICAgLmF0dHIoJ3gxJywgLShoZWlnaHQpKVxuICAgICAgICAgICAgLmF0dHIoJ3kxJywgeC5iYW5kd2lkdGgoKSAvIDIgKyAxKVxuICAgICAgICAgICAgLmF0dHIoJ3kyJywgeC5iYW5kd2lkdGgoKSAvIDIgKyAxKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2Nyb3NzaGFpcicpXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ2NvbHVtbi0nICsgZCwgdHJ1ZSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGxhYmVsX2NvbHVtbi5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgNilcbiAgICAgICAgICAgIC5hdHRyKFwieVwiLCB5LmJhbmR3aWR0aCgpIC8gMilcbiAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuM2VtXCIpXG4gICAgICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwic3RhcnRcIilcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYWJlbC1jb2x1bW4nKVxuICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgIGxldCBhcmVhID0gYXJlYXMuZ2V0KGQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhcmVhLmFiYnJldjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgLy9kMy5zZWxlY3QodGhpcykuY2xhc3NlZCgncm93LScgKyBkLnNvdXJjZSwgdHJ1ZSlcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnY29sdW1uLScgKyBkLCB0cnVlKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhhdC5tYXRyaXhDb2x1bW4gPSBsYWJlbF9jb2x1bW47XG4gICAgICAgIGZ1bmN0aW9uIG1ha2Vfcm93KHJvdykge1xuICAgICAgICAgICAgbGV0IHIgPSBkMy5zZWxlY3QodGhpcyk7XG4gICAgICAgICAgICByLmNsYXNzZWQoJ3Jvdy0nICsgcm93WzBdLnNvdXJjZS5pZCwgdHJ1ZSk7XG4gICAgICAgICAgICBsZXQgY2VsbCA9IHIuc2VsZWN0QWxsKCcuY2VsbCcpXG4gICAgICAgICAgICAvLy5kYXRhKHJvdy5maWx0ZXIoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC56ID4gMDsgfSkpXG4gICAgICAgICAgICAgICAgLmRhdGEocm93KVxuICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZChcInJlY3RcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiY2VsbFwiKVxuICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdwb2ludGVyJywgdHJ1ZSlcbiAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdyb3ctJyArIGQuc291cmNlLmlkLCB0cnVlKVxuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnY29sdW1uLScgKyBkLnRhcmdldC5pZCwgdHJ1ZSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB4KGQudGFyZ2V0LmlkKSArIDE7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cihcInlcIiwgMSlcbiAgICAgICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHguYmFuZHdpZHRoKCkgLSAxKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIHkuYmFuZHdpZHRoKCkgLSAxKVxuICAgICAgICAgICAgICAgIC5zdHlsZShcImZpbGwtb3BhY2l0eVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnNsbiA+PSAwID8gMSA6IDE7IH0pXG5cbiAgICAgICAgICAgICAgICAuc3R5bGUoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGQuc2xuX25vdGRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAndXJsKFwiI2RpYWdvbmFsSGF0Y2hcIiknO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQuc291cmNlLmlkID09PSBkLnRhcmdldC5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmV0dXJuICd1cmwoXCIjZGlhZ29uYWxIYXRjaFwiKSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdyZ2JhKDAsIDkwLCAyMCwgMC43KSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLnNsbiA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xvckZ1bmN0aW9uKGQuc2xuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyNmOWY5ZjknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAuYXR0cignZGF0YS16JywgZCA9PiBkLnNsbilcbiAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24obikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYXJlYSA9IHRoYXQuX2FyZWFzLmJ5SWRbbi50YXJnZXQuaWRdO1xuICAgICAgICAgICAgICAgICAgICBBY3Rpb25zLnBpY2tUYXJnZXRBcmVhKGFyZWEpO1xuICAgICAgICAgICAgICAgICAgICBBY3Rpb25zLm5vZGVEZXRhaWwoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24obikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGhpc18gPSBkMy5zZWxlY3QodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLnJvdy0nICsgbi5zb3VyY2UuaWQpLmNsYXNzZWQoJ2hpZ2hsaWdodCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5jb2x1bW4tJyArIG4udGFyZ2V0LmlkKS5jbGFzc2VkKCdoaWdobGlnaHQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuc3RhdGUuaGlkZU1pc3NpbmdTb3VyY2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJ3JlY3Qucm93LScgKyBuLnRhcmdldC5pZCArICcuY29sdW1uLScgKyBuLnNvdXJjZS5pZCkuc3R5bGUoJ3N0cm9rZScsICcjMDAwMDAwJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gaGlnaGxpZ2h0XG4gICAgICAgICAgICAgICAgICAgIHRoaXNfLnN0eWxlKCdzdHJva2UnLCAnIzAwMDAwMCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnNob3dUb29sdGlwKHt0YXJnZXRfYXJlYTogbi50YXJnZXQsIHNvdXJjZV9hcmVhOiBuLnNvdXJjZX0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRoaXNfID0gZDMuc2VsZWN0KHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5yb3ctJyArIG4uc291cmNlLmlkKS5jbGFzc2VkKCdoaWdobGlnaHQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbHVtbi0nICsgbi50YXJnZXQuaWQpLmNsYXNzZWQoJ2hpZ2hsaWdodCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpc18uc3R5bGUoJ3N0cm9rZScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LnN0YXRlLmhpZGVNaXNzaW5nU291cmNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCdyZWN0LnJvdy0nICsgbi50YXJnZXQuaWQgKyAnLmNvbHVtbi0nICsgbi5zb3VyY2UuaWQpLnN0eWxlKCdzdHJva2UnLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vZDMuc2VsZWN0QWxsKCdsaW5lLnJvdy0nICsgKG4uc291cmNlICsgMSkpLmNsYXNzZWQoJ2hpZ2hsaWdodCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgLy9kMy5zZWxlY3RBbGwoJ2xpbmUuY29sdW1uLScgKyAobi50YXJnZXQgKyAxKSkuY2xhc3NlZCgnaGlnaGxpZ2h0JywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmhpZGVUb29sdGlwKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vLm9uKFwibW91c2VvdmVyXCIsIG1vdXNlb3ZlcilcbiAgICAgICAgICAgIC8vLm9uKFwibW91c2VvdXRcIiwgbW91c2VvdXQpO1xuICAgICAgICB9XG4gICAgICAgIC8qIGxhc3RseSB0aGUgdGl0bGUgLyBjYXB0aW9uIGZvciBheGlzICovXG5cbiAgICAgICAgc3ZnLmFwcGVuZChcInRleHRcIilcbiAgICAgICAgICAgIC5hdHRyKFwieFwiLCAwKVxuICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIDApXG4gICAgICAgICAgICAuYXR0cihcImR5XCIsIFwiLTRlbVwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2NhcHRpb24tc291cmNlJylcbiAgICAgICAgICAgIC50ZXh0KCdTb3VyY2UgQXJlYScpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCAndHJhbnNsYXRlKDAgJyArICgoaGVpZ2h0IC8gMikgKyBtYXJnaW4udG9wKSArICcpIHJvdGF0ZSgtOTApJyk7XG4gICAgICAgIHN2Zy5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAuYXR0cihcInhcIiwgd2lkdGggLyAyKVxuICAgICAgICAgICAgLmF0dHIoXCJ5XCIsIC02MClcbiAgICAgICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuM2VtXCIpXG4gICAgICAgICAgICAuYXR0cihcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnY2FwdGlvbi10YXJnZXQnKVxuICAgICAgICAgICAgLnRleHQoJ1RhcmdldCBBcmVhJyk7XG4gICAgICAgIHRoaXMucmVvcmRlcih0aGlzLnN0YXRlLm9yZGVyKTtcbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIEFwcFN0b3JlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKHRoaXMuaGFuZGxlQ2hhbmdlKTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKCkge1xuICAgICAgICBpZiAoQXBwU3RvcmUuZ2V0Tm9kZVBpY2tlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBub2RlUGlja2VkOiBBcHBTdG9yZS5nZXROb2RlUGlja2VkKCksXG4gICAgICAgICAgICAgICAgZGF0YU92ZXJsYXk6IEFwcFN0b3JlLmdldERhdGFPdmVybGF5KCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGRhdGFPdmVybGF5OiBBcHBTdG9yZS5nZXREYXRhT3ZlcmxheSgpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBldmVyeSBhamF4IHJlcXVlc3QgY29tcGxldGVcbiAgICAgKiB3aGVuIGFsbCBwZW5kaW5nIGFqYXggY29tcGxldGVzLlxuICAgICAqIE1hcmsgYWpheERvbmUgYXMgdHJ1ZSB0byBwcmV2ZW50IGFjY2lkZW50YWwgbXVsdGlwbGUgdHJpZ2dlciBvZlxuICAgICAqIGluaXRpYWxEcmF3ICh0aG91Z2ggbm90IG5lY2Vzc2FyeSBJIGd1ZXNzKVxuICAgICAqIEByZXR1cm5cbiAgICAgKi9cbiAgICBhamF4UHJvZ3Jlc3MoKSB7IGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ0FqYXgubGVuZ3RoID09IDAgJiYgIXRoaXMuc3RhdGUuYWpheERvbmUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2FqYXhEb25lOiB0cnVlfSwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucHJlcGFyZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbERyYXcoKTtcbiAgICAgICAgICAgICAgICBsZXQgc2VhcmNoID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICAgICAgaWYgKHNlYXJjaCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcXVlcnkgPSBKU09OLnBhcnNlKCd7XCInICsgZGVjb2RlVVJJKHNlYXJjaCkucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpLnJlcGxhY2UoLyYvZywgJ1wiLFwiJykucmVwbGFjZSgvPS9nLCdcIjpcIicpICsgJ1wifScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocXVlcnkucGlja0FyZWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoaWdobGlnaHRfYXJlYSA9IHRoaXMuX2FyZWFzLmJ5QWJicmV2W3F1ZXJ5LnBpY2tBcmVhXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLnJvdy0nICsgaGlnaGxpZ2h0X2FyZWEuc2VyaWFsKS5jbGFzc2VkKCdoaWdobGlnaHQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChxdWVyeS5waWNrSW5qZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5qID0gdGhpcy5zdGF0aWNfaW5qW3F1ZXJ5LnBpY2tJbmplY3Rpb25dO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9sZXQgaW5qZWN0aW9ucyA9IF8uZmlsdGVyKHRoYXQuc3RhdGljX2luaiwge2FiYnJldjogYXJlYS5hYmJyZXZ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhcmVhID0gdGhhdC5fYXJlYXMuYnlBYmJyZXZbaW5qLmFiYnJldl07XG4gICAgICAgICAgICAgICAgICAgICAgICBBY3Rpb25zLnBpY2tUYXJnZXRBcmVhKGFyZWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9sZXQgaW5qZWN0aW9ucyA9IF8uZmlsdGVyKHRoYXQuc3RhdGljX2luaiwge2FiYnJldjogYXJlYS5hYmJyZXZ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vQWN0aW9ucy5ub2RlRGV0YWlsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBBY3Rpb25zLmV4cGFuZEluamVjdGlvbihpbmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sdW1uLScgKyBhcmVhLmlkKS5jbGFzc2VkKCdoaWdobGlnaHQnLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHByZXBhcmUoKSB7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgLy9sZXQgYWJicmV2X2xvb2t1cCA9IHt9O1xuICAgICAgICBBY3Rpb25zLnByb2Nlc3NDb25uZWN0aXZpdHkodGhpcy5fY29ubmVjdGl2aXR5X2RhdGEsIHRoYXQuc3RhdGljX2luaik7XG4gICAgICAgIF8uZWFjaCh0aGlzLmF0bGFzX3N0cnVjdCwgKGFyZWEpID0+IHtcbiAgICAgICAgICAgIGxldCBfYXJlYSA9IHRoaXMuX2FyZWFzLmJ5QWJicmV2W2FyZWEuYWJicmV2XTtcbiAgICAgICAgICAgIF8uYXNzaWduKF9hcmVhLCBhcmVhKTtcbiAgICAgICAgICAgIHRoaXMuX2FyZWFzLmJ5SWRbX2FyZWEuaWRdID0gX2FyZWE7XG4gICAgICAgICAgICBsZXQgaW5qZWN0aW9ucyA9IF8uZmlsdGVyKHRoYXQuc3RhdGljX2luaiwge2FiYnJldjogYXJlYS5hYmJyZXZ9KTtcbiAgICAgICAgICAgIF9hcmVhLmluamVjdGlvbnMgPSBpbmplY3Rpb25zO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IG1hdHJpeCA9IHRoYXQuX21hdHJpeDtcbiAgICAgICAgXy5lYWNoKHRoaXMubGlua3MsIChsaW5rKSA9PiB7XG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gdGhhdC5fYXJlYXMuYnlJbmRleFtsaW5rLnRhcmdldF07XG4gICAgICAgICAgICBsZXQgc291cmNlID0gdGhhdC5fYXJlYXMuYnlJbmRleFtsaW5rLnNvdXJjZV07XG4gICAgICAgICAgICBtYXRyaXgubGluayh0YXJnZXQsIHNvdXJjZSwge3RhcmdldDogdGFyZ2V0LCBzb3VyY2U6IHNvdXJjZSwgdmFsdWU6IGxpbmsudmFsdWV9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIEFwcERpc3BhdGNoZXIucmVnaXN0ZXIoYWN0aW9uID0+IHtcbiAgICAgICAgICAgIEFwcERpc3BhdGNoZXIud2FpdEZvcihbQXBwU3RvcmUuZGlzcGF0Y2hUb2tlbl0pO1xuICAgICAgICAgICAgc3dpdGNoIChhY3Rpb24uYWN0aW9uVHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ0hJR0hMSUdIVF9FREdFJzoge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZnJvbV8gPSBhY3Rpb24uZnJvbV87XG4gICAgICAgICAgICAgICAgICAgIGxldCB0byA9IGFjdGlvbi50bztcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNvdXJjZV9pZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmcm9tXyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9pZCA9IHRoYXQuX2FyZWFzLmJ5QWJicmV2W2Zyb21fXS5pZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZV9pZCA9IGZyb21fLmlkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRfaWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdG8gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRfaWQgPSB0aGF0Ll9hcmVhcy5ieUFiYnJldlt0b10uaWQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRfaWQgPSB0by5pZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5yb3ctJyArIHNvdXJjZV9pZCkuY2xhc3NlZCgnaGlnaGxpZ2h0JywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmNvbHVtbi0nICsgdGFyZ2V0X2lkKS5jbGFzc2VkKCdoaWdobGlnaHQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzXy5zdHlsZSgnc3Ryb2tlJywgJyM1NTU1NTUnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhc2UgJ1VOSElHSExJR0hUX0VER0UnOiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmcm9tXyA9IGFjdGlvbi5mcm9tXztcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRvID0gYWN0aW9uLnRvO1xuICAgICAgICAgICAgICAgICAgICBsZXQgc291cmNlX2lkID0gZnJvbV8uaWQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRfaWQgPSB0by5pZDtcbiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcucm93LScgKyBzb3VyY2VfaWQpLmNsYXNzZWQoJ2hpZ2hsaWdodCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcuY29sdW1uLScgKyB0YXJnZXRfaWQpLmNsYXNzZWQoJ2hpZ2hsaWdodCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgLy9kMy5zZWxlY3RBbGwoJ3JlY3Qucm93LScgKyBzb3VyY2VfaWQgKyAnLmNvbHVtbi0nICsgdGFyZ2V0X2lkKS5zdHlsZSgnc3Ryb2tlJywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgQWN0aW9ucy5zYXZlQXJlYXModGhpcy5fYXJlYXMpO1xuICAgICAgICAvKiB3b3JrIG91dCB0aGUgc29ydGluZyBvcHRpb25zICovXG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZU9yZGVyKGUpIHtcbiAgICAgICAgLy8ganVzdCBiZSBzYWZlLCBpdCBzaG91bGRuJ3QgYmUgZmFsc2VcbiAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlICE9IHRoaXMuc3RhdGUub3JkZXIpIHtcbiAgICAgICAgICAgIHRoaXMucmVvcmRlcihlLnRhcmdldC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7b3JkZXI6IGUudGFyZ2V0LnZhbHVlfSk7XG4gICAgfVxuICAgIGhhbmRsZUZvY3VzVmlld2VyKGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBmb2N1c2VkOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbEV4cGFuZGVkOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdmb2N1c2VkJyk7XG4gICAgICAgIEFjdGlvbnMuc2V0Rm9jdXNlZFZpZXdTdGF0ZSh0cnVlKTtcbiAgICB9XG4gICAgaGFuZGxlQmx1clZpZXdlcihlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZm9jdXNlZDogZmFsc2UsXG4gICAgICAgICAgICBjb250cm9sRXhwYW5kZWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgICBBY3Rpb25zLnNldEZvY3VzZWRWaWV3U3RhdGUoZmFsc2UpO1xuICAgIH1cbiAgICByZW9yZGVyKG9yZGVyKSB7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgbGV0IHkgPSB0aGlzLnNjYWxlWTtcbiAgICAgICAgbGV0IHggPSB0aGlzLnNjYWxlWDtcbiAgICAgICAgbGV0IHNvdXJjZXMgPSBfLm1hcChfLmtleXModGhpcy5fbWF0cml4LnNvdXJjZXMpLCB2ID0+IHBhcnNlSW50KHYsIDEwKSk7XG4gICAgICAgIGxldCB0YXJnZXRzID0gXy5tYXAoXy5rZXlzKHRoaXMuX21hdHJpeC50YXJnZXRzKSwgdiA9PiBwYXJzZUludCh2LCAxMCkpO1xuICAgICAgICBsZXQgbmV3WSA9IF8ubWFwKHRoYXQuc29ydE9wdGlvbnNbb3JkZXJdLmF4aXNTb3VyY2VzLCB2ID0+IHRoYXQuX2FyZWFzLmJ5QWJicmV2W3ZdLmlkKTtcbiAgICAgICAgbGV0IG5ld1ggPSBfLm1hcCh0aGF0LnNvcnRPcHRpb25zW29yZGVyXS5heGlzVGFyZ2V0cywgdiA9PiB0aGF0Ll9hcmVhcy5ieUFiYnJldlt2XS5pZCk7XG4gICAgICAgIG5ld1kgPSBfLmludGVyc2VjdGlvbihuZXdZLCBzb3VyY2VzKTtcbiAgICAgICAgbmV3WCA9IF8uaW50ZXJzZWN0aW9uKG5ld1gsIHRhcmdldHMpO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5oaWRlTWlzc2luZ1NvdXJjZXMpIHtcbiAgICAgICAgICAgIG5ld1kgPSBfLmludGVyc2VjdGlvbihuZXdZLCBuZXdYKTtcbiAgICAgICAgfVxuICAgICAgICB5LmRvbWFpbihuZXdZKTtcbiAgICAgICAgeC5kb21haW4obmV3WCk7XG5cbiAgICAgICAgbGV0IGhlaWdodCA9IDEzICogbmV3WS5sZW5ndGg7XG4gICAgICAgIHRoYXQuc3ZnVGFnLmF0dHIoJ2hlaWdodCcsIGhlaWdodCArIHRoYXQuc3ZnTWFyZ2luLnRvcCArIDIpO1xuICAgICAgICBsZXQgcmFuZ2UgPSBbMCwgaGVpZ2h0XTtcbiAgICAgICAgeS5yYW5nZShyYW5nZSk7XG5cbiAgICAgICAgbGV0IHdpZHRoID0gMTMgKiBuZXdYLmxlbmd0aDtcbiAgICAgICAgdGhhdC5zdmdUYWcuYXR0cignd2lkdGgnLCB3aWR0aCArIHRoYXQuc3ZnTWFyZ2luLmxlZnQgKyAyKTtcbiAgICAgICAgcmFuZ2UgPSBbMCwgd2lkdGhdO1xuICAgICAgICB4LnJhbmdlKHJhbmdlKTtcblxuICAgICAgICB0aGF0Lm1hdHJpeFJvd1xuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgIGxldCBvZmZzZXRfeSA9IHkoZFswXS5zb3VyY2UuaWQpO1xuICAgICAgICAgICAgICAgIGlmIChvZmZzZXRfeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vcmV0dXJuIFwidHJhbnNsYXRlKDAsXCIgKyB5KGkpICsgXCIpXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZSgwLFwiICsgb2Zmc2V0X3kgKyBcIilcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoLTY1NTM1LCAtNjU1MzUpXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB0aGF0Lm1hdHJpeFJvdy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLnNlbGVjdEFsbCgncmVjdCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHgoZC50YXJnZXQuaWQpICsgMTtcbiAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgIH0pO1xuICAgICAgICB0aGF0Lm1hdHJpeENvbHVtblxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIHgoZCkgKyBcIilyb3RhdGUoLTkwKVwiO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoYXQuc3ZnVGFnLnNlbGVjdEFsbCgnLmNhcHRpb24tc291cmNlJylcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsICd0cmFuc2xhdGUoMCAnICsgKChoZWlnaHQpLyAyKSArICcpIHJvdGF0ZSgtOTApJyk7XG4gICAgICAgIHRoYXQuc3ZnVGFnLnNlbGVjdEFsbCgnLmJhY2tncm91bmQnKVxuICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgd2lkdGggLSAxKVxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGhlaWdodCAtIDEpO1xuICAgICAgICB0aGF0LnN2Z1RhZy5zZWxlY3RBbGwoJ3JlY3QubWFpbi1ncmFwaC1ib3JkZXInKVxuICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgd2lkdGggKyAxKVxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGhlaWdodCArIDEpO1xuXG4gICAgfVxuICAgIGhhbmRsZVRvZ2dsZU1pc3NpbmdTb3VyY2VzKGUpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBlLnRhcmdldC50eXBlID09PSAnY2hlY2tib3gnID8gZS50YXJnZXQuY2hlY2tlZCA6IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtoaWRlTWlzc2luZ1NvdXJjZXM6IHZhbHVlfSwgKCkgPT4gdGhpcy5yZW9yZGVyKHRoaXMuc3RhdGUub3JkZXIpKTtcbiAgICB9XG4gICAgaGFuZGxlU3dpdGNoVG9HcmFwaFZpZXcoZSkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvZ3JhcGguaHRtbCc7XG4gICAgfVxuICAgIGhhbmRsZU1vZGFsSGlkZShlKSB7XG4gICAgfVxuICAgIGhhbmRsZVFMQ29ubmVjdGl2aXR5VHh0KGUpIHtcbiAgICAgICAgdGhpcy5tb2RhbC5zaG93KCk7XG4gICAgfVxuICAgIGhhbmRsZVRvZ2dsZUV4cGFuZChlKSB7XG4gICAgICAgIGxldCBzdGF0ZSA9ICF0aGlzLnN0YXRlLmNvbnRyb2xFeHBhbmRlZDtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y29udHJvbEV4cGFuZGVkOiBzdGF0ZX0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAgICovXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgZnVuYyA9IGdldEJsdWVDb2xvckZ1bmMoKTtcbiAgICAgICAgLyogdGVtcG9yYXJ5IGNvZGUgdG8gZHVtcCBjb2xvciBjaGFydFxuICAgICAgICBmdW5jdGlvbiByZ2IyaGV4KHJnYil7XG4gICAgICAgICByZ2IgPSByZ2IubWF0Y2goL15yZ2JhP1tcXHMrXT9cXChbXFxzK10/KFxcZCspW1xccytdPyxbXFxzK10/KFxcZCspW1xccytdPyxbXFxzK10/KFxcZCspW1xccytdPy9pKTtcbiAgICAgICAgIHJldHVybiAocmdiICYmIHJnYi5sZW5ndGggPT09IDQpID8gXCIjXCIgK1xuICAgICAgICAgIChcIjBcIiArIHBhcnNlSW50KHJnYlsxXSwxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMikgK1xuICAgICAgICAgIChcIjBcIiArIHBhcnNlSW50KHJnYlsyXSwxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMikgK1xuICAgICAgICAgIChcIjBcIiArIHBhcnNlSW50KHJnYlszXSwxMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtMikgOiAnJztcbiAgICAgICAgfVxuICAgICAgICBfLmVhY2goXy5yYW5nZSgwLCAtNi4yNSwgLTAuMjUpLCB2ID0+IHtcbiAgICAgICAgICAgIGxldCBWID0gTWF0aC5wb3coMTAsIHYpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJzx0cj48dGQ+JyArIHYgKyAnPC90ZD48dGQgc3R5bGU9XCJjb2xvcjogJyArIGZ1bmMoVikgKyAnXCI+JyArIHJnYjJoZXgoZnVuYyhWKSkgKyAnPC90ZD48dGQgc3R5bGU9XCJjb2xvcjogJyArIGZ1bmMoVikgKyAnXCI+JyArIGZ1bmMoVikgKyAnPC90ZD48L3RyPicpO1xuICAgICAgICB9KTtcbiAgICAgICAgKi9cbiAgICAgICAgbGV0IG1vZGFsU3R5bGUgPSB7XG4gICAgICAgICAgICB3aWR0aDogJzgwJScsXG4gICAgICAgICAgICBtYXhXaWR0aDogJzEyMDBweCcsXG4gICAgICAgICAgICBzY3JvbGxYOiAnYXV0bycsXG4gICAgICAgICAgICBvdmVyZmxvdzogJ3Njcm9sbCcsXG4gICAgICAgICAgICBtYXhIZWlnaHQ6ICcxMDAlJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBhcmVhX25hbWUgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5ub2RlUGlja2VkKSB7XG4gICAgICAgICAgICBhcmVhX25hbWUgPSB0b1RpdGxlQ2FzZSh0aGlzLnN0YXRlLm5vZGVQaWNrZWQuZnVsbG5hbWUpICsgJyAoJyArIHRoaXMuc3RhdGUubm9kZVBpY2tlZC5hYmJyZXYgKyAnKSc7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRvd25sb2FkX3N2ZyA9IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGluay1idXR0b25cIj48YSBvbkNsaWNrPXt0aGlzLmhhbmRsZURvd25sb2FkR3JhcGh9IGRvd25sb2FkPVwiZXhwb3J0X2ZsYXRtYXBfZ3JhcGguc3ZnXCI+RG93bmxvYWQgdGhlIGdyYXBoIGFzIFNWRzwvYT48L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBudWxsO1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuYWpheERvbmUpIHtcbiAgICAgICAgICAgIGNvbnRlbnQgPSAoXG4gICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwibWFpblwiPlxuICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJzd2l0Y2gtdmlld1wiPlxuICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cImdyYXBoXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJncmFwaC1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRpbmcgbWF0cml4LXZpZXdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRpbmctaW1hZ2VcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIvc3RhdGljL2ltYWdlcy9sb2FkaW5nLnN2Z1wiIHdpZHRoPVwiMTIwXCIgaGVpZ2h0PVwiMTIwXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRpbmctaW1hZ2UtY2FwdGlvblwiPkxvYWRpbmcgYWRkaXRpb25hbCBkYXRhLCBwbGVhc2UgYmUgcGF0aWVudC4uLjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwiaW5mby1wYW5lbFwiPjwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgc291cmNlcyA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5ub2RlUGlja2VkKSB7XG4gICAgICAgICAgICAgICAgc291cmNlcyA9ICcsICcgKyB0aGlzLnN0cmVuZ3RoX2FyZWFfY291bnQgKyAnIHNvdXJjZXMuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vdGhpcy5zb3J0T3B0aW9ucyA9IF8uc29ydEJ5KHRoaXMuc29ydE9wdGlvbnMsICdpbmRleCcpO1xuICAgICAgICAgICAgbGV0IHNvcnRPcHRpb25zID0gXy5tYXAodGhpcy5zb3J0T3B0aW9ucywgKHYsIGspID0+IHtcbiAgICAgICAgICAgICAgICB2LmtleSA9IGs7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHY7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNvcnRPcHRpb25zID0gXy5zb3J0Qnkoc29ydE9wdGlvbnMsICdpbmRleCcpO1xuICAgICAgICAgICAgbGV0IG9wdGlvbnMgPSBfLm1hcChzb3J0T3B0aW9ucywgKG9wdCkgPT4gKDxvcHRpb24gdmFsdWU9e29wdC5rZXl9IGtleT17b3B0LmtleX0+e29wdC5kaXNwbGF5fTwvb3B0aW9uPikpO1xuXG4gICAgICAgICAgICBjb250ZW50ID0gKFxuICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cIm1haW5cIj5cbiAgICAgICAgICAgICAgICAgICAgPFZpZXdTd2l0Y2ggdmlldz1cIlNMTlwiIC8+XG4gICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cIm1hdHJpeFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gaWQ9XCJncmFwaC1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBpZD1cImQzX2NvbnRyb2xcIiBjbGFzc05hbWU9XCJkMy1jb250cm9sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKFsnZm9sZGFibGUtY29udHJvbCcsICd0aGluLWNvbnRyb2wnXSwge2V4cGFuZGVkOiB0aGlzLnN0YXRlLmNvbnRyb2xFeHBhbmRlZH0sIHtmb2xkZWQ6ICF0aGlzLnN0YXRlLmNvbnRyb2xFeHBhbmRlZH0pfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnJpZWZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmdWxsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250cm9sLXJvd1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRyb2wtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlRoaXMgdmlldyBwcmVzZW50cyB0aGUgd2VpZ2hlZCBhbmQgZGlyZWN0ZWQgY29ubmVjdGl2aXR5IG1hdHJpeCBiYXNlZCBvbiB0aGUgcmVzdWx0cyBvZiA8YSBocmVmPVwiaHR0cDovL3d3dy5tYXJtb3NldGJyYWluLm9yZy93aGl0ZXBhcGVyI3RyYWNlcl9pbmplY3Rpb25zXCIgdGFyZ2V0PVwiX2JsYW5rXCI+aW5qZWN0aW9ucyBvZiBtb25vc3luYXB0aWMgcmV0cm9ncmFkZSBmbHVvcmVzY2VudCB0cmFjZXJzPC9hPiBpbmplY3Rpb25zLjwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlRoZSByb3dzIGFuZCBjb2x1bW5zIG9mIHRoZSBtYXRyaXggcmVwcmVzZW50IGluZGl2aWR1YWwgY29ydGljYWwgYXJlYXMuIFRoZSA8aT5UYXJnZXRzPC9pPiBhcmUgdGhlIGluamVjdGVkIGFyZWFzIHdoaWxlIHRoZSA8aT5Tb3VyY2VzPC9pPiBpbmRpY2F0ZSB0aGUgYXJlYXMgaW4gd2hpY2ggdGhlIHByb2plY3Rpb25zIG9yaWdpbmF0ZS4gVGhlIGludHJpbnNpYyBjb25uZWN0aW9ucyBhcmUgZXhjbHVkZWQgZnJvbSB0aGUgYW5hbHlzaXMuPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250cm9sLXJvdyBsaXN0LWFyZWFzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250cm9sLWdyb3VwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udHJvbC1ncm91cC1oYWxmXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWw+TGlzdCB0aGUgYXJlYXMgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3Qgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlT3JkZXJ9IHZhbHVlPXt0aGlzLnN0YXRlLm9yZGVyfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b3B0aW9uc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250cm9sLWdyb3VwLWhhbGZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJjbGlja2FibGVcIiBodG1sRm9yPVwic3dpdGNoX2VkZ2VfY29tcGxldGVcIj57dGhpcy5zdGF0ZS5oaWRlTWlzc2luZ1NvdXJjZXMgPyAnU3dpdGNoIHRvIHRoZSBmdWxsIG1hdHJpeCcgOiAnU3dpdGNoIHRvIHRoZSBlZGdlLWNvbXBsZXRlIG1hdHJpeCd9PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzc05hbWU9XCJoaWRkZW5cIiBpZD1cInN3aXRjaF9lZGdlX2NvbXBsZXRlXCIgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZD17dGhpcy5zdGF0ZS5oaWRlTWlzc2luZ1NvdXJjZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlVG9nZ2xlTWlzc2luZ1NvdXJjZXN9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gaWQ9XCJkM1wiIGNsYXNzTmFtZT1cImQzXCI+PC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sb3ItYmFyLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Q29sb3JCYXIgc3R5bGU9XCJtYXRyaXhcIiBtb2RlPVwiU0xOXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gaWQ9XCJpbmZvLXBhbmVsXCIgY2xhc3NOYW1lPVwibWF0cml4LXZpZXdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UXVpY2tMaW5rcy8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmplY3Rpb24taW5mb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TWFpbkZsbmUgZmxuZT17dGhpcy5mbG5lX3Blcl9hcmVhfSBhcmVhcz17dGhpcy5fYXJlYXN9IG1vZGU9e3RoaXMuZGF0YU92ZXJsYXl9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbmplY3Rpb25MaXN0IGZsbmU9e3RoaXMuc3RhdGUuZmxuZV9wZXJfaW5qZWN0aW9ufSBtb2RlPXt0aGlzLmRhdGFPdmVybGF5fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGpzL2NvbXBvbmVudHMvU0xOLnJlYWN0LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQVNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQTFCQTs7Ozs7Ozs7O0FBMkJBOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE1RkE7QUE2RkE7QUFDQTs7O0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBOzs7Ozs7O0FBT0E7QUFPQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFPQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQU9BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUUE7QUFPQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBT0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlCQTtBQWdDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBSUE7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQUhBO0FBUUE7QUFUQTtBQUhBO0FBZ0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFEQTtBQURBO0FBUUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFGQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUZBO0FBUEE7QUFEQTtBQVhBO0FBREE7QUErQkE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBakNBO0FBcUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUF0Q0E7QUFGQTtBQWtEQTtBQUNBO0FBQ0E7Ozs7QUFwdEJBO0FBQ0E7QUFEQTtBQXF0QkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 230:
/* unknown exports provided */
/* all exports used */
/*!*********************************!*\
  !*** ./~/boron/modalFactory.js ***!
  \*********************************/
/***/ (function(module, exports, __webpack_require__) {

eval("var React = __webpack_require__(/*! react */ 6);\nvar transitionEvents = __webpack_require__(/*! domkit/transitionEvents */ 236);\nvar appendVendorPrefix = __webpack_require__(/*! domkit/appendVendorPrefix */ 76);\n\nmodule.exports = function(animation){\n\n    return React.createClass({\n        propTypes: {\n            className: React.PropTypes.string,\n            // Close the modal when esc is pressed? Defaults to true.\n            keyboard: React.PropTypes.bool,\n            onShow: React.PropTypes.func,\n            onHide: React.PropTypes.func,\n            animation: React.PropTypes.object,\n            backdrop: React.PropTypes.bool,\n            closeOnClick: React.PropTypes.bool,\n            modalStyle: React.PropTypes.object,\n            backdropStyle: React.PropTypes.object,\n            contentStyle: React.PropTypes.object,\n        },\n\n        getDefaultProps: function() {\n            return {\n                className: \"\",\n                onShow: function(){},\n                onHide: function(){},\n                animation: animation,\n                keyboard: true,\n                backdrop: true,\n                closeOnClick: true,\n                modalStyle: {},\n                backdropStyle: {},\n                contentStyle: {},\n            };\n        },\n\n        getInitialState: function(){\n            return {\n                willHidden: false,\n                hidden: true\n            }\n        },\n\n        hasHidden: function(){\n            return this.state.hidden;\n        },\n\n        addTransitionListener: function(node, handle){\n            if (node) {\n              var endListener = function(e) {\n                  if (e && e.target !== node) {\n                      return;\n                  }\n                  transitionEvents.removeEndEventListener(node, endListener);\n                  handle();\n              };\n              transitionEvents.addEndEventListener(node, endListener);\n            }\n        },\n\n        handleBackdropClick: function() {\n            if (this.props.closeOnClick) {\n                this.hide();\n            }\n        },\n\n        render: function() {\n\n            var hidden = this.hasHidden();\n            if (hidden) return null;\n\n            var willHidden = this.state.willHidden;\n            var animation = this.props.animation;\n            var modalStyle = animation.getModalStyle(willHidden);\n            var backdropStyle = animation.getBackdropStyle(willHidden);\n            var contentStyle = animation.getContentStyle(willHidden);\n            var ref = animation.getRef(willHidden);\n            var sharp = animation.getSharp && animation.getSharp(willHidden);\n\n            // Apply custom style properties\n            if (this.props.modalStyle) {\n                var prefixedModalStyle = appendVendorPrefix(this.props.modalStyle);\n                for (var style in prefixedModalStyle) {\n                    modalStyle[style] = prefixedModalStyle[style];\n                }\n            }\n\n            if (this.props.backdropStyle) {\n              var prefixedBackdropStyle = appendVendorPrefix(this.props.backdropStyle);\n                for (var style in prefixedBackdropStyle) {\n                    backdropStyle[style] = prefixedBackdropStyle[style];\n                }\n            }\n\n            if (this.props.contentStyle) {\n              var prefixedContentStyle = appendVendorPrefix(this.props.contentStyle);\n                for (var style in prefixedContentStyle) {\n                    contentStyle[style] = prefixedContentStyle[style];\n                }\n            }\n\n            var backdrop = this.props.backdrop? React.createElement(\"div\", {style: backdropStyle, onClick: this.props.closeOnClick? this.handleBackdropClick: null}): undefined;\n\n            if(willHidden) {\n                var node = this.refs[ref];\n                this.addTransitionListener(node, this.leave);\n            }\n\n            return (React.createElement(\"span\", null, \n                React.createElement(\"div\", {ref: \"modal\", style: modalStyle, className: this.props.className}, \n                    sharp, \n                    React.createElement(\"div\", {ref: \"content\", tabIndex: \"-1\", style: contentStyle}, \n                        this.props.children\n                    )\n                ), \n                backdrop\n             ))\n            ;\n        },\n\n        leave: function(){\n            this.setState({\n                hidden: true\n            });\n            this.props.onHide();\n        },\n\n        enter: function(){\n            this.props.onShow();\n        },\n\n        show: function(){\n            if (!this.hasHidden()) return;\n\n            this.setState({\n                willHidden: false,\n                hidden: false\n            });\n\n            setTimeout(function(){\n              var ref = this.props.animation.getRef();\n              var node = this.refs[ref];\n              this.addTransitionListener(node, this.enter);\n            }.bind(this), 0);\n        },\n\n        hide: function(){\n            if (this.hasHidden()) return;\n\n            this.setState({\n                willHidden: true\n            });\n        },\n\n        toggle: function(){\n            if (this.hasHidden())\n                this.show();\n            else\n                this.hide();\n        },\n\n        listenKeyboard: function(event) {\n            if (this.props.keyboard &&\n                    (event.key === \"Escape\" ||\n                     event.keyCode === 27)) {\n                this.hide();\n            }\n        },\n\n        componentDidMount: function(){\n            window.addEventListener(\"keydown\", this.listenKeyboard, true);\n        },\n\n        componentWillUnmount: function() {\n            window.removeEventListener(\"keydown\", this.listenKeyboard, true);\n        }\n    });\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9ib3Jvbi9tb2RhbEZhY3RvcnkuanM/ODIwOCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xudmFyIHRyYW5zaXRpb25FdmVudHMgPSByZXF1aXJlKCdkb21raXQvdHJhbnNpdGlvbkV2ZW50cycpO1xudmFyIGFwcGVuZFZlbmRvclByZWZpeCA9IHJlcXVpcmUoJ2RvbWtpdC9hcHBlbmRWZW5kb3JQcmVmaXgnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhbmltYXRpb24pe1xuXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUNsYXNzKHtcbiAgICAgICAgcHJvcFR5cGVzOiB7XG4gICAgICAgICAgICBjbGFzc05hbWU6IFJlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgICAgICAgICAvLyBDbG9zZSB0aGUgbW9kYWwgd2hlbiBlc2MgaXMgcHJlc3NlZD8gRGVmYXVsdHMgdG8gdHJ1ZS5cbiAgICAgICAgICAgIGtleWJvYXJkOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcbiAgICAgICAgICAgIG9uU2hvdzogUmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG4gICAgICAgICAgICBvbkhpZGU6IFJlYWN0LlByb3BUeXBlcy5mdW5jLFxuICAgICAgICAgICAgYW5pbWF0aW9uOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LFxuICAgICAgICAgICAgYmFja2Ryb3A6IFJlYWN0LlByb3BUeXBlcy5ib29sLFxuICAgICAgICAgICAgY2xvc2VPbkNsaWNrOiBSZWFjdC5Qcm9wVHlwZXMuYm9vbCxcbiAgICAgICAgICAgIG1vZGFsU3R5bGU6IFJlYWN0LlByb3BUeXBlcy5vYmplY3QsXG4gICAgICAgICAgICBiYWNrZHJvcFN0eWxlOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LFxuICAgICAgICAgICAgY29udGVudFN0eWxlOiBSZWFjdC5Qcm9wVHlwZXMub2JqZWN0LFxuICAgICAgICB9LFxuXG4gICAgICAgIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogXCJcIixcbiAgICAgICAgICAgICAgICBvblNob3c6IGZ1bmN0aW9uKCl7fSxcbiAgICAgICAgICAgICAgICBvbkhpZGU6IGZ1bmN0aW9uKCl7fSxcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IGFuaW1hdGlvbixcbiAgICAgICAgICAgICAgICBrZXlib2FyZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBiYWNrZHJvcDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgICAgICAgICAgbW9kYWxTdHlsZToge30sXG4gICAgICAgICAgICAgICAgYmFja2Ryb3BTdHlsZToge30sXG4gICAgICAgICAgICAgICAgY29udGVudFN0eWxlOiB7fSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB3aWxsSGlkZGVuOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBoaWRkZW46IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBoYXNIaWRkZW46IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5oaWRkZW47XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWRkVHJhbnNpdGlvbkxpc3RlbmVyOiBmdW5jdGlvbihub2RlLCBoYW5kbGUpe1xuICAgICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgICAgdmFyIGVuZExpc3RlbmVyID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgaWYgKGUgJiYgZS50YXJnZXQgIT09IG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uRXZlbnRzLnJlbW92ZUVuZEV2ZW50TGlzdGVuZXIobm9kZSwgZW5kTGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgaGFuZGxlKCk7XG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIHRyYW5zaXRpb25FdmVudHMuYWRkRW5kRXZlbnRMaXN0ZW5lcihub2RlLCBlbmRMaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGFuZGxlQmFja2Ryb3BDbGljazogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5jbG9zZU9uQ2xpY2spIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICB2YXIgaGlkZGVuID0gdGhpcy5oYXNIaWRkZW4oKTtcbiAgICAgICAgICAgIGlmIChoaWRkZW4pIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICB2YXIgd2lsbEhpZGRlbiA9IHRoaXMuc3RhdGUud2lsbEhpZGRlbjtcbiAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSB0aGlzLnByb3BzLmFuaW1hdGlvbjtcbiAgICAgICAgICAgIHZhciBtb2RhbFN0eWxlID0gYW5pbWF0aW9uLmdldE1vZGFsU3R5bGUod2lsbEhpZGRlbik7XG4gICAgICAgICAgICB2YXIgYmFja2Ryb3BTdHlsZSA9IGFuaW1hdGlvbi5nZXRCYWNrZHJvcFN0eWxlKHdpbGxIaWRkZW4pO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRTdHlsZSA9IGFuaW1hdGlvbi5nZXRDb250ZW50U3R5bGUod2lsbEhpZGRlbik7XG4gICAgICAgICAgICB2YXIgcmVmID0gYW5pbWF0aW9uLmdldFJlZih3aWxsSGlkZGVuKTtcbiAgICAgICAgICAgIHZhciBzaGFycCA9IGFuaW1hdGlvbi5nZXRTaGFycCAmJiBhbmltYXRpb24uZ2V0U2hhcnAod2lsbEhpZGRlbik7XG5cbiAgICAgICAgICAgIC8vIEFwcGx5IGN1c3RvbSBzdHlsZSBwcm9wZXJ0aWVzXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5tb2RhbFN0eWxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByZWZpeGVkTW9kYWxTdHlsZSA9IGFwcGVuZFZlbmRvclByZWZpeCh0aGlzLnByb3BzLm1vZGFsU3R5bGUpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHN0eWxlIGluIHByZWZpeGVkTW9kYWxTdHlsZSkge1xuICAgICAgICAgICAgICAgICAgICBtb2RhbFN0eWxlW3N0eWxlXSA9IHByZWZpeGVkTW9kYWxTdHlsZVtzdHlsZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5iYWNrZHJvcFN0eWxlKSB7XG4gICAgICAgICAgICAgIHZhciBwcmVmaXhlZEJhY2tkcm9wU3R5bGUgPSBhcHBlbmRWZW5kb3JQcmVmaXgodGhpcy5wcm9wcy5iYWNrZHJvcFN0eWxlKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzdHlsZSBpbiBwcmVmaXhlZEJhY2tkcm9wU3R5bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2Ryb3BTdHlsZVtzdHlsZV0gPSBwcmVmaXhlZEJhY2tkcm9wU3R5bGVbc3R5bGVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMuY29udGVudFN0eWxlKSB7XG4gICAgICAgICAgICAgIHZhciBwcmVmaXhlZENvbnRlbnRTdHlsZSA9IGFwcGVuZFZlbmRvclByZWZpeCh0aGlzLnByb3BzLmNvbnRlbnRTdHlsZSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc3R5bGUgaW4gcHJlZml4ZWRDb250ZW50U3R5bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFN0eWxlW3N0eWxlXSA9IHByZWZpeGVkQ29udGVudFN0eWxlW3N0eWxlXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBiYWNrZHJvcCA9IHRoaXMucHJvcHMuYmFja2Ryb3A/IFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwge3N0eWxlOiBiYWNrZHJvcFN0eWxlLCBvbkNsaWNrOiB0aGlzLnByb3BzLmNsb3NlT25DbGljaz8gdGhpcy5oYW5kbGVCYWNrZHJvcENsaWNrOiBudWxsfSk6IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgaWYod2lsbEhpZGRlbikge1xuICAgICAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5yZWZzW3JlZl07XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUcmFuc2l0aW9uTGlzdGVuZXIobm9kZSwgdGhpcy5sZWF2ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAoUmVhY3QuY3JlYXRlRWxlbWVudChcInNwYW5cIiwgbnVsbCwgXG4gICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7cmVmOiBcIm1vZGFsXCIsIHN0eWxlOiBtb2RhbFN0eWxlLCBjbGFzc05hbWU6IHRoaXMucHJvcHMuY2xhc3NOYW1lfSwgXG4gICAgICAgICAgICAgICAgICAgIHNoYXJwLCBcbiAgICAgICAgICAgICAgICAgICAgUmVhY3QuY3JlYXRlRWxlbWVudChcImRpdlwiLCB7cmVmOiBcImNvbnRlbnRcIiwgdGFiSW5kZXg6IFwiLTFcIiwgc3R5bGU6IGNvbnRlbnRTdHlsZX0sIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jaGlsZHJlblxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSwgXG4gICAgICAgICAgICAgICAgYmFja2Ryb3BcbiAgICAgICAgICAgICApKVxuICAgICAgICAgICAgO1xuICAgICAgICB9LFxuXG4gICAgICAgIGxlYXZlOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgaGlkZGVuOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25IaWRlKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZW50ZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uU2hvdygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNob3c6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFzSGlkZGVuKCkpIHJldHVybjtcblxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgd2lsbEhpZGRlbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgaGlkZGVuOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgdmFyIHJlZiA9IHRoaXMucHJvcHMuYW5pbWF0aW9uLmdldFJlZigpO1xuICAgICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMucmVmc1tyZWZdO1xuICAgICAgICAgICAgICB0aGlzLmFkZFRyYW5zaXRpb25MaXN0ZW5lcihub2RlLCB0aGlzLmVudGVyKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgMCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGlkZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc0hpZGRlbigpKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIHdpbGxIaWRkZW46IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRvZ2dsZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc0hpZGRlbigpKVxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGxpc3RlbktleWJvYXJkOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMua2V5Ym9hcmQgJiZcbiAgICAgICAgICAgICAgICAgICAgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgZXZlbnQua2V5Q29kZSA9PT0gMjcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5saXN0ZW5LZXlib2FyZCwgdHJ1ZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMubGlzdGVuS2V5Ym9hcmQsIHRydWUpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYm9yb24vbW9kYWxGYWN0b3J5LmpzXG4vLyBtb2R1bGUgaWQgPSAyMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 231:
/* unknown exports provided */
/* all exports used */
/*!**********************************!*\
  !*** ./~/domkit/builtinStyle.js ***!
  \**********************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nmodule.exports = document.createElement('div').style;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9kb21raXQvYnVpbHRpblN0eWxlLmpzP2IwMjAiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLnN0eWxlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2RvbWtpdC9idWlsdGluU3R5bGUuanNcbi8vIG1vZHVsZSBpZCA9IDIzMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 232:
/* unknown exports provided */
/* all exports used */
/*!*************************************!*\
  !*** ./~/domkit/getVendorPrefix.js ***!
  \*************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar cssVendorPrefix;\n\nmodule.exports = function() {\n\n  if (cssVendorPrefix) return cssVendorPrefix;\n\n  var styles = window.getComputedStyle(document.documentElement, '');\n  var pre = (Array.prototype.slice.call(styles).join('').match(/-(moz|webkit|ms)-/) || (styles.OLink === '' && ['', 'o']))[1];\n\n  return cssVendorPrefix = '-' + pre + '-';\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9kb21raXQvZ2V0VmVuZG9yUHJlZml4LmpzPzRjOGQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY3NzVmVuZG9yUHJlZml4O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXG4gIGlmIChjc3NWZW5kb3JQcmVmaXgpIHJldHVybiBjc3NWZW5kb3JQcmVmaXg7XG5cbiAgdmFyIHN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgJycpO1xuICB2YXIgcHJlID0gKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHN0eWxlcykuam9pbignJykubWF0Y2goLy0obW96fHdlYmtpdHxtcyktLykgfHwgKHN0eWxlcy5PTGluayA9PT0gJycgJiYgWycnLCAnbyddKSlbMV07XG5cbiAgcmV0dXJuIGNzc1ZlbmRvclByZWZpeCA9ICctJyArIHByZSArICctJztcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9kb21raXQvZ2V0VmVuZG9yUHJlZml4LmpzXG4vLyBtb2R1bGUgaWQgPSAyMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 233:
/* unknown exports provided */
/* all exports used */
/*!*******************************************!*\
  !*** ./~/domkit/getVendorPropertyName.js ***!
  \*******************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar builtinStyle = __webpack_require__(/*! ./builtinStyle */ 231);\nvar prefixes = ['Moz', 'Webkit', 'O', 'ms'];\nvar domVendorPrefix;\n\n// Helper function to get the proper vendor property name. (transition => WebkitTransition)\nmodule.exports = function(prop, isSupportTest) {\n\n  var vendorProp;\n  if (prop in builtinStyle) return prop;\n\n  var UpperProp = prop.charAt(0).toUpperCase() + prop.substr(1);\n\n  if (domVendorPrefix) {\n\n    vendorProp = domVendorPrefix + UpperProp;\n    if (vendorProp in builtinStyle) {\n      return vendorProp;\n    }\n  } else {\n\n    for (var i = 0; i < prefixes.length; ++i) {\n      vendorProp = prefixes[i] + UpperProp;\n      if (vendorProp in builtinStyle) {\n        domVendorPrefix = prefixes[i];\n        return vendorProp;\n      }\n    }\n  }\n\n  // if support test, not fallback to origin prop name\n  if (!isSupportTest) {\n    return prop;\n  }\n\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9kb21raXQvZ2V0VmVuZG9yUHJvcGVydHlOYW1lLmpzPzBlM2EiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYnVpbHRpblN0eWxlID0gcmVxdWlyZSgnLi9idWlsdGluU3R5bGUnKTtcbnZhciBwcmVmaXhlcyA9IFsnTW96JywgJ1dlYmtpdCcsICdPJywgJ21zJ107XG52YXIgZG9tVmVuZG9yUHJlZml4O1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRoZSBwcm9wZXIgdmVuZG9yIHByb3BlcnR5IG5hbWUuICh0cmFuc2l0aW9uID0+IFdlYmtpdFRyYW5zaXRpb24pXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHByb3AsIGlzU3VwcG9ydFRlc3QpIHtcblxuICB2YXIgdmVuZG9yUHJvcDtcbiAgaWYgKHByb3AgaW4gYnVpbHRpblN0eWxlKSByZXR1cm4gcHJvcDtcblxuICB2YXIgVXBwZXJQcm9wID0gcHJvcC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHByb3Auc3Vic3RyKDEpO1xuXG4gIGlmIChkb21WZW5kb3JQcmVmaXgpIHtcblxuICAgIHZlbmRvclByb3AgPSBkb21WZW5kb3JQcmVmaXggKyBVcHBlclByb3A7XG4gICAgaWYgKHZlbmRvclByb3AgaW4gYnVpbHRpblN0eWxlKSB7XG4gICAgICByZXR1cm4gdmVuZG9yUHJvcDtcbiAgICB9XG4gIH0gZWxzZSB7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByZWZpeGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICB2ZW5kb3JQcm9wID0gcHJlZml4ZXNbaV0gKyBVcHBlclByb3A7XG4gICAgICBpZiAodmVuZG9yUHJvcCBpbiBidWlsdGluU3R5bGUpIHtcbiAgICAgICAgZG9tVmVuZG9yUHJlZml4ID0gcHJlZml4ZXNbaV07XG4gICAgICAgIHJldHVybiB2ZW5kb3JQcm9wO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHN1cHBvcnQgdGVzdCwgbm90IGZhbGxiYWNrIHRvIG9yaWdpbiBwcm9wIG5hbWVcbiAgaWYgKCFpc1N1cHBvcnRUZXN0KSB7XG4gICAgcmV0dXJuIHByb3A7XG4gIH1cblxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2RvbWtpdC9nZXRWZW5kb3JQcm9wZXJ0eU5hbWUuanNcbi8vIG1vZHVsZSBpZCA9IDIzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 234:
/* unknown exports provided */
/* all exports used */
/*!*****************************************!*\
  !*** ./~/domkit/insertKeyframesRule.js ***!
  \*****************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar insertRule = __webpack_require__(/*! ./insertRule */ 235);\nvar vendorPrefix = __webpack_require__(/*! ./getVendorPrefix */ 232)();\nvar index = 0;\n\nmodule.exports = function(keyframes) {\n  // random name\n  var name = 'anim_' + (++index) + (+new Date);\n  var css = \"@\" + vendorPrefix + \"keyframes \" + name + \" {\";\n\n  for (var key in keyframes) {\n    css += key + \" {\";\n\n    for (var property in keyframes[key]) {\n      var part = \":\" + keyframes[key][property] + \";\";\n      // We do vendor prefix for every property\n      css += vendorPrefix + property + part;\n      css += property + part;\n    }\n\n    css += \"}\";\n  }\n\n  css += \"}\";\n\n  insertRule(css);\n\n  return name\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9kb21raXQvaW5zZXJ0S2V5ZnJhbWVzUnVsZS5qcz9iYTNjIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGluc2VydFJ1bGUgPSByZXF1aXJlKCcuL2luc2VydFJ1bGUnKTtcbnZhciB2ZW5kb3JQcmVmaXggPSByZXF1aXJlKCcuL2dldFZlbmRvclByZWZpeCcpKCk7XG52YXIgaW5kZXggPSAwO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGtleWZyYW1lcykge1xuICAvLyByYW5kb20gbmFtZVxuICB2YXIgbmFtZSA9ICdhbmltXycgKyAoKytpbmRleCkgKyAoK25ldyBEYXRlKTtcbiAgdmFyIGNzcyA9IFwiQFwiICsgdmVuZG9yUHJlZml4ICsgXCJrZXlmcmFtZXMgXCIgKyBuYW1lICsgXCIge1wiO1xuXG4gIGZvciAodmFyIGtleSBpbiBrZXlmcmFtZXMpIHtcbiAgICBjc3MgKz0ga2V5ICsgXCIge1wiO1xuXG4gICAgZm9yICh2YXIgcHJvcGVydHkgaW4ga2V5ZnJhbWVzW2tleV0pIHtcbiAgICAgIHZhciBwYXJ0ID0gXCI6XCIgKyBrZXlmcmFtZXNba2V5XVtwcm9wZXJ0eV0gKyBcIjtcIjtcbiAgICAgIC8vIFdlIGRvIHZlbmRvciBwcmVmaXggZm9yIGV2ZXJ5IHByb3BlcnR5XG4gICAgICBjc3MgKz0gdmVuZG9yUHJlZml4ICsgcHJvcGVydHkgKyBwYXJ0O1xuICAgICAgY3NzICs9IHByb3BlcnR5ICsgcGFydDtcbiAgICB9XG5cbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cblxuICBjc3MgKz0gXCJ9XCI7XG5cbiAgaW5zZXJ0UnVsZShjc3MpO1xuXG4gIHJldHVybiBuYW1lXG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZG9ta2l0L2luc2VydEtleWZyYW1lc1J1bGUuanNcbi8vIG1vZHVsZSBpZCA9IDIzNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 235:
/* unknown exports provided */
/* all exports used */
/*!********************************!*\
  !*** ./~/domkit/insertRule.js ***!
  \********************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar extraSheet;\n\nmodule.exports = function(css) {\n\n  if (!extraSheet) {\n    // First time, create an extra stylesheet for adding rules\n    extraSheet = document.createElement('style');\n    document.getElementsByTagName('head')[0].appendChild(extraSheet);\n    // Keep reference to actual StyleSheet object (`styleSheet` for IE < 9)\n    extraSheet = extraSheet.sheet || extraSheet.styleSheet;\n  }\n\n  var index = (extraSheet.cssRules || extraSheet.rules).length;\n  extraSheet.insertRule(css, index);\n\n  return extraSheet;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9kb21raXQvaW5zZXJ0UnVsZS5qcz81NTdmIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGV4dHJhU2hlZXQ7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oY3NzKSB7XG5cbiAgaWYgKCFleHRyYVNoZWV0KSB7XG4gICAgLy8gRmlyc3QgdGltZSwgY3JlYXRlIGFuIGV4dHJhIHN0eWxlc2hlZXQgZm9yIGFkZGluZyBydWxlc1xuICAgIGV4dHJhU2hlZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQoZXh0cmFTaGVldCk7XG4gICAgLy8gS2VlcCByZWZlcmVuY2UgdG8gYWN0dWFsIFN0eWxlU2hlZXQgb2JqZWN0IChgc3R5bGVTaGVldGAgZm9yIElFIDwgOSlcbiAgICBleHRyYVNoZWV0ID0gZXh0cmFTaGVldC5zaGVldCB8fCBleHRyYVNoZWV0LnN0eWxlU2hlZXQ7XG4gIH1cblxuICB2YXIgaW5kZXggPSAoZXh0cmFTaGVldC5jc3NSdWxlcyB8fCBleHRyYVNoZWV0LnJ1bGVzKS5sZW5ndGg7XG4gIGV4dHJhU2hlZXQuaW5zZXJ0UnVsZShjc3MsIGluZGV4KTtcblxuICByZXR1cm4gZXh0cmFTaGVldDtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9kb21raXQvaW5zZXJ0UnVsZS5qc1xuLy8gbW9kdWxlIGlkID0gMjM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 236:
/* unknown exports provided */
/* all exports used */
/*!**************************************!*\
  !*** ./~/domkit/transitionEvents.js ***!
  \**************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n/**\n * EVENT_NAME_MAP is used to determine which event fired when a\n * transition/animation ends, based on the style property used to\n * define that event.\n */\nvar EVENT_NAME_MAP = {\n  transitionend: {\n    'transition': 'transitionend',\n    'WebkitTransition': 'webkitTransitionEnd',\n    'MozTransition': 'mozTransitionEnd',\n    'OTransition': 'oTransitionEnd',\n    'msTransition': 'MSTransitionEnd'\n  },\n\n  animationend: {\n    'animation': 'animationend',\n    'WebkitAnimation': 'webkitAnimationEnd',\n    'MozAnimation': 'mozAnimationEnd',\n    'OAnimation': 'oAnimationEnd',\n    'msAnimation': 'MSAnimationEnd'\n  }\n};\n\nvar endEvents = [];\n\nfunction detectEvents() {\n  var testEl = document.createElement('div');\n  var style = testEl.style;\n\n  // On some platforms, in particular some releases of Android 4.x,\n  // the un-prefixed \"animation\" and \"transition\" properties are defined on the\n  // style object but the events that fire will still be prefixed, so we need\n  // to check if the un-prefixed events are useable, and if not remove them\n  // from the map\n  if (!('AnimationEvent' in window)) {\n    delete EVENT_NAME_MAP.animationend.animation;\n  }\n\n  if (!('TransitionEvent' in window)) {\n    delete EVENT_NAME_MAP.transitionend.transition;\n  }\n\n  for (var baseEventName in EVENT_NAME_MAP) {\n    var baseEvents = EVENT_NAME_MAP[baseEventName];\n    for (var styleName in baseEvents) {\n      if (styleName in style) {\n        endEvents.push(baseEvents[styleName]);\n        break;\n      }\n    }\n  }\n}\n\nif (typeof window !== 'undefined') {\n  detectEvents();\n}\n\n\n// We use the raw {add|remove}EventListener() call because EventListener\n// does not know how to remove event listeners and we really should\n// clean up. Also, these events are not triggered in older browsers\n// so we should be A-OK here.\n\nfunction addEventListener(node, eventName, eventListener) {\n  node.addEventListener(eventName, eventListener, false);\n}\n\nfunction removeEventListener(node, eventName, eventListener) {\n  node.removeEventListener(eventName, eventListener, false);\n}\n\nmodule.exports = {\n  addEndEventListener: function(node, eventListener) {\n    if (endEvents.length === 0) {\n      // If CSS transitions are not supported, trigger an \"end animation\"\n      // event immediately.\n      window.setTimeout(eventListener, 0);\n      return;\n    }\n    endEvents.forEach(function(endEvent) {\n      addEventListener(node, endEvent, eventListener);\n    });\n  },\n\n  removeEndEventListener: function(node, eventListener) {\n    if (endEvents.length === 0) {\n      return;\n    }\n    endEvents.forEach(function(endEvent) {\n      removeEventListener(node, endEvent, eventListener);\n    });\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9kb21raXQvdHJhbnNpdGlvbkV2ZW50cy5qcz80ZjYwIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBFVkVOVF9OQU1FX01BUCBpcyB1c2VkIHRvIGRldGVybWluZSB3aGljaCBldmVudCBmaXJlZCB3aGVuIGFcbiAqIHRyYW5zaXRpb24vYW5pbWF0aW9uIGVuZHMsIGJhc2VkIG9uIHRoZSBzdHlsZSBwcm9wZXJ0eSB1c2VkIHRvXG4gKiBkZWZpbmUgdGhhdCBldmVudC5cbiAqL1xudmFyIEVWRU5UX05BTUVfTUFQID0ge1xuICB0cmFuc2l0aW9uZW5kOiB7XG4gICAgJ3RyYW5zaXRpb24nOiAndHJhbnNpdGlvbmVuZCcsXG4gICAgJ1dlYmtpdFRyYW5zaXRpb24nOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXG4gICAgJ01velRyYW5zaXRpb24nOiAnbW96VHJhbnNpdGlvbkVuZCcsXG4gICAgJ09UcmFuc2l0aW9uJzogJ29UcmFuc2l0aW9uRW5kJyxcbiAgICAnbXNUcmFuc2l0aW9uJzogJ01TVHJhbnNpdGlvbkVuZCdcbiAgfSxcblxuICBhbmltYXRpb25lbmQ6IHtcbiAgICAnYW5pbWF0aW9uJzogJ2FuaW1hdGlvbmVuZCcsXG4gICAgJ1dlYmtpdEFuaW1hdGlvbic6ICd3ZWJraXRBbmltYXRpb25FbmQnLFxuICAgICdNb3pBbmltYXRpb24nOiAnbW96QW5pbWF0aW9uRW5kJyxcbiAgICAnT0FuaW1hdGlvbic6ICdvQW5pbWF0aW9uRW5kJyxcbiAgICAnbXNBbmltYXRpb24nOiAnTVNBbmltYXRpb25FbmQnXG4gIH1cbn07XG5cbnZhciBlbmRFdmVudHMgPSBbXTtcblxuZnVuY3Rpb24gZGV0ZWN0RXZlbnRzKCkge1xuICB2YXIgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIHZhciBzdHlsZSA9IHRlc3RFbC5zdHlsZTtcblxuICAvLyBPbiBzb21lIHBsYXRmb3JtcywgaW4gcGFydGljdWxhciBzb21lIHJlbGVhc2VzIG9mIEFuZHJvaWQgNC54LFxuICAvLyB0aGUgdW4tcHJlZml4ZWQgXCJhbmltYXRpb25cIiBhbmQgXCJ0cmFuc2l0aW9uXCIgcHJvcGVydGllcyBhcmUgZGVmaW5lZCBvbiB0aGVcbiAgLy8gc3R5bGUgb2JqZWN0IGJ1dCB0aGUgZXZlbnRzIHRoYXQgZmlyZSB3aWxsIHN0aWxsIGJlIHByZWZpeGVkLCBzbyB3ZSBuZWVkXG4gIC8vIHRvIGNoZWNrIGlmIHRoZSB1bi1wcmVmaXhlZCBldmVudHMgYXJlIHVzZWFibGUsIGFuZCBpZiBub3QgcmVtb3ZlIHRoZW1cbiAgLy8gZnJvbSB0aGUgbWFwXG4gIGlmICghKCdBbmltYXRpb25FdmVudCcgaW4gd2luZG93KSkge1xuICAgIGRlbGV0ZSBFVkVOVF9OQU1FX01BUC5hbmltYXRpb25lbmQuYW5pbWF0aW9uO1xuICB9XG5cbiAgaWYgKCEoJ1RyYW5zaXRpb25FdmVudCcgaW4gd2luZG93KSkge1xuICAgIGRlbGV0ZSBFVkVOVF9OQU1FX01BUC50cmFuc2l0aW9uZW5kLnRyYW5zaXRpb247XG4gIH1cblxuICBmb3IgKHZhciBiYXNlRXZlbnROYW1lIGluIEVWRU5UX05BTUVfTUFQKSB7XG4gICAgdmFyIGJhc2VFdmVudHMgPSBFVkVOVF9OQU1FX01BUFtiYXNlRXZlbnROYW1lXTtcbiAgICBmb3IgKHZhciBzdHlsZU5hbWUgaW4gYmFzZUV2ZW50cykge1xuICAgICAgaWYgKHN0eWxlTmFtZSBpbiBzdHlsZSkge1xuICAgICAgICBlbmRFdmVudHMucHVzaChiYXNlRXZlbnRzW3N0eWxlTmFtZV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIGRldGVjdEV2ZW50cygpO1xufVxuXG5cbi8vIFdlIHVzZSB0aGUgcmF3IHthZGR8cmVtb3ZlfUV2ZW50TGlzdGVuZXIoKSBjYWxsIGJlY2F1c2UgRXZlbnRMaXN0ZW5lclxuLy8gZG9lcyBub3Qga25vdyBob3cgdG8gcmVtb3ZlIGV2ZW50IGxpc3RlbmVycyBhbmQgd2UgcmVhbGx5IHNob3VsZFxuLy8gY2xlYW4gdXAuIEFsc28sIHRoZXNlIGV2ZW50cyBhcmUgbm90IHRyaWdnZXJlZCBpbiBvbGRlciBicm93c2Vyc1xuLy8gc28gd2Ugc2hvdWxkIGJlIEEtT0sgaGVyZS5cblxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihub2RlLCBldmVudE5hbWUsIGV2ZW50TGlzdGVuZXIpIHtcbiAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZXZlbnRMaXN0ZW5lciwgZmFsc2UpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50TmFtZSwgZXZlbnRMaXN0ZW5lcikge1xuICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBldmVudExpc3RlbmVyLCBmYWxzZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGRFbmRFdmVudExpc3RlbmVyOiBmdW5jdGlvbihub2RlLCBldmVudExpc3RlbmVyKSB7XG4gICAgaWYgKGVuZEV2ZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIElmIENTUyB0cmFuc2l0aW9ucyBhcmUgbm90IHN1cHBvcnRlZCwgdHJpZ2dlciBhbiBcImVuZCBhbmltYXRpb25cIlxuICAgICAgLy8gZXZlbnQgaW1tZWRpYXRlbHkuXG4gICAgICB3aW5kb3cuc2V0VGltZW91dChldmVudExpc3RlbmVyLCAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZW5kRXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZW5kRXZlbnQpIHtcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIobm9kZSwgZW5kRXZlbnQsIGV2ZW50TGlzdGVuZXIpO1xuICAgIH0pO1xuICB9LFxuXG4gIHJlbW92ZUVuZEV2ZW50TGlzdGVuZXI6IGZ1bmN0aW9uKG5vZGUsIGV2ZW50TGlzdGVuZXIpIHtcbiAgICBpZiAoZW5kRXZlbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbmRFdmVudHMuZm9yRWFjaChmdW5jdGlvbihlbmRFdmVudCkge1xuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihub2RlLCBlbmRFdmVudCwgZXZlbnRMaXN0ZW5lcik7XG4gICAgfSk7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZG9ta2l0L3RyYW5zaXRpb25FdmVudHMuanNcbi8vIG1vZHVsZSBpZCA9IDIzNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 237:
/* unknown exports provided */
/* all exports used */
/*!****************************!*\
  !*** ./~/events/events.js ***!
  \****************************/
/***/ (function(module, exports) {

eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9ldmVudHMvZXZlbnRzLmpzPzdjNzEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG5FdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7XG4gIGlmICghaXNOdW1iZXIobikgfHwgbiA8IDAgfHwgaXNOYU4obikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8XG4gICAgICAgIChpc09iamVjdCh0aGlzLl9ldmVudHMuZXJyb3IpICYmICF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSkge1xuICAgICAgZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEF0IGxlYXN0IGdpdmUgc29tZSBraW5kIG9mIGNvbnRleHQgdG8gdGhlIHVzZXJcbiAgICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4gKCcgKyBlciArICcpJyk7XG4gICAgICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSlcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIC8vIGZhc3QgY2FzZXNcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgICAgICBicmVhaztcbiAgICAgIC8vIHNsb3dlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGhhbmRsZXIpKSB7XG4gICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgbGlzdGVuZXJzID0gaGFuZGxlci5zbGljZSgpO1xuICAgIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKVxuICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIG07XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJcIi5cbiAgaWYgKHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcilcbiAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgaXNGdW5jdGlvbihsaXN0ZW5lci5saXN0ZW5lcikgP1xuICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgZWxzZSBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuICBlbHNlXG4gICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdO1xuXG4gIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7XG4gICAgaWYgKCFpc1VuZGVmaW5lZCh0aGlzLl9tYXhMaXN0ZW5lcnMpKSB7XG4gICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gICAgfVxuXG4gICAgaWYgKG0gJiYgbSA+IDAgJiYgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCA+IG0pIHtcbiAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArXG4gICAgICAgICAgICAgICAgICAgICdsZWFrIGRldGVjdGVkLiAlZCBsaXN0ZW5lcnMgYWRkZWQuICcgK1xuICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUudHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBpbiBJRSAxMFxuICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIHZhciBmaXJlZCA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGcoKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTtcblxuICAgIGlmICghZmlyZWQpIHtcbiAgICAgIGZpcmVkID0gdHJ1ZTtcbiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgZy5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICB0aGlzLm9uKHR5cGUsIGcpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gZW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWRcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXR1cm4gdGhpcztcblxuICBsaXN0ID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuICBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgcG9zaXRpb24gPSAtMTtcblxuICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHxcbiAgICAgIChpc0Z1bmN0aW9uKGxpc3QubGlzdGVuZXIpICYmIGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG5cbiAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkge1xuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tID4gMDspIHtcbiAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fFxuICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICByZXR1cm4gdGhpcztcblxuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgbGlzdC5sZW5ndGggPSAwO1xuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGlzdC5zcGxpY2UocG9zaXRpb24sIDEpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGtleSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBmb3IgKGtleSBpbiB0aGlzLl9ldmVudHMpIHtcbiAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTtcbiAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAvLyBMSUZPIG9yZGVyXG4gICAgd2hpbGUgKGxpc3RlbmVycy5sZW5ndGgpXG4gICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tsaXN0ZW5lcnMubGVuZ3RoIC0gMV0pO1xuICB9XG4gIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIHJldDtcbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXQgPSBbXTtcbiAgZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dO1xuICBlbHNlXG4gICAgcmV0ID0gdGhpcy5fZXZlbnRzW3R5cGVdLnNsaWNlKCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIGlmICh0aGlzLl9ldmVudHMpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICAgIGlmIChpc0Z1bmN0aW9uKGV2bGlzdGVuZXIpKVxuICAgICAgcmV0dXJuIDE7XG4gICAgZWxzZSBpZiAoZXZsaXN0ZW5lcilcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgfVxuICByZXR1cm4gMDtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xufTtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2V2ZW50cy9ldmVudHMuanNcbi8vIG1vZHVsZSBpZCA9IDIzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 24:
/* unknown exports provided */
/* all exports used */
/*!*****************************************!*\
  !*** ./js/components/MainFlne.react.js ***!
  \*****************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _classnames = __webpack_require__(/*! classnames */ 13);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _numberformat = __webpack_require__(/*! ../lib/numberformat */ 31);\n\nvar _numberformat2 = _interopRequireDefault(_numberformat);\n\nvar _d = __webpack_require__(/*! d3 */ 12);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _modal = __webpack_require__(/*! ../lib/modal */ 22);\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nvar _Slider = __webpack_require__(/*! ./Slider.react */ 41);\n\nvar _Slider2 = _interopRequireDefault(_Slider);\n\nvar _Pseudo3D = __webpack_require__(/*! ./Pseudo3D.react */ 75);\n\nvar _Pseudo3D2 = _interopRequireDefault(_Pseudo3D);\n\nvar _utils = __webpack_require__(/*! ../lib/utils */ 16);\n\nvar _ToolTip = __webpack_require__(/*! ./ToolTip.react */ 50);\n\nvar _ToolTip2 = _interopRequireDefault(_ToolTip);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar modalStyle = {\n    width: '80%',\n    maxWidth: '1200px',\n    scrollX: 'auto',\n    overflow: 'scroll',\n    maxHeight: '100%'\n};\n\nvar MainFlne = function (_Component) {\n    _inherits(MainFlne, _Component);\n\n    function MainFlne(props, context) {\n        _classCallCheck(this, MainFlne);\n\n        var _this = _possibleConstructorReturn(this, (MainFlne.__proto__ || Object.getPrototypeOf(MainFlne)).call(this, props, context));\n\n        _lodash2.default.bindAll(_this, 'handleChange', 'getBarWidthFunc', 'handleDownloadSVG', 'handleDownloadCSV', 'handleDownloadGraph', 'handleDownloadSVGHelp', 'handleCloseDownloadSVGHelp');\n        _this.flne = undefined;;\n        _this.state = {\n            injections: [],\n            strengthExists: false\n        };\n        return _this;\n    }\n\n    _createClass(MainFlne, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var that = this;\n            _AppStore2.default.addChangeListener(this.handleChange);\n            this.svg_flne_parent = d3.select('.flne-bar');\n            this.svg_flne = this.svg_flne_parent.append('svg').attr('width', 365).attr('height', 200);\n            (0, _utils.svgAddHatchLine)(this.svg_flne);\n            var flne = this.svg_flne.append('g').attr('transform', 'translate(50, 5)');\n            this.flne = flne;\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _AppStore2.default.removeChangeListener(this.handleChange);\n        }\n    }, {\n        key: 'showTooltip',\n        value: function showTooltip(source_id) {\n            var x = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n            var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n            var source = this.props.areas.byAbbrev[source_id];\n            var tooltip = d3.select('div.tooltip');\n            tooltip.classed('matrix-view', false);\n            tooltip.style('opacity', .9);\n            var x_ = x,\n                y_ = y;\n            if (x_ === null) {\n                x_ = d3.event.pageX + 24;\n            }\n            if (y_ === null) {\n                y_ = d3.event.pageY - 40;\n            }\n            var txt = source.fullname; //this.abbrev_lookup[source].fullname;\n            tooltip.html(txt).style(\"left\", x_ + \"px\").style(\"top\", y_ + \"px\");\n        }\n    }, {\n        key: 'getBarWidthFunc',\n        value: function getBarWidthFunc(min, max) {\n            if (this.props.mode == 'SLN') {\n                min = 0;\n                max = 1;\n            } else {\n                min = -5.5, max = 0;\n            }\n            var func = d3.scaleLinear().domain([min, max]).range([1, 300]);\n            return func;\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange() {\n            var that = this;\n            var _areas = _AppStore2.default.getAreas();\n            var area = _AppStore2.default.getTargetAreaPicked();\n            if (!area) {\n                return;\n            }\n            var data_attr = void 0;\n            var strength = void 0;\n            if (this.props.mode == 'SLN') {\n                data_attr = 'sln';\n                var conn = _AppStore2.default.getConnectivity();\n                strength = [];\n                _lodash2.default.each(conn.get_by_target(area), function (s) {\n                    if (s.source !== undefined) {\n                        if (s.sln >= 0) {\n                            strength.push({\n                                source: s.source.abbrev,\n                                gmeannz: s.gmeannz,\n                                log10_flne: Math.log10(s.flne),\n                                sln: s.sln,\n                                sln_notdefined: s.sln_notdefined\n                            });\n                        } else if (s.sln_notdefined) {\n                            /*\n                            strength.push({\n                                source: s.source.abbrev,\n                                gmeannz: s.gmeannz,\n                                log10_flne: Math.log10(s.flne),\n                                sln: 1.0,\n                                sln_notdefined: s.sln_notdefined,\n                            });\n                            */\n                        }\n                    }\n                });\n                strength = _lodash2.default.sortBy(strength, data_attr);\n                that.strength_area_count = _lodash2.default.filter(strength, { sln_notdefined: false }).length;\n            } else {\n                data_attr = 'log10_flne';\n                var _conn = _AppStore2.default.getConnectivity();\n                strength = [];\n                _lodash2.default.each(_conn.get_by_target(area), function (s) {\n                    if (s.source !== undefined && s.flne > 0) {\n                        strength.push({\n                            source: s.source.abbrev,\n                            gmeannz: s.gmeannz,\n                            log10_flne: Math.log10(s.flne)\n                        });\n                    }\n                });\n                strength = _lodash2.default.reverse(_lodash2.default.sortBy(strength, data_attr));\n                that.strength_area_count = strength.length;\n            }\n            var scaler = void 0,\n                scaler_dom = void 0;\n            var y = null,\n                flne_height = 100;\n\n            if (strength.length > 0) {\n                var showValue = function showValue(node, d) {\n                    d3.select(node).selectAll('rect').attr('fill', 'brown');\n                    console.log('value', d[data_attr]);\n                    var textAtBehindThreshold = void 0;\n                    if (that.props.mode == 'SLN') {\n                        textAtBehindThreshold = 0.12;\n                    } else {\n                        textAtBehindThreshold = -4.5;\n                    }\n                    var anchor = void 0,\n                        x = void 0,\n                        fill = void 0;\n                    if (d[data_attr] < textAtBehindThreshold) {\n                        anchor = 'begin';\n                        x = barWidthFunc(d[data_attr]) + 5;\n                        fill = 'black';\n                    } else {\n                        anchor = 'end';\n                        x = barWidthFunc(d[data_attr]) - 5;\n                        fill = 'white';\n                    }\n                    d3.select(node).append('text').attr('x', x).attr('y', function (d, i) {\n                        return y(d.source) + y.bandwidth() / 2;\n                    }).attr('text-anchor', anchor).attr('alignment-baseline', 'middle').attr('stroke', 'none').style('font-weight', 'bold').attr('fill', fill).attr('class', 'num').text(d[data_attr].toFixed(2));\n                };\n\n                var flne = this.flne;\n                that.setState({ strengthExists: true });\n                flne_height = 10 * strength.length;\n                d3.select('.flne-bar svg').attr('height', flne_height + 45);\n                y = d3.scaleBand().range([0, flne_height]);\n                y.round(true);\n                y.paddingInner(.1);\n                flne.selectAll('.row').remove();\n                flne.selectAll('.axis-bottom').remove();\n                var srcs = _lodash2.default.map(strength, 'source');\n                y.domain(srcs);\n                var flne_arr = _lodash2.default.map(strength, data_attr);\n\n                var min = _lodash2.default.min(flne_arr),\n                    max = _lodash2.default.max(flne_arr);\n                var colorFunc = void 0;\n                if (this.props.mode == 'SLN') {\n                    var _func = (0, _utils.getBlueColorFunc)();\n                    colorFunc = function colorFunc(d) {\n                        if (d.sln_notdefined) {\n                            return 'url(\"#diagonalHatch\")';\n                        } else {\n                            return _func(d[data_attr]);\n                        }\n                    };\n                } else {\n                    var _func2 = (0, _utils.getLogColorFunc)();\n                    colorFunc = function colorFunc(d) {\n                        return _func2(d[data_attr]);\n                    };\n                }\n                var barWidthFunc = that.getBarWidthFunc(min, max);\n                var row = flne.selectAll('.row').data(strength, function (d) {\n                    return d;\n                });\n                var row_enter = row.enter().append('g').attr('class', 'row');\n                row_enter.append('text').attr('class', 'flne-label');\n                row_enter.append('rect').attr('class', 'flne-rect');\n\n                row_enter.selectAll('.flne-label').attr('x', -6).attr('y', function (d, i) {\n                    return y(d.source) + y.bandwidth() / 2;\n                }).attr('text-anchor', 'end').attr('alignment-baseline', 'middle').text(function (d) {\n                    return d.source;\n                }).on('mouseover', function (d, i) {\n                    var me = d3.select(this);\n                    that.areaBarMouseOver(me, _areas.byAbbrev[d.source], area);\n                    that.areaLabelMouseOver(me, _areas.byAbbrev[d.source], area);\n                    showValue(this.parentNode, d);\n                }).on('mouseout', function (d, i) {\n                    var me = d3.select(this);\n                    that.areaBarMouseOut(me, _areas.byAbbrev[d.source], area);\n                    that.areaLabelMouseOut(me, _areas.byAbbrev[d.source], area);\n                    d3.select(this.parentNode).selectAll('rect').attr('fill', colorFunc(d));\n                    d3.select(this.parentNode).selectAll('.num').remove();\n                });\n                row_enter.selectAll('.flne-rect').attr('x', 0).attr('y', function (d, i) {\n                    return y(d.source);\n                }).attr('width', function (d) {\n                    return barWidthFunc(d[data_attr]);\n                }).attr('height', y.bandwidth()).attr('fill', function (d) {\n                    return colorFunc(d);\n                }).on('mouseover', function (d, i) {\n                    var me = d3.select(this);\n                    that.areaBarMouseOver(me, _areas.byAbbrev[d.source], area);\n                    that.areaLabelMouseOver(me, _areas.byAbbrev[d.source], area);\n                    showValue(this.parentNode, d);\n                }).on('mouseout', function (d, i, p) {\n                    var me = d3.select(this);\n                    that.areaBarMouseOut(me, _areas.byAbbrev[d.source], area);\n                    that.areaLabelMouseOut(me, _areas.byAbbrev[d.source], area);\n                    d3.select(this).attr('fill', colorFunc(d));\n                    d3.select(this.parentNode).selectAll('.num').remove();\n                });\n                if (this.props.mode == 'FLN') {\n                    scaler = d3.axisBottom().scale(barWidthFunc).tickSizeInner(-flne_height).tickSizeOuter(0).tickValues([-5, -4, -3, -2, -1, 0]).tickFormat(d3.format(',d'));\n                    //.ticks(6);\n                } else {\n                    scaler = d3.axisBottom().scale(barWidthFunc).tickSizeInner(-flne_height).tickSizeOuter(0).tickValues([0, 0.2, 0.4, 0.6, 0.8, 1]).tickFormat(d3.format(',.1f'));\n                    //.ticks(6);\n                }\n                scaler_dom = flne.append(\"g\").attr(\"transform\", \"translate(0,\" + flne_height + \")\").attr('class', 'axis-bottom').call(scaler);\n                scaler_dom.selectAll('.tick line').filter(function (d, i, l) {\n                    return i === l.length - 1;\n                }).attr('display', 'none');\n                d3.selectAll('.main-bar-scale-x-title').remove();\n                var title = flne.append('text').attr('class', 'main-bar-scale-x-title').attr('transform', 'translate(' + (320 / 2 - 20) + ', ' + (flne_height + 25) + ')').attr('text-anchor', 'middle');\n                if (this.props.mode == 'FLN') {\n                    title.append('tspan').attr('font-size', '12').text('log');\n                    title.append('tspan').text('10').attr('baseline-shift', 'sub');\n                    title.append('tspan').attr('font-size', '12').text('(' + this.props.mode + 'e)');\n                } else {\n                    title.append('tspan').attr('font-size', '12').text('' + this.props.mode + 'e');\n                }\n            } else {\n                var _flne = this.flne;\n                that.setState({ strengthExists: false });\n                _flne.selectAll('.row').remove();\n                d3.select('.flne-bar svg').attr('height', flne_height);\n                if (scaler_dom) {\n                    scaler_dom.remove();\n                }\n            }\n            // continue to furnish injection detail\n            var injections = _lodash2.default.filter(that.static_inj, { abbrev: area.abbrev });\n            //Actions.nodeDetail(injections);\n            this.setState({ nodePicked: _AppStore2.default.getNodePicked() });\n        }\n    }, {\n        key: 'areaBarMouseOver',\n        value: function areaBarMouseOver(me, from_, to) {\n            _Actions2.default.highlightEdge(from_, to, '#000000');\n            _Actions2.default.boldEdge(from_, to);\n        }\n    }, {\n        key: 'areaBarMouseOut',\n        value: function areaBarMouseOut(me, from_, to) {\n            _Actions2.default.unhighlightEdge(from_, to, '#000000');\n            _Actions2.default.unboldEdge(from_, to);\n        }\n    }, {\n        key: 'areaLabelMouseOver',\n        value: function areaLabelMouseOver(me, from_, to) {\n            var bbox = me.node().getBoundingClientRect();\n            var top = bbox.top + $(document).scrollTop();\n            (0, _utils.showTooltipAreaName)({ area: from_, x: bbox.left, y: top - 35 });\n        }\n    }, {\n        key: 'areaLabelMouseOut',\n        value: function areaLabelMouseOut(me, from_, to) {\n            (0, _utils.hideTooltip)();\n        }\n    }, {\n        key: 'handleDownloadSVG',\n        value: function handleDownloadSVG(e) {\n            var html = this.svg_flne_parent.html();\n            var b64 = btoa(html);\n            var href = 'data:image/svg+xml;base64,\\n' + b64;\n            e.target.href = href;\n            _Actions2.default.setDownloadLink(href, e, 'export_flatmap_graph.svg');\n        }\n    }, {\n        key: 'handleDownloadCSV',\n        value: function handleDownloadCSV(e) {\n            if (this.state.nodePicked) {\n                var href = '/static/data/individual_areas/flne_area_' + this.state.nodePicked.abbrev + '.csv';\n                e.target.href = href;\n                _Actions2.default.setDownloadLink(href, e);\n            }\n        }\n    }, {\n        key: 'handleDownloadGraph',\n        value: function handleDownloadGraph(e) {\n            var html = this.graph_parent.html();\n            var b64 = btoa(html);\n            var href = 'data:image/svg+xml;base64,\\n' + b64;\n            e.target.href = href;\n            _Actions2.default.setDownloadLink(href, true);\n        }\n    }, {\n        key: 'handleDownloadSVGHelp',\n        value: function handleDownloadSVGHelp(e) {}\n    }, {\n        key: 'handleCloseDownloadSVGHelp',\n        value: function handleCloseDownloadSVGHelp(e) {}\n        /*\n        showDownloadSVGHelp(e) {\n        }\n        showDownloadCSVHelp(e) {\n        }\n        hideDownloadSVGHelp(e) {\n        }\n        hideDownloadCSVHelp(e) {\n        }\n        */\n        /**\n         * @return {object}\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            var area_name = null;\n            if (this.state.nodePicked) {\n                if (this.props.mode == 'SLN') {\n                    //area_name = <span className=\"area-name\" title={toTitleCase(this.state.nodePicked.fullname)}>area {this.state.nodePicked.abbrev}</span>;\n                    area_name = _react2.default.createElement(\n                        _ToolTip2.default,\n                        { className: 'area-name', title: (0, _utils.toTitleCase)(this.state.nodePicked.fullname) },\n                        'area ',\n                        this.state.nodePicked.abbrev\n                    );\n                } else {\n                    area_name = (0, _utils.toTitleCase)(this.state.nodePicked.fullname) + ' (' + this.state.nodePicked.abbrev + ')';\n                }\n            }\n            var download_svg = _react2.default.createElement(\n                'div',\n                { className: 'link-button' },\n                _react2.default.createElement(\n                    'a',\n                    { onClick: this.handleDownloadGraph, download: 'export_flatmap_graph.svg' },\n                    'Download the graph as SVG'\n                )\n            );\n            var content = null;\n\n            var sources = null;\n            if (this.state.nodePicked) {\n                sources = ', ' + this.strength_area_count + ' sources:';\n            }\n            // XXX hack to remove source summary\n            sources = null;\n\n            var header = void 0;\n            if (this.props.mode == 'SLN') {\n                header = _react2.default.createElement(\n                    'span',\n                    null,\n                    'Fraction of extrinsic supragranular neurons',\n                    _react2.default.createElement('br', null),\n                    'for '\n                );\n            } else {\n                header = _react2.default.createElement(\n                    'span',\n                    null,\n                    'Connectivity profile for the',\n                    _react2.default.createElement('br', null)\n                );\n            }\n            return _react2.default.createElement(\n                'div',\n                { className: (0, _classnames2.default)('main-flne', { hidden: !this.state.strengthExists }) },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'info-label' },\n                    header,\n                    _react2.default.createElement(\n                        'span',\n                        { className: 'injection-area-name' },\n                        area_name,\n                        sources\n                    )\n                ),\n                _react2.default.createElement('div', { className: 'flne-bar' }),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'download' },\n                    _react2.default.createElement(\n                        'ul',\n                        null,\n                        _react2.default.createElement(\n                            'li',\n                            { className: 'download-svg' },\n                            _react2.default.createElement(\n                                'a',\n                                { onClick: this.handleDownloadSVG, download: 'export_svg.svg', title: 'Download FLNe bar chart as SVG drawing' },\n                                'Download bar chart as SVG drawing'\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'li',\n                            { className: 'download-csv' },\n                            _react2.default.createElement(\n                                'a',\n                                { onClick: this.handleDownloadCSV, title: 'Download FLNe data in CSV format' },\n                                'Download data as CSV file'\n                            ),\n                            '\\xA0'\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return MainFlne;\n}(_react.Component);\n\nexports.default = MainFlne;\n;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvY29tcG9uZW50cy9NYWluRmxuZS5yZWFjdC5qcz82YTA3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG5pbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMvQWN0aW9ucyc7XG5pbXBvcnQgQXBwU3RvcmUgZnJvbSAnLi4vc3RvcmVzL0FwcFN0b3JlJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBudW1iZXJGb3JtYXQgZnJvbSAnLi4vbGliL251bWJlcmZvcm1hdCc7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgTW9kYWwgZnJvbSAnLi4vbGliL21vZGFsJztcbmltcG9ydCBTbGlkZXIgZnJvbSAnLi9TbGlkZXIucmVhY3QnO1xuaW1wb3J0IFBzZXVkbzNEIGZyb20gJy4vUHNldWRvM0QucmVhY3QnO1xuaW1wb3J0IHt0b1RpdGxlQ2FzZSwgZ2V0TG9nQ29sb3JGdW5jLCBnZXRCbHVlQ29sb3JGdW5jLCBzaG93VG9vbHRpcEFyZWFOYW1lLFxuICAgIGhpZGVUb29sdGlwLCBzdmdBZGRIYXRjaExpbmV9IGZyb20gJy4uL2xpYi91dGlscyc7XG5pbXBvcnQgVG9vbFRpcCBmcm9tICcuL1Rvb2xUaXAucmVhY3QnO1xuXG5sZXQgbW9kYWxTdHlsZSA9IHtcbiAgICB3aWR0aDogJzgwJScsXG4gICAgbWF4V2lkdGg6ICcxMjAwcHgnLFxuICAgIHNjcm9sbFg6ICdhdXRvJyxcbiAgICBvdmVyZmxvdzogJ3Njcm9sbCcsXG4gICAgbWF4SGVpZ2h0OiAnMTAwJSdcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1haW5GbG5lIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCkge1xuICAgICAgICBzdXBlcihwcm9wcywgY29udGV4dCk7XG4gICAgICAgIF8uYmluZEFsbChcbiAgICAgICAgICAgIHRoaXMsICdoYW5kbGVDaGFuZ2UnLCAnZ2V0QmFyV2lkdGhGdW5jJywgJ2hhbmRsZURvd25sb2FkU1ZHJywgJ2hhbmRsZURvd25sb2FkQ1NWJyxcbiAgICAgICAgICAgICdoYW5kbGVEb3dubG9hZEdyYXBoJywgJ2hhbmRsZURvd25sb2FkU1ZHSGVscCcsICdoYW5kbGVDbG9zZURvd25sb2FkU1ZHSGVscCcpO1xuICAgICAgICB0aGlzLmZsbmUgPSB1bmRlZmluZWQ7O1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaW5qZWN0aW9uczogW10sXG4gICAgICAgICAgICBzdHJlbmd0aEV4aXN0czogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgQXBwU3RvcmUuYWRkQ2hhbmdlTGlzdGVuZXIodGhpcy5oYW5kbGVDaGFuZ2UpO1xuICAgICAgICB0aGlzLnN2Z19mbG5lX3BhcmVudCA9IGQzLnNlbGVjdCgnLmZsbmUtYmFyJyk7XG4gICAgICAgIHRoaXMuc3ZnX2ZsbmUgPSB0aGlzLnN2Z19mbG5lX3BhcmVudC5hcHBlbmQoJ3N2ZycpXG4gICAgICAgICAgICAuYXR0cignd2lkdGgnLCAzNjUpXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgMjAwKVxuICAgICAgICBzdmdBZGRIYXRjaExpbmUodGhpcy5zdmdfZmxuZSk7XG4gICAgICAgIGxldCBmbG5lID0gdGhpcy5zdmdfZmxuZVxuICAgICAgICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSg1MCwgNSknKTtcbiAgICAgICAgdGhpcy5mbG5lID0gZmxuZTtcblxuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgQXBwU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5oYW5kbGVDaGFuZ2UpO1xuICAgIH1cbiAgICBzaG93VG9vbHRpcChzb3VyY2VfaWQsIHggPSBudWxsLCB5ID0gbnVsbCkge1xuICAgICAgICBsZXQgc291cmNlID0gdGhpcy5wcm9wcy5hcmVhcy5ieUFiYnJldltzb3VyY2VfaWRdO1xuICAgICAgICBsZXQgdG9vbHRpcCA9IGQzLnNlbGVjdCgnZGl2LnRvb2x0aXAnKTtcbiAgICAgICAgdG9vbHRpcC5jbGFzc2VkKCdtYXRyaXgtdmlldycsIGZhbHNlKTtcbiAgICAgICAgdG9vbHRpcFxuICAgICAgICAgICAgLnN0eWxlKCdvcGFjaXR5JywgLjkpO1xuICAgICAgICBsZXQgeF8gPSB4LCB5XyA9IHk7XG4gICAgICAgIGlmICh4XyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgeF8gPSBkMy5ldmVudC5wYWdlWCArIDI0O1xuICAgICAgICB9XG4gICAgICAgIGlmICh5XyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgeV8gPSBkMy5ldmVudC5wYWdlWSAtIDQwO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0eHQgPSBzb3VyY2UuZnVsbG5hbWU7IC8vdGhpcy5hYmJyZXZfbG9va3VwW3NvdXJjZV0uZnVsbG5hbWU7XG4gICAgICAgIHRvb2x0aXAuaHRtbCh0eHQpXG4gICAgICAgICAgICAuc3R5bGUoXCJsZWZ0XCIsICh4XykgKyBcInB4XCIpXG4gICAgICAgICAgICAuc3R5bGUoXCJ0b3BcIiwgKHlfKSArIFwicHhcIik7XG4gICAgfVxuICAgIGdldEJhcldpZHRoRnVuYyhtaW4sIG1heCkge1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5tb2RlID09ICdTTE4nKSB7XG4gICAgICAgICAgICBtaW4gPSAwO1xuICAgICAgICAgICAgbWF4ID0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1pbiA9IC01LjUsIG1heCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZ1bmMgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbbWluLCBtYXhdKS5yYW5nZShbMSwgMzAwXSk7XG4gICAgICAgIHJldHVybiBmdW5jO1xuICAgIH1cblxuICAgIGhhbmRsZUNoYW5nZSgpIHtcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICBsZXQgX2FyZWFzID0gQXBwU3RvcmUuZ2V0QXJlYXMoKTtcbiAgICAgICAgbGV0IGFyZWEgPSBBcHBTdG9yZS5nZXRUYXJnZXRBcmVhUGlja2VkKCk7XG4gICAgICAgIGlmICghYXJlYSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkYXRhX2F0dHI7XG4gICAgICAgIGxldCBzdHJlbmd0aDtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMubW9kZSA9PSAnU0xOJykge1xuICAgICAgICAgICAgZGF0YV9hdHRyID0gJ3Nsbic7XG4gICAgICAgICAgICBjb25zdCBjb25uID0gQXBwU3RvcmUuZ2V0Q29ubmVjdGl2aXR5KCk7XG4gICAgICAgICAgICBzdHJlbmd0aCA9IFtdO1xuICAgICAgICAgICAgXy5lYWNoKGNvbm4uZ2V0X2J5X3RhcmdldChhcmVhKSwgcyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHMuc291cmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMuc2xuID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVuZ3RoLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogcy5zb3VyY2UuYWJicmV2LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdtZWFubno6IHMuZ21lYW5ueixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2cxMF9mbG5lOiBNYXRoLmxvZzEwKHMuZmxuZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xuOiBzLnNsbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbG5fbm90ZGVmaW5lZDogcy5zbG5fbm90ZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMuc2xuX25vdGRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlbmd0aC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHMuc291cmNlLmFiYnJldixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnbWVhbm56OiBzLmdtZWFubnosXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nMTBfZmxuZTogTWF0aC5sb2cxMChzLmZsbmUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsbjogMS4wLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsbl9ub3RkZWZpbmVkOiBzLnNsbl9ub3RkZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdHJlbmd0aCA9IF8uc29ydEJ5KHN0cmVuZ3RoLCBkYXRhX2F0dHIpO1xuICAgICAgICAgICAgdGhhdC5zdHJlbmd0aF9hcmVhX2NvdW50ID0gXy5maWx0ZXIoc3RyZW5ndGgsIHtzbG5fbm90ZGVmaW5lZDogZmFsc2V9KS5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRhX2F0dHIgPSAnbG9nMTBfZmxuZSc7XG4gICAgICAgICAgICBjb25zdCBjb25uID0gQXBwU3RvcmUuZ2V0Q29ubmVjdGl2aXR5KCk7XG4gICAgICAgICAgICBzdHJlbmd0aCA9IFtdO1xuICAgICAgICAgICAgXy5lYWNoKGNvbm4uZ2V0X2J5X3RhcmdldChhcmVhKSwgcyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHMuc291cmNlICE9PSB1bmRlZmluZWQgJiYgcy5mbG5lID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzdHJlbmd0aC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogcy5zb3VyY2UuYWJicmV2LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ21lYW5uejogcy5nbWVhbm56LFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nMTBfZmxuZTogTWF0aC5sb2cxMChzLmZsbmUpLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0cmVuZ3RoID0gXy5yZXZlcnNlKF8uc29ydEJ5KHN0cmVuZ3RoLCBkYXRhX2F0dHIpKTtcbiAgICAgICAgICAgIHRoYXQuc3RyZW5ndGhfYXJlYV9jb3VudCA9IHN0cmVuZ3RoLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2NhbGVyLCBzY2FsZXJfZG9tO1xuICAgICAgICBsZXQgeSA9IG51bGwsIGZsbmVfaGVpZ2h0ID0gMTAwO1xuXG4gICAgICAgIGlmIChzdHJlbmd0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsZXQgZmxuZSA9IHRoaXMuZmxuZTtcbiAgICAgICAgICAgIHRoYXQuc2V0U3RhdGUoe3N0cmVuZ3RoRXhpc3RzOiB0cnVlfSk7XG4gICAgICAgICAgICBmbG5lX2hlaWdodCA9IDEwICogc3RyZW5ndGgubGVuZ3RoO1xuICAgICAgICAgICAgZDMuc2VsZWN0KCcuZmxuZS1iYXIgc3ZnJykuYXR0cignaGVpZ2h0JywgZmxuZV9oZWlnaHQgKyA0NSk7XG4gICAgICAgICAgICB5ID0gZDMuc2NhbGVCYW5kKCkucmFuZ2UoWzAsIGZsbmVfaGVpZ2h0XSk7XG4gICAgICAgICAgICB5LnJvdW5kKHRydWUpO1xuICAgICAgICAgICAgeS5wYWRkaW5nSW5uZXIoLjEpO1xuICAgICAgICAgICAgZmxuZS5zZWxlY3RBbGwoJy5yb3cnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIGZsbmUuc2VsZWN0QWxsKCcuYXhpcy1ib3R0b20nKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIGxldCBzcmNzID0gXy5tYXAoc3RyZW5ndGgsICdzb3VyY2UnKTtcbiAgICAgICAgICAgIHkuZG9tYWluKHNyY3MpO1xuICAgICAgICAgICAgbGV0IGZsbmVfYXJyID0gXy5tYXAoc3RyZW5ndGgsIGRhdGFfYXR0cik7XG5cbiAgICAgICAgICAgIGxldCBtaW4gPSBfLm1pbihmbG5lX2FyciksIG1heCA9IF8ubWF4KGZsbmVfYXJyKTtcbiAgICAgICAgICAgIGxldCBjb2xvckZ1bmM7XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5tb2RlID09ICdTTE4nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgX2Z1bmMgPSBnZXRCbHVlQ29sb3JGdW5jKCk7XG4gICAgICAgICAgICAgICAgY29sb3JGdW5jID0gZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZC5zbG5fbm90ZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICd1cmwoXCIjZGlhZ29uYWxIYXRjaFwiKSc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2Z1bmMoZFtkYXRhX2F0dHJdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgX2Z1bmMgPSBnZXRMb2dDb2xvckZ1bmMoKTtcbiAgICAgICAgICAgICAgICBjb2xvckZ1bmMgPSBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfZnVuYyhkW2RhdGFfYXR0cl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBiYXJXaWR0aEZ1bmMgPSB0aGF0LmdldEJhcldpZHRoRnVuYyhtaW4sIG1heCk7XG4gICAgICAgICAgICBsZXQgcm93ID0gZmxuZS5zZWxlY3RBbGwoJy5yb3cnKVxuICAgICAgICAgICAgICAgIC5kYXRhKHN0cmVuZ3RoLCBkID0+IGQpO1xuICAgICAgICAgICAgbGV0IHJvd19lbnRlciA9IHJvdy5lbnRlcigpXG4gICAgICAgICAgICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3JvdycpO1xuICAgICAgICAgICAgcm93X2VudGVyLmFwcGVuZCgndGV4dCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2ZsbmUtbGFiZWwnKTtcbiAgICAgICAgICAgIHJvd19lbnRlci5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdmbG5lLXJlY3QnKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gc2hvd1ZhbHVlKG5vZGUsIGQpIHtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3Qobm9kZSkuc2VsZWN0QWxsKCdyZWN0JykuYXR0cignZmlsbCcsICdicm93bicpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd2YWx1ZScsIGRbZGF0YV9hdHRyXSk7XG4gICAgICAgICAgICAgICAgbGV0IHRleHRBdEJlaGluZFRocmVzaG9sZDtcbiAgICAgICAgICAgICAgICBpZiAodGhhdC5wcm9wcy5tb2RlID09ICdTTE4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHRBdEJlaGluZFRocmVzaG9sZCA9IDAuMTI7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dEF0QmVoaW5kVGhyZXNob2xkID0gLTQuNTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGFuY2hvciwgeCwgZmlsbDtcbiAgICAgICAgICAgICAgICBpZiAoZFtkYXRhX2F0dHJdIDwgdGV4dEF0QmVoaW5kVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuY2hvciA9ICdiZWdpbic7XG4gICAgICAgICAgICAgICAgICAgIHggPSBiYXJXaWR0aEZ1bmMoZFtkYXRhX2F0dHJdKSArIDU7XG4gICAgICAgICAgICAgICAgICAgIGZpbGwgPSAnYmxhY2snO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFuY2hvciA9ICdlbmQnO1xuICAgICAgICAgICAgICAgICAgICB4ID0gYmFyV2lkdGhGdW5jKGRbZGF0YV9hdHRyXSkgLSA1O1xuICAgICAgICAgICAgICAgICAgICBmaWxsID0gJ3doaXRlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KG5vZGUpLmFwcGVuZCgndGV4dCcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgeClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAoZCwgaSkgPT4geShkLnNvdXJjZSkgKyB5LmJhbmR3aWR0aCgpIC8gMilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgYW5jaG9yKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignYWxpZ25tZW50LWJhc2VsaW5lJywgJ21pZGRsZScpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnbm9uZScpXG4gICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZm9udC13ZWlnaHQnLCAnYm9sZCcpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgZmlsbClcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ251bScpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGRbZGF0YV9hdHRyXS50b0ZpeGVkKDIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvd19lbnRlci5zZWxlY3RBbGwoJy5mbG5lLWxhYmVsJylcbiAgICAgICAgICAgICAgICAuYXR0cigneCcsIC02KVxuICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgKGQsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkoZC5zb3VyY2UpICsgeS5iYW5kd2lkdGgoKSAvIDJcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdlbmQnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdhbGlnbm1lbnQtYmFzZWxpbmUnLCAnbWlkZGxlJylcbiAgICAgICAgICAgICAgICAudGV4dChkID0+IGQuc291cmNlKVxuICAgICAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWUgPSBkMy5zZWxlY3QodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJlYUJhck1vdXNlT3ZlcihtZSwgX2FyZWFzLmJ5QWJicmV2W2Quc291cmNlXSwgYXJlYSk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJlYUxhYmVsTW91c2VPdmVyKG1lLCBfYXJlYXMuYnlBYmJyZXZbZC5zb3VyY2VdLCBhcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgc2hvd1ZhbHVlKHRoaXMucGFyZW50Tm9kZSwgZCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWUgPSBkMy5zZWxlY3QodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJlYUJhck1vdXNlT3V0KG1lLCBfYXJlYXMuYnlBYmJyZXZbZC5zb3VyY2VdLCBhcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcmVhTGFiZWxNb3VzZU91dChtZSwgX2FyZWFzLmJ5QWJicmV2W2Quc291cmNlXSwgYXJlYSk7XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpLnNlbGVjdEFsbCgncmVjdCcpLmF0dHIoJ2ZpbGwnLCBjb2xvckZ1bmMoZCkpO1xuICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5zZWxlY3RBbGwoJy5udW0nKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgcm93X2VudGVyLnNlbGVjdEFsbCgnLmZsbmUtcmVjdCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAwKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgKGQsIGkpID0+IHkoZC5zb3VyY2UpKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIGQgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFyV2lkdGhGdW5jKGRbZGF0YV9hdHRyXSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgeS5iYW5kd2lkdGgoKSlcbiAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsIGQgPT4gY29sb3JGdW5jKGQpKVxuICAgICAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWUgPSBkMy5zZWxlY3QodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJlYUJhck1vdXNlT3ZlcihtZSwgX2FyZWFzLmJ5QWJicmV2W2Quc291cmNlXSwgYXJlYSk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJlYUxhYmVsTW91c2VPdmVyKG1lLCBfYXJlYXMuYnlBYmJyZXZbZC5zb3VyY2VdLCBhcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgc2hvd1ZhbHVlKHRoaXMucGFyZW50Tm9kZSwgZCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAub24oJ21vdXNlb3V0JywgZnVuY3Rpb24oZCwgaSwgcCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWUgPSBkMy5zZWxlY3QodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYXJlYUJhck1vdXNlT3V0KG1lLCBfYXJlYXMuYnlBYmJyZXZbZC5zb3VyY2VdLCBhcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hcmVhTGFiZWxNb3VzZU91dChtZSwgX2FyZWFzLmJ5QWJicmV2W2Quc291cmNlXSwgYXJlYSk7XG4gICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKCdmaWxsJywgY29sb3JGdW5jKGQpKTtcbiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSkuc2VsZWN0QWxsKCcubnVtJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm1vZGUgPT0gJ0ZMTicpIHtcbiAgICAgICAgICAgICAgICBzY2FsZXIgPSBkMy5heGlzQm90dG9tKClcbiAgICAgICAgICAgICAgICAgICAgLnNjYWxlKGJhcldpZHRoRnVuYylcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tTaXplSW5uZXIoLWZsbmVfaGVpZ2h0KVxuICAgICAgICAgICAgICAgICAgICAudGlja1NpemVPdXRlcigwKVxuICAgICAgICAgICAgICAgICAgICAudGlja1ZhbHVlcyhbLTUsIC00LCAtMywgLTIsIC0xLCAwXSlcbiAgICAgICAgICAgICAgICAgICAgLnRpY2tGb3JtYXQoZDMuZm9ybWF0KCcsZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8udGlja3MoNik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNjYWxlciA9IGQzLmF4aXNCb3R0b20oKVxuICAgICAgICAgICAgICAgICAgICAuc2NhbGUoYmFyV2lkdGhGdW5jKVxuICAgICAgICAgICAgICAgICAgICAudGlja1NpemVJbm5lcigtZmxuZV9oZWlnaHQpXG4gICAgICAgICAgICAgICAgICAgIC50aWNrU2l6ZU91dGVyKDApXG4gICAgICAgICAgICAgICAgICAgIC50aWNrVmFsdWVzKFswLCAwLjIsIDAuNCwgMC42LCAwLjgsIDFdKVxuICAgICAgICAgICAgICAgICAgICAudGlja0Zvcm1hdChkMy5mb3JtYXQoJywuMWYnKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vLnRpY2tzKDYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2NhbGVyX2RvbSA9IGZsbmUuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBmbG5lX2hlaWdodCArIFwiKVwiKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdheGlzLWJvdHRvbScpXG4gICAgICAgICAgICAgICAgLmNhbGwoc2NhbGVyKTtcbiAgICAgICAgICAgIHNjYWxlcl9kb20uc2VsZWN0QWxsKCcudGljayBsaW5lJykuZmlsdGVyKChkLCBpLCBsKSA9PiAoaSA9PT0gbC5sZW5ndGggLSAxKSkuYXR0cignZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5tYWluLWJhci1zY2FsZS14LXRpdGxlJykucmVtb3ZlKCk7XG4gICAgICAgICAgICBsZXQgdGl0bGUgPSBmbG5lLmFwcGVuZCgndGV4dCcpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ21haW4tYmFyLXNjYWxlLXgtdGl0bGUnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyAoMzIwIC8gMiAtIDIwKSArICcsICcgKyAoZmxuZV9oZWlnaHQgKyAyNSkgKyAnKScpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9wcy5tb2RlID09ICdGTE4nKSB7XG4gICAgICAgICAgICAgICAgdGl0bGUuYXBwZW5kKCd0c3BhbicpLmF0dHIoJ2ZvbnQtc2l6ZScsICcxMicpLnRleHQoJ2xvZycpO1xuICAgICAgICAgICAgICAgIHRpdGxlLmFwcGVuZCgndHNwYW4nKS50ZXh0KCcxMCcpLmF0dHIoJ2Jhc2VsaW5lLXNoaWZ0JywgJ3N1YicpO1xuICAgICAgICAgICAgICAgIHRpdGxlLmFwcGVuZCgndHNwYW4nKS5hdHRyKCdmb250LXNpemUnLCAnMTInKS50ZXh0KCcoJyArIHRoaXMucHJvcHMubW9kZSArICdlKScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aXRsZS5hcHBlbmQoJ3RzcGFuJykuYXR0cignZm9udC1zaXplJywgJzEyJykudGV4dCgnJyArIHRoaXMucHJvcHMubW9kZSArICdlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgZmxuZSA9IHRoaXMuZmxuZTtcbiAgICAgICAgICAgIHRoYXQuc2V0U3RhdGUoe3N0cmVuZ3RoRXhpc3RzOiBmYWxzZX0pO1xuICAgICAgICAgICAgZmxuZS5zZWxlY3RBbGwoJy5yb3cnKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIGQzLnNlbGVjdCgnLmZsbmUtYmFyIHN2ZycpLmF0dHIoJ2hlaWdodCcsIGZsbmVfaGVpZ2h0KTtcbiAgICAgICAgICAgIGlmIChzY2FsZXJfZG9tKSB7XG4gICAgICAgICAgICAgICAgc2NhbGVyX2RvbS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBjb250aW51ZSB0byBmdXJuaXNoIGluamVjdGlvbiBkZXRhaWxcbiAgICAgICAgbGV0IGluamVjdGlvbnMgPSBfLmZpbHRlcih0aGF0LnN0YXRpY19pbmosIHthYmJyZXY6IGFyZWEuYWJicmV2fSk7XG4gICAgICAgIC8vQWN0aW9ucy5ub2RlRGV0YWlsKGluamVjdGlvbnMpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtub2RlUGlja2VkOiBBcHBTdG9yZS5nZXROb2RlUGlja2VkKCl9KTtcbiAgICB9XG4gICAgYXJlYUJhck1vdXNlT3ZlcihtZSwgZnJvbV8sIHRvKSB7XG4gICAgICAgIEFjdGlvbnMuaGlnaGxpZ2h0RWRnZShmcm9tXywgdG8sICcjMDAwMDAwJyk7XG4gICAgICAgIEFjdGlvbnMuYm9sZEVkZ2UoZnJvbV8sIHRvKTtcbiAgICB9XG4gICAgYXJlYUJhck1vdXNlT3V0KG1lLCBmcm9tXywgdG8pIHtcbiAgICAgICAgQWN0aW9ucy51bmhpZ2hsaWdodEVkZ2UoZnJvbV8sIHRvLCAnIzAwMDAwMCcpO1xuICAgICAgICBBY3Rpb25zLnVuYm9sZEVkZ2UoZnJvbV8sIHRvKTtcbiAgICB9XG4gICAgYXJlYUxhYmVsTW91c2VPdmVyKG1lLCBmcm9tXywgdG8pIHtcbiAgICAgICAgbGV0IGJib3ggPSBtZS5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCB0b3AgPSBiYm94LnRvcCArICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpO1xuICAgICAgICBzaG93VG9vbHRpcEFyZWFOYW1lKHthcmVhOiBmcm9tXywgeDogYmJveC5sZWZ0LCB5OiB0b3AgLSAzNX0pO1xuICAgIH1cbiAgICBhcmVhTGFiZWxNb3VzZU91dChtZSwgZnJvbV8sIHRvKSB7XG4gICAgICAgIGhpZGVUb29sdGlwKCk7XG4gICAgfVxuICAgIGhhbmRsZURvd25sb2FkU1ZHKGUpIHtcbiAgICAgICAgbGV0IGh0bWwgPSB0aGlzLnN2Z19mbG5lX3BhcmVudC5odG1sKCk7XG4gICAgICAgIGxldCBiNjQgPSBidG9hKGh0bWwpO1xuICAgICAgICBsZXQgaHJlZiA9ICdkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFxcbicgKyBiNjQ7XG4gICAgICAgIGUudGFyZ2V0LmhyZWYgPSBocmVmO1xuICAgICAgICBBY3Rpb25zLnNldERvd25sb2FkTGluayhocmVmLCBlLCAnZXhwb3J0X2ZsYXRtYXBfZ3JhcGguc3ZnJyk7XG5cbiAgICB9XG4gICAgaGFuZGxlRG93bmxvYWRDU1YoZSkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5ub2RlUGlja2VkKSB7XG4gICAgICAgICAgICBsZXQgaHJlZiA9ICcvc3RhdGljL2RhdGEvaW5kaXZpZHVhbF9hcmVhcy9mbG5lX2FyZWFfJyArIHRoaXMuc3RhdGUubm9kZVBpY2tlZC5hYmJyZXYgKyAnLmNzdic7XG4gICAgICAgICAgICBlLnRhcmdldC5ocmVmID0gaHJlZjtcbiAgICAgICAgICAgIEFjdGlvbnMuc2V0RG93bmxvYWRMaW5rKGhyZWYsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZURvd25sb2FkR3JhcGgoZSkge1xuICAgICAgICBsZXQgaHRtbCA9IHRoaXMuZ3JhcGhfcGFyZW50Lmh0bWwoKTtcbiAgICAgICAgbGV0IGI2NCA9IGJ0b2EoaHRtbCk7XG4gICAgICAgIGxldCBocmVmID0gJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsXFxuJyArIGI2NDtcbiAgICAgICAgZS50YXJnZXQuaHJlZiA9IGhyZWY7XG4gICAgICAgIEFjdGlvbnMuc2V0RG93bmxvYWRMaW5rKGhyZWYsIHRydWUpO1xuXG4gICAgfVxuICAgIGhhbmRsZURvd25sb2FkU1ZHSGVscChlKSB7XG4gICAgfVxuICAgIGhhbmRsZUNsb3NlRG93bmxvYWRTVkdIZWxwKGUpIHtcbiAgICB9XG4gICAgLypcbiAgICBzaG93RG93bmxvYWRTVkdIZWxwKGUpIHtcbiAgICB9XG4gICAgc2hvd0Rvd25sb2FkQ1NWSGVscChlKSB7XG4gICAgfVxuICAgIGhpZGVEb3dubG9hZFNWR0hlbHAoZSkge1xuICAgIH1cbiAgICBoaWRlRG93bmxvYWRDU1ZIZWxwKGUpIHtcbiAgICB9XG4gICAgKi9cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAgICovXG4gICAgcmVuZGVyKCkge1xuICAgICAgICBsZXQgYXJlYV9uYW1lID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUubm9kZVBpY2tlZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMubW9kZSA9PSAnU0xOJykge1xuICAgICAgICAgICAgICAgIC8vYXJlYV9uYW1lID0gPHNwYW4gY2xhc3NOYW1lPVwiYXJlYS1uYW1lXCIgdGl0bGU9e3RvVGl0bGVDYXNlKHRoaXMuc3RhdGUubm9kZVBpY2tlZC5mdWxsbmFtZSl9PmFyZWEge3RoaXMuc3RhdGUubm9kZVBpY2tlZC5hYmJyZXZ9PC9zcGFuPjtcbiAgICAgICAgICAgICAgICBhcmVhX25hbWUgPSA8VG9vbFRpcCBjbGFzc05hbWU9XCJhcmVhLW5hbWVcIiB0aXRsZT17dG9UaXRsZUNhc2UodGhpcy5zdGF0ZS5ub2RlUGlja2VkLmZ1bGxuYW1lKX0+YXJlYSB7dGhpcy5zdGF0ZS5ub2RlUGlja2VkLmFiYnJldn08L1Rvb2xUaXA+O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcmVhX25hbWUgPSB0b1RpdGxlQ2FzZSh0aGlzLnN0YXRlLm5vZGVQaWNrZWQuZnVsbG5hbWUpICsgJyAoJyArIHRoaXMuc3RhdGUubm9kZVBpY2tlZC5hYmJyZXYgKyAnKSc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRvd25sb2FkX3N2ZyA9IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGluay1idXR0b25cIj48YSBvbkNsaWNrPXt0aGlzLmhhbmRsZURvd25sb2FkR3JhcGh9IGRvd25sb2FkPVwiZXhwb3J0X2ZsYXRtYXBfZ3JhcGguc3ZnXCI+RG93bmxvYWQgdGhlIGdyYXBoIGFzIFNWRzwvYT48L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBudWxsO1xuXG4gICAgICAgICAgICBsZXQgc291cmNlcyA9IG51bGw7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5ub2RlUGlja2VkKSB7XG4gICAgICAgICAgICAgICAgc291cmNlcyA9ICcsICcgKyB0aGlzLnN0cmVuZ3RoX2FyZWFfY291bnQgKyAnIHNvdXJjZXM6JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFhYWCBoYWNrIHRvIHJlbW92ZSBzb3VyY2Ugc3VtbWFyeVxuICAgICAgICAgICAgc291cmNlcyA9IG51bGw7XG5cbiAgICAgICAgbGV0IGhlYWRlcjtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMubW9kZSA9PSAnU0xOJykge1xuICAgICAgICAgICAgaGVhZGVyID0gKDxzcGFuPkZyYWN0aW9uIG9mIGV4dHJpbnNpYyBzdXByYWdyYW51bGFyIG5ldXJvbnM8YnIvPmZvciA8L3NwYW4+KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhlYWRlciA9ICg8c3Bhbj5Db25uZWN0aXZpdHkgcHJvZmlsZSBmb3IgdGhlPGJyLz48L3NwYW4+KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ21haW4tZmxuZScsIHtoaWRkZW46ICF0aGlzLnN0YXRlLnN0cmVuZ3RoRXhpc3RzfSl9PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW5mby1sYWJlbFwiPlxuICAgICAgICAgICAgICAgICAgICB7aGVhZGVyfVxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmplY3Rpb24tYXJlYS1uYW1lXCI+e2FyZWFfbmFtZX17c291cmNlc308L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbG5lLWJhclwiPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZG93bmxvYWRcIj5cbiAgICAgICAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT1cImRvd25sb2FkLXN2Z1wiPjxhIG9uQ2xpY2s9e3RoaXMuaGFuZGxlRG93bmxvYWRTVkd9IGRvd25sb2FkPVwiZXhwb3J0X3N2Zy5zdmdcIiB0aXRsZT1cIkRvd25sb2FkIEZMTmUgYmFyIGNoYXJ0IGFzIFNWRyBkcmF3aW5nXCI+RG93bmxvYWQgYmFyIGNoYXJ0IGFzIFNWRyBkcmF3aW5nPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJkb3dubG9hZC1jc3ZcIj48YSBvbkNsaWNrPXt0aGlzLmhhbmRsZURvd25sb2FkQ1NWfSB0aXRsZT1cIkRvd25sb2FkIEZMTmUgZGF0YSBpbiBDU1YgZm9ybWF0XCI+RG93bmxvYWQgZGF0YSBhcyBDU1YgZmlsZTwvYT4mbmJzcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG5cbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8ganMvY29tcG9uZW50cy9NYWluRmxuZS5yZWFjdC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFTQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQXRCQTs7Ozs7Ozs7O0FBdUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFPQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQU5BO0FBVUE7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFHQTtBQUVBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBQ0E7Ozs7Ozs7OztBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBMkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFRQTtBQUNBO0FBdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQWdDQTtBQUdBO0FBQ0E7QUFHQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBQ0E7OztBQUVBO0FBRUE7Ozs7Ozs7Ozs7QUFVQTs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQVBBO0FBaUJBOzs7Ozs7QUEzWEE7QUE2WEEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 252:
/* unknown exports provided */
/* all exports used */
/*!*************************!*\
  !*** ./~/flux/index.js ***!
  \*************************/
/***/ (function(module, exports, __webpack_require__) {

eval("/**\n * Copyright (c) 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\nmodule.exports.Dispatcher = __webpack_require__(/*! ./lib/Dispatcher */ 253);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9mbHV4L2luZGV4LmpzPzQ0YjUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbm1vZHVsZS5leHBvcnRzLkRpc3BhdGNoZXIgPSByZXF1aXJlKCcuL2xpYi9EaXNwYXRjaGVyJyk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZmx1eC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjUyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 253:
/* unknown exports provided */
/* all exports used */
/*!**********************************!*\
  !*** ./~/flux/lib/Dispatcher.js ***!
  \**********************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(process) {/**\n * Copyright (c) 2014-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule Dispatcher\n * \n * @preventMunge\n */\n\n\n\nexports.__esModule = true;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar invariant = __webpack_require__(/*! fbjs/lib/invariant */ 2);\n\nvar _prefix = 'ID_';\n\n/**\n * Dispatcher is used to broadcast payloads to registered callbacks. This is\n * different from generic pub-sub systems in two ways:\n *\n *   1) Callbacks are not subscribed to particular events. Every payload is\n *      dispatched to every registered callback.\n *   2) Callbacks can be deferred in whole or part until other callbacks have\n *      been executed.\n *\n * For example, consider this hypothetical flight destination form, which\n * selects a default city when a country is selected:\n *\n *   var flightDispatcher = new Dispatcher();\n *\n *   // Keeps track of which country is selected\n *   var CountryStore = {country: null};\n *\n *   // Keeps track of which city is selected\n *   var CityStore = {city: null};\n *\n *   // Keeps track of the base flight price of the selected city\n *   var FlightPriceStore = {price: null}\n *\n * When a user changes the selected city, we dispatch the payload:\n *\n *   flightDispatcher.dispatch({\n *     actionType: 'city-update',\n *     selectedCity: 'paris'\n *   });\n *\n * This payload is digested by `CityStore`:\n *\n *   flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'city-update') {\n *       CityStore.city = payload.selectedCity;\n *     }\n *   });\n *\n * When the user selects a country, we dispatch the payload:\n *\n *   flightDispatcher.dispatch({\n *     actionType: 'country-update',\n *     selectedCountry: 'australia'\n *   });\n *\n * This payload is digested by both stores:\n *\n *   CountryStore.dispatchToken = flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'country-update') {\n *       CountryStore.country = payload.selectedCountry;\n *     }\n *   });\n *\n * When the callback to update `CountryStore` is registered, we save a reference\n * to the returned token. Using this token with `waitFor()`, we can guarantee\n * that `CountryStore` is updated before the callback that updates `CityStore`\n * needs to query its data.\n *\n *   CityStore.dispatchToken = flightDispatcher.register(function(payload) {\n *     if (payload.actionType === 'country-update') {\n *       // `CountryStore.country` may not be updated.\n *       flightDispatcher.waitFor([CountryStore.dispatchToken]);\n *       // `CountryStore.country` is now guaranteed to be updated.\n *\n *       // Select the default city for the new country\n *       CityStore.city = getDefaultCityForCountry(CountryStore.country);\n *     }\n *   });\n *\n * The usage of `waitFor()` can be chained, for example:\n *\n *   FlightPriceStore.dispatchToken =\n *     flightDispatcher.register(function(payload) {\n *       switch (payload.actionType) {\n *         case 'country-update':\n *         case 'city-update':\n *           flightDispatcher.waitFor([CityStore.dispatchToken]);\n *           FlightPriceStore.price =\n *             getFlightPriceStore(CountryStore.country, CityStore.city);\n *           break;\n *     }\n *   });\n *\n * The `country-update` payload will be guaranteed to invoke the stores'\n * registered callbacks in order: `CountryStore`, `CityStore`, then\n * `FlightPriceStore`.\n */\n\nvar Dispatcher = (function () {\n  function Dispatcher() {\n    _classCallCheck(this, Dispatcher);\n\n    this._callbacks = {};\n    this._isDispatching = false;\n    this._isHandled = {};\n    this._isPending = {};\n    this._lastID = 1;\n  }\n\n  /**\n   * Registers a callback to be invoked with every dispatched payload. Returns\n   * a token that can be used with `waitFor()`.\n   */\n\n  Dispatcher.prototype.register = function register(callback) {\n    var id = _prefix + this._lastID++;\n    this._callbacks[id] = callback;\n    return id;\n  };\n\n  /**\n   * Removes a callback based on its token.\n   */\n\n  Dispatcher.prototype.unregister = function unregister(id) {\n    !this._callbacks[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.unregister(...): `%s` does not map to a registered callback.', id) : invariant(false) : undefined;\n    delete this._callbacks[id];\n  };\n\n  /**\n   * Waits for the callbacks specified to be invoked before continuing execution\n   * of the current callback. This method should only be used by a callback in\n   * response to a dispatched payload.\n   */\n\n  Dispatcher.prototype.waitFor = function waitFor(ids) {\n    !this._isDispatching ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): Must be invoked while dispatching.') : invariant(false) : undefined;\n    for (var ii = 0; ii < ids.length; ii++) {\n      var id = ids[ii];\n      if (this._isPending[id]) {\n        !this._isHandled[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): Circular dependency detected while ' + 'waiting for `%s`.', id) : invariant(false) : undefined;\n        continue;\n      }\n      !this._callbacks[id] ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatcher.waitFor(...): `%s` does not map to a registered callback.', id) : invariant(false) : undefined;\n      this._invokeCallback(id);\n    }\n  };\n\n  /**\n   * Dispatches a payload to all registered callbacks.\n   */\n\n  Dispatcher.prototype.dispatch = function dispatch(payload) {\n    !!this._isDispatching ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.') : invariant(false) : undefined;\n    this._startDispatching(payload);\n    try {\n      for (var id in this._callbacks) {\n        if (this._isPending[id]) {\n          continue;\n        }\n        this._invokeCallback(id);\n      }\n    } finally {\n      this._stopDispatching();\n    }\n  };\n\n  /**\n   * Is this Dispatcher currently dispatching.\n   */\n\n  Dispatcher.prototype.isDispatching = function isDispatching() {\n    return this._isDispatching;\n  };\n\n  /**\n   * Call the callback stored with the given id. Also do some internal\n   * bookkeeping.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._invokeCallback = function _invokeCallback(id) {\n    this._isPending[id] = true;\n    this._callbacks[id](this._pendingPayload);\n    this._isHandled[id] = true;\n  };\n\n  /**\n   * Set up bookkeeping needed when dispatching.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._startDispatching = function _startDispatching(payload) {\n    for (var id in this._callbacks) {\n      this._isPending[id] = false;\n      this._isHandled[id] = false;\n    }\n    this._pendingPayload = payload;\n    this._isDispatching = true;\n  };\n\n  /**\n   * Clear bookkeeping used for dispatching.\n   *\n   * @internal\n   */\n\n  Dispatcher.prototype._stopDispatching = function _stopDispatching() {\n    delete this._pendingPayload;\n    this._isDispatching = false;\n  };\n\n  return Dispatcher;\n})();\n\nmodule.exports = Dispatcher;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./../../process/browser.js */ 1)))//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vfi9mbHV4L2xpYi9EaXNwYXRjaGVyLmpzPzAzZWEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBEaXNwYXRjaGVyXG4gKiBcbiAqIEBwcmV2ZW50TXVuZ2VcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uJyk7IH0gfVxuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbnZhciBfcHJlZml4ID0gJ0lEXyc7XG5cbi8qKlxuICogRGlzcGF0Y2hlciBpcyB1c2VkIHRvIGJyb2FkY2FzdCBwYXlsb2FkcyB0byByZWdpc3RlcmVkIGNhbGxiYWNrcy4gVGhpcyBpc1xuICogZGlmZmVyZW50IGZyb20gZ2VuZXJpYyBwdWItc3ViIHN5c3RlbXMgaW4gdHdvIHdheXM6XG4gKlxuICogICAxKSBDYWxsYmFja3MgYXJlIG5vdCBzdWJzY3JpYmVkIHRvIHBhcnRpY3VsYXIgZXZlbnRzLiBFdmVyeSBwYXlsb2FkIGlzXG4gKiAgICAgIGRpc3BhdGNoZWQgdG8gZXZlcnkgcmVnaXN0ZXJlZCBjYWxsYmFjay5cbiAqICAgMikgQ2FsbGJhY2tzIGNhbiBiZSBkZWZlcnJlZCBpbiB3aG9sZSBvciBwYXJ0IHVudGlsIG90aGVyIGNhbGxiYWNrcyBoYXZlXG4gKiAgICAgIGJlZW4gZXhlY3V0ZWQuXG4gKlxuICogRm9yIGV4YW1wbGUsIGNvbnNpZGVyIHRoaXMgaHlwb3RoZXRpY2FsIGZsaWdodCBkZXN0aW5hdGlvbiBmb3JtLCB3aGljaFxuICogc2VsZWN0cyBhIGRlZmF1bHQgY2l0eSB3aGVuIGEgY291bnRyeSBpcyBzZWxlY3RlZDpcbiAqXG4gKiAgIHZhciBmbGlnaHREaXNwYXRjaGVyID0gbmV3IERpc3BhdGNoZXIoKTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHdoaWNoIGNvdW50cnkgaXMgc2VsZWN0ZWRcbiAqICAgdmFyIENvdW50cnlTdG9yZSA9IHtjb3VudHJ5OiBudWxsfTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHdoaWNoIGNpdHkgaXMgc2VsZWN0ZWRcbiAqICAgdmFyIENpdHlTdG9yZSA9IHtjaXR5OiBudWxsfTtcbiAqXG4gKiAgIC8vIEtlZXBzIHRyYWNrIG9mIHRoZSBiYXNlIGZsaWdodCBwcmljZSBvZiB0aGUgc2VsZWN0ZWQgY2l0eVxuICogICB2YXIgRmxpZ2h0UHJpY2VTdG9yZSA9IHtwcmljZTogbnVsbH1cbiAqXG4gKiBXaGVuIGEgdXNlciBjaGFuZ2VzIHRoZSBzZWxlY3RlZCBjaXR5LCB3ZSBkaXNwYXRjaCB0aGUgcGF5bG9hZDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICogICAgIGFjdGlvblR5cGU6ICdjaXR5LXVwZGF0ZScsXG4gKiAgICAgc2VsZWN0ZWRDaXR5OiAncGFyaXMnXG4gKiAgIH0pO1xuICpcbiAqIFRoaXMgcGF5bG9hZCBpcyBkaWdlc3RlZCBieSBgQ2l0eVN0b3JlYDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjaXR5LXVwZGF0ZScpIHtcbiAqICAgICAgIENpdHlTdG9yZS5jaXR5ID0gcGF5bG9hZC5zZWxlY3RlZENpdHk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBXaGVuIHRoZSB1c2VyIHNlbGVjdHMgYSBjb3VudHJ5LCB3ZSBkaXNwYXRjaCB0aGUgcGF5bG9hZDpcbiAqXG4gKiAgIGZsaWdodERpc3BhdGNoZXIuZGlzcGF0Y2goe1xuICogICAgIGFjdGlvblR5cGU6ICdjb3VudHJ5LXVwZGF0ZScsXG4gKiAgICAgc2VsZWN0ZWRDb3VudHJ5OiAnYXVzdHJhbGlhJ1xuICogICB9KTtcbiAqXG4gKiBUaGlzIHBheWxvYWQgaXMgZGlnZXN0ZWQgYnkgYm90aCBzdG9yZXM6XG4gKlxuICogICBDb3VudHJ5U3RvcmUuZGlzcGF0Y2hUb2tlbiA9IGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjb3VudHJ5LXVwZGF0ZScpIHtcbiAqICAgICAgIENvdW50cnlTdG9yZS5jb3VudHJ5ID0gcGF5bG9hZC5zZWxlY3RlZENvdW50cnk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBXaGVuIHRoZSBjYWxsYmFjayB0byB1cGRhdGUgYENvdW50cnlTdG9yZWAgaXMgcmVnaXN0ZXJlZCwgd2Ugc2F2ZSBhIHJlZmVyZW5jZVxuICogdG8gdGhlIHJldHVybmVkIHRva2VuLiBVc2luZyB0aGlzIHRva2VuIHdpdGggYHdhaXRGb3IoKWAsIHdlIGNhbiBndWFyYW50ZWVcbiAqIHRoYXQgYENvdW50cnlTdG9yZWAgaXMgdXBkYXRlZCBiZWZvcmUgdGhlIGNhbGxiYWNrIHRoYXQgdXBkYXRlcyBgQ2l0eVN0b3JlYFxuICogbmVlZHMgdG8gcXVlcnkgaXRzIGRhdGEuXG4gKlxuICogICBDaXR5U3RvcmUuZGlzcGF0Y2hUb2tlbiA9IGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgIGlmIChwYXlsb2FkLmFjdGlvblR5cGUgPT09ICdjb3VudHJ5LXVwZGF0ZScpIHtcbiAqICAgICAgIC8vIGBDb3VudHJ5U3RvcmUuY291bnRyeWAgbWF5IG5vdCBiZSB1cGRhdGVkLlxuICogICAgICAgZmxpZ2h0RGlzcGF0Y2hlci53YWl0Rm9yKFtDb3VudHJ5U3RvcmUuZGlzcGF0Y2hUb2tlbl0pO1xuICogICAgICAgLy8gYENvdW50cnlTdG9yZS5jb3VudHJ5YCBpcyBub3cgZ3VhcmFudGVlZCB0byBiZSB1cGRhdGVkLlxuICpcbiAqICAgICAgIC8vIFNlbGVjdCB0aGUgZGVmYXVsdCBjaXR5IGZvciB0aGUgbmV3IGNvdW50cnlcbiAqICAgICAgIENpdHlTdG9yZS5jaXR5ID0gZ2V0RGVmYXVsdENpdHlGb3JDb3VudHJ5KENvdW50cnlTdG9yZS5jb3VudHJ5KTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICpcbiAqIFRoZSB1c2FnZSBvZiBgd2FpdEZvcigpYCBjYW4gYmUgY2hhaW5lZCwgZm9yIGV4YW1wbGU6XG4gKlxuICogICBGbGlnaHRQcmljZVN0b3JlLmRpc3BhdGNoVG9rZW4gPVxuICogICAgIGZsaWdodERpc3BhdGNoZXIucmVnaXN0ZXIoZnVuY3Rpb24ocGF5bG9hZCkge1xuICogICAgICAgc3dpdGNoIChwYXlsb2FkLmFjdGlvblR5cGUpIHtcbiAqICAgICAgICAgY2FzZSAnY291bnRyeS11cGRhdGUnOlxuICogICAgICAgICBjYXNlICdjaXR5LXVwZGF0ZSc6XG4gKiAgICAgICAgICAgZmxpZ2h0RGlzcGF0Y2hlci53YWl0Rm9yKFtDaXR5U3RvcmUuZGlzcGF0Y2hUb2tlbl0pO1xuICogICAgICAgICAgIEZsaWdodFByaWNlU3RvcmUucHJpY2UgPVxuICogICAgICAgICAgICAgZ2V0RmxpZ2h0UHJpY2VTdG9yZShDb3VudHJ5U3RvcmUuY291bnRyeSwgQ2l0eVN0b3JlLmNpdHkpO1xuICogICAgICAgICAgIGJyZWFrO1xuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICogVGhlIGBjb3VudHJ5LXVwZGF0ZWAgcGF5bG9hZCB3aWxsIGJlIGd1YXJhbnRlZWQgdG8gaW52b2tlIHRoZSBzdG9yZXMnXG4gKiByZWdpc3RlcmVkIGNhbGxiYWNrcyBpbiBvcmRlcjogYENvdW50cnlTdG9yZWAsIGBDaXR5U3RvcmVgLCB0aGVuXG4gKiBgRmxpZ2h0UHJpY2VTdG9yZWAuXG4gKi9cblxudmFyIERpc3BhdGNoZXIgPSAoZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBEaXNwYXRjaGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEaXNwYXRjaGVyKTtcblxuICAgIHRoaXMuX2NhbGxiYWNrcyA9IHt9O1xuICAgIHRoaXMuX2lzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9pc0hhbmRsZWQgPSB7fTtcbiAgICB0aGlzLl9pc1BlbmRpbmcgPSB7fTtcbiAgICB0aGlzLl9sYXN0SUQgPSAxO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgd2l0aCBldmVyeSBkaXNwYXRjaGVkIHBheWxvYWQuIFJldHVybnNcbiAgICogYSB0b2tlbiB0aGF0IGNhbiBiZSB1c2VkIHdpdGggYHdhaXRGb3IoKWAuXG4gICAqL1xuXG4gIERpc3BhdGNoZXIucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gcmVnaXN0ZXIoY2FsbGJhY2spIHtcbiAgICB2YXIgaWQgPSBfcHJlZml4ICsgdGhpcy5fbGFzdElEKys7XG4gICAgdGhpcy5fY2FsbGJhY2tzW2lkXSA9IGNhbGxiYWNrO1xuICAgIHJldHVybiBpZDtcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGNhbGxiYWNrIGJhc2VkIG9uIGl0cyB0b2tlbi5cbiAgICovXG5cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUudW5yZWdpc3RlciA9IGZ1bmN0aW9uIHVucmVnaXN0ZXIoaWQpIHtcbiAgICAhdGhpcy5fY2FsbGJhY2tzW2lkXSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdEaXNwYXRjaGVyLnVucmVnaXN0ZXIoLi4uKTogYCVzYCBkb2VzIG5vdCBtYXAgdG8gYSByZWdpc3RlcmVkIGNhbGxiYWNrLicsIGlkKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1tpZF07XG4gIH07XG5cbiAgLyoqXG4gICAqIFdhaXRzIGZvciB0aGUgY2FsbGJhY2tzIHNwZWNpZmllZCB0byBiZSBpbnZva2VkIGJlZm9yZSBjb250aW51aW5nIGV4ZWN1dGlvblxuICAgKiBvZiB0aGUgY3VycmVudCBjYWxsYmFjay4gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgdXNlZCBieSBhIGNhbGxiYWNrIGluXG4gICAqIHJlc3BvbnNlIHRvIGEgZGlzcGF0Y2hlZCBwYXlsb2FkLlxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS53YWl0Rm9yID0gZnVuY3Rpb24gd2FpdEZvcihpZHMpIHtcbiAgICAhdGhpcy5faXNEaXNwYXRjaGluZyA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdEaXNwYXRjaGVyLndhaXRGb3IoLi4uKTogTXVzdCBiZSBpbnZva2VkIHdoaWxlIGRpc3BhdGNoaW5nLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgaWRzLmxlbmd0aDsgaWkrKykge1xuICAgICAgdmFyIGlkID0gaWRzW2lpXTtcbiAgICAgIGlmICh0aGlzLl9pc1BlbmRpbmdbaWRdKSB7XG4gICAgICAgICF0aGlzLl9pc0hhbmRsZWRbaWRdID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBDaXJjdWxhciBkZXBlbmRlbmN5IGRldGVjdGVkIHdoaWxlICcgKyAnd2FpdGluZyBmb3IgYCVzYC4nLCBpZCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgICF0aGlzLl9jYWxsYmFja3NbaWRdID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Rpc3BhdGNoZXIud2FpdEZvciguLi4pOiBgJXNgIGRvZXMgbm90IG1hcCB0byBhIHJlZ2lzdGVyZWQgY2FsbGJhY2suJywgaWQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX2ludm9rZUNhbGxiYWNrKGlkKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYSBwYXlsb2FkIHRvIGFsbCByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAgICovXG5cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiBkaXNwYXRjaChwYXlsb2FkKSB7XG4gICAgISF0aGlzLl9pc0Rpc3BhdGNoaW5nID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Rpc3BhdGNoLmRpc3BhdGNoKC4uLik6IENhbm5vdCBkaXNwYXRjaCBpbiB0aGUgbWlkZGxlIG9mIGEgZGlzcGF0Y2guJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHRoaXMuX3N0YXJ0RGlzcGF0Y2hpbmcocGF5bG9hZCk7XG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIGlkIGluIHRoaXMuX2NhbGxiYWNrcykge1xuICAgICAgICBpZiAodGhpcy5faXNQZW5kaW5nW2lkXSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ludm9rZUNhbGxiYWNrKGlkKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5fc3RvcERpc3BhdGNoaW5nKCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJcyB0aGlzIERpc3BhdGNoZXIgY3VycmVudGx5IGRpc3BhdGNoaW5nLlxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5pc0Rpc3BhdGNoaW5nID0gZnVuY3Rpb24gaXNEaXNwYXRjaGluZygpIHtcbiAgICByZXR1cm4gdGhpcy5faXNEaXNwYXRjaGluZztcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbCB0aGUgY2FsbGJhY2sgc3RvcmVkIHdpdGggdGhlIGdpdmVuIGlkLiBBbHNvIGRvIHNvbWUgaW50ZXJuYWxcbiAgICogYm9va2tlZXBpbmcuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5faW52b2tlQ2FsbGJhY2sgPSBmdW5jdGlvbiBfaW52b2tlQ2FsbGJhY2soaWQpIHtcbiAgICB0aGlzLl9pc1BlbmRpbmdbaWRdID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsYmFja3NbaWRdKHRoaXMuX3BlbmRpbmdQYXlsb2FkKTtcbiAgICB0aGlzLl9pc0hhbmRsZWRbaWRdID0gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogU2V0IHVwIGJvb2trZWVwaW5nIG5lZWRlZCB3aGVuIGRpc3BhdGNoaW5nLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG5cbiAgRGlzcGF0Y2hlci5wcm90b3R5cGUuX3N0YXJ0RGlzcGF0Y2hpbmcgPSBmdW5jdGlvbiBfc3RhcnREaXNwYXRjaGluZyhwYXlsb2FkKSB7XG4gICAgZm9yICh2YXIgaWQgaW4gdGhpcy5fY2FsbGJhY2tzKSB7XG4gICAgICB0aGlzLl9pc1BlbmRpbmdbaWRdID0gZmFsc2U7XG4gICAgICB0aGlzLl9pc0hhbmRsZWRbaWRdID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX3BlbmRpbmdQYXlsb2FkID0gcGF5bG9hZDtcbiAgICB0aGlzLl9pc0Rpc3BhdGNoaW5nID0gdHJ1ZTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYXIgYm9va2tlZXBpbmcgdXNlZCBmb3IgZGlzcGF0Y2hpbmcuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cblxuICBEaXNwYXRjaGVyLnByb3RvdHlwZS5fc3RvcERpc3BhdGNoaW5nID0gZnVuY3Rpb24gX3N0b3BEaXNwYXRjaGluZygpIHtcbiAgICBkZWxldGUgdGhpcy5fcGVuZGluZ1BheWxvYWQ7XG4gICAgdGhpcy5faXNEaXNwYXRjaGluZyA9IGZhbHNlO1xuICB9O1xuXG4gIHJldHVybiBEaXNwYXRjaGVyO1xufSkoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBEaXNwYXRjaGVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9mbHV4L2xpYi9EaXNwYXRjaGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAyNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 26:
/* unknown exports provided */
/* all exports used */
/*!*****************************************!*\
  !*** ./js/components/ColorBar.react.js ***!
  \*****************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _d = __webpack_require__(/*! d3 */ 12);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _MainFlne = __webpack_require__(/*! ./MainFlne.react */ 24);\n\nvar _MainFlne2 = _interopRequireDefault(_MainFlne);\n\nvar _InjectionList = __webpack_require__(/*! ./InjectionList.react */ 21);\n\nvar _InjectionList2 = _interopRequireDefault(_InjectionList);\n\nvar _numberformat = __webpack_require__(/*! ../lib/numberformat */ 31);\n\nvar _numberformat2 = _interopRequireDefault(_numberformat);\n\nvar _classnames = __webpack_require__(/*! classnames */ 13);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _AppDispatcher = __webpack_require__(/*! ../dispatcher/AppDispatcher */ 18);\n\nvar _AppDispatcher2 = _interopRequireDefault(_AppDispatcher);\n\nvar _utils = __webpack_require__(/*! ../lib/utils */ 16);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n//\n//function toTitleCase(str) {\n//    //return str.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\n//    return str.charAt(0).toUpperCase() + str.substr(1);\n//}\nvar ColorBar = function (_React$Component) {\n    _inherits(ColorBar, _React$Component);\n\n    function ColorBar(props, context) {\n        _classCallCheck(this, ColorBar);\n\n        var _this = _possibleConstructorReturn(this, (ColorBar.__proto__ || Object.getPrototypeOf(ColorBar)).call(this, props, context));\n\n        _lodash2.default.bindAll(_this, 'handleChange');\n        return _this;\n    }\n\n    _createClass(ColorBar, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _AppStore2.default.addChangeListener(this.handleChange);\n            var svg = d3.selectAll('.color-bar').append('img');\n            switch (this.props.style) {\n                case 'matrix':\n                default:\n                    if (this.props.mode == 'FLN') {\n                        svg.attr('src', '/static/images/color_bar.svg');\n                        svg.attr('width', '630');\n                    } else {\n                        svg.attr('src', '/static/images/color_bar_sln.svg');\n                        svg.attr('width', '630');\n                    }\n                    break;\n                case 'graph':\n                    //svg.attr('src', '/static/images/color_bar_graph.svg');\n                    svg.attr('src', '/static/images/2017-11-01-10-13-connectivity_graph_colorbar.png');\n                    svg.attr('width', '288');\n                    break;\n            }\n            /*\n            let svg = d3.selectAll('.color-bar').append('svg');\n            let defs = svg.append(\"defs\");\n            let that = this;\n            let linearGradient = defs.append('linearGradient')\n                .attr('id', 'linear-gradient');\n            let a = linearGradient\n                .attr(\"x1\", \"0%\")\n                .attr(\"y1\", \"0%\")\n                .attr(\"x2\", \"100%\")\n                .attr(\"y2\", \"0%\")\n                .selectAll('stop')\n                .data(getColorGradient())\n                .enter()\n                .append(\"stop\")\n                .attr(\"offset\", function(d) { console.log('wtf', d); return d.offset; })\n                .attr(\"stop-color\", function(d) { return d.color; });\n            svg.append(\"rect\")\n                .attr(\"width\", 300)\n                .attr(\"height\", 20)\n                .style(\"fill\", \"url(#linear-gradient)\");\n                let scaler = d3.axisBottom()\n                    .scale(that.getBarWidthFunc(0, 0))\n                    .tickSizeInner(10)\n                    .tickSizeOuter(0)\n                    .ticks(5);\n            let scaler_dom = svg.append('g')\n                .attr('transform', 'translate(0,' + 20 + ')')\n                .attr('class', 'axis-buttom')\n                .call(scaler);\n            scaler_dom.selectAll('.tick line').filter((d, i, l) => i == 0 || (i === l.length - 1)).attr('display', 'none');\n            let title = svg.append('text')\n                .attr('class', 'scale-x-title')\n                .attr('transform', 'translate(' + (320 / 2 - 20) + ', ' + (180) + ')')\n                .attr('text-anchor', 'middle');\n            title.append('tspan').attr('font-size', '12').text('log');\n            title.append('tspan').text('10').attr('baseline-shift', 'sub');\n            title.append('tspan').attr('font-size', '12').text('');\n            */\n        }\n    }, {\n        key: 'getBarWidthFunc',\n        value: function getBarWidthFunc(min, max) {\n            min = -6, max = 0;\n            var func = d3.scaleLinear().domain([min, max]).range([0, 300]);\n            return func;\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange() {\n            this.setState({ nodePicked: _AppStore2.default.getNodePicked() });\n        }\n        /**\n         * @return {object}\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            var content = _react2.default.createElement('section', { className: (0, _classnames2.default)('color-bar', this.props.style) });\n            return content;\n        }\n    }]);\n\n    return ColorBar;\n}(_react2.default.Component);\n\nexports.default = ColorBar;\n;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvY29tcG9uZW50cy9Db2xvckJhci5yZWFjdC5qcz9mYTc5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEFjdGlvbnMgZnJvbSAnLi4vYWN0aW9ucy9BY3Rpb25zJztcbmltcG9ydCBBcHBTdG9yZSBmcm9tICcuLi9zdG9yZXMvQXBwU3RvcmUnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCBNYWluRmxuZSBmcm9tICcuL01haW5GbG5lLnJlYWN0JztcbmltcG9ydCBJbmplY3Rpb25MaXN0IGZyb20gJy4vSW5qZWN0aW9uTGlzdC5yZWFjdCc7XG5pbXBvcnQgbnVtYmVyRm9ybWF0IGZyb20gJy4uL2xpYi9udW1iZXJmb3JtYXQnO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgQXBwRGlzcGF0Y2hlciBmcm9tICcuLi9kaXNwYXRjaGVyL0FwcERpc3BhdGNoZXInO1xuaW1wb3J0IHt0b1RpdGxlQ2FzZSwgZ2V0TG9nQ29sb3JGdW5jLCBzaG93VG9vbHRpcEFyZWFOYW1lLCBoaWRlVG9vbHRpcCwgZ2V0Q29sb3JHcmFkaWVudH0gZnJvbSAnLi4vbGliL3V0aWxzJztcbi8vXG4vL2Z1bmN0aW9uIHRvVGl0bGVDYXNlKHN0cikge1xuLy8gICAgLy9yZXR1cm4gc3RyLnJlcGxhY2UoL1xcd1xcUyovZywgZnVuY3Rpb24odHh0KXtyZXR1cm4gdHh0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHh0LnN1YnN0cigxKS50b0xvd2VyQ2FzZSgpO30pO1xuLy8gICAgcmV0dXJuIHN0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0ci5zdWJzdHIoMSk7XG4vL31cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbG9yQmFyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCkge1xuICAgICAgICBzdXBlcihwcm9wcywgY29udGV4dCk7XG4gICAgICAgIF8uYmluZEFsbCh0aGlzLCAnaGFuZGxlQ2hhbmdlJyk7XG4gICAgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBBcHBTdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLmhhbmRsZUNoYW5nZSk7XG4gICAgICAgIGxldCBzdmcgPSBkMy5zZWxlY3RBbGwoJy5jb2xvci1iYXInKS5hcHBlbmQoJ2ltZycpO1xuICAgICAgICBzd2l0Y2ggKHRoaXMucHJvcHMuc3R5bGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ21hdHJpeCc6XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm1vZGUgPT0gJ0ZMTicpIHtcbiAgICAgICAgICAgICAgICAgICAgc3ZnLmF0dHIoJ3NyYycsICcvc3RhdGljL2ltYWdlcy9jb2xvcl9iYXIuc3ZnJyk7XG4gICAgICAgICAgICAgICAgICAgIHN2Zy5hdHRyKCd3aWR0aCcsICc2MzAnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdmcuYXR0cignc3JjJywgJy9zdGF0aWMvaW1hZ2VzL2NvbG9yX2Jhcl9zbG4uc3ZnJyk7XG4gICAgICAgICAgICAgICAgICAgIHN2Zy5hdHRyKCd3aWR0aCcsICc2MzAnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdncmFwaCc6XG4gICAgICAgICAgICAgICAgLy9zdmcuYXR0cignc3JjJywgJy9zdGF0aWMvaW1hZ2VzL2NvbG9yX2Jhcl9ncmFwaC5zdmcnKTtcbiAgICAgICAgICAgICAgICBzdmcuYXR0cignc3JjJywgJy9zdGF0aWMvaW1hZ2VzLzIwMTctMTEtMDEtMTAtMTMtY29ubmVjdGl2aXR5X2dyYXBoX2NvbG9yYmFyLnBuZycpO1xuICAgICAgICAgICAgICAgIHN2Zy5hdHRyKCd3aWR0aCcsICcyODgnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvKlxuICAgICAgICBsZXQgc3ZnID0gZDMuc2VsZWN0QWxsKCcuY29sb3ItYmFyJykuYXBwZW5kKCdzdmcnKTtcbiAgICAgICAgbGV0IGRlZnMgPSBzdmcuYXBwZW5kKFwiZGVmc1wiKTtcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xuICAgICAgICBsZXQgbGluZWFyR3JhZGllbnQgPSBkZWZzLmFwcGVuZCgnbGluZWFyR3JhZGllbnQnKVxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgJ2xpbmVhci1ncmFkaWVudCcpO1xuICAgICAgICBsZXQgYSA9IGxpbmVhckdyYWRpZW50XG4gICAgICAgICAgICAuYXR0cihcIngxXCIsIFwiMCVcIilcbiAgICAgICAgICAgIC5hdHRyKFwieTFcIiwgXCIwJVwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ4MlwiLCBcIjEwMCVcIilcbiAgICAgICAgICAgIC5hdHRyKFwieTJcIiwgXCIwJVwiKVxuICAgICAgICAgICAgLnNlbGVjdEFsbCgnc3RvcCcpXG4gICAgICAgICAgICAuZGF0YShnZXRDb2xvckdyYWRpZW50KCkpXG4gICAgICAgICAgICAuZW50ZXIoKVxuICAgICAgICAgICAgLmFwcGVuZChcInN0b3BcIilcbiAgICAgICAgICAgIC5hdHRyKFwib2Zmc2V0XCIsIGZ1bmN0aW9uKGQpIHsgY29uc29sZS5sb2coJ3d0ZicsIGQpOyByZXR1cm4gZC5vZmZzZXQ7IH0pXG4gICAgICAgICAgICAuYXR0cihcInN0b3AtY29sb3JcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5jb2xvcjsgfSk7XG4gICAgICAgIHN2Zy5hcHBlbmQoXCJyZWN0XCIpXG4gICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIDMwMClcbiAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIDIwKVxuICAgICAgICAgICAgLnN0eWxlKFwiZmlsbFwiLCBcInVybCgjbGluZWFyLWdyYWRpZW50KVwiKTtcbiAgICAgICAgICAgIGxldCBzY2FsZXIgPSBkMy5heGlzQm90dG9tKClcbiAgICAgICAgICAgICAgICAuc2NhbGUodGhhdC5nZXRCYXJXaWR0aEZ1bmMoMCwgMCkpXG4gICAgICAgICAgICAgICAgLnRpY2tTaXplSW5uZXIoMTApXG4gICAgICAgICAgICAgICAgLnRpY2tTaXplT3V0ZXIoMClcbiAgICAgICAgICAgICAgICAudGlja3MoNSk7XG4gICAgICAgIGxldCBzY2FsZXJfZG9tID0gc3ZnLmFwcGVuZCgnZycpXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCcgKyAyMCArICcpJylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdheGlzLWJ1dHRvbScpXG4gICAgICAgICAgICAuY2FsbChzY2FsZXIpO1xuICAgICAgICBzY2FsZXJfZG9tLnNlbGVjdEFsbCgnLnRpY2sgbGluZScpLmZpbHRlcigoZCwgaSwgbCkgPT4gaSA9PSAwIHx8IChpID09PSBsLmxlbmd0aCAtIDEpKS5hdHRyKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgbGV0IHRpdGxlID0gc3ZnLmFwcGVuZCgndGV4dCcpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnc2NhbGUteC10aXRsZScpXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgKDMyMCAvIDIgLSAyMCkgKyAnLCAnICsgKDE4MCkgKyAnKScpXG4gICAgICAgICAgICAuYXR0cigndGV4dC1hbmNob3InLCAnbWlkZGxlJyk7XG4gICAgICAgIHRpdGxlLmFwcGVuZCgndHNwYW4nKS5hdHRyKCdmb250LXNpemUnLCAnMTInKS50ZXh0KCdsb2cnKTtcbiAgICAgICAgdGl0bGUuYXBwZW5kKCd0c3BhbicpLnRleHQoJzEwJykuYXR0cignYmFzZWxpbmUtc2hpZnQnLCAnc3ViJyk7XG4gICAgICAgIHRpdGxlLmFwcGVuZCgndHNwYW4nKS5hdHRyKCdmb250LXNpemUnLCAnMTInKS50ZXh0KCcnKTtcbiAgICAgICAgKi9cblxuICAgIH1cbiAgICBnZXRCYXJXaWR0aEZ1bmMobWluLCBtYXgpIHtcbiAgICAgICAgbWluID0gLTYsIG1heCA9IDA7XG4gICAgICAgIGxldCBmdW5jID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oW21pbiwgbWF4XSkucmFuZ2UoWzAsIDMwMF0pO1xuICAgICAgICByZXR1cm4gZnVuYztcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtub2RlUGlja2VkOiBBcHBTdG9yZS5nZXROb2RlUGlja2VkKCl9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7b2JqZWN0fVxuICAgICAqL1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSAoXG4gICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdjb2xvci1iYXInLCB0aGlzLnByb3BzLnN0eWxlKX0+XG4gICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfVxuXG59O1xuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8ganMvY29tcG9uZW50cy9Db2xvckJhci5yZWFjdC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFTQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7OztBQXBCQTs7Ozs7Ozs7O0FBb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWZBO0FBaUJBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF3Q0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUNBO0FBSUE7QUFDQTs7OztBQW5GQTtBQUNBO0FBREE7QUFxRkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 30:
/* unknown exports provided */
/* all exports used */
/*!********************************!*\
  !*** ./js/lib/connectivity.js ***!
  \********************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Areas = exports.Area = exports.Connectivity = exports.ConnectivityRow = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.processAreas = processAreas;\nexports.processConnectivity = processConnectivity;\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ConnectivityRow = exports.ConnectivityRow = function ConnectivityRow() {\n    _classCallCheck(this, ConnectivityRow);\n\n    return new Proxy({}, {\n        get: function get(target, name) {\n            if (name in target) {\n                return target[name];\n            } else {\n                var ret = {};\n                target[name] = ret;\n                return ret;\n            }\n        }\n    });\n};\n\n;\n\nvar Connectivity = exports.Connectivity = function () {\n    function Connectivity() {\n        _classCallCheck(this, Connectivity);\n\n        this.data = new Proxy({}, {\n            get: function get(target, name) {\n                if (name in target) {\n                    return target[name];\n                } else {\n                    target[name] = new ConnectivityRow();\n                    return target[name];\n                }\n            }\n        });\n        this.targets = {};\n        this.sources = {};\n        this._data = new Proxy({}, {\n            get: function get(target, source) {\n                if (source in target) {\n                    return target[source];\n                } else {\n                    target[source] = new ConnectivityRow();\n                    return target[source];\n                }\n            }\n        });\n    }\n\n    _createClass(Connectivity, [{\n        key: 'link',\n        value: function link(target, source, data) {\n            return;\n            this.data[target.id][source.id] = data;\n            var t = this.targets[target.id];\n            this.targets[target.id] = t === undefined ? 1 : t + 1;\n            var s = this.sources[source.id];\n            this.sources[source.id] = s === undefined ? 1 : s + 1;\n        }\n    }, {\n        key: 'add',\n        value: function add(d, injectionInfo) {\n            var areas = _AppStore2.default.getAreas();\n            var target = areas.getByAbbrev(d.target);\n            var source = areas.getByAbbrev(d.source);\n\n            var t = this.targets[target.id];\n            this.targets[target.id] = t === undefined ? 1 : t + 1;\n            var s = this.sources[source.id];\n            this.sources[source.id] = s === undefined ? 1 : s + 1;\n\n            var sln_average = parseFloat(d.SLNeA);\n            var data = this._data[target.id][source.id];\n            var notdefined = false;\n            var sln = parseFloat(d.SLNe);\n            if (d.SLNe == 'N/A' && d.cell_count != '0') {\n                if (d.source !== d.target) {\n                    notdefined = true;\n                    sln = 1.;\n                }\n            }\n            var display_name = void 0;\n            if (injectionInfo) {\n                var injection_id = d.case_id + '-' + d.tracer_id;\n                var ii = injectionInfo[injection_id];\n                if (ii.display_name) {\n                    display_name = ii.display_name;\n                }\n            }\n            var inj = {\n                case_id: d.case_id,\n                tracer_id: d.tracer_id,\n                injection_id: d.case_id + '-' + d.tracer_id,\n                display_name: display_name,\n\n                sln: sln,\n                target: target,\n                source: source,\n                flne: parseFloat(d.flne),\n                log10_flne: Math.log10(d.flne),\n                sln_notdefined: notdefined\n\n            };\n            if (data.target === undefined) {\n                this._data[target.id][source.id] = {\n                    source: source,\n                    target: target,\n                    sln: parseFloat(sln_average),\n                    injections: [inj],\n                    gmeannz: parseFloat(d.gmeannz),\n                    flne: parseFloat(d.mean),\n                    mean: parseFloat(d.mean),\n                    sln_notdefined: notdefined\n                };\n            } else {\n                data.injections.push(inj);\n                /*\n                let sum = 0;\n                let count = 0;\n                _.each(data.injections, inj => {\n                    if (inj.flne > 0) {\n                        console.log('summing', data.target.abbrev, '<-', data.source.abbrev, inj.injection_id, inj.flne);\n                        sum += inj.flne;\n                        count++;\n                    } else {\n                        console.log('less than 0', data.target.abbrev, '<-', data.source.abbrev, inj.injection_id, inj.flne);\n                    }\n                });\n                console.log('data.sln', data.sln, 'sum', sum, 'count', count);\n                if (count > 0) {\n                    data.sln = sum / count;\n                } else {\n                    data.sln = NaN;\n                }\n                */\n            }\n        }\n    }, {\n        key: 'get_sln',\n        value: function get_sln(target, source) {\n            return this._data[target.id][source.id];\n        }\n    }, {\n        key: 'getData',\n        value: function getData(target, source) {\n            return this._data[target.id][source.id];\n        }\n    }, {\n        key: 'get_by_target',\n        value: function get_by_target(target) {\n            return this._data[target.id];\n        }\n    }, {\n        key: 'getByTargetAndInjection',\n        value: function getByTargetAndInjection(target, injection_id) {\n            var conn = this._data[target.id];\n            var injections = [];\n            _lodash2.default.each(conn, function (s) {\n                if (s.source) {\n                    _lodash2.default.each(s.injections, function (_inj) {\n                        if (_inj.injection_id == injection_id && !isNaN(_inj.sln) && !_inj.sln_notdefined) {\n                            injections.push(_inj);\n                        }\n                    });\n                }\n            });\n            return injections;\n        }\n    }, {\n        key: 'size',\n        get: function get() {\n            return {\n                x: _lodash2.default.keys(this.targets).length,\n                y: _lodash2.default.keys(this.sources).length\n            };\n        }\n    }]);\n\n    return Connectivity;\n}();\n\n;\n\nvar Area = exports.Area = function Area(elem) {\n    _classCallCheck(this, Area);\n\n    /*\n    this.data = new Proxy({}, {\n        get: (target, name) => {\n            if (name in target) {\n                return target[name];\n            } else {\n                target[name] = new ConnectivityRow();\n                return target[name];\n            }\n        },\n    });\n    */\n    _lodash2.default.assign(this, elem);\n};\n\n;\n\nvar Areas = exports.Areas = function () {\n    function Areas() {\n        _classCallCheck(this, Areas);\n\n        this._areas = [];\n        this._idTable = {};\n        this._abbrevTable = {};\n    }\n\n    _createClass(Areas, [{\n        key: 'push',\n        value: function push(item) {\n            this._areas.push(item);\n            this._abbrevTable[item.abbrev] = this._areas.length - 1;\n            this._idTable[item.id] = this._areas.length - 1;\n        }\n    }, {\n        key: 'get',\n        value: function get(id) {\n            var idx = this._idTable[id];\n            return this._areas[idx];;\n        }\n    }, {\n        key: 'getByAbbrev',\n        value: function getByAbbrev(abbrev) {\n            return this._areas[this._abbrevTable[abbrev]];\n        }\n    }]);\n\n    return Areas;\n}();\n\n;\nfunction processAreas(data) {\n    var areas = new Areas();\n    _lodash2.default.each(data, function (elem, key) {\n        var area = new Area(elem);\n        areas.push(area);\n    });\n    return areas;\n}\nfunction _toObject(data) {\n    var obj = [];\n    _lodash2.default.each(data.data, function (d) {\n        var elem = {};\n        _lodash2.default.each(data.headers, function (key, idx) {\n            elem[key] = d[idx];\n        });\n        obj.push(elem);\n    });\n    return obj;\n}\nfunction processConnectivity(data, injectionInfo) {\n    var conn = _AppStore2.default.getConnectivity();\n    var conn_data = _toObject(data);\n    _lodash2.default.each(conn_data, function (d) {\n        conn.add(d, injectionInfo);\n    });\n    return conn;\n}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvbGliL2Nvbm5lY3Rpdml0eS5qcz85YjllIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgQXBwU3RvcmUgZnJvbSAnLi4vc3RvcmVzL0FwcFN0b3JlJztcbmV4cG9ydCBjbGFzcyBDb25uZWN0aXZpdHlSb3cge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb3h5KHt9LCB7XG4gICAgICAgICAgICBnZXQ6ICh0YXJnZXQsIG5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSBpbiB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtuYW1lXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmV0ID0ge307XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFtuYW1lXSA9IHJldDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5leHBvcnQgY2xhc3MgQ29ubmVjdGl2aXR5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IFByb3h5KHt9LCB7XG4gICAgICAgICAgICBnZXQ6ICh0YXJnZXQsIG5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSBpbiB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtuYW1lXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRbbmFtZV0gPSBuZXcgQ29ubmVjdGl2aXR5Um93KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRbbmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudGFyZ2V0cyA9IHt9O1xuICAgICAgICB0aGlzLnNvdXJjZXMgPSB7fTtcbiAgICAgICAgdGhpcy5fZGF0YSA9IG5ldyBQcm94eSh7fSwge1xuICAgICAgICAgICAgZ2V0OiAodGFyZ2V0LCBzb3VyY2UpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlIGluIHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W3NvdXJjZV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3NvdXJjZV0gPSBuZXcgQ29ubmVjdGl2aXR5Um93KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRbc291cmNlXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiBfLmtleXModGhpcy50YXJnZXRzKS5sZW5ndGgsXG4gICAgICAgICAgICB5OiBfLmtleXModGhpcy5zb3VyY2VzKS5sZW5ndGhcbiAgICAgICAgfVxuICAgIH1cbiAgICBsaW5rKHRhcmdldCwgc291cmNlLCBkYXRhKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgICAgdGhpcy5kYXRhW3RhcmdldC5pZF1bc291cmNlLmlkXSA9IGRhdGE7XG4gICAgICAgIGxldCB0ID0gdGhpcy50YXJnZXRzW3RhcmdldC5pZF07XG4gICAgICAgIHRoaXMudGFyZ2V0c1t0YXJnZXQuaWRdID0gKHQgPT09IHVuZGVmaW5lZCA/IDEgOiB0ICsgMSk7XG4gICAgICAgIGxldCBzID0gdGhpcy5zb3VyY2VzW3NvdXJjZS5pZF07XG4gICAgICAgIHRoaXMuc291cmNlc1tzb3VyY2UuaWRdID0gKHMgPT09IHVuZGVmaW5lZCA/IDEgOiBzICsgMSk7XG4gICAgfVxuICAgIGFkZChkLCBpbmplY3Rpb25JbmZvKSB7XG4gICAgICAgIGNvbnN0IGFyZWFzID0gQXBwU3RvcmUuZ2V0QXJlYXMoKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gYXJlYXMuZ2V0QnlBYmJyZXYoZC50YXJnZXQpO1xuICAgICAgICBjb25zdCBzb3VyY2UgPSBhcmVhcy5nZXRCeUFiYnJldihkLnNvdXJjZSk7XG5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMudGFyZ2V0c1t0YXJnZXQuaWRdO1xuICAgICAgICB0aGlzLnRhcmdldHNbdGFyZ2V0LmlkXSA9ICh0ID09PSB1bmRlZmluZWQgPyAxIDogdCArIDEpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5zb3VyY2VzW3NvdXJjZS5pZF07XG4gICAgICAgIHRoaXMuc291cmNlc1tzb3VyY2UuaWRdID0gKHMgPT09IHVuZGVmaW5lZCA/IDEgOiBzICsgMSk7XG5cbiAgICAgICAgY29uc3Qgc2xuX2F2ZXJhZ2UgPSBwYXJzZUZsb2F0KGQuU0xOZUEpO1xuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5fZGF0YVt0YXJnZXQuaWRdW3NvdXJjZS5pZF07XG4gICAgICAgIGxldCBub3RkZWZpbmVkID0gZmFsc2U7XG4gICAgICAgIGxldCBzbG4gPSBwYXJzZUZsb2F0KGQuU0xOZSk7XG4gICAgICAgIGlmIChkLlNMTmUgPT0gJ04vQScgJiYgZC5jZWxsX2NvdW50ICE9ICcwJykge1xuICAgICAgICAgICAgaWYgKGQuc291cmNlICE9PSBkLnRhcmdldCkge1xuICAgICAgICAgICAgICAgIG5vdGRlZmluZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNsbiA9IDEuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBkaXNwbGF5X25hbWU7XG4gICAgICAgIGlmIChpbmplY3Rpb25JbmZvKSB7XG4gICAgICAgICAgICBsZXQgaW5qZWN0aW9uX2lkID0gZC5jYXNlX2lkICsgJy0nICsgZC50cmFjZXJfaWQ7XG4gICAgICAgICAgICBsZXQgaWkgPSBpbmplY3Rpb25JbmZvW2luamVjdGlvbl9pZF07XG4gICAgICAgICAgICBpZiAoaWkuZGlzcGxheV9uYW1lKSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheV9uYW1lID0gaWkuZGlzcGxheV9uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluaiA9IHtcbiAgICAgICAgICAgIGNhc2VfaWQ6IGQuY2FzZV9pZCxcbiAgICAgICAgICAgIHRyYWNlcl9pZDogZC50cmFjZXJfaWQsXG4gICAgICAgICAgICBpbmplY3Rpb25faWQ6IGQuY2FzZV9pZCArICctJyArIGQudHJhY2VyX2lkLFxuICAgICAgICAgICAgZGlzcGxheV9uYW1lOiBkaXNwbGF5X25hbWUsXG5cbiAgICAgICAgICAgIHNsbjogc2xuLFxuICAgICAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICAgICAgICBzb3VyY2U6IHNvdXJjZSxcbiAgICAgICAgICAgIGZsbmU6IHBhcnNlRmxvYXQoZC5mbG5lKSxcbiAgICAgICAgICAgIGxvZzEwX2ZsbmU6IE1hdGgubG9nMTAoZC5mbG5lKSxcbiAgICAgICAgICAgIHNsbl9ub3RkZWZpbmVkOiBub3RkZWZpbmVkLFxuXG4gICAgICAgIH07XG4gICAgICAgIGlmIChkYXRhLnRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLl9kYXRhW3RhcmdldC5pZF1bc291cmNlLmlkXSA9IHtcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHNvdXJjZSxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgICAgICAgICBzbG46IHBhcnNlRmxvYXQoc2xuX2F2ZXJhZ2UpLFxuICAgICAgICAgICAgICAgIGluamVjdGlvbnM6IFtpbmpdLFxuICAgICAgICAgICAgICAgIGdtZWFubno6IHBhcnNlRmxvYXQoZC5nbWVhbm56KSxcbiAgICAgICAgICAgICAgICBmbG5lOiBwYXJzZUZsb2F0KGQubWVhbiksXG4gICAgICAgICAgICAgICAgbWVhbjogcGFyc2VGbG9hdChkLm1lYW4pLFxuICAgICAgICAgICAgICAgIHNsbl9ub3RkZWZpbmVkOiBub3RkZWZpbmVkLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEuaW5qZWN0aW9ucy5wdXNoKGluaik7XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgbGV0IHN1bSA9IDA7XG4gICAgICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICAgICAgXy5lYWNoKGRhdGEuaW5qZWN0aW9ucywgaW5qID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaW5qLmZsbmUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdW1taW5nJywgZGF0YS50YXJnZXQuYWJicmV2LCAnPC0nLCBkYXRhLnNvdXJjZS5hYmJyZXYsIGluai5pbmplY3Rpb25faWQsIGluai5mbG5lKTtcbiAgICAgICAgICAgICAgICAgICAgc3VtICs9IGluai5mbG5lO1xuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsZXNzIHRoYW4gMCcsIGRhdGEudGFyZ2V0LmFiYnJldiwgJzwtJywgZGF0YS5zb3VyY2UuYWJicmV2LCBpbmouaW5qZWN0aW9uX2lkLCBpbmouZmxuZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGF0YS5zbG4nLCBkYXRhLnNsbiwgJ3N1bScsIHN1bSwgJ2NvdW50JywgY291bnQpO1xuICAgICAgICAgICAgaWYgKGNvdW50ID4gMCkge1xuICAgICAgICAgICAgICAgIGRhdGEuc2xuID0gc3VtIC8gY291bnQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRhdGEuc2xuID0gTmFOO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKi9cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRfc2xuKHRhcmdldCwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhW3RhcmdldC5pZF1bc291cmNlLmlkXTtcbiAgICB9XG4gICAgZ2V0RGF0YSh0YXJnZXQsIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YVt0YXJnZXQuaWRdW3NvdXJjZS5pZF07XG4gICAgfVxuICAgIGdldF9ieV90YXJnZXQodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhW3RhcmdldC5pZF07XG4gICAgfVxuICAgIGdldEJ5VGFyZ2V0QW5kSW5qZWN0aW9uKHRhcmdldCwgaW5qZWN0aW9uX2lkKSB7XG4gICAgICAgIGNvbnN0IGNvbm4gPSB0aGlzLl9kYXRhW3RhcmdldC5pZF07XG4gICAgICAgIGNvbnN0IGluamVjdGlvbnMgPSBbXTtcbiAgICAgICAgXy5lYWNoKGNvbm4sIHMgPT4ge1xuICAgICAgICAgICAgaWYgKHMuc291cmNlKSB7XG4gICAgICAgICAgICAgICAgXy5lYWNoKHMuaW5qZWN0aW9ucywgX2luaiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfaW5qLmluamVjdGlvbl9pZCA9PSBpbmplY3Rpb25faWQgJiYgIWlzTmFOKF9pbmouc2xuKSAmJiAhX2luai5zbG5fbm90ZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5qZWN0aW9ucy5wdXNoKF9pbmopO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaW5qZWN0aW9ucztcbiAgICB9XG59O1xuZXhwb3J0IGNsYXNzIEFyZWEge1xuICAgIGNvbnN0cnVjdG9yKGVsZW0pIHtcbiAgICAgICAgLypcbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IFByb3h5KHt9LCB7XG4gICAgICAgICAgICBnZXQ6ICh0YXJnZXQsIG5hbWUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobmFtZSBpbiB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtuYW1lXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRbbmFtZV0gPSBuZXcgQ29ubmVjdGl2aXR5Um93KCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXRbbmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgICovXG4gICAgICAgIF8uYXNzaWduKHRoaXMsIGVsZW0pO1xuICAgIH1cbn07XG5cbmV4cG9ydCBjbGFzcyBBcmVhcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX2FyZWFzID0gW107XG4gICAgICAgIHRoaXMuX2lkVGFibGUgPSB7fTtcbiAgICAgICAgdGhpcy5fYWJicmV2VGFibGUgPSB7fTtcbiAgICB9XG4gICAgcHVzaChpdGVtKSB7XG4gICAgICAgIHRoaXMuX2FyZWFzLnB1c2goaXRlbSk7XG4gICAgICAgIHRoaXMuX2FiYnJldlRhYmxlW2l0ZW0uYWJicmV2XSA9IHRoaXMuX2FyZWFzLmxlbmd0aCAtIDE7XG4gICAgICAgIHRoaXMuX2lkVGFibGVbaXRlbS5pZF0gPSB0aGlzLl9hcmVhcy5sZW5ndGggLSAxO1xuICAgIH1cbiAgICBnZXQoaWQpIHtcbiAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5faWRUYWJsZVtpZF07XG4gICAgICAgIHJldHVybiB0aGlzLl9hcmVhc1tpZHhdOztcbiAgICB9XG4gICAgZ2V0QnlBYmJyZXYoYWJicmV2KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hcmVhc1t0aGlzLl9hYmJyZXZUYWJsZVthYmJyZXZdXTtcbiAgICB9XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NBcmVhcyhkYXRhKSB7XG4gICAgbGV0IGFyZWFzID0gbmV3IEFyZWFzKCk7XG4gICAgXy5lYWNoKGRhdGEsIChlbGVtLCBrZXkpID0+IHtcbiAgICAgICAgbGV0IGFyZWEgPSBuZXcgQXJlYShlbGVtKTtcbiAgICAgICAgYXJlYXMucHVzaChhcmVhKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYXJlYXM7XG59XG5mdW5jdGlvbiBfdG9PYmplY3QoZGF0YSkge1xuICAgIGxldCBvYmogPSBbXTtcbiAgICBfLmVhY2goZGF0YS5kYXRhLCAoZCkgPT4ge1xuICAgICAgICBsZXQgZWxlbSA9IHt9XG4gICAgICAgIF8uZWFjaChkYXRhLmhlYWRlcnMsIChrZXksIGlkeCkgPT4ge1xuICAgICAgICAgICAgZWxlbVtrZXldID0gZFtpZHhdO1xuICAgICAgICB9KTtcbiAgICAgICAgb2JqLnB1c2goZWxlbSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzQ29ubmVjdGl2aXR5KGRhdGEsIGluamVjdGlvbkluZm8pIHtcbiAgICBsZXQgY29ubiA9IEFwcFN0b3JlLmdldENvbm5lY3Rpdml0eSgpO1xuICAgIGxldCBjb25uX2RhdGEgPSBfdG9PYmplY3QoZGF0YSk7XG4gICAgXy5lYWNoKGNvbm5fZGF0YSwgZCA9PiB7XG4gICAgICAgIGNvbm4uYWRkKGQsIGluamVjdGlvbkluZm8pO1xuXG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbm47XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8ganMvbGliL2Nvbm5lY3Rpdml0eS5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBaU1BO0FBbUJBO0FBQ0E7QUFyTkE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFXQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFVQTtBQUNBOzs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbUJBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQWhIQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7Ozs7OztBQTRHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7Ozs7Ozs7Ozs7OztBQVlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 31:
/* unknown exports provided */
/* all exports used */
/*!********************************!*\
  !*** ./js/lib/numberformat.js ***!
  \********************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nfunction number_format(number, decimals, dec_point, thousands_sep) {\n    // http://kevin.vanzonneveld.net\n    // +   original by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)\n    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n    // +     bugfix by: Michael White (http://getsprink.com)\n    // +     bugfix by: Benjamin Lupton\n    // +     bugfix by: Allan Jensen (http://www.winternet.no)\n    // +    revised by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)\n    // +     bugfix by: Howard Yeend\n    // +    revised by: Luke Smith (http://lucassmith.name)\n    // +     bugfix by: Diogo Resende\n    // +     bugfix by: Rival\n    // +      input by: Kheang Hok Chin (http://www.distantia.ca/)\n    // +   improved by: davook\n    // +   improved by: Brett Zamir (http://brett-zamir.me)\n    // +      input by: Jay Klehr\n    // +   improved by: Brett Zamir (http://brett-zamir.me)\n    // +      input by: Amir Habibi (http://www.residence-mixte.com/)\n    // +     bugfix by: Brett Zamir (http://brett-zamir.me)\n    // +   improved by: Theriault\n    // +   improved by: Drew Noakes\n    // *     example 1: number_format(1234.56);\n    // *     returns 1: '1,235'\n    // *     example 2: number_format(1234.56, 2, ',', ' ');\n    // *     returns 2: '1 234,56'\n    // *     example 3: number_format(1234.5678, 2, '.', '');\n    // *     returns 3: '1234.57'\n    // *     example 4: number_format(67, 2, ',', '.');\n    // *     returns 4: '67,00'\n    // *     example 5: number_format(1000);\n    // *     returns 5: '1,000'\n    // *     example 6: number_format(67.311, 2);\n    // *     returns 6: '67.31'\n    // *     example 7: number_format(1000.55, 1);\n    // *     returns 7: '1,000.6'\n    // *     example 8: number_format(67000, 5, ',', '.');\n    // *     returns 8: '67.000,00000'\n    // *     example 9: number_format(0.9, 0);\n    // *     returns 9: '1'\n    // *    example 10: number_format('1.20', 2);\n    // *    returns 10: '1.20'\n    // *    example 11: number_format('1.20', 4);\n    // *    returns 11: '1.2000'\n    // *    example 12: number_format('1.2000', 3);\n    // *    returns 12: '1.200'\n    var n = !isFinite(+number) ? 0 : +number,\n        prec = !isFinite(+decimals) ? 0 : Math.abs(decimals),\n        sep = typeof thousands_sep === 'undefined' ? ',' : thousands_sep,\n        dec = typeof dec_point === 'undefined' ? '.' : dec_point,\n        toFixedFix = function toFixedFix(n, prec) {\n        // Fix for IE parseFloat(0.55).toFixed(0) = 0;\n        var k = Math.pow(10, prec);\n        return Math.round(n * k) / k;\n    },\n        s = (prec ? toFixedFix(n, prec) : Math.round(n)).toString().split('.');\n    if (s[0].length > 3) {\n        s[0] = s[0].replace(/\\B(?=(?:\\d{3})+(?!\\d))/g, sep);\n    }\n    if ((s[1] || '').length < prec) {\n        s[1] = s[1] || '';\n        s[1] += new Array(prec - s[1].length + 1).join('0');\n    }\n    return s.join(dec);\n}\n\nexports.default = number_format;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvbGliL251bWJlcmZvcm1hdC5qcz80YzBiIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIG51bWJlcl9mb3JtYXQobnVtYmVyLCBkZWNpbWFscywgZGVjX3BvaW50LCB0aG91c2FuZHNfc2VwKSB7XG4gICAgLy8gaHR0cDovL2tldmluLnZhbnpvbm5ldmVsZC5uZXRcbiAgICAvLyArICAgb3JpZ2luYWwgYnk6IEpvbmFzIFJhb25pIFNvYXJlcyBTaWx2YSAoaHR0cDovL3d3dy5qc2Zyb21oZWxsLmNvbSlcbiAgICAvLyArICAgaW1wcm92ZWQgYnk6IEtldmluIHZhbiBab25uZXZlbGQgKGh0dHA6Ly9rZXZpbi52YW56b25uZXZlbGQubmV0KVxuICAgIC8vICsgICAgIGJ1Z2ZpeCBieTogTWljaGFlbCBXaGl0ZSAoaHR0cDovL2dldHNwcmluay5jb20pXG4gICAgLy8gKyAgICAgYnVnZml4IGJ5OiBCZW5qYW1pbiBMdXB0b25cbiAgICAvLyArICAgICBidWdmaXggYnk6IEFsbGFuIEplbnNlbiAoaHR0cDovL3d3dy53aW50ZXJuZXQubm8pXG4gICAgLy8gKyAgICByZXZpc2VkIGJ5OiBKb25hcyBSYW9uaSBTb2FyZXMgU2lsdmEgKGh0dHA6Ly93d3cuanNmcm9taGVsbC5jb20pXG4gICAgLy8gKyAgICAgYnVnZml4IGJ5OiBIb3dhcmQgWWVlbmRcbiAgICAvLyArICAgIHJldmlzZWQgYnk6IEx1a2UgU21pdGggKGh0dHA6Ly9sdWNhc3NtaXRoLm5hbWUpXG4gICAgLy8gKyAgICAgYnVnZml4IGJ5OiBEaW9nbyBSZXNlbmRlXG4gICAgLy8gKyAgICAgYnVnZml4IGJ5OiBSaXZhbFxuICAgIC8vICsgICAgICBpbnB1dCBieTogS2hlYW5nIEhvayBDaGluIChodHRwOi8vd3d3LmRpc3RhbnRpYS5jYS8pXG4gICAgLy8gKyAgIGltcHJvdmVkIGJ5OiBkYXZvb2tcbiAgICAvLyArICAgaW1wcm92ZWQgYnk6IEJyZXR0IFphbWlyIChodHRwOi8vYnJldHQtemFtaXIubWUpXG4gICAgLy8gKyAgICAgIGlucHV0IGJ5OiBKYXkgS2xlaHJcbiAgICAvLyArICAgaW1wcm92ZWQgYnk6IEJyZXR0IFphbWlyIChodHRwOi8vYnJldHQtemFtaXIubWUpXG4gICAgLy8gKyAgICAgIGlucHV0IGJ5OiBBbWlyIEhhYmliaSAoaHR0cDovL3d3dy5yZXNpZGVuY2UtbWl4dGUuY29tLylcbiAgICAvLyArICAgICBidWdmaXggYnk6IEJyZXR0IFphbWlyIChodHRwOi8vYnJldHQtemFtaXIubWUpXG4gICAgLy8gKyAgIGltcHJvdmVkIGJ5OiBUaGVyaWF1bHRcbiAgICAvLyArICAgaW1wcm92ZWQgYnk6IERyZXcgTm9ha2VzXG4gICAgLy8gKiAgICAgZXhhbXBsZSAxOiBudW1iZXJfZm9ybWF0KDEyMzQuNTYpO1xuICAgIC8vICogICAgIHJldHVybnMgMTogJzEsMjM1J1xuICAgIC8vICogICAgIGV4YW1wbGUgMjogbnVtYmVyX2Zvcm1hdCgxMjM0LjU2LCAyLCAnLCcsICcgJyk7XG4gICAgLy8gKiAgICAgcmV0dXJucyAyOiAnMSAyMzQsNTYnXG4gICAgLy8gKiAgICAgZXhhbXBsZSAzOiBudW1iZXJfZm9ybWF0KDEyMzQuNTY3OCwgMiwgJy4nLCAnJyk7XG4gICAgLy8gKiAgICAgcmV0dXJucyAzOiAnMTIzNC41NydcbiAgICAvLyAqICAgICBleGFtcGxlIDQ6IG51bWJlcl9mb3JtYXQoNjcsIDIsICcsJywgJy4nKTtcbiAgICAvLyAqICAgICByZXR1cm5zIDQ6ICc2NywwMCdcbiAgICAvLyAqICAgICBleGFtcGxlIDU6IG51bWJlcl9mb3JtYXQoMTAwMCk7XG4gICAgLy8gKiAgICAgcmV0dXJucyA1OiAnMSwwMDAnXG4gICAgLy8gKiAgICAgZXhhbXBsZSA2OiBudW1iZXJfZm9ybWF0KDY3LjMxMSwgMik7XG4gICAgLy8gKiAgICAgcmV0dXJucyA2OiAnNjcuMzEnXG4gICAgLy8gKiAgICAgZXhhbXBsZSA3OiBudW1iZXJfZm9ybWF0KDEwMDAuNTUsIDEpO1xuICAgIC8vICogICAgIHJldHVybnMgNzogJzEsMDAwLjYnXG4gICAgLy8gKiAgICAgZXhhbXBsZSA4OiBudW1iZXJfZm9ybWF0KDY3MDAwLCA1LCAnLCcsICcuJyk7XG4gICAgLy8gKiAgICAgcmV0dXJucyA4OiAnNjcuMDAwLDAwMDAwJ1xuICAgIC8vICogICAgIGV4YW1wbGUgOTogbnVtYmVyX2Zvcm1hdCgwLjksIDApO1xuICAgIC8vICogICAgIHJldHVybnMgOTogJzEnXG4gICAgLy8gKiAgICBleGFtcGxlIDEwOiBudW1iZXJfZm9ybWF0KCcxLjIwJywgMik7XG4gICAgLy8gKiAgICByZXR1cm5zIDEwOiAnMS4yMCdcbiAgICAvLyAqICAgIGV4YW1wbGUgMTE6IG51bWJlcl9mb3JtYXQoJzEuMjAnLCA0KTtcbiAgICAvLyAqICAgIHJldHVybnMgMTE6ICcxLjIwMDAnXG4gICAgLy8gKiAgICBleGFtcGxlIDEyOiBudW1iZXJfZm9ybWF0KCcxLjIwMDAnLCAzKTtcbiAgICAvLyAqICAgIHJldHVybnMgMTI6ICcxLjIwMCdcbiAgICB2YXIgbiA9ICFpc0Zpbml0ZSgrbnVtYmVyKSA/IDAgOiArbnVtYmVyLCBcbiAgICAgICAgcHJlYyA9ICFpc0Zpbml0ZSgrZGVjaW1hbHMpID8gMCA6IE1hdGguYWJzKGRlY2ltYWxzKSxcbiAgICAgICAgc2VwID0gKHR5cGVvZiB0aG91c2FuZHNfc2VwID09PSAndW5kZWZpbmVkJykgPyAnLCcgOiB0aG91c2FuZHNfc2VwLFxuICAgICAgICBkZWMgPSAodHlwZW9mIGRlY19wb2ludCA9PT0gJ3VuZGVmaW5lZCcpID8gJy4nIDogZGVjX3BvaW50LFxuICAgICAgICB0b0ZpeGVkRml4ID0gZnVuY3Rpb24gKG4sIHByZWMpIHtcbiAgICAgICAgICAgIC8vIEZpeCBmb3IgSUUgcGFyc2VGbG9hdCgwLjU1KS50b0ZpeGVkKDApID0gMDtcbiAgICAgICAgICAgIHZhciBrID0gTWF0aC5wb3coMTAsIHByZWMpO1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobiAqIGspIC8gaztcbiAgICAgICAgfSxcbiAgICAgICAgcyA9IChwcmVjID8gdG9GaXhlZEZpeChuLCBwcmVjKSA6IE1hdGgucm91bmQobikpLnRvU3RyaW5nKCkuc3BsaXQoJy4nKTtcbiAgICBpZiAoc1swXS5sZW5ndGggPiAzKSB7XG4gICAgICAgIHNbMF0gPSBzWzBdLnJlcGxhY2UoL1xcQig/PSg/OlxcZHszfSkrKD8hXFxkKSkvZywgc2VwKTtcbiAgICB9XG4gICAgaWYgKChzWzFdIHx8ICcnKS5sZW5ndGggPCBwcmVjKSB7XG4gICAgICAgIHNbMV0gPSBzWzFdIHx8ICcnO1xuICAgICAgICBzWzFdICs9IG5ldyBBcnJheShwcmVjIC0gc1sxXS5sZW5ndGggKyAxKS5qb2luKCcwJyk7XG4gICAgfVxuICAgIHJldHVybiBzLmpvaW4oZGVjKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbnVtYmVyX2Zvcm1hdDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBqcy9saWIvbnVtYmVyZm9ybWF0LmpzIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 343:
/* unknown exports provided */
/* all exports used */
/*!*******************!*\
  !*** ./js/app.js ***!
  \*******************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = __webpack_require__(/*! react-dom */ 49);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _AnalysisApp = __webpack_require__(/*! ./components/AnalysisApp.react */ 221);\n\nvar _AnalysisApp2 = _interopRequireDefault(_AnalysisApp);\n\nvar _Footer = __webpack_require__(/*! ./components/Footer.react */ 73);\n\nvar _Footer2 = _interopRequireDefault(_Footer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n_reactDom2.default.render(_react2.default.createElement(_AnalysisApp2.default, null), document.getElementById('reactjs'));\n_reactDom2.default.render(_react2.default.createElement(_Footer2.default, null), document.getElementById('react_footer'));//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL2pzL2FwcC5qcz80MWQ3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IEFuYWx5c2lzQXBwIGZyb20gJy4vY29tcG9uZW50cy9BbmFseXNpc0FwcC5yZWFjdCc7XG5pbXBvcnQgRm9vdGVyIGZyb20gJy4vY29tcG9uZW50cy9Gb290ZXIucmVhY3QnO1xuXG5SZWFjdERPTS5yZW5kZXIoXG4gICAgPEFuYWx5c2lzQXBwIC8+LFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWFjdGpzJylcbik7XG5SZWFjdERPTS5yZW5kZXIoXG4gICAgPEZvb3RlciAvPixcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVhY3RfZm9vdGVyJylcbik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8ganMvYXBwLmpzIl0sIm1hcHBpbmdzIjoiOztBQVNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7O0FBYkE7Ozs7Ozs7OztBQWNBO0FBSUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 40:
/* unknown exports provided */
/* all exports used */
/*!*******************************************!*\
  !*** ./js/components/QuickLinks.react.js ***!
  \*******************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _InjectionList = __webpack_require__(/*! ./InjectionList.react */ 21);\n\nvar _InjectionList2 = _interopRequireDefault(_InjectionList);\n\nvar _ColorBar = __webpack_require__(/*! ./ColorBar.react */ 26);\n\nvar _ColorBar2 = _interopRequireDefault(_ColorBar);\n\nvar _MainFlne = __webpack_require__(/*! ./MainFlne.react */ 24);\n\nvar _MainFlne2 = _interopRequireDefault(_MainFlne);\n\nvar _modal = __webpack_require__(/*! ../lib/modal */ 22);\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nvar _AppDispatcher = __webpack_require__(/*! ../dispatcher/AppDispatcher */ 18);\n\nvar _AppDispatcher2 = _interopRequireDefault(_AppDispatcher);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _d = __webpack_require__(/*! d3 */ 12);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _classnames = __webpack_require__(/*! classnames */ 13);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _utils = __webpack_require__(/*! ../lib/utils */ 16);\n\nvar _connectivity = __webpack_require__(/*! ../lib/connectivity */ 30);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar LICENSE_RENEW = 3600;\nvar CONNECTIVITY_MATRIX = '/static/data/marmoset_brain_architecture_1_0_fln_matrix.txt';\nvar CONNECTIVITY_MATRIX_GPICKLE = '/static/data/marmoset_brain_architecture_1_0_connectivity_matrix.gpickle';\nvar ALL_INJECTIONS = '/static/data/marmoset_brain_architecture_1_0_all_injections.txt';\nvar SQL_DATABASE = '/static/data/marmoset_brain_architecture_1_0_master_database.db';\nvar INTERAREAL_DISTACE = '/static/data/marmoset_brain_architecture_1_0_interareal_distance_matrix.txt';\n\nvar QuickLinks = function (_React$Component) {\n    _inherits(QuickLinks, _React$Component);\n\n    function QuickLinks(props, context) {\n        _classCallCheck(this, QuickLinks);\n\n        var _this = _possibleConstructorReturn(this, (QuickLinks.__proto__ || Object.getPrototypeOf(QuickLinks)).call(this, props, context));\n\n        var that = _this;\n        _this.state = {\n            showTooltip: false\n        };\n        _lodash2.default.bindAll(_this, 'handleAgreementAccept', 'handleAgreementCancel', 'handleQLConnectivityTxt', 'handleQLConnectivityPickle', 'handleQLAllInjections', 'handleQLSQLite', 'handleInterAreal', 'handleQLScreenCast', 'handleQLVideoDoc', 'openLink', 'removeLicense', 'handleLicenseCheck', 'handleShowTooltip', 'handleHideTooltip');\n        return _this;\n    }\n\n    _createClass(QuickLinks, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _AppStore2.default.addListener('download', this.handleLicenseCheck);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _AppStore2.default.removeListener('download', this.handleLicenseCheck);\n        }\n    }, {\n        key: 'handleModalHide',\n        value: function handleModalHide(e) {}\n    }, {\n        key: 'handleQLConnectivityTxt',\n        value: function handleQLConnectivityTxt(e) {\n            var href = CONNECTIVITY_MATRIX;\n            _Actions2.default.setDownloadLink(href, e, href.split('/').pop());\n        }\n    }, {\n        key: 'handleQLConnectivityPickle',\n        value: function handleQLConnectivityPickle(e) {\n            var href = CONNECTIVITY_MATRIX_GPICKLE;;\n            _Actions2.default.setDownloadLink(href, e, href.split('/').pop());\n        }\n    }, {\n        key: 'handleQLAllInjections',\n        value: function handleQLAllInjections(e) {\n            var href = ALL_INJECTIONS;\n            _Actions2.default.setDownloadLink(href, e, href.split('/').pop());\n        }\n    }, {\n        key: 'handleQLSQLite',\n        value: function handleQLSQLite(e) {\n            e.preventDefault();\n            return;\n            var href = SQL_DATABASE;\n            _Actions2.default.setDownloadLink(href, e, href.split('/').pop());\n        }\n    }, {\n        key: 'handleInterAreal',\n        value: function handleInterAreal(e) {\n            var href = INTERAREAL_DISTACE;\n            _Actions2.default.setDownloadLink(href, e, href.split('/').pop());\n        }\n    }, {\n        key: 'handleQLScreenCast',\n        value: function handleQLScreenCast(e) {\n            e.preventDefault();\n            return;\n        }\n    }, {\n        key: 'handleQLVideoDoc',\n        value: function handleQLVideoDoc(e) {\n            e.preventDefault();\n            return;\n        }\n    }, {\n        key: 'handleAgreementAccept',\n        value: function handleAgreementAccept(e) {\n            var local = window.localStorage;\n            local.setItem('CCLicense', JSON.stringify({ status: 'Accepted', ts: Date.now() / 1000 | 0 }));\n            this.openLink();\n        }\n    }, {\n        key: 'handleAgreementCancel',\n        value: function handleAgreementCancel(e) {\n            this.modal.hide();\n        }\n    }, {\n        key: 'handleLicenseCheck',\n        value: function handleLicenseCheck(e) {\n            var local = window.localStorage;\n            var accept = JSON.parse(local.getItem('CCLicense'));\n            var ev = _AppStore2.default.getDownloadEvent();\n            if (accept && accept.status == 'Accepted' && (Date.now() / 1000 | 0) - accept.ts <= LICENSE_RENEW) {\n                if (ev) {\n                    // if licensee requirement already accepted, no-op to allow browser to handle the click event\n                } else {\n                        // if no event provided, simulate the download using window.open\n                        //this.openLink();\n                    }\n            } else {\n                if (ev) {\n                    // if licensing intervention needed, cancel the brower event handling\n                    ev.preventDefault();\n                }\n                this.modal.show();\n            }\n        }\n    }, {\n        key: 'openLink',\n        value: function openLink(e) {\n            var href = _AppStore2.default.getDownloadHref();\n            if (href) {\n                if (href.startsWith('data:')) {\n                    var filename = _AppStore2.default.getDownloadFilename();\n                    var a = $('<a></a>').attr('href', href).css({ display: 'none' }).text('Download');\n                    if (filename) {\n                        a.attr('download', filename);\n                    }\n                    a.get(0).click();\n                    a.remove();\n                } else {\n                    if (href != '#') {\n                        // actually a no-op may not be a bad idea\n                        //window.open(href, '_blank');\n                        var _filename = _AppStore2.default.getDownloadFilename();\n                        var _a = $('<a></a>').attr('href', href).css({ display: 'none' }).text('Download');\n                        if (_filename) {\n                            //a.attr('download', filename);\n                            //a.prop('download', filename);\n                        }\n                        _a.get(0).setAttribute('download', _filename);\n                        _a.get(0).click();\n                        _a.remove();\n                    }\n                }\n            }\n            if (!this.modal.state.hidden) {\n                this.modal.hide();\n            }\n        }\n    }, {\n        key: 'removeLicense',\n        value: function removeLicense(e) {\n            var local = window.localStorage;\n            var accept = local.removeItem('CCLicense');\n        }\n    }, {\n        key: 'handleShowTooltip',\n        value: function handleShowTooltip(e) {\n            var bbox = $('.quick-links')[0].getBoundingClientRect();\n            var target_bbox = e.target.getBoundingClientRect();\n            var y = target_bbox.top - bbox.top + 25;\n            //let x = e.pageX - 1000;\n            //let x = e.clientX - bbox.left + 20;\n            var x = 15;\n            $('.quink-link-tips').css({\n                top: y + 'px',\n                left: x + 'px'\n            });\n            this.setState({\n                showTooltip: true\n            });\n        }\n    }, {\n        key: 'handleHideTooltip',\n        value: function handleHideTooltip(e) {\n            this.setState({\n                showTooltip: false\n            });\n        }\n\n        /**\n         * @return {object}\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var modalStyle = _lodash2.default.clone(_modal.defaultModalStyle);\n            modalStyle.width = '60%';\n            modalStyle.maxWidth = '960px';\n\n            var cc = _react2.default.createElement(\n                'a',\n                { href: 'https://creativecommons.org/licenses/by-sa/3.0/', target: '_blank' },\n                _react2.default.createElement('img', { src: '/static/images/sa_80x15.png' })\n            );\n            cc = null;\n            /*\n                        <li className=\"with-gap\" onMouseEnter={this.handleShowTooltip} onMouseLeave={this.handleHideTooltip}>\n                            <a href=\"#\" onClick={this.handleQLVideoDoc} target=\"_blank\"><span className=\"link\">Video documentation of the website</span></a>\n                        </li>\n                        <li className=\"transparent\">\n                            <a href=\"#\" onClick={this.handleQLScreenCast} target=\"_blank\"><span className=\"link\">Screencast on the features of the connectivity matrix</span></a>\n                        </li>\n                        <li className=\"transparent\">\n                            <a href=\"#\" onClick={this.removeLicense}><span className=\"link\">Clear License cache (internal use)</span></a>\n                        </li>\n                        */\n            return _react2.default.createElement(\n                'section',\n                { className: 'quick-links' },\n                _react2.default.createElement(\n                    'strong',\n                    null,\n                    'Quick Links:'\n                ),\n                _react2.default.createElement(\n                    'ul',\n                    null,\n                    _react2.default.createElement(\n                        'li',\n                        null,\n                        _react2.default.createElement(\n                            'a',\n                            { href: CONNECTIVITY_MATRIX, download: true, onClick: this.handleQLConnectivityTxt },\n                            _react2.default.createElement(\n                                'span',\n                                { className: 'link' },\n                                'Connectivity matrix (txt file)'\n                            )\n                        ),\n                        ' ',\n                        cc\n                    ),\n                    _react2.default.createElement(\n                        'li',\n                        null,\n                        _react2.default.createElement(\n                            'a',\n                            { href: CONNECTIVITY_MATRIX_GPICKLE, download: true, onClick: this.handleQLConnectivityPickle },\n                            _react2.default.createElement(\n                                'span',\n                                { className: 'link' },\n                                'Connectivity matrix (networkX gpickle)'\n                            )\n                        ),\n                        ' ',\n                        cc\n                    ),\n                    _react2.default.createElement(\n                        'li',\n                        null,\n                        _react2.default.createElement(\n                            'a',\n                            { href: ALL_INJECTIONS, download: true, onClick: this.handleQLAllInjections },\n                            _react2.default.createElement(\n                                'span',\n                                { className: 'link' },\n                                'Collated results of all injections (txt file)'\n                            )\n                        ),\n                        ' ',\n                        cc\n                    ),\n                    _react2.default.createElement(\n                        'li',\n                        null,\n                        _react2.default.createElement(\n                            'a',\n                            { href: INTERAREAL_DISTACE, download: true, onClick: this.handleInterAreal },\n                            _react2.default.createElement(\n                                'span',\n                                { className: 'link' },\n                                'Interareal distance matrix (txt file)'\n                            )\n                        ),\n                        ' ',\n                        cc\n                    ),\n                    _react2.default.createElement(\n                        'li',\n                        { className: 'with-gap' },\n                        _react2.default.createElement(\n                            'a',\n                            { href: 'https://github.com/Neuroinflab/analysis.marmosetbrain.org/wiki/Application-Programming-Interface', target: '_blank' },\n                            _react2.default.createElement(\n                                'span',\n                                { className: 'link' },\n                                'Developer API documentation'\n                            )\n                        )\n                    )\n                ),\n                _react2.default.createElement(\n                    _modal2.default,\n                    { ref: function ref(modal) {\n                            return _this2.modal = modal;\n                        }, modalStyle: modalStyle, onHide: this.handleModalHide },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'agreement' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'title' },\n                            'Licence agreement'\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'content' },\n                            _react2.default.createElement(\n                                'p',\n                                null,\n                                'I have read and understood ',\n                                _react2.default.createElement(\n                                    'a',\n                                    { href: 'http://www.marmosetbrain.org/about', target: '_blank' },\n                                    'the citation policy'\n                                ),\n                                ', the ',\n                                _react2.default.createElement(\n                                    'a',\n                                    { href: 'https://creativecommons.org/licenses/by-sa/4.0/', target: '_blank' },\n                                    'CC BY-SA 4.0 licence'\n                                ),\n                                ' and I understand under which condition I can use the data and how to acknowledge the datased I am about to download.'\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'license-modal-how-to-cite' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'subtitle' },\n                                    'How to cite?'\n                                ),\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'content' },\n                                    'Majka, P., Chaplin, T. A., Yu, H.-H., Tolpygo, A., Mitra, P. P., W\\xF3jcik, D. K., & Rosa, M. G. P. (2016). ',\n                                    _react2.default.createElement(\n                                        'i',\n                                        null,\n                                        'Towards a comprehensive atlas of cortical connections in a primate brain: Mapping tracer injection studies of the common marmoset into a reference digital template.'\n                                    ),\n                                    ' Journal of Comparative Neurology, 524(11), 2161\\u20132181. ',\n                                    _react2.default.createElement(\n                                        'a',\n                                        { href: 'http://doi.org/10.1002/cne.24023' },\n                                        'http://doi.org/10.1002/cne.24023'\n                                    )\n                                )\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'agreement-accept' },\n                            _react2.default.createElement(\n                                'button',\n                                { onClick: this.handleAgreementAccept },\n                                'Accept'\n                            ),\n                            _react2.default.createElement(\n                                'button',\n                                { onClick: this.handleAgreementCancel },\n                                'Cancel'\n                            )\n                        )\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _classnames2.default)('quink-link-tips', { hidden: !this.state.showTooltip }) },\n                    'This function is still under active construction, please check it out later.'\n                )\n            );\n        }\n    }]);\n\n    return QuickLinks;\n}(_react2.default.Component);\n\nexports.default = QuickLinks;\n;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvY29tcG9uZW50cy9RdWlja0xpbmtzLnJlYWN0LmpzP2VhZTAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL0FjdGlvbnMnO1xuaW1wb3J0IEFwcFN0b3JlIGZyb20gJy4uL3N0b3Jlcy9BcHBTdG9yZSc7XG5pbXBvcnQgSW5qZWN0aW9uTGlzdCBmcm9tICcuL0luamVjdGlvbkxpc3QucmVhY3QnO1xuaW1wb3J0IENvbG9yQmFyIGZyb20gJy4vQ29sb3JCYXIucmVhY3QnO1xuaW1wb3J0IE1haW5GbG5lIGZyb20gJy4vTWFpbkZsbmUucmVhY3QnO1xuaW1wb3J0IE1vZGFsLCB7ZGVmYXVsdE1vZGFsU3R5bGV9IGZyb20gJy4uL2xpYi9tb2RhbCc7XG5pbXBvcnQgQXBwRGlzcGF0Y2hlciBmcm9tICcuLi9kaXNwYXRjaGVyL0FwcERpc3BhdGNoZXInO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHt0b1RpdGxlQ2FzZSwgZ2V0Q29sb3JGdW5jLCBzY2llbnRpZmljTm90aW9uLCBnZXRUYXJnZXRBcmVhU3VtbWFyeUhUTUx9IGZyb20gJy4uL2xpYi91dGlscyc7XG5pbXBvcnQge0Nvbm5lY3Rpdml0eX0gZnJvbSAnLi4vbGliL2Nvbm5lY3Rpdml0eSc7XG5cbmNvbnN0IExJQ0VOU0VfUkVORVcgPSAzNjAwO1xuY29uc3QgQ09OTkVDVElWSVRZX01BVFJJWCA9ICcvc3RhdGljL2RhdGEvbWFybW9zZXRfYnJhaW5fYXJjaGl0ZWN0dXJlXzFfMF9mbG5fbWF0cml4LnR4dCc7XG5jb25zdCBDT05ORUNUSVZJVFlfTUFUUklYX0dQSUNLTEUgPSAnL3N0YXRpYy9kYXRhL21hcm1vc2V0X2JyYWluX2FyY2hpdGVjdHVyZV8xXzBfY29ubmVjdGl2aXR5X21hdHJpeC5ncGlja2xlJztcbmNvbnN0IEFMTF9JTkpFQ1RJT05TID0gJy9zdGF0aWMvZGF0YS9tYXJtb3NldF9icmFpbl9hcmNoaXRlY3R1cmVfMV8wX2FsbF9pbmplY3Rpb25zLnR4dCc7XG5jb25zdCBTUUxfREFUQUJBU0UgPSAnL3N0YXRpYy9kYXRhL21hcm1vc2V0X2JyYWluX2FyY2hpdGVjdHVyZV8xXzBfbWFzdGVyX2RhdGFiYXNlLmRiJztcbmNvbnN0IElOVEVSQVJFQUxfRElTVEFDRSA9ICcvc3RhdGljL2RhdGEvbWFybW9zZXRfYnJhaW5fYXJjaGl0ZWN0dXJlXzFfMF9pbnRlcmFyZWFsX2Rpc3RhbmNlX21hdHJpeC50eHQnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBRdWlja0xpbmtzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCkge1xuICAgICAgICBzdXBlcihwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHNob3dUb29sdGlwOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICBfLmJpbmRBbGwodGhpcywgXG4gICAgICAgICAgICAgICAgICAnaGFuZGxlQWdyZWVtZW50QWNjZXB0JywgJ2hhbmRsZUFncmVlbWVudENhbmNlbCcsXG4gICAgICAgICAgICAgICAgICAnaGFuZGxlUUxDb25uZWN0aXZpdHlUeHQnLCAnaGFuZGxlUUxDb25uZWN0aXZpdHlQaWNrbGUnLFxuICAgICAgICAgICAgICAgICAgJ2hhbmRsZVFMQWxsSW5qZWN0aW9ucycsICdoYW5kbGVRTFNRTGl0ZScsXG4gICAgICAgICAgICAgICAgICAnaGFuZGxlSW50ZXJBcmVhbCcsXG4gICAgICAgICAgICAgICAgICAnaGFuZGxlUUxTY3JlZW5DYXN0JywgJ2hhbmRsZVFMVmlkZW9Eb2MnLFxuICAgICAgICAgICAgICAgICAgJ29wZW5MaW5rJywgJ3JlbW92ZUxpY2Vuc2UnLFxuICAgICAgICAgICAgICAgICAgJ2hhbmRsZUxpY2Vuc2VDaGVjaycsXG4gICAgICAgICAgICAgICAgICAnaGFuZGxlU2hvd1Rvb2x0aXAnLCAnaGFuZGxlSGlkZVRvb2x0aXAnXG4gICAgICAgICAgICAgICAgICk7XG4gICAgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBBcHBTdG9yZS5hZGRMaXN0ZW5lcignZG93bmxvYWQnLCB0aGlzLmhhbmRsZUxpY2Vuc2VDaGVjayk7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICBBcHBTdG9yZS5yZW1vdmVMaXN0ZW5lcignZG93bmxvYWQnLCB0aGlzLmhhbmRsZUxpY2Vuc2VDaGVjayk7XG4gICAgfVxuICAgIGhhbmRsZU1vZGFsSGlkZShlKSB7XG4gICAgfVxuICAgIGhhbmRsZVFMQ29ubmVjdGl2aXR5VHh0KGUpIHtcbiAgICAgICAgbGV0IGhyZWYgPSBDT05ORUNUSVZJVFlfTUFUUklYO1xuICAgICAgICBBY3Rpb25zLnNldERvd25sb2FkTGluayhocmVmLCBlLCBocmVmLnNwbGl0KCcvJykucG9wKCkpO1xuICAgIH1cbiAgICBoYW5kbGVRTENvbm5lY3Rpdml0eVBpY2tsZShlKSB7XG4gICAgICAgIGxldCBocmVmID0gQ09OTkVDVElWSVRZX01BVFJJWF9HUElDS0xFOztcbiAgICAgICAgQWN0aW9ucy5zZXREb3dubG9hZExpbmsoaHJlZiwgZSwgaHJlZi5zcGxpdCgnLycpLnBvcCgpKTtcbiAgICB9XG4gICAgaGFuZGxlUUxBbGxJbmplY3Rpb25zKGUpIHtcbiAgICAgICAgbGV0IGhyZWYgPSBBTExfSU5KRUNUSU9OUztcbiAgICAgICAgQWN0aW9ucy5zZXREb3dubG9hZExpbmsoaHJlZiwgZSwgaHJlZi5zcGxpdCgnLycpLnBvcCgpKTtcbiAgICB9XG4gICAgaGFuZGxlUUxTUUxpdGUoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGhyZWYgPSBTUUxfREFUQUJBU0U7XG4gICAgICAgIEFjdGlvbnMuc2V0RG93bmxvYWRMaW5rKGhyZWYsIGUsIGhyZWYuc3BsaXQoJy8nKS5wb3AoKSk7XG4gICAgfVxuICAgIGhhbmRsZUludGVyQXJlYWwoZSkge1xuICAgICAgICBsZXQgaHJlZiA9IElOVEVSQVJFQUxfRElTVEFDRTtcbiAgICAgICAgQWN0aW9ucy5zZXREb3dubG9hZExpbmsoaHJlZiwgZSwgaHJlZi5zcGxpdCgnLycpLnBvcCgpKTtcbiAgICB9XG4gICAgaGFuZGxlUUxTY3JlZW5DYXN0KGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGhhbmRsZVFMVmlkZW9Eb2MoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaGFuZGxlQWdyZWVtZW50QWNjZXB0KGUpIHtcbiAgICAgICAgbGV0IGxvY2FsID0gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgICAgICAgbG9jYWwuc2V0SXRlbSgnQ0NMaWNlbnNlJywgSlNPTi5zdHJpbmdpZnkoe3N0YXR1czogJ0FjY2VwdGVkJywgdHM6IChEYXRlLm5vdygpIC8gMTAwMCB8IDApfSkpO1xuICAgICAgICB0aGlzLm9wZW5MaW5rKCk7XG4gICAgfVxuICAgIGhhbmRsZUFncmVlbWVudENhbmNlbChlKSB7XG4gICAgICAgIHRoaXMubW9kYWwuaGlkZSgpO1xuICAgIH1cbiAgICBoYW5kbGVMaWNlbnNlQ2hlY2soZSkge1xuICAgICAgICBsZXQgbG9jYWwgPSB3aW5kb3cubG9jYWxTdG9yYWdlO1xuICAgICAgICBsZXQgYWNjZXB0ID0gSlNPTi5wYXJzZShsb2NhbC5nZXRJdGVtKCdDQ0xpY2Vuc2UnKSk7XG4gICAgICAgIGxldCBldiA9IEFwcFN0b3JlLmdldERvd25sb2FkRXZlbnQoKTtcbiAgICAgICAgaWYgKGFjY2VwdCAmJiBhY2NlcHQuc3RhdHVzID09ICdBY2NlcHRlZCcgJiYgKChEYXRlLm5vdygpIC8gMTAwMCB8IDApIC0gYWNjZXB0LnRzIDw9IExJQ0VOU0VfUkVORVcpKSB7XG4gICAgICAgICAgICBpZiAoZXYpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBsaWNlbnNlZSByZXF1aXJlbWVudCBhbHJlYWR5IGFjY2VwdGVkLCBuby1vcCB0byBhbGxvdyBicm93c2VyIHRvIGhhbmRsZSB0aGUgY2xpY2sgZXZlbnRcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgbm8gZXZlbnQgcHJvdmlkZWQsIHNpbXVsYXRlIHRoZSBkb3dubG9hZCB1c2luZyB3aW5kb3cub3BlblxuICAgICAgICAgICAgICAgIC8vdGhpcy5vcGVuTGluaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGV2KSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgbGljZW5zaW5nIGludGVydmVudGlvbiBuZWVkZWQsIGNhbmNlbCB0aGUgYnJvd2VyIGV2ZW50IGhhbmRsaW5nXG4gICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubW9kYWwuc2hvdygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9wZW5MaW5rKGUpIHtcbiAgICAgICAgbGV0IGhyZWYgPSBBcHBTdG9yZS5nZXREb3dubG9hZEhyZWYoKTtcbiAgICAgICAgaWYgKGhyZWYpIHtcbiAgICAgICAgICAgIGlmIChocmVmLnN0YXJ0c1dpdGgoJ2RhdGE6JykpIHtcbiAgICAgICAgICAgICAgICBsZXQgZmlsZW5hbWUgPSBBcHBTdG9yZS5nZXREb3dubG9hZEZpbGVuYW1lKCk7XG4gICAgICAgICAgICAgICAgbGV0IGEgPSAkKCc8YT48L2E+JykuYXR0cignaHJlZicsIGhyZWYpLmNzcyh7ZGlzcGxheTogJ25vbmUnfSkudGV4dCgnRG93bmxvYWQnKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZW5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgYS5hdHRyKCdkb3dubG9hZCcsIGZpbGVuYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYS5nZXQoMCkuY2xpY2soKTtcbiAgICAgICAgICAgICAgICBhLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaHJlZiAhPSAnIycpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYWN0dWFsbHkgYSBuby1vcCBtYXkgbm90IGJlIGEgYmFkIGlkZWFcbiAgICAgICAgICAgICAgICAgICAgLy93aW5kb3cub3BlbihocmVmLCAnX2JsYW5rJyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWxlbmFtZSA9IEFwcFN0b3JlLmdldERvd25sb2FkRmlsZW5hbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGEgPSAkKCc8YT48L2E+JykuYXR0cignaHJlZicsIGhyZWYpLmNzcyh7ZGlzcGxheTogJ25vbmUnfSkudGV4dCgnRG93bmxvYWQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2EuYXR0cignZG93bmxvYWQnLCBmaWxlbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2EucHJvcCgnZG93bmxvYWQnLCBmaWxlbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYS5nZXQoMCkuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIGZpbGVuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgYS5nZXQoMCkuY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgYS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm1vZGFsLnN0YXRlLmhpZGRlbikge1xuICAgICAgICAgICAgdGhpcy5tb2RhbC5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlTGljZW5zZShlKSB7XG4gICAgICAgIGxldCBsb2NhbCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG4gICAgICAgIGxldCBhY2NlcHQgPSBsb2NhbC5yZW1vdmVJdGVtKCdDQ0xpY2Vuc2UnKTtcbiAgICB9XG4gICAgaGFuZGxlU2hvd1Rvb2x0aXAoZSkge1xuICAgICAgICBsZXQgYmJveCA9ICQoJy5xdWljay1saW5rcycpWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBsZXQgdGFyZ2V0X2Jib3ggPSBlLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgbGV0IHkgPSB0YXJnZXRfYmJveC50b3AgLSBiYm94LnRvcCArIDI1O1xuICAgICAgICAvL2xldCB4ID0gZS5wYWdlWCAtIDEwMDA7XG4gICAgICAgIC8vbGV0IHggPSBlLmNsaWVudFggLSBiYm94LmxlZnQgKyAyMDtcbiAgICAgICAgbGV0IHggPSAxNTtcbiAgICAgICAgJCgnLnF1aW5rLWxpbmstdGlwcycpLmNzcyh7XG4gICAgICAgICAgICB0b3A6IHkgKyAncHgnLFxuICAgICAgICAgICAgbGVmdDogeCArICdweCdcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2hvd1Rvb2x0aXA6IHRydWVcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhbmRsZUhpZGVUb29sdGlwKGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzaG93VG9vbHRpcDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7b2JqZWN0fVxuICAgICAqL1xuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IG1vZGFsU3R5bGUgPSBfLmNsb25lKGRlZmF1bHRNb2RhbFN0eWxlKTtcbiAgICAgICAgbW9kYWxTdHlsZS53aWR0aCA9ICc2MCUnO1xuICAgICAgICBtb2RhbFN0eWxlLm1heFdpZHRoID0gJzk2MHB4JztcblxuICAgICAgICBcbiAgICAgICAgbGV0IGNjID0gKDxhIGhyZWY9XCJodHRwczovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktc2EvMy4wL1wiIHRhcmdldD1cIl9ibGFua1wiPjxpbWcgc3JjPVwiL3N0YXRpYy9pbWFnZXMvc2FfODB4MTUucG5nXCIvPjwvYT4pO1xuICAgICAgICBjYyA9IG51bGw7XG4gICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJ3aXRoLWdhcFwiIG9uTW91c2VFbnRlcj17dGhpcy5oYW5kbGVTaG93VG9vbHRpcH0gb25Nb3VzZUxlYXZlPXt0aGlzLmhhbmRsZUhpZGVUb29sdGlwfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgb25DbGljaz17dGhpcy5oYW5kbGVRTFZpZGVvRG9jfSB0YXJnZXQ9XCJfYmxhbmtcIj48c3BhbiBjbGFzc05hbWU9XCJsaW5rXCI+VmlkZW8gZG9jdW1lbnRhdGlvbiBvZiB0aGUgd2Vic2l0ZTwvc3Bhbj48L2E+XG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaSBjbGFzc05hbWU9XCJ0cmFuc3BhcmVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZVFMU2NyZWVuQ2FzdH0gdGFyZ2V0PVwiX2JsYW5rXCI+PHNwYW4gY2xhc3NOYW1lPVwibGlua1wiPlNjcmVlbmNhc3Qgb24gdGhlIGZlYXR1cmVzIG9mIHRoZSBjb25uZWN0aXZpdHkgbWF0cml4PC9zcGFuPjwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgPGxpIGNsYXNzTmFtZT1cInRyYW5zcGFyZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIG9uQ2xpY2s9e3RoaXMucmVtb3ZlTGljZW5zZX0+PHNwYW4gY2xhc3NOYW1lPVwibGlua1wiPkNsZWFyIExpY2Vuc2UgY2FjaGUgKGludGVybmFsIHVzZSk8L3NwYW4+PC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwicXVpY2stbGlua3NcIj5cbiAgICAgICAgICAgICAgICA8c3Ryb25nPlF1aWNrIExpbmtzOjwvc3Ryb25nPlxuICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17Q09OTkVDVElWSVRZX01BVFJJWH0gZG93bmxvYWQgb25DbGljaz17dGhpcy5oYW5kbGVRTENvbm5lY3Rpdml0eVR4dH0+PHNwYW4gY2xhc3NOYW1lPVwibGlua1wiPkNvbm5lY3Rpdml0eSBtYXRyaXggKHR4dCBmaWxlKTwvc3Bhbj48L2E+IHtjY31cbiAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17Q09OTkVDVElWSVRZX01BVFJJWF9HUElDS0xFfSBkb3dubG9hZCBvbkNsaWNrPXt0aGlzLmhhbmRsZVFMQ29ubmVjdGl2aXR5UGlja2xlfT48c3BhbiBjbGFzc05hbWU9XCJsaW5rXCI+Q29ubmVjdGl2aXR5IG1hdHJpeCAobmV0d29ya1ggZ3BpY2tsZSk8L3NwYW4+PC9hPiB7Y2N9XG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgICAgICAgICAgIDxsaT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e0FMTF9JTkpFQ1RJT05TfSBkb3dubG9hZCBvbkNsaWNrPXt0aGlzLmhhbmRsZVFMQWxsSW5qZWN0aW9uc30+PHNwYW4gY2xhc3NOYW1lPVwibGlua1wiPkNvbGxhdGVkIHJlc3VsdHMgb2YgYWxsIGluamVjdGlvbnMgKHR4dCBmaWxlKTwvc3Bhbj48L2E+IHtjY31cbiAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17SU5URVJBUkVBTF9ESVNUQUNFfSBkb3dubG9hZCBvbkNsaWNrPXt0aGlzLmhhbmRsZUludGVyQXJlYWx9PjxzcGFuIGNsYXNzTmFtZT1cImxpbmtcIj5JbnRlcmFyZWFsIGRpc3RhbmNlIG1hdHJpeCAodHh0IGZpbGUpPC9zcGFuPjwvYT4ge2NjfVxuICAgICAgICAgICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICAgICAgICAgICA8bGkgY2xhc3NOYW1lPVwid2l0aC1nYXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vTmV1cm9pbmZsYWIvYW5hbHlzaXMubWFybW9zZXRicmFpbi5vcmcvd2lraS9BcHBsaWNhdGlvbi1Qcm9ncmFtbWluZy1JbnRlcmZhY2VcIiB0YXJnZXQ9XCJfYmxhbmtcIj48c3BhbiBjbGFzc05hbWU9XCJsaW5rXCI+RGV2ZWxvcGVyIEFQSSBkb2N1bWVudGF0aW9uPC9zcGFuPjwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICAgICA8L3VsPlxuICAgICAgICAgICAgICAgIDxNb2RhbCByZWY9e21vZGFsID0+IHRoaXMubW9kYWwgPSBtb2RhbH0gbW9kYWxTdHlsZT17bW9kYWxTdHlsZX0gb25IaWRlPXt0aGlzLmhhbmRsZU1vZGFsSGlkZX0+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWdyZWVtZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRpdGxlXCI+TGljZW5jZSBhZ3JlZW1lbnQ8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkkgaGF2ZSByZWFkIGFuZCB1bmRlcnN0b29kIDxhIGhyZWY9XCJodHRwOi8vd3d3Lm1hcm1vc2V0YnJhaW4ub3JnL2Fib3V0XCIgdGFyZ2V0PVwiX2JsYW5rXCI+dGhlIGNpdGF0aW9uIHBvbGljeTwvYT4sIHRoZSA8YSBocmVmPVwiaHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LXNhLzQuMC9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5DQyBCWS1TQSA0LjAgbGljZW5jZTwvYT4gYW5kIEkgdW5kZXJzdGFuZCB1bmRlciB3aGljaCBjb25kaXRpb24gSSBjYW4gdXNlIHRoZSBkYXRhIGFuZCBob3cgdG8gYWNrbm93bGVkZ2UgdGhlIGRhdGFzZWQgSSBhbSBhYm91dCB0byBkb3dubG9hZC48L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsaWNlbnNlLW1vZGFsLWhvdy10by1jaXRlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3VidGl0bGVcIj5Ib3cgdG8gY2l0ZT88L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYWprYSwgUC4sIENoYXBsaW4sIFQuIEEuLCBZdSwgSC4tSC4sIFRvbHB5Z28sIEEuLCBNaXRyYSwgUC4gUC4sIFfDs2pjaWssIEQuIEsuLCAmYW1wOyBSb3NhLCBNLiBHLiBQLiAoMjAxNikuIDxpPlRvd2FyZHMgYSBjb21wcmVoZW5zaXZlIGF0bGFzIG9mIGNvcnRpY2FsIGNvbm5lY3Rpb25zIGluIGEgcHJpbWF0ZSBicmFpbjogTWFwcGluZyB0cmFjZXIgaW5qZWN0aW9uIHN0dWRpZXMgb2YgdGhlIGNvbW1vbiBtYXJtb3NldCBpbnRvIGEgcmVmZXJlbmNlIGRpZ2l0YWwgdGVtcGxhdGUuPC9pPiBKb3VybmFsIG9mIENvbXBhcmF0aXZlIE5ldXJvbG9neSwgNTI0KDExKSwgMjE2MeKAkzIxODEuIDxhIGhyZWY9XCJodHRwOi8vZG9pLm9yZy8xMC4xMDAyL2NuZS4yNDAyM1wiPmh0dHA6Ly9kb2kub3JnLzEwLjEwMDIvY25lLjI0MDIzPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFncmVlbWVudC1hY2NlcHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQWdyZWVtZW50QWNjZXB0fT5BY2NlcHQ8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQWdyZWVtZW50Q2FuY2VsfT5DYW5jZWw8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L01vZGFsPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdxdWluay1saW5rLXRpcHMnLCB7aGlkZGVuOiAhdGhpcy5zdGF0ZS5zaG93VG9vbHRpcH0pfT5cbiAgICAgICAgICAgICAgICAgICAgVGhpcyBmdW5jdGlvbiBpcyBzdGlsbCB1bmRlciBhY3RpdmUgY29uc3RydWN0aW9uLCBwbGVhc2UgY2hlY2sgaXQgb3V0IGxhdGVyLlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICApO1xuICAgIH1cblxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBqcy9jb21wb25lbnRzL1F1aWNrTGlua3MucmVhY3QuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBU0E7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBQUE7QUFDQTs7Ozs7Ozs7O0FBdEJBOzs7Ozs7Ozs7QUF1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFOQTtBQWdCQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQURBO0FBR0E7OztBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBOzs7Ozs7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVdBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQWJBO0FBaUJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQUZBO0FBRkE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBWkE7QUFEQTtBQW1CQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBdENBO0FBMkNBOzs7O0FBN01BO0FBQ0E7QUFEQTtBQStNQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 41:
/* unknown exports provided */
/* all exports used */
/*!***************************************!*\
  !*** ./js/components/Slider.react.js ***!
  \***************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _InjectionList = __webpack_require__(/*! ./InjectionList.react */ 21);\n\nvar _InjectionList2 = _interopRequireDefault(_InjectionList);\n\nvar _modal = __webpack_require__(/*! ../lib/modal */ 22);\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nvar _utils = __webpack_require__(/*! ../lib/utils */ 16);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _d = __webpack_require__(/*! d3 */ 12);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _classnames = __webpack_require__(/*! classnames */ 13);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Slider = function (_Component) {\n    _inherits(Slider, _Component);\n\n    function Slider(props, context) {\n        _classCallCheck(this, Slider);\n\n        //let state = _.extend({}, AppStore.getPseudo3D());\n        var _this = _possibleConstructorReturn(this, (Slider.__proto__ || Object.getPrototypeOf(Slider)).call(this, props, context));\n\n        var state = _defineProperty({}, _this.props.axis, _AppStore2.default.getPseudo3D()[_this.props.axis]);\n        //this.state = AppStore.getPseudo3D();\n        _this.state = state;\n        _lodash2.default.bindAll(_this, 'handleChange', 'handleExternalChange', 'handleMouseWheel');\n        return _this;\n    }\n\n    _createClass(Slider, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            var slider = this.slider;\n            //document.getElementById(\"myItem\");\n            if (slider.addEventListener) {\n                // IE9, Chrome, Safari, Opera\n                slider.addEventListener('mousewheel', this.handleMouseWheel, false);\n                // Firefox\n                slider.addEventListener('DOMMouseScroll', this.handleMouseWheel, false);\n            }\n            // IE 6/7/8\n            else {\n                    slider.attachEvent('onmousewheel', this.handleMouseWheel);\n                }\n            _AppStore2.default.addChangeListener(this.handleExternalChange);\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _AppStore2.default.removeChangeListener(this.handleExternalChange);\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange(e) {\n            var value = parseInt(e.target.value, 10);\n            _Actions2.default.set3DIndex(this.props.axis, value);\n            //this.setState(AppStore.getPseudo3D());\n            this.setState(_defineProperty({}, this.props.axis, value));\n        }\n    }, {\n        key: 'handleExternalChange',\n        value: function handleExternalChange() {\n            var state = _AppStore2.default.getPseudo3D();\n            this.setState(_defineProperty({}, this.props.axis, state[this.props.axis]));\n        }\n    }, {\n        key: 'handleMouseWheel',\n        value: function handleMouseWheel(e) {\n            e.preventDefault();\n            // cross-browser wheel delta\n            //let e = window.event || e; // old IE support\n            var delta = Math.max(-1, Math.min(1, e.wheelDelta || -e.detail));\n            var value = void 0;\n            if (delta > 0) {\n                value = this.state[this.props.axis] - this.props.step;\n            } else {\n                value = this.state[this.props.axis] + this.props.step;\n            }\n            if (value < this.props.min) {\n                value = this.props.min;\n            } else if (value > this.props.max) {\n                value = this.props.max;\n            }\n            _Actions2.default.set3DIndex(this.props.axis, value);\n            this.setState(_defineProperty({}, this.props.axis, value));\n            return false;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var value = this.state[this.props.axis];\n            return _react2.default.createElement(\n                'div',\n                { className: 'slider' },\n                _react2.default.createElement('input', { type: 'range', min: this.props.min, max: this.props.max,\n                    orient: this.props.orient,\n                    onChange: this.handleChange, value: value,\n\n                    ref: function ref(input) {\n                        return _this2.slider = input;\n                    } }),\n                this.props.children\n            );\n        }\n    }]);\n\n    return Slider;\n}(_react.Component);\n\nexports.default = Slider;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvY29tcG9uZW50cy9TbGlkZXIucmVhY3QuanM/NDYxZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKi9cblxuaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL0FjdGlvbnMnO1xuaW1wb3J0IEFwcFN0b3JlIGZyb20gJy4uL3N0b3Jlcy9BcHBTdG9yZSc7XG5pbXBvcnQgSW5qZWN0aW9uTGlzdCBmcm9tICcuL0luamVjdGlvbkxpc3QucmVhY3QnO1xuaW1wb3J0IE1vZGFsIGZyb20gJy4uL2xpYi9tb2RhbCc7XG5pbXBvcnQge3RvVGl0bGVDYXNlfSBmcm9tICcuLi9saWIvdXRpbHMnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yIChwcm9wcywgY29udGV4dCkge1xuICAgICAgICBzdXBlcihwcm9wcywgY29udGV4dClcbiAgICAgICAgLy9sZXQgc3RhdGUgPSBfLmV4dGVuZCh7fSwgQXBwU3RvcmUuZ2V0UHNldWRvM0QoKSk7XG4gICAgICAgIGxldCBzdGF0ZSA9IHtcbiAgICAgICAgICAgIFt0aGlzLnByb3BzLmF4aXNdOiBBcHBTdG9yZS5nZXRQc2V1ZG8zRCgpW3RoaXMucHJvcHMuYXhpc11cbiAgICAgICAgfTtcbiAgICAgICAgLy90aGlzLnN0YXRlID0gQXBwU3RvcmUuZ2V0UHNldWRvM0QoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICBfLmJpbmRBbGwodGhpcywgJ2hhbmRsZUNoYW5nZScsICdoYW5kbGVFeHRlcm5hbENoYW5nZScsICdoYW5kbGVNb3VzZVdoZWVsJyk7XG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIGxldCBzbGlkZXIgPSB0aGlzLnNsaWRlcjtcbiAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm15SXRlbVwiKTtcbiAgICAgICAgaWYgKHNsaWRlci5hZGRFdmVudExpc3RlbmVyKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBJRTksIENocm9tZSwgU2FmYXJpLCBPcGVyYVxuICAgICAgICAgICAgc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCB0aGlzLmhhbmRsZU1vdXNlV2hlZWwsIGZhbHNlKTtcbiAgICAgICAgICAgIC8vIEZpcmVmb3hcbiAgICAgICAgICAgIHNsaWRlci5hZGRFdmVudExpc3RlbmVyKCdET01Nb3VzZVNjcm9sbCcsIHRoaXMuaGFuZGxlTW91c2VXaGVlbCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElFIDYvNy84XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgc2xpZGVyLmF0dGFjaEV2ZW50KCdvbm1vdXNld2hlZWwnLCB0aGlzLmhhbmRsZU1vdXNlV2hlZWwpO1xuICAgICAgICB9XG4gICAgICAgIEFwcFN0b3JlLmFkZENoYW5nZUxpc3RlbmVyKHRoaXMuaGFuZGxlRXh0ZXJuYWxDaGFuZ2UpO1xuICAgIH1cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgQXBwU3RvcmUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIodGhpcy5oYW5kbGVFeHRlcm5hbENoYW5nZSk7XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZShlKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlLCAxMCk7XG4gICAgICAgIEFjdGlvbnMuc2V0M0RJbmRleCh0aGlzLnByb3BzLmF4aXMsIHZhbHVlKTtcbiAgICAgICAgLy90aGlzLnNldFN0YXRlKEFwcFN0b3JlLmdldFBzZXVkbzNEKCkpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtbdGhpcy5wcm9wcy5heGlzXTogdmFsdWV9KTtcbiAgICB9XG4gICAgaGFuZGxlRXh0ZXJuYWxDaGFuZ2UoKSB7XG4gICAgICAgIGxldCBzdGF0ZSA9IEFwcFN0b3JlLmdldFBzZXVkbzNEKCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1t0aGlzLnByb3BzLmF4aXNdOiBzdGF0ZVt0aGlzLnByb3BzLmF4aXNdfSk7XG4gICAgfVxuICAgIGhhbmRsZU1vdXNlV2hlZWwoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIC8vIGNyb3NzLWJyb3dzZXIgd2hlZWwgZGVsdGFcbiAgICAgICAgLy9sZXQgZSA9IHdpbmRvdy5ldmVudCB8fCBlOyAvLyBvbGQgSUUgc3VwcG9ydFxuICAgICAgICBsZXQgZGVsdGEgPSBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgKGUud2hlZWxEZWx0YSB8fCAtZS5kZXRhaWwpKSk7XG4gICAgICAgIGxldCB2YWx1ZTtcbiAgICAgICAgaWYgKGRlbHRhID4gMCkge1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnN0YXRlW3RoaXMucHJvcHMuYXhpc10gLSB0aGlzLnByb3BzLnN0ZXA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuc3RhdGVbdGhpcy5wcm9wcy5heGlzXSArIHRoaXMucHJvcHMuc3RlcDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPCB0aGlzLnByb3BzLm1pbikge1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnByb3BzLm1pbjtcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA+IHRoaXMucHJvcHMubWF4KSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMucHJvcHMubWF4O1xuICAgICAgICB9XG4gICAgICAgIEFjdGlvbnMuc2V0M0RJbmRleCh0aGlzLnByb3BzLmF4aXMsIHZhbHVlKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7W3RoaXMucHJvcHMuYXhpc106IHZhbHVlfSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmVuZGVyICgpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnN0YXRlW3RoaXMucHJvcHMuYXhpc107XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNsaWRlclwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFuZ2VcIiBtaW49e3RoaXMucHJvcHMubWlufSBtYXg9e3RoaXMucHJvcHMubWF4fVxuICAgICAgICAgICAgICAgICAgICBvcmllbnQ9e3RoaXMucHJvcHMub3JpZW50fVxuICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9IHZhbHVlPXt2YWx1ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZWY9eyhpbnB1dCkgPT4gdGhpcy5zbGlkZXIgPSBpbnB1dH0gLz5cbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGpzL2NvbXBvbmVudHMvU2xpZGVyLnJlYWN0LmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQVNBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUFsQkE7Ozs7Ozs7OztBQW1CQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFSQTtBQVNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFVQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFOQTtBQVNBOzs7Ozs7QUExRUEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 42:
/* unknown exports provided */
/* all exports used */
/*!*******************************************!*\
  !*** ./js/components/ViewSwitch.react.js ***!
  \*******************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _classnames = __webpack_require__(/*! classnames */ 13);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MainMatrix = function (_React$Component) {\n    _inherits(MainMatrix, _React$Component);\n\n    function MainMatrix(props, context) {\n        _classCallCheck(this, MainMatrix);\n\n        var _this = _possibleConstructorReturn(this, (MainMatrix.__proto__ || Object.getPrototypeOf(MainMatrix)).call(this, props, context));\n\n        var that = _this;\n        _.bindAll(_this, 'handleSwitchToGraphView', 'handleSwitchToSLNView', 'handleSwitchToMatrixView', 'handleFocusViewer', 'handleBlurViewer');\n        var state = {\n            controlExpanded: true,\n            focused: false\n        };\n        _this.state = state;\n\n        return _this;\n    }\n\n    _createClass(MainMatrix, [{\n        key: 'handleSwitchToGraphView',\n        value: function handleSwitchToGraphView(e) {\n            window.location.href = '/graph.html';\n        }\n    }, {\n        key: 'handleSwitchToSLNView',\n        value: function handleSwitchToSLNView(e) {\n            window.location.href = '/sln.html';\n        }\n    }, {\n        key: 'handleSwitchToMatrixView',\n        value: function handleSwitchToMatrixView(e) {\n            window.location.href = '/index.html';\n        }\n    }, {\n        key: 'handleFocusViewer',\n        value: function handleFocusViewer(e) {\n            this.setState({\n                focused: true,\n                controlExpanded: false\n            });\n            $('body').addClass('focused');\n            Actions.setFocusedViewState(true);\n        }\n    }, {\n        key: 'handleBlurViewer',\n        value: function handleBlurViewer(e) {\n            this.setState({\n                focused: false,\n                controlExpanded: true\n            });\n            $('body').removeClass('focused');\n            Actions.setFocusedViewState(false);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            return _react2.default.createElement(\n                'section',\n                { className: 'switch-view' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'control-row switch-view' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'control-group' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'switch-view-control' },\n                            _react2.default.createElement(\n                                'a',\n                                { href: '/index.html' },\n                                _react2.default.createElement(\n                                    'label',\n                                    { htmlFor: 'view_checkbox_matrix', className: (0, _classnames2.default)({ active: this.props.view == 'matrix' }), title: 'Change to FLNe Matrix view (Shift + M)' },\n                                    'FLNe Matrix'\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'a',\n                                { href: '/graph.html' },\n                                _react2.default.createElement(\n                                    'label',\n                                    { htmlFor: 'view_checkbox_graph', className: (0, _classnames2.default)({ active: this.props.view == 'graph' }), title: 'Change to FLNe graph view (Shift + G)' },\n                                    'FLNe Graph'\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'a',\n                                { href: '/sln.html' },\n                                _react2.default.createElement(\n                                    'label',\n                                    { htmlFor: 'view_checkbox_sln', className: (0, _classnames2.default)({ active: this.props.view == 'SLN' }), title: 'Change to SLN view (Shift + S)' },\n                                    'SLN Matrix'\n                                )\n                            ),\n                            _react2.default.createElement(\n                                'a',\n                                { href: 'https://github.com/Neuroinflab/analysis.marmosetbrain.org/wiki/Marmoset-Brain-Connectivity-Atlas-Project', target: '_blank' },\n                                _react2.default.createElement(\n                                    'label',\n                                    { className: '' },\n                                    'Learn More'\n                                )\n                            ),\n                            _react2.default.createElement('input', { type: 'radio', id: 'view_checkbox_matrix', name: 'view', checked: this.props.view == 'matrix', onChange: this.handleSwitchToMatrixView }),\n                            _react2.default.createElement('input', { type: 'radio', id: 'view_checkbox_graph', name: 'view', checked: this.props.view == 'graph', onChange: this.handleSwitchToGraphView }),\n                            _react2.default.createElement('input', { type: 'radio', id: 'view_checkbox_sln', name: 'view', checked: this.props.view == 'sln', onChange: this.handleSwitchToSLNView }),\n                            _react2.default.createElement('input', { type: 'radio', id: 'view_checkbox_api', name: 'view' })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'focused-display', onClick: this.state.focused ? this.handleBlurViewer : this.handleFocusViewer },\n                            _react2.default.createElement('img', { width: '32', height: '32', src: this.state.focused ? '/static/images/fullscreen_1.png' : '/static/images/fullscreen_0.png', title: this.state.focused ? \"Click to exit expanded view (Shift + F)\" : \"Click to switch to expanded view (Shift + F)\" })\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return MainMatrix;\n}(_react2.default.Component);\n\nexports.default = MainMatrix;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvY29tcG9uZW50cy9WaWV3U3dpdGNoLnJlYWN0LmpzP2U5YWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYWluTWF0cml4IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCkge1xuICAgICAgICBzdXBlcihwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcbiAgICAgICAgXy5iaW5kQWxsKHRoaXMsICdoYW5kbGVTd2l0Y2hUb0dyYXBoVmlldycsICdoYW5kbGVTd2l0Y2hUb1NMTlZpZXcnLCAnaGFuZGxlU3dpdGNoVG9NYXRyaXhWaWV3JyxcbiAgICAgICAgICAgICdoYW5kbGVGb2N1c1ZpZXdlcicsICdoYW5kbGVCbHVyVmlld2VyJyk7XG4gICAgICAgIGxldCBzdGF0ZSA9IHtcbiAgICAgICAgICAgIGNvbnRyb2xFeHBhbmRlZDogdHJ1ZSxcbiAgICAgICAgICAgIGZvY3VzZWQ6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcblxuICAgIH1cblxuICAgIGhhbmRsZVN3aXRjaFRvR3JhcGhWaWV3KGUpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2dyYXBoLmh0bWwnO1xuICAgIH1cbiAgICBoYW5kbGVTd2l0Y2hUb1NMTlZpZXcoZSkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvc2xuLmh0bWwnO1xuICAgIH1cbiAgICBoYW5kbGVTd2l0Y2hUb01hdHJpeFZpZXcoZSkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvaW5kZXguaHRtbCc7XG4gICAgfVxuICAgIGhhbmRsZUZvY3VzVmlld2VyKGUpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBmb2N1c2VkOiB0cnVlLFxuICAgICAgICAgICAgY29udHJvbEV4cGFuZGVkOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdmb2N1c2VkJyk7XG4gICAgICAgIEFjdGlvbnMuc2V0Rm9jdXNlZFZpZXdTdGF0ZSh0cnVlKTtcbiAgICB9XG4gICAgaGFuZGxlQmx1clZpZXdlcihlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgZm9jdXNlZDogZmFsc2UsXG4gICAgICAgICAgICBjb250cm9sRXhwYW5kZWQ6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgICBBY3Rpb25zLnNldEZvY3VzZWRWaWV3U3RhdGUoZmFsc2UpO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cInN3aXRjaC12aWV3XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udHJvbC1yb3cgc3dpdGNoLXZpZXdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udHJvbC1ncm91cFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3dpdGNoLXZpZXctY29udHJvbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL2luZGV4Lmh0bWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBodG1sRm9yPVwidmlld19jaGVja2JveF9tYXRyaXhcIiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoe2FjdGl2ZTogdGhpcy5wcm9wcy52aWV3ID09ICdtYXRyaXgnIH0pfSB0aXRsZT1cIkNoYW5nZSB0byBGTE5lIE1hdHJpeCB2aWV3IChTaGlmdCArIE0pXCI+RkxOZSBNYXRyaXg8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvZ3JhcGguaHRtbFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJ2aWV3X2NoZWNrYm94X2dyYXBoXCIgY2xhc3NOYW1lPXtjbGFzc05hbWVzKHthY3RpdmU6IHRoaXMucHJvcHMudmlldyA9PSAnZ3JhcGgnIH0pfSB0aXRsZT1cIkNoYW5nZSB0byBGTE5lIGdyYXBoIHZpZXcgKFNoaWZ0ICsgRylcIj5GTE5lIEdyYXBoPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL3Nsbi5odG1sXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInZpZXdfY2hlY2tib3hfc2xuXCIgY2xhc3NOYW1lPXtjbGFzc05hbWVzKHthY3RpdmU6IHRoaXMucHJvcHMudmlldyA9PSAnU0xOJyB9KX0gdGl0bGU9XCJDaGFuZ2UgdG8gU0xOIHZpZXcgKFNoaWZ0ICsgUylcIj5TTE4gTWF0cml4PC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL05ldXJvaW5mbGFiL2FuYWx5c2lzLm1hcm1vc2V0YnJhaW4ub3JnL3dpa2kvTWFybW9zZXQtQnJhaW4tQ29ubmVjdGl2aXR5LUF0bGFzLVByb2plY3RcIiB0YXJnZXQ9XCJfYmxhbmtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBMZWFybiBNb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBpZD1cInZpZXdfY2hlY2tib3hfbWF0cml4XCIgbmFtZT1cInZpZXdcIiBjaGVja2VkPXt0aGlzLnByb3BzLnZpZXcgPT0gJ21hdHJpeCd9IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVN3aXRjaFRvTWF0cml4Vmlld30gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJyYWRpb1wiIGlkPVwidmlld19jaGVja2JveF9ncmFwaFwiIG5hbWU9XCJ2aWV3XCIgY2hlY2tlZD17dGhpcy5wcm9wcy52aWV3ID09ICdncmFwaCd9IG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVN3aXRjaFRvR3JhcGhWaWV3fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInJhZGlvXCIgaWQ9XCJ2aWV3X2NoZWNrYm94X3NsblwiIG5hbWU9XCJ2aWV3XCIgY2hlY2tlZD17dGhpcy5wcm9wcy52aWV3ID09ICdzbG4nfSBvbkNoYW5nZT17dGhpcy5oYW5kbGVTd2l0Y2hUb1NMTlZpZXd9IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwicmFkaW9cIiBpZD1cInZpZXdfY2hlY2tib3hfYXBpXCIgbmFtZT1cInZpZXdcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb2N1c2VkLWRpc3BsYXlcIiBvbkNsaWNrPXt0aGlzLnN0YXRlLmZvY3VzZWQgPyB0aGlzLmhhbmRsZUJsdXJWaWV3ZXIgOiB0aGlzLmhhbmRsZUZvY3VzVmlld2VyfT48aW1nIHdpZHRoPVwiMzJcIiBoZWlnaHQ9XCIzMlwiIHNyYz17dGhpcy5zdGF0ZS5mb2N1c2VkID8gJy9zdGF0aWMvaW1hZ2VzL2Z1bGxzY3JlZW5fMS5wbmcnIDogJy9zdGF0aWMvaW1hZ2VzL2Z1bGxzY3JlZW5fMC5wbmcnfSB0aXRsZT17dGhpcy5zdGF0ZS5mb2N1c2VkID8gXCJDbGljayB0byBleGl0IGV4cGFuZGVkIHZpZXcgKFNoaWZ0ICsgRilcIiA6IFwiQ2xpY2sgdG8gc3dpdGNoIHRvIGV4cGFuZGVkIHZpZXcgKFNoaWZ0ICsgRilcIiB9Lz48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgKTtcblxuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBqcy9jb21wb25lbnRzL1ZpZXdTd2l0Y2gucmVhY3QuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFWQTtBQVdBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFsQkE7QUFvQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXJCQTtBQURBO0FBREE7QUE2QkE7Ozs7QUF2RUE7QUFDQTtBQURBIiwic291cmNlUm9vdCI6IiJ9");

/***/ }),

/***/ 50:
/* unknown exports provided */
/* all exports used */
/*!****************************************!*\
  !*** ./js/components/ToolTip.react.js ***!
  \****************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _InjectionList = __webpack_require__(/*! ./InjectionList.react */ 21);\n\nvar _InjectionList2 = _interopRequireDefault(_InjectionList);\n\nvar _ColorBar = __webpack_require__(/*! ./ColorBar.react */ 26);\n\nvar _ColorBar2 = _interopRequireDefault(_ColorBar);\n\nvar _MainFlne = __webpack_require__(/*! ./MainFlne.react */ 24);\n\nvar _MainFlne2 = _interopRequireDefault(_MainFlne);\n\nvar _ViewSwitch = __webpack_require__(/*! ./ViewSwitch.react */ 42);\n\nvar _ViewSwitch2 = _interopRequireDefault(_ViewSwitch);\n\nvar _modal = __webpack_require__(/*! ../lib/modal */ 22);\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nvar _AppDispatcher = __webpack_require__(/*! ../dispatcher/AppDispatcher */ 18);\n\nvar _AppDispatcher2 = _interopRequireDefault(_AppDispatcher);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _d = __webpack_require__(/*! d3 */ 12);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _classnames = __webpack_require__(/*! classnames */ 13);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _utils = __webpack_require__(/*! ../lib/utils */ 16);\n\nvar _connectivity = __webpack_require__(/*! ../lib/connectivity */ 30);\n\nvar _QuickLinks = __webpack_require__(/*! ./QuickLinks.react */ 40);\n\nvar _QuickLinks2 = _interopRequireDefault(_QuickLinks);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar ToolTip = function (_React$Component) {\n    _inherits(ToolTip, _React$Component);\n\n    function ToolTip(props, context) {\n        _classCallCheck(this, ToolTip);\n\n        var _this = _possibleConstructorReturn(this, (ToolTip.__proto__ || Object.getPrototypeOf(ToolTip)).call(this, props, context));\n\n        _lodash2.default.bindAll(_this, 'handleMouseEnter', 'handleMouseLeave');\n        _this.state = {\n            showTip: false\n        };\n        return _this;\n    }\n\n    _createClass(ToolTip, [{\n        key: 'handleMouseEnter',\n        value: function handleMouseEnter(e) {\n            this.setState({\n                showTip: true\n            });\n        }\n    }, {\n        key: 'handleMouseLeave',\n        value: function handleMouseLeave(e) {\n            this.setState({\n                showTip: false\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var display = void 0;\n            if (this.state.showTip) {\n                display = 'block';\n            } else {\n                display = 'none';\n            }\n            return _react2.default.createElement(\n                'span',\n                { 'data-title': this.props.content, className: this.props.className,\n                    onMouseEnter: this.handleMouseEnter,\n                    onMouseLeave: this.handleMouseLeave,\n                    style: { position: 'relative' }\n                },\n                this.props.children,\n                _react2.default.createElement(\n                    'span',\n                    { className: 'tooltip matrix-view', style: { display: display, position: 'absolute', top: '-30px', width: '350px', backgroundColor: '#fff', border: '1px solid black' } },\n                    this.props.title\n                )\n            );\n        }\n    }]);\n\n    return ToolTip;\n}(_react2.default.Component);\n\nexports.default = ToolTip;\n;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvY29tcG9uZW50cy9Ub29sVGlwLnJlYWN0LmpzP2M4OTgiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQWN0aW9ucyBmcm9tICcuLi9hY3Rpb25zL0FjdGlvbnMnO1xuaW1wb3J0IEFwcFN0b3JlIGZyb20gJy4uL3N0b3Jlcy9BcHBTdG9yZSc7XG5pbXBvcnQgSW5qZWN0aW9uTGlzdCBmcm9tICcuL0luamVjdGlvbkxpc3QucmVhY3QnO1xuaW1wb3J0IENvbG9yQmFyIGZyb20gJy4vQ29sb3JCYXIucmVhY3QnO1xuaW1wb3J0IE1haW5GbG5lIGZyb20gJy4vTWFpbkZsbmUucmVhY3QnO1xuaW1wb3J0IFZpZXdTd2l0Y2ggZnJvbSAnLi9WaWV3U3dpdGNoLnJlYWN0JztcbmltcG9ydCBNb2RhbCBmcm9tICcuLi9saWIvbW9kYWwnO1xuaW1wb3J0IEFwcERpc3BhdGNoZXIgZnJvbSAnLi4vZGlzcGF0Y2hlci9BcHBEaXNwYXRjaGVyJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7dG9UaXRsZUNhc2UsIGdldEJsdWVDb2xvckZ1bmMsIHNjaWVudGlmaWNOb3Rpb24sIGdldFRhcmdldEFyZWFTdW1tYXJ5SFRNTCwgc3ZnQWRkSGF0Y2hMaW5lfSBmcm9tICcuLi9saWIvdXRpbHMnO1xuaW1wb3J0IHtDb25uZWN0aXZpdHl9IGZyb20gJy4uL2xpYi9jb25uZWN0aXZpdHknO1xuaW1wb3J0IFF1aWNrTGlua3MgZnJvbSAnLi9RdWlja0xpbmtzLnJlYWN0JztcbmltcG9ydCB7QXJlYSwgQXJlYXMsIEluamVjdGlvbiwgSW5qZWN0aW9uc30gZnJvbSAnLi4vbGliL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9vbFRpcCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMsIGNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIocHJvcHMsIGNvbnRleHQpO1xuICAgICAgICBfLmJpbmRBbGwodGhpcywgJ2hhbmRsZU1vdXNlRW50ZXInLCAnaGFuZGxlTW91c2VMZWF2ZScpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgc2hvd1RpcDogZmFsc2UsXG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlTW91c2VFbnRlcihlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2hvd1RpcDogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaGFuZGxlTW91c2VMZWF2ZShlKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgc2hvd1RpcDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgbGV0IGRpc3BsYXk7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNob3dUaXApIHtcbiAgICAgICAgICAgIGRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKDxzcGFuIGRhdGEtdGl0bGU9e3RoaXMucHJvcHMuY29udGVudH0gY2xhc3NOYW1lPXt0aGlzLnByb3BzLmNsYXNzTmFtZX1cbiAgICAgICAgICAgIG9uTW91c2VFbnRlcj17dGhpcy5oYW5kbGVNb3VzZUVudGVyfVxuICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXt0aGlzLmhhbmRsZU1vdXNlTGVhdmV9XG4gICAgICAgICAgICBzdHlsZT17e3Bvc2l0aW9uOiAncmVsYXRpdmUnfX1cbiAgICAgICAgICAgID57dGhpcy5wcm9wcy5jaGlsZHJlbn1cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0b29sdGlwIG1hdHJpeC12aWV3XCIgc3R5bGU9e3tkaXNwbGF5OiBkaXNwbGF5LCBwb3NpdGlvbjogJ2Fic29sdXRlJywgdG9wOiAnLTMwcHgnLCB3aWR0aDogJzM1MHB4JywgYmFja2dyb3VuZENvbG9yOiAnI2ZmZicsIGJvcmRlcjogJzFweCBzb2xpZCBibGFjayd9fT57dGhpcy5wcm9wcy50aXRsZX08L3NwYW4+XG4gICAgICAgICAgICA8L3NwYW4+KTtcbiAgICB9XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGpzL2NvbXBvbmVudHMvVG9vbFRpcC5yZWFjdC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFTQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTs7Ozs7Ozs7Ozs7QUF4QkE7Ozs7Ozs7OztBQTBCQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBSEE7QUFNQTtBQUNBOzs7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTEE7QUFPQTs7OztBQWhDQTtBQUNBO0FBREE7QUFpQ0EiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 73:
/* unknown exports provided */
/* all exports used */
/*!***************************************!*\
  !*** ./js/components/Footer.react.js ***!
  \***************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _InjectionList = __webpack_require__(/*! ./InjectionList.react */ 21);\n\nvar _InjectionList2 = _interopRequireDefault(_InjectionList);\n\nvar _MainFlne = __webpack_require__(/*! ./MainFlne.react */ 24);\n\nvar _MainFlne2 = _interopRequireDefault(_MainFlne);\n\nvar _AppDispatcher = __webpack_require__(/*! ../dispatcher/AppDispatcher */ 18);\n\nvar _AppDispatcher2 = _interopRequireDefault(_AppDispatcher);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _classnames = __webpack_require__(/*! classnames */ 13);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar Footer = function (_React$Component) {\n    _inherits(Footer, _React$Component);\n\n    function Footer(props, context) {\n        _classCallCheck(this, Footer);\n\n        return _possibleConstructorReturn(this, (Footer.__proto__ || Object.getPrototypeOf(Footer)).call(this, props, context));\n    }\n\n    _createClass(Footer, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {}\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {}\n        /**\n         * @return {object}\n         */\n\n    }, {\n        key: 'render',\n        value: function render() {\n            //<a href=\"https://creativecommons.org/licenses/by/4.0/\" target=\"_blank\"><img src=\"/static/images/cc88x31.png\" alt=\"The provided data is released under the terms of CC BY 4.0 license.\" title=\"The provided data is released under the terms of CC BY 4.0 license.\" /></a>\n            //<span className=\"citation-policy\">Please follow the <a href=\"http://marmoset.mrosa.org/about\" target=\"_blank\">citation policy</a></span>.\n            return _react2.default.createElement(\n                'section',\n                { className: 'footer' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'cc' },\n                    _react2.default.createElement(\n                        'a',\n                        { href: 'http://marmoset.mrosa.org/about', target: '_blank' },\n                        _react2.default.createElement('img', { src: '/static/images/cc88x31.png', alt: 'The provided data is released under the terms of CC BY 4.0 license.', title: 'The provided data is released under the terms of CC BY 4.0 license.' }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'cc-tooltip' },\n                            'The provided data is released under the terms of CC BY 4.0 license.',\n                            _react2.default.createElement('br', null),\n                            _react2.default.createElement(\n                                'strong',\n                                null,\n                                'Please click to see the citation policy.'\n                            )\n                        )\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'acknowledgement' },\n                    _react2.default.createElement(\n                        'section',\n                        { className: 'acknowledgement' },\n                        _react2.default.createElement(\n                            'section',\n                            { className: 'sponsor incf' },\n                            _react2.default.createElement(\n                                'a',\n                                { href: 'https://www.incf.org/', target: '_blank', className: 'pad' },\n                                _react2.default.createElement('img', { className: 'incf-logo pad', src: '/static/images/incf_logo.svg', width: '115', height: '53' })\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'sponsor-tooltip' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'tooltip-text' },\n                                    _react2.default.createElement(\n                                        'span',\n                                        null,\n                                        'This project is sponsored by the',\n                                        _react2.default.createElement('br', null),\n                                        'International Neuroinformatics Coordinating Facility',\n                                        _react2.default.createElement('br', null),\n                                        'Seed Funding Grant'\n                                    )\n                                )\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'section',\n                            { className: 'sponsor arc' },\n                            _react2.default.createElement(\n                                'a',\n                                { href: 'http://www.arc.gov.au', target: '_blank', className: 'pad' },\n                                _react2.default.createElement('img', { className: 'arc-logo pad', src: '/static/images/arc_logo.png', width: '234', height: '53' })\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'sponsor-tooltip' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'tooltip-text' },\n                                    _react2.default.createElement(\n                                        'span',\n                                        null,\n                                        'This project is sponsored by',\n                                        _react2.default.createElement('br', null),\n                                        'Australian Research Council'\n                                    )\n                                )\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'section',\n                            { className: 'sponsor cibf' },\n                            _react2.default.createElement(\n                                'a',\n                                { href: 'http://www.cibf.edu.au/discovery', target: '_blank', className: 'pad' },\n                                _react2.default.createElement('img', { className: 'cibf-logo pad', src: '/static/images/cibf_logo.png', width: '268', height: '53' })\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'sponsor-tooltip' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'tooltip-text' },\n                                    _react2.default.createElement(\n                                        'span',\n                                        null,\n                                        'This project is sponsored by',\n                                        _react2.default.createElement('br', null),\n                                        'Australian Research Council',\n                                        _react2.default.createElement('br', null),\n                                        'Center of Excellence for Integrative Brain Function'\n                                    )\n                                )\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'section',\n                            { className: 'sponsor nencki' },\n                            _react2.default.createElement(\n                                'a',\n                                { href: 'http://en.nencki.gov.pl/laboratory-of-neuroinformatics', target: '_blank', className: '' },\n                                _react2.default.createElement('img', { className: 'nencki-logo', src: '/static/images/nencki_logo.png', height: '66' })\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'sponsor-tooltip' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'tooltip-text' },\n                                    _react2.default.createElement(\n                                        'span',\n                                        null,\n                                        'Data analysis and website development',\n                                        _react2.default.createElement('br', null),\n                                        'conducted in collaboration with',\n                                        _react2.default.createElement('br', null),\n                                        'the Laboratory of Neuroinformatics at',\n                                        _react2.default.createElement('br', null),\n                                        'the Nencki Institute of Experimental Biology;',\n                                        _react2.default.createElement('br', null),\n                                        'Warsaw, Poland.'\n                                    )\n                                )\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'section',\n                            { className: 'sponsor monash' },\n                            _react2.default.createElement(\n                                'a',\n                                { href: 'http://www.monash.edu.au', target: '_blank', className: 'pad' },\n                                _react2.default.createElement('img', { className: 'monash-logo pad', src: '/static/images/monash_logo.png', width: '181', height: '53' })\n                            ),\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'sponsor-tooltip' },\n                                _react2.default.createElement(\n                                    'div',\n                                    { className: 'tooltip-text' },\n                                    _react2.default.createElement(\n                                        'span',\n                                        null,\n                                        'This project is sponsored by',\n                                        _react2.default.createElement('br', null),\n                                        'Monash University'\n                                    )\n                                )\n                            )\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n\n    return Footer;\n}(_react2.default.Component);\n\nexports.default = Footer;\n;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvY29tcG9uZW50cy9Gb290ZXIucmVhY3QuanM/ODkxZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKi9cblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMvQWN0aW9ucyc7XG5pbXBvcnQgQXBwU3RvcmUgZnJvbSAnLi4vc3RvcmVzL0FwcFN0b3JlJztcbmltcG9ydCBJbmplY3Rpb25MaXN0IGZyb20gJy4vSW5qZWN0aW9uTGlzdC5yZWFjdCc7XG5pbXBvcnQgTWFpbkZsbmUgZnJvbSAnLi9NYWluRmxuZS5yZWFjdCc7XG5pbXBvcnQgQXBwRGlzcGF0Y2hlciBmcm9tICcuLi9kaXNwYXRjaGVyL0FwcERpc3BhdGNoZXInO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb290ZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzLCBjb250ZXh0KSB7XG4gICAgICAgIHN1cGVyKHByb3BzLCBjb250ZXh0KTtcbiAgICB9XG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgfVxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAgICovXG4gICAgcmVuZGVyKCkge1xuICAgICAgICAvLzxhIGhyZWY9XCJodHRwczovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnkvNC4wL1wiIHRhcmdldD1cIl9ibGFua1wiPjxpbWcgc3JjPVwiL3N0YXRpYy9pbWFnZXMvY2M4OHgzMS5wbmdcIiBhbHQ9XCJUaGUgcHJvdmlkZWQgZGF0YSBpcyByZWxlYXNlZCB1bmRlciB0aGUgdGVybXMgb2YgQ0MgQlkgNC4wIGxpY2Vuc2UuXCIgdGl0bGU9XCJUaGUgcHJvdmlkZWQgZGF0YSBpcyByZWxlYXNlZCB1bmRlciB0aGUgdGVybXMgb2YgQ0MgQlkgNC4wIGxpY2Vuc2UuXCIgLz48L2E+XG4gICAgICAgIC8vPHNwYW4gY2xhc3NOYW1lPVwiY2l0YXRpb24tcG9saWN5XCI+UGxlYXNlIGZvbGxvdyB0aGUgPGEgaHJlZj1cImh0dHA6Ly9tYXJtb3NldC5tcm9zYS5vcmcvYWJvdXRcIiB0YXJnZXQ9XCJfYmxhbmtcIj5jaXRhdGlvbiBwb2xpY3k8L2E+PC9zcGFuPi5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cImZvb3RlclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2NcIj5cbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHA6Ly9tYXJtb3NldC5tcm9zYS5vcmcvYWJvdXRcIiB0YXJnZXQ9XCJfYmxhbmtcIj48aW1nIHNyYz1cIi9zdGF0aWMvaW1hZ2VzL2NjODh4MzEucG5nXCIgYWx0PVwiVGhlIHByb3ZpZGVkIGRhdGEgaXMgcmVsZWFzZWQgdW5kZXIgdGhlIHRlcm1zIG9mIENDIEJZIDQuMCBsaWNlbnNlLlwiIHRpdGxlPVwiVGhlIHByb3ZpZGVkIGRhdGEgaXMgcmVsZWFzZWQgdW5kZXIgdGhlIHRlcm1zIG9mIENDIEJZIDQuMCBsaWNlbnNlLlwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNjLXRvb2x0aXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGUgcHJvdmlkZWQgZGF0YSBpcyByZWxlYXNlZCB1bmRlciB0aGUgdGVybXMgb2YgQ0MgQlkgNC4wIGxpY2Vuc2UuPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlBsZWFzZSBjbGljayB0byBzZWUgdGhlIGNpdGF0aW9uIHBvbGljeS48L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhY2tub3dsZWRnZW1lbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwiYWNrbm93bGVkZ2VtZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJzcG9uc29yIGluY2ZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cHM6Ly93d3cuaW5jZi5vcmcvXCIgdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3NOYW1lPVwicGFkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3NOYW1lPVwiaW5jZi1sb2dvIHBhZFwiIHNyYz1cIi9zdGF0aWMvaW1hZ2VzL2luY2ZfbG9nby5zdmdcIiB3aWR0aD1cIjExNVwiIGhlaWdodD1cIjUzXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwb25zb3ItdG9vbHRpcFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRvb2x0aXAtdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+VGhpcyBwcm9qZWN0IGlzIHNwb25zb3JlZCBieSB0aGU8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW50ZXJuYXRpb25hbCBOZXVyb2luZm9ybWF0aWNzIENvb3JkaW5hdGluZyBGYWNpbGl0eTxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZWVkIEZ1bmRpbmcgR3JhbnQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwic3BvbnNvciBhcmNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cDovL3d3dy5hcmMuZ292LmF1XCIgdGFyZ2V0PVwiX2JsYW5rXCIgY2xhc3NOYW1lPVwicGFkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3NOYW1lPVwiYXJjLWxvZ28gcGFkXCIgc3JjPVwiL3N0YXRpYy9pbWFnZXMvYXJjX2xvZ28ucG5nXCIgd2lkdGg9XCIyMzRcIiBoZWlnaHQ9XCI1M1wiLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcG9uc29yLXRvb2x0aXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0b29sdGlwLXRleHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlRoaXMgcHJvamVjdCBpcyBzcG9uc29yZWQgYnk8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1c3RyYWxpYW4gUmVzZWFyY2ggQ291bmNpbDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJzcG9uc29yIGNpYmZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cDovL3d3dy5jaWJmLmVkdS5hdS9kaXNjb3ZlcnlcIiB0YXJnZXQ9XCJfYmxhbmtcIiBjbGFzc05hbWU9XCJwYWRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzc05hbWU9XCJjaWJmLWxvZ28gcGFkXCIgc3JjPVwiL3N0YXRpYy9pbWFnZXMvY2liZl9sb2dvLnBuZ1wiIHdpZHRoPVwiMjY4XCIgaGVpZ2h0PVwiNTNcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BvbnNvci10b29sdGlwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidG9vbHRpcC10ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5UaGlzIHByb2plY3QgaXMgc3BvbnNvcmVkIGJ5PGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXN0cmFsaWFuIFJlc2VhcmNoIENvdW5jaWw8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENlbnRlciBvZiBFeGNlbGxlbmNlIGZvciBJbnRlZ3JhdGl2ZSBCcmFpbiBGdW5jdGlvbjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJzcG9uc29yIG5lbmNraVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwOi8vZW4ubmVuY2tpLmdvdi5wbC9sYWJvcmF0b3J5LW9mLW5ldXJvaW5mb3JtYXRpY3NcIiB0YXJnZXQ9XCJfYmxhbmtcIiBjbGFzc05hbWU9XCJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzc05hbWU9XCJuZW5ja2ktbG9nb1wiIHNyYz1cIi9zdGF0aWMvaW1hZ2VzL25lbmNraV9sb2dvLnBuZ1wiIGhlaWdodD1cIjY2XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcG9uc29yLXRvb2x0aXBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0b29sdGlwLXRleHRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPkRhdGEgYW5hbHlzaXMgYW5kIHdlYnNpdGUgZGV2ZWxvcG1lbnQ8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmR1Y3RlZCBpbiBjb2xsYWJvcmF0aW9uIHdpdGg8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBMYWJvcmF0b3J5IG9mIE5ldXJvaW5mb3JtYXRpY3MgYXQ8YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBOZW5ja2kgSW5zdGl0dXRlIG9mIEV4cGVyaW1lbnRhbCBCaW9sb2d5Ozxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV2Fyc2F3LCBQb2xhbmQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cInNwb25zb3IgbW9uYXNoXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cImh0dHA6Ly93d3cubW9uYXNoLmVkdS5hdVwiIHRhcmdldD1cIl9ibGFua1wiIGNsYXNzTmFtZT1cInBhZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzTmFtZT1cIm1vbmFzaC1sb2dvIHBhZFwiIHNyYz1cIi9zdGF0aWMvaW1hZ2VzL21vbmFzaF9sb2dvLnBuZ1wiIHdpZHRoPVwiMTgxXCIgaGVpZ2h0PVwiNTNcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwb25zb3ItdG9vbHRpcFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRvb2x0aXAtdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+VGhpcyBwcm9qZWN0IGlzIHNwb25zb3JlZCBieTxici8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9uYXNoIFVuaXZlcnNpdHk8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxuICAgICAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICk7XG4gICAgfVxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBqcy9jb21wb25lbnRzL0Zvb3Rlci5yZWFjdC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFTQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7Ozs7QUFqQkE7Ozs7Ozs7OztBQWtCQTs7O0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUNBOzs7QUFBQTs7O0FBRUE7QUFFQTs7Ozs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUZBO0FBREE7QUFEQTtBQVFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFEQTtBQURBO0FBSkE7QUFZQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFEQTtBQURBO0FBSkE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBREE7QUFEQTtBQUpBO0FBWUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBR0E7QUFIQTtBQUFBO0FBREE7QUFEQTtBQUpBO0FBZUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFEQTtBQUpBO0FBbkRBO0FBREE7QUFUQTtBQTRFQTs7OztBQTNGQTtBQUNBO0FBREE7QUE0RkEiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 75:
/* unknown exports provided */
/* all exports used */
/*!*****************************************!*\
  !*** ./js/components/Pseudo3D.react.js ***!
  \*****************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(/*! react */ 6);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Actions = __webpack_require__(/*! ../actions/Actions */ 11);\n\nvar _Actions2 = _interopRequireDefault(_Actions);\n\nvar _AppStore = __webpack_require__(/*! ../stores/AppStore */ 9);\n\nvar _AppStore2 = _interopRequireDefault(_AppStore);\n\nvar _lodash = __webpack_require__(/*! lodash */ 8);\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _classnames = __webpack_require__(/*! classnames */ 13);\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _numberformat = __webpack_require__(/*! ../lib/numberformat */ 31);\n\nvar _numberformat2 = _interopRequireDefault(_numberformat);\n\nvar _d = __webpack_require__(/*! d3 */ 12);\n\nvar d3 = _interopRequireWildcard(_d);\n\nvar _modal = __webpack_require__(/*! ../lib/modal */ 22);\n\nvar _modal2 = _interopRequireDefault(_modal);\n\nvar _Slider = __webpack_require__(/*! ./Slider.react */ 41);\n\nvar _Slider2 = _interopRequireDefault(_Slider);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014-2015, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar modalStyle = {\n    width: '80%',\n    maxWidth: '1200px',\n    scrollX: 'auto',\n    overflow: 'scroll',\n    maxHeight: '100%'\n};\n\nvar Pseudo3D = function (_Component) {\n    _inherits(Pseudo3D, _Component);\n\n    function Pseudo3D(props, context) {\n        _classCallCheck(this, Pseudo3D);\n\n        var _this = _possibleConstructorReturn(this, (Pseudo3D.__proto__ || Object.getPrototypeOf(Pseudo3D)).call(this, props, context));\n\n        _lodash2.default.bindAll(_this, 'handleChange', 'handleEnhanceBorder', 'handleSet3D', 'handleShowTip', 'handleHideTip', 'handle3DEnter', 'handle3DLeave', 'handleShowFlatmapTip', 'handleHideFlatmapTip', 'handleShow3DTip', 'handleHide3DTip', 'handle3DReset', 'handleSpinLeft', 'handleSpinRight', 'incX', 'decX', 'incY', 'decY', 'handleStopSpinning', 'handleModalHide', 'handleDragStart', 'handleDragEnd', 'handleMouseMove');\n        _this.state = {\n            p3d: _AppStore2.default.getPseudo3D(),\n            top_lowres: false,\n            bottom_lowres: false,\n            top_done: false,\n            bottom_done: false,\n            showTip: false,\n            showReset: false,\n            spinning: false\n        };\n        _this.minX = -12;\n        _this.maxX = 12;\n        _this.minY = 0;\n        _this.maxY = 6;\n        _this.spinHandle = null;\n        return _this;\n    }\n\n    _createClass(Pseudo3D, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _AppStore2.default.addChangeListener(this.handleChange);\n            _AppStore2.default.addListener('modal_hide', this.handleModalHide);\n\n            var this_ = this;\n\n            var top_lowres = new Image();\n            top_lowres.onload = function () {\n                this_.setState({\n                    top_lowres: true\n                });\n                var top_img = new Image();\n                top_img.onload = function () {\n                    this_.setState({\n                        top_done: true\n                    });\n                };\n                top_img.src = '/static/data/individual_injections_3d_visualization/' + this_.props.injection_name + '_website_view_midthickness_opaque.jpg';\n            };\n            top_lowres.src = '/static/data/individual_injections_3d_visualization/lowres/' + this.props.injection_name + '_website_view_midthickness_opaque.jpg';\n\n            var bottom_lowres = new Image();\n            bottom_lowres.onload = function () {\n                this_.setState({\n                    bottom_lowres: true\n                });\n                var bottom_img = new Image();\n                bottom_img.onload = function () {\n                    this_.setState({\n                        bottom_done: true\n                    });\n                };\n                bottom_img.src = '/static/data/individual_injections_3d_visualization/' + this_.props.injection_name + '_website_view_midthickness_transparent.jpg';\n            };\n            bottom_lowres.src = '/static/data/individual_injections_3d_visualization/lowres/' + this.props.injection_name + '_website_view_midthickness_transparent.jpg';\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            this.handleModalHide();\n            _AppStore2.default.removeListener('modal_hide', this.handleModalHide);\n            _AppStore2.default.removeChangeListener(this.handleChange);\n        }\n    }, {\n        key: 'handleChange',\n        value: function handleChange() {\n            this.setState({\n                p3d: _AppStore2.default.getPseudo3D()\n            });\n        }\n    }, {\n        key: 'handleEnhanceBorder',\n        value: function handleEnhanceBorder(e) {\n            var checked = e.target.checked;\n            if (checked) {\n                _Actions2.default.set3DIndex('borderAlpha', 100);\n            } else {\n                _Actions2.default.set3DIndex('borderAlpha', 0);\n            }\n        }\n    }, {\n        key: 'handleSet3D',\n        value: function handleSet3D(e) {\n            var dest = $(e.target).data('dest');\n            switch (dest) {\n                case 'dorsal':\n                    _Actions2.default.set3DIndex('y', 0);\n                    break;\n                case 'ventral':\n                    _Actions2.default.set3DIndex('y', 6);\n                    break;\n                case 'left':\n                    _Actions2.default.set3DIndex('x', -12);\n                    break;\n                case 'right':\n                    _Actions2.default.set3DIndex('x', 12);\n                    break;\n                case 'transparent':\n                    _Actions2.default.set3DIndex('alpha', 100);\n                    break;\n                case 'opaque':\n                    _Actions2.default.set3DIndex('alpha', 0);\n                    break;\n            }\n        }\n    }, {\n        key: 'handleShowTip',\n        value: function handleShowTip() {\n            this.setState({ showTip: true });\n        }\n    }, {\n        key: 'handleHideTip',\n        value: function handleHideTip() {\n            this.setState({ showTip: false });\n        }\n    }, {\n        key: 'handle3DEnter',\n        value: function handle3DEnter() {\n            this.setState({ showReset: true });\n        }\n    }, {\n        key: 'handle3DLeave',\n        value: function handle3DLeave() {\n            this.setState({ showReset: false });\n        }\n    }, {\n        key: 'handle3DReset',\n        value: function handle3DReset() {\n            var default_ = _AppStore2.default.getDefault3D();\n            _Actions2.default.set3DIndex('x', default_.x);\n            _Actions2.default.set3DIndex('y', default_.y);\n            _Actions2.default.set3DIndex('alpha', default_.alpha);\n            this.handleStopSpinning();\n        }\n    }, {\n        key: 'handleShowFlatmapTip',\n        value: function handleShowFlatmapTip() {\n            this.setState({ showFlatmapTip: true });\n        }\n    }, {\n        key: 'handleHideFlatmapTip',\n        value: function handleHideFlatmapTip() {\n            this.setState({ showFlatmapTip: false });\n        }\n    }, {\n        key: 'handleShow3DTip',\n        value: function handleShow3DTip() {\n            this.setState({ show3DTip: true });\n        }\n    }, {\n        key: 'handleHide3DTip',\n        value: function handleHide3DTip() {\n            this.setState({ show3DTip: false });\n        }\n    }, {\n        key: 'incX',\n        value: function incX() {\n            var newX = this.state.p3d.x + 1;\n            if (newX > this.maxX) {\n                newX = this.minX + 1;\n            }\n            _Actions2.default.set3DIndex('x', newX);\n        }\n    }, {\n        key: 'decX',\n        value: function decX() {\n            var newX = this.state.p3d.x - 1;\n            if (newX < this.minX) {\n                newX = this.maxX - 1;\n            }\n            _Actions2.default.set3DIndex('x', newX);\n        }\n    }, {\n        key: 'incY',\n        value: function incY() {\n            var newY = this.state.p3d.y + 1;\n            if (newY > this.maxY) {\n                newY = this.maxY;\n            }\n            _Actions2.default.set3DIndex('y', newY);\n        }\n    }, {\n        key: 'decY',\n        value: function decY() {\n            var newY = this.state.p3d.y - 1;\n            if (newY < this.minY) {\n                newY = this.minY;\n            }\n            _Actions2.default.set3DIndex('y', newY);\n        }\n    }, {\n        key: 'handleSpinLeft',\n        value: function handleSpinLeft(e) {\n            var _this2 = this;\n\n            if (this.spinHandle) {\n                clearInterval(this.spinHandle);\n            }\n            this.spinHandle = setInterval(function () {\n                _this2.decX();\n            }, 150);\n            this.setState({ spinning: true });\n        }\n    }, {\n        key: 'handleSpinRight',\n        value: function handleSpinRight(e) {\n            var _this3 = this;\n\n            if (this.spinHandle) {\n                clearInterval(this.spinHandle);\n            }\n            this.spinHandle = setInterval(function () {\n                _this3.incX();\n            }, 150);\n            this.setState({ spinning: true });\n        }\n    }, {\n        key: 'handleStopSpinning',\n        value: function handleStopSpinning() {\n            if (this.spinHandle) {\n                clearInterval(this.spinHandle);\n                this.spinHandle = null;\n            }\n\n            this.setState({ spinning: false });\n        }\n    }, {\n        key: 'handleModalHide',\n        value: function handleModalHide() {\n            this.handle3DReset();\n        }\n    }, {\n        key: 'handleDragStart',\n        value: function handleDragStart(e) {\n            var _this4 = this;\n\n            var _f = function _f(e) {\n                _this4.dragging = false;\n            };\n\n            $(window).one('mouseup', _f);\n\n            this.dragging = true;\n            this.startingPoint = [e.screenX, e.screenY];\n            this.dragLastX = e.screenX;\n            this.dragLastY = e.screenY;\n        }\n    }, {\n        key: 'handleDragEnd',\n        value: function handleDragEnd() {\n            this.dragging = false;\n        }\n    }, {\n        key: 'handleMouseMove',\n        value: function handleMouseMove(e) {\n            if (this.dragging) {\n                console.log(e.screenX);\n                if (Math.abs(e.screenX - this.dragLastX) > 8) {\n                    if (e.screenX < this.dragLastX) {\n                        this.incX();\n                    } else {\n                        this.decX();\n                    }\n                    this.dragLastX = e.screenX;\n                }\n                if (Math.abs(e.screenY - this.dragLastY) > 20) {\n                    if (e.screenY < this.dragLastY) {\n                        this.incY();\n                    } else {\n                        this.decY();\n                    }\n                    this.dragLastY = e.screenY;\n                }\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var index_x = -this.state.p3d.x,\n                index_y = 6 - this.state.p3d.y;\n            if (index_x < 0) {\n                index_x += 24;\n            }\n            var offset_x = 540 * -index_x;\n            var offset_y = 540 * -index_y;\n            var bg_pos = offset_x + 'px ' + offset_y + 'px';\n            var opacity = 1 - parseFloat(this.state.p3d.alpha) / 100;\n            var borderOpacity = parseFloat(this.state.p3d.borderAlpha) / 100;\n\n            var top_image = void 0,\n                bottom_image = void 0;\n            if (this.state.top_done) {\n                top_image = 'url(/static/data/individual_injections_3d_visualization/' + this.props.injection_name + '_website_view_midthickness_opaque.jpg)';\n            } else {\n                top_image = 'url(/static/data/individual_injections_3d_visualization/lowres/' + this.props.injection_name + '_website_view_midthickness_opaque.jpg)';\n            }\n\n            if (this.state.bottom_done) {\n                bottom_image = 'url(/static/data/individual_injections_3d_visualization/' + this.props.injection_name + '_website_view_midthickness_transparent.jpg)';\n            } else {\n                bottom_image = 'url(/static/data/individual_injections_3d_visualization/lowres/' + this.props.injection_name + '_website_view_midthickness_transparent.jpg)';\n            }\n\n            var loading = void 0;\n            if (this.state.top_lowres && this.state.bottom_lowres) {\n                if (this.state.top_done && this.state.bottom_done) {\n                    loading = null;\n                } else {\n                    loading = _react2.default.createElement(\n                        'div',\n                        { className: 'preloading' },\n                        'Loading High Resolution 3D Model'\n                    );\n                }\n            } else {\n                loading = _react2.default.createElement(\n                    'div',\n                    { className: 'preloading' },\n                    'Loading 3D Model'\n                );\n            }\n            var reset = void 0;\n            var p3d = this.state.p3d;\n            var default3D = _AppStore2.default.getDefault3D();\n            if (p3d.x != default3D.x || p3d.y != default3D.y || p3d.alpha != default3D.alpha) {\n                reset = _react2.default.createElement(\n                    'button',\n                    { className: (0, _classnames2.default)('reset-button', { hidden: !this.state.showReset }), onClick: this.handle3DReset },\n                    'Reset to lateral'\n                );\n            }\n            var stopSpinning = void 0;\n            if (this.state.spinning) {\n                stopSpinning = _react2.default.createElement(\n                    'button',\n                    { className: (0, _classnames2.default)('stop-button'), onClick: this.handleStopSpinning },\n                    'Stop Spinning'\n                );\n                stopSpinning = null;\n            }\n            var area = void 0;\n            var nodePicked = _AppStore2.default.getNodePicked();\n            var injection_name = this.props.injection.display_name ? this.props.injection.display_name : this.props.injection_name;\n            var title = _react2.default.createElement(\n                'div',\n                { className: 'main-title' },\n                injection_name,\n                ',  Injection into the ',\n                _react2.default.createElement(\n                    'span',\n                    { className: 'area-fullname' },\n                    nodePicked.fullname\n                ),\n                ', ',\n                nodePicked.abbrev\n            );\n            var jump_href = 'http://www.marmosetbrain.org/goto/' + this.props.case_id + '/' + this.props.injection.section + '/' + this.props.injection.section_x + '/' + this.props.injection.section_y + '/3';\n\n            var sub_title = _react2.default.createElement(\n                'div',\n                { className: 'sub-title' },\n                _react2.default.createElement(\n                    'a',\n                    { className: (0, _classnames2.default)('jump', this.props.tracer_id), href: jump_href, target: '_blank', title: 'Click to jump to injection in high resolution viewer' },\n                    _react2.default.createElement('span', { className: (0, _classnames2.default)('icon-jump', this.props.tracer_id) })\n                ),\n                _react2.default.createElement(\n                    'span',\n                    { className: 'coordinates', onMouseEnter: this.handleShowTip, onMouseLeave: this.handleHideTip },\n                    'ML: ',\n                    parseFloat(this.props.meta.l).toFixed(1),\n                    ' mm, AP: ',\n                    parseFloat(this.props.meta.a).toFixed(1),\n                    ' mm, DV: ',\n                    parseFloat(this.props.meta.h).toFixed(1),\n                    ' mm'\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: (0, _classnames2.default)('tooltip', { hidden: !this.state.showTip }) },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'tip-title' },\n                        'Stereotaxic coordinates (mm)'\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'tip-item' },\n                        'ML: Mediolateral, lateral to the midsagittal plane'\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'tip-item' },\n                        'AP: Rostrocaudal,',\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'tip-subitem' },\n                            'Positive: Caudal to interaural line',\n                            _react2.default.createElement('br', null),\n                            'Negative: Rostral to interaural line'\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'tip-item' },\n                        'DV: Dorsoventral, Dorsal to the interaural line'\n                    )\n                )\n            );\n            var spinLeft = _react2.default.createElement(\n                'div',\n                { className: 'button cursor-pointer spin-button', title: 'Spin the 3D model anti-clockwise', onClick: this.handleSpinLeft, 'data-dest': 'left' },\n                '\\u21BA'\n            );\n            var spinRight = _react2.default.createElement(\n                'div',\n                { className: 'button cursor-pointer spin-button', title: 'Spin the 3D model clockwise', onClick: this.handleSpinRight, 'data-dest': 'right' },\n                '\\u21BB'\n            );\n            if (this.state.spinning) {\n                spinLeft = _react2.default.createElement(\n                    'div',\n                    { className: 'button cursor-pointer', onClick: this.handleStopSpinning, title: 'Stop spinning', 'data-dest': 'left' },\n                    '\\u25FB'\n                );\n                spinRight = _react2.default.createElement(\n                    'div',\n                    { className: 'button cursor-pointer', onClick: this.handleStopSpinning, title: 'Stop spinning', 'data-dest': 'right' },\n                    '\\u25FB'\n                );\n            }\n            return _react2.default.createElement(\n                'div',\n                { className: 'modal-content' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'modal-title' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'title-box' },\n                        title,\n                        sub_title\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'flatmap-container' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'caption' },\n                        'Labelled cells projected onto the flatmap ',\n                        _react2.default.createElement(\n                            'span',\n                            { className: 'cursor-pointer', onMouseEnter: this.handleShowFlatmapTip, onMouseLeave: this.handleHideFlatmapTip },\n                            '[?]'\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: (0, _classnames2.default)('tooltip', 'flatmap-tip', { hidden: !this.state.showFlatmapTip }) },\n                        'Flattened mid-thickness cortical surface.',\n                        _react2.default.createElement('br', null),\n                        'Different colors correspond to various areas. Black dots denote individual cells projected onto the flat map, while the sphere indicates the injection location.'\n                    ),\n                    _react2.default.createElement('img', { className: 'flatmap', src: 'http://d13rgn2ixumcch.cloudfront.net/flatmap/' + this.props.case_id + '/' + this.props.tracer_id + '.png' }),\n                    _react2.default.createElement('img', { className: 'flatmap-border', src: 'http://d13rgn2ixumcch.cloudfront.net/flatmap/flatmap_border.png',\n                        style: { opacity: borderOpacity } }),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'opacity-slider' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'wrapper' },\n                            _react2.default.createElement('input', { type: 'checkbox', value: '1', checked: this.state.p3d.borderAlpha == '100', onChange: this.handleEnhanceBorder }),\n                            _react2.default.createElement(\n                                'span',\n                                { className: 'enhance-border' },\n                                'Enhance borders'\n                            ),\n                            _react2.default.createElement('br', null),\n                            _react2.default.createElement('i', { className: 'download-csv' }),\n                            _react2.default.createElement(\n                                'a',\n                                { href: 'http://d13rgn2ixumcch.cloudfront.net/flatmap/' + this.props.case_id + '/' + this.props.tracer_id + '.png', target: '_blank', title: 'Download the flatmap image for injection ' + this.props.injection_name },\n                                'Download the image'\n                            )\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'note' },\n                        'Hit [',\n                        _react2.default.createElement(\n                            'strong',\n                            null,\n                            'Esc'\n                        ),\n                        '] to close the window.',\n                        _react2.default.createElement('br', null),\n                        'See the Majka et al. (2016) article, figs. 7 and 8 (',\n                        _react2.default.createElement(\n                            'a',\n                            { href: 'https://doi.org/10.1002/cne.24023', target: '_blank' },\n                            '10.1002/cne.24023'\n                        ),\n                        ')',\n                        _react2.default.createElement('br', null),\n                        'for detailed description of the mapping procedure.'\n                    )\n                ),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'pseudo-3d-container' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'caption' },\n                        '3D visualization of the projection pattern',\n                        _react2.default.createElement('br', null),\n                        'visualized against the midthickness surface ',\n                        _react2.default.createElement(\n                            'span',\n                            { className: '', onMouseEnter: this.handleShow3DTip, onMouseLeave: this.handleHide3DTip },\n                            '[?]'\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: (0, _classnames2.default)('tooltip', 'p3d-tip', { hidden: !this.state.show3DTip }) },\n                        'Individual cells plotted against the mid-thickness cortical surface.',\n                        _react2.default.createElement('br', null),\n                        'The tip of the cone denotes the center of mass of the injection.'\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'pseudo-3d',\n                            onMouseEnter: this.handle3DEnter,\n                            onMouseLeave: this.handle3DLeave\n                        },\n                        _react2.default.createElement('div', { className: 'pseudo-3d-top',\n                            onMouseDown: this.handleDragStart,\n                            onMouseUp: this.handleDragEnd,\n                            onMouseMove: this.handleMouseMove,\n                            style: {\n                                backgroundImage: top_image,\n                                backgroundPosition: bg_pos,\n                                opacity: opacity\n                            }\n                        }),\n                        _react2.default.createElement('div', { className: 'pseudo-3d-bottom',\n                            style: {\n                                backgroundImage: bottom_image,\n                                backgroundPosition: bg_pos\n                            }\n                        }),\n                        loading,\n                        reset,\n                        stopSpinning\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'pseudo-3d-horizontal-slider' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'left-legend' },\n                            spinLeft,\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'button cursor-pointer', onClick: this.handleSet3D, title: 'Medial view', 'data-dest': 'left' },\n                                '\\u25C1'\n                            )\n                        ),\n                        _react2.default.createElement(_Slider2.default, { axis: 'x', min: -12, max: 12, step: 1, orient: 'horizontal' }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'right-legend' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'button cursor-pointer', onClick: this.handleSet3D, title: 'Medial view', 'data-dest': 'right' },\n                                '\\u25B7'\n                            ),\n                            spinRight\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'pseudo-3d-vertical-slider' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'top-legend-row' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'top-legend cursor-pointer', onClick: this.handleSet3D, title: 'Ventral view', 'data-dest': 'ventral' },\n                                'Ventral'\n                            )\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'slider-row' },\n                            _react2.default.createElement(_Slider2.default, { axis: 'y', min: 0, max: 6, step: -1, orient: 'vertical' })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'bottom-legend-row' },\n                            _react2.default.createElement(\n                                'div',\n                                { className: 'bottom-legend cursor-pointer', onClick: this.handleSet3D, title: 'Dorsal view', 'data-dest': 'dorsal' },\n                                'Dorsal'\n                            )\n                        )\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'pseudo-3d-opacity-slider' },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'left-legend cursor-pointer', onClick: this.handleSet3D, 'data-dest': 'opaque' },\n                            'Opaque'\n                        ),\n                        _react2.default.createElement(_Slider2.default, { axis: 'alpha', min: 0, max: 100, step: 10, orient: 'horizontal' }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'right-legend cursor-pointer', onClick: this.handleSet3D, 'data-dest': 'transparent' },\n                            'Transparent'\n                        )\n                    )\n                )\n            );\n        }\n        //<div className=\"pseudo-3d-label-opaque\">Opaque</div>\n        //<div className=\"pseudo-3d-label-transparent\">Transparent</div>\n\n    }]);\n\n    return Pseudo3D;\n}(_react.Component);\n\nexports.default = Pseudo3D;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vanMvY29tcG9uZW50cy9Qc2V1ZG8zRC5yZWFjdC5qcz9mODRlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG5pbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBBY3Rpb25zIGZyb20gJy4uL2FjdGlvbnMvQWN0aW9ucyc7XG5pbXBvcnQgQXBwU3RvcmUgZnJvbSAnLi4vc3RvcmVzL0FwcFN0b3JlJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBudW1iZXJGb3JtYXQgZnJvbSAnLi4vbGliL251bWJlcmZvcm1hdCc7XG5pbXBvcnQgKiBhcyBkMyBmcm9tICdkMyc7XG5pbXBvcnQgTW9kYWwgZnJvbSAnLi4vbGliL21vZGFsJztcbmltcG9ydCBTbGlkZXIgZnJvbSAnLi9TbGlkZXIucmVhY3QnO1xuXG5sZXQgbW9kYWxTdHlsZSA9IHtcbiAgICB3aWR0aDogJzgwJScsXG4gICAgbWF4V2lkdGg6ICcxMjAwcHgnLFxuICAgIHNjcm9sbFg6ICdhdXRvJyxcbiAgICBvdmVyZmxvdzogJ3Njcm9sbCcsXG4gICAgbWF4SGVpZ2h0OiAnMTAwJSdcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBzZXVkbzNEIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcywgY29udGV4dCkge1xuICAgICAgICBzdXBlcihwcm9wcywgY29udGV4dCk7XG4gICAgICAgIF8uYmluZEFsbCh0aGlzLCAnaGFuZGxlQ2hhbmdlJywgJ2hhbmRsZUVuaGFuY2VCb3JkZXInLFxuICAgICAgICAgICAgICAgICAgJ2hhbmRsZVNldDNEJywgJ2hhbmRsZVNob3dUaXAnLCAnaGFuZGxlSGlkZVRpcCcsXG4gICAgICAgICAgICAgICAgICAnaGFuZGxlM0RFbnRlcicsICdoYW5kbGUzRExlYXZlJyxcbiAgICAgICAgICAgICAgICAgICdoYW5kbGVTaG93RmxhdG1hcFRpcCcsICdoYW5kbGVIaWRlRmxhdG1hcFRpcCcsXG4gICAgICAgICAgICAgICAgICAnaGFuZGxlU2hvdzNEVGlwJywgJ2hhbmRsZUhpZGUzRFRpcCcsXG4gICAgICAgICAgICAgICAgICAnaGFuZGxlM0RSZXNldCcsICdoYW5kbGVTcGluTGVmdCcsICdoYW5kbGVTcGluUmlnaHQnLFxuICAgICAgICAgICAgICAgICAgJ2luY1gnLCAnZGVjWCcsICdpbmNZJywgJ2RlY1knLCAnaGFuZGxlU3RvcFNwaW5uaW5nJyxcbiAgICAgICAgICAgICAgICAgICdoYW5kbGVNb2RhbEhpZGUnLFxuICAgICAgICAgICAgICAgICAgJ2hhbmRsZURyYWdTdGFydCcsICdoYW5kbGVEcmFnRW5kJywgJ2hhbmRsZU1vdXNlTW92ZScsXG5cbiAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHAzZDogQXBwU3RvcmUuZ2V0UHNldWRvM0QoKSxcbiAgICAgICAgICAgIHRvcF9sb3dyZXM6IGZhbHNlLFxuICAgICAgICAgICAgYm90dG9tX2xvd3JlczogZmFsc2UsXG4gICAgICAgICAgICB0b3BfZG9uZTogZmFsc2UsXG4gICAgICAgICAgICBib3R0b21fZG9uZTogZmFsc2UsXG4gICAgICAgICAgICBzaG93VGlwOiBmYWxzZSxcbiAgICAgICAgICAgIHNob3dSZXNldDogZmFsc2UsXG4gICAgICAgICAgICBzcGlubmluZzogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubWluWCA9IC0xMjtcbiAgICAgICAgdGhpcy5tYXhYID0gMTI7XG4gICAgICAgIHRoaXMubWluWSA9IDA7XG4gICAgICAgIHRoaXMubWF4WSA9IDY7XG4gICAgICAgIHRoaXMuc3BpbkhhbmRsZSA9IG51bGw7XG4gICAgfVxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBBcHBTdG9yZS5hZGRDaGFuZ2VMaXN0ZW5lcih0aGlzLmhhbmRsZUNoYW5nZSk7XG4gICAgICAgIEFwcFN0b3JlLmFkZExpc3RlbmVyKCdtb2RhbF9oaWRlJywgdGhpcy5oYW5kbGVNb2RhbEhpZGUpO1xuXG4gICAgICAgIGxldCB0aGlzXyA9IHRoaXM7XG5cbiAgICAgICAgbGV0IHRvcF9sb3dyZXMgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgdG9wX2xvd3Jlcy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXNfLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICB0b3BfbG93cmVzOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCB0b3BfaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICB0b3BfaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXNfLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgdG9wX2RvbmU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0b3BfaW1nLnNyYyA9ICcvc3RhdGljL2RhdGEvaW5kaXZpZHVhbF9pbmplY3Rpb25zXzNkX3Zpc3VhbGl6YXRpb24vJyArIHRoaXNfLnByb3BzLmluamVjdGlvbl9uYW1lICsgJ193ZWJzaXRlX3ZpZXdfbWlkdGhpY2tuZXNzX29wYXF1ZS5qcGcnO1xuICAgICAgICB9XG4gICAgICAgIHRvcF9sb3dyZXMuc3JjID0gJy9zdGF0aWMvZGF0YS9pbmRpdmlkdWFsX2luamVjdGlvbnNfM2RfdmlzdWFsaXphdGlvbi9sb3dyZXMvJyArIHRoaXMucHJvcHMuaW5qZWN0aW9uX25hbWUgKyAnX3dlYnNpdGVfdmlld19taWR0aGlja25lc3Nfb3BhcXVlLmpwZyc7XG5cbiAgICAgICAgbGV0IGJvdHRvbV9sb3dyZXMgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgYm90dG9tX2xvd3Jlcy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXNfLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBib3R0b21fbG93cmVzOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBib3R0b21faW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBib3R0b21faW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXNfLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tX2RvbmU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBib3R0b21faW1nLnNyYyA9ICcvc3RhdGljL2RhdGEvaW5kaXZpZHVhbF9pbmplY3Rpb25zXzNkX3Zpc3VhbGl6YXRpb24vJyArIHRoaXNfLnByb3BzLmluamVjdGlvbl9uYW1lICsgJ193ZWJzaXRlX3ZpZXdfbWlkdGhpY2tuZXNzX3RyYW5zcGFyZW50LmpwZyc7XG4gICAgICAgIH1cbiAgICAgICAgYm90dG9tX2xvd3Jlcy5zcmMgPSAnL3N0YXRpYy9kYXRhL2luZGl2aWR1YWxfaW5qZWN0aW9uc18zZF92aXN1YWxpemF0aW9uL2xvd3Jlcy8nICsgdGhpcy5wcm9wcy5pbmplY3Rpb25fbmFtZSArICdfd2Vic2l0ZV92aWV3X21pZHRoaWNrbmVzc190cmFuc3BhcmVudC5qcGcnO1xuXG5cbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlTW9kYWxIaWRlKCk7XG4gICAgICAgIEFwcFN0b3JlLnJlbW92ZUxpc3RlbmVyKCdtb2RhbF9oaWRlJywgdGhpcy5oYW5kbGVNb2RhbEhpZGUpO1xuICAgICAgICBBcHBTdG9yZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lcih0aGlzLmhhbmRsZUNoYW5nZSk7XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBwM2Q6IEFwcFN0b3JlLmdldFBzZXVkbzNEKClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGhhbmRsZUVuaGFuY2VCb3JkZXIoZSkge1xuICAgICAgICBsZXQgY2hlY2tlZCA9IGUudGFyZ2V0LmNoZWNrZWQ7XG4gICAgICAgIGlmIChjaGVja2VkKSB7XG4gICAgICAgICAgICBBY3Rpb25zLnNldDNESW5kZXgoJ2JvcmRlckFscGhhJywgMTAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEFjdGlvbnMuc2V0M0RJbmRleCgnYm9yZGVyQWxwaGEnLCAwKTtcbiAgICAgICAgfVxuICAgIH0gXG4gICAgaGFuZGxlU2V0M0QoZSkge1xuICAgICAgICBsZXQgZGVzdCA9ICQoZS50YXJnZXQpLmRhdGEoJ2Rlc3QnKTtcbiAgICAgICAgc3dpdGNoIChkZXN0KSB7XG4gICAgICAgICAgICBjYXNlICdkb3JzYWwnOlxuICAgICAgICAgICAgICAgIEFjdGlvbnMuc2V0M0RJbmRleCgneScsIDApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndmVudHJhbCc6XG4gICAgICAgICAgICAgICAgQWN0aW9ucy5zZXQzREluZGV4KCd5JywgNik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICBBY3Rpb25zLnNldDNESW5kZXgoJ3gnLCAtMTIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgIEFjdGlvbnMuc2V0M0RJbmRleCgneCcsIDEyKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3RyYW5zcGFyZW50JzpcbiAgICAgICAgICAgICAgICBBY3Rpb25zLnNldDNESW5kZXgoJ2FscGhhJywgMTAwKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ29wYXF1ZSc6XG4gICAgICAgICAgICAgICAgQWN0aW9ucy5zZXQzREluZGV4KCdhbHBoYScsIDApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICB9XG4gICAgaGFuZGxlU2hvd1RpcCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2hvd1RpcDogdHJ1ZX0pO1xuICAgIH1cbiAgICBoYW5kbGVIaWRlVGlwKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93VGlwOiBmYWxzZX0pO1xuICAgIH1cbiAgICBoYW5kbGUzREVudGVyKCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtzaG93UmVzZXQ6IHRydWV9KTtcbiAgICB9XG4gICAgaGFuZGxlM0RMZWF2ZSgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2hvd1Jlc2V0OiBmYWxzZX0pO1xuICAgIH1cbiAgICBoYW5kbGUzRFJlc2V0KCkge1xuICAgICAgICBsZXQgZGVmYXVsdF8gPSBBcHBTdG9yZS5nZXREZWZhdWx0M0QoKTtcbiAgICAgICAgQWN0aW9ucy5zZXQzREluZGV4KCd4JywgZGVmYXVsdF8ueCk7XG4gICAgICAgIEFjdGlvbnMuc2V0M0RJbmRleCgneScsIGRlZmF1bHRfLnkpO1xuICAgICAgICBBY3Rpb25zLnNldDNESW5kZXgoJ2FscGhhJywgZGVmYXVsdF8uYWxwaGEpO1xuICAgICAgICB0aGlzLmhhbmRsZVN0b3BTcGlubmluZygpO1xuICAgIH1cbiAgICBoYW5kbGVTaG93RmxhdG1hcFRpcCgpIHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c2hvd0ZsYXRtYXBUaXA6IHRydWV9KTtcbiAgICB9XG4gICAgaGFuZGxlSGlkZUZsYXRtYXBUaXAoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3dGbGF0bWFwVGlwOiBmYWxzZX0pO1xuICAgIH1cbiAgICBoYW5kbGVTaG93M0RUaXAoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3czRFRpcDogdHJ1ZX0pO1xuICAgIH1cbiAgICBoYW5kbGVIaWRlM0RUaXAoKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3Nob3czRFRpcDogZmFsc2V9KTtcbiAgICB9XG4gICAgaW5jWCgpIHtcbiAgICAgICAgbGV0IG5ld1ggPSB0aGlzLnN0YXRlLnAzZC54ICsgMTtcbiAgICAgICAgaWYgKG5ld1ggPiB0aGlzLm1heFgpIHtcbiAgICAgICAgICAgIG5ld1ggPSB0aGlzLm1pblggKyAxO1xuICAgICAgICB9XG4gICAgICAgIEFjdGlvbnMuc2V0M0RJbmRleCgneCcsIG5ld1gpO1xuICAgIH1cbiAgICBkZWNYKCkge1xuICAgICAgICBsZXQgbmV3WCA9IHRoaXMuc3RhdGUucDNkLnggLSAxO1xuICAgICAgICBpZiAobmV3WCA8IHRoaXMubWluWCkge1xuICAgICAgICAgICAgbmV3WCA9IHRoaXMubWF4WCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgQWN0aW9ucy5zZXQzREluZGV4KCd4JywgbmV3WCk7XG4gICAgfVxuICAgIGluY1koKSB7XG4gICAgICAgIGxldCBuZXdZID0gdGhpcy5zdGF0ZS5wM2QueSArIDE7XG4gICAgICAgIGlmIChuZXdZID4gdGhpcy5tYXhZKSB7XG4gICAgICAgICAgICBuZXdZID0gdGhpcy5tYXhZO1xuICAgICAgICB9XG4gICAgICAgIEFjdGlvbnMuc2V0M0RJbmRleCgneScsIG5ld1kpO1xuICAgIH1cbiAgICBkZWNZKCkge1xuICAgICAgICBsZXQgbmV3WSA9IHRoaXMuc3RhdGUucDNkLnkgLSAxO1xuICAgICAgICBpZiAobmV3WSA8IHRoaXMubWluWSkge1xuICAgICAgICAgICAgbmV3WSA9IHRoaXMubWluWTtcbiAgICAgICAgfVxuICAgICAgICBBY3Rpb25zLnNldDNESW5kZXgoJ3knLCBuZXdZKTtcbiAgICB9XG4gICAgaGFuZGxlU3BpbkxlZnQoZSkge1xuICAgICAgICBpZiAodGhpcy5zcGluSGFuZGxlKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuc3BpbkhhbmRsZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zcGluSGFuZGxlID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kZWNYKCk7XG4gICAgICAgIH0sIDE1MCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe3NwaW5uaW5nOiB0cnVlfSk7XG4gICAgfVxuICAgIGhhbmRsZVNwaW5SaWdodChlKSB7XG4gICAgICAgIGlmICh0aGlzLnNwaW5IYW5kbGUpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zcGluSGFuZGxlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNwaW5IYW5kbGUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmluY1goKTtcbiAgICAgICAgfSwgMTUwKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c3Bpbm5pbmc6IHRydWV9KTtcbiAgICB9XG4gICAgaGFuZGxlU3RvcFNwaW5uaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5zcGluSGFuZGxlKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuc3BpbkhhbmRsZSk7XG4gICAgICAgICAgICB0aGlzLnNwaW5IYW5kbGUgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c3Bpbm5pbmc6IGZhbHNlfSk7XG4gICAgfVxuICAgIGhhbmRsZU1vZGFsSGlkZSgpIHtcbiAgICAgICAgdGhpcy5oYW5kbGUzRFJlc2V0KCk7XG4gICAgfVxuICAgIGhhbmRsZURyYWdTdGFydChlKSB7XG4gICAgICAgIGxldCBfZiA9IGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgJCh3aW5kb3cpLm9uZSgnbW91c2V1cCcsIF9mKTtcblxuICAgICAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdGFydGluZ1BvaW50ID0gW2Uuc2NyZWVuWCwgZS5zY3JlZW5ZXTtcbiAgICAgICAgdGhpcy5kcmFnTGFzdFggPSBlLnNjcmVlblg7XG4gICAgICAgIHRoaXMuZHJhZ0xhc3RZID0gZS5zY3JlZW5ZO1xuICAgIH1cbiAgICBoYW5kbGVEcmFnRW5kKCkge1xuICAgICAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7XG4gICAgfVxuICAgIGhhbmRsZU1vdXNlTW92ZShlKSB7XG4gICAgICAgIGlmICh0aGlzLmRyYWdnaW5nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLnNjcmVlblgpO1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGUuc2NyZWVuWCAtIHRoaXMuZHJhZ0xhc3RYKSA+IDgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5zY3JlZW5YIDwgdGhpcy5kcmFnTGFzdFgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmNYKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNYKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0xhc3RYID0gZS5zY3JlZW5YO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGUuc2NyZWVuWSAtIHRoaXMuZHJhZ0xhc3RZKSA+IDIwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuc2NyZWVuWSA8IHRoaXMuZHJhZ0xhc3RZKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5jWSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjWSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmRyYWdMYXN0WSA9IGUuc2NyZWVuWTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGxldCBpbmRleF94ID0gLXRoaXMuc3RhdGUucDNkLngsIGluZGV4X3kgPSA2IC0gdGhpcy5zdGF0ZS5wM2QueTtcbiAgICAgICAgaWYgKGluZGV4X3ggPCAwKSB7XG4gICAgICAgICAgICBpbmRleF94ICs9IDI0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9mZnNldF94ID0gNTQwICogLShpbmRleF94KTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0X3kgPSA1NDAgKiAtKGluZGV4X3kpO1xuICAgICAgICBjb25zdCBiZ19wb3MgPSBvZmZzZXRfeCArICdweCAnICsgb2Zmc2V0X3kgKyAncHgnO1xuICAgICAgICBjb25zdCBvcGFjaXR5ID0gMSAtIChwYXJzZUZsb2F0KHRoaXMuc3RhdGUucDNkLmFscGhhKSAvIDEwMCk7XG4gICAgICAgIGNvbnN0IGJvcmRlck9wYWNpdHkgPSAocGFyc2VGbG9hdCh0aGlzLnN0YXRlLnAzZC5ib3JkZXJBbHBoYSkgLyAxMDApO1xuXG4gICAgICAgIGxldCB0b3BfaW1hZ2UsIGJvdHRvbV9pbWFnZTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUudG9wX2RvbmUpIHtcbiAgICAgICAgICAgIHRvcF9pbWFnZSA9ICd1cmwoL3N0YXRpYy9kYXRhL2luZGl2aWR1YWxfaW5qZWN0aW9uc18zZF92aXN1YWxpemF0aW9uLycgKyB0aGlzLnByb3BzLmluamVjdGlvbl9uYW1lICsgJ193ZWJzaXRlX3ZpZXdfbWlkdGhpY2tuZXNzX29wYXF1ZS5qcGcpJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvcF9pbWFnZSA9ICd1cmwoL3N0YXRpYy9kYXRhL2luZGl2aWR1YWxfaW5qZWN0aW9uc18zZF92aXN1YWxpemF0aW9uL2xvd3Jlcy8nICsgdGhpcy5wcm9wcy5pbmplY3Rpb25fbmFtZSArICdfd2Vic2l0ZV92aWV3X21pZHRoaWNrbmVzc19vcGFxdWUuanBnKSc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmJvdHRvbV9kb25lKSB7XG4gICAgICAgICAgICBib3R0b21faW1hZ2UgPSAndXJsKC9zdGF0aWMvZGF0YS9pbmRpdmlkdWFsX2luamVjdGlvbnNfM2RfdmlzdWFsaXphdGlvbi8nICsgdGhpcy5wcm9wcy5pbmplY3Rpb25fbmFtZSArICdfd2Vic2l0ZV92aWV3X21pZHRoaWNrbmVzc190cmFuc3BhcmVudC5qcGcpJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJvdHRvbV9pbWFnZSA9ICd1cmwoL3N0YXRpYy9kYXRhL2luZGl2aWR1YWxfaW5qZWN0aW9uc18zZF92aXN1YWxpemF0aW9uL2xvd3Jlcy8nICsgdGhpcy5wcm9wcy5pbmplY3Rpb25fbmFtZSArICdfd2Vic2l0ZV92aWV3X21pZHRoaWNrbmVzc190cmFuc3BhcmVudC5qcGcpJztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2FkaW5nO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS50b3BfbG93cmVzICYmIHRoaXMuc3RhdGUuYm90dG9tX2xvd3Jlcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUudG9wX2RvbmUgJiYgdGhpcy5zdGF0ZS5ib3R0b21fZG9uZSkge1xuICAgICAgICAgICAgICAgIGxvYWRpbmcgPSBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2FkaW5nID0gKDxkaXYgY2xhc3NOYW1lPVwicHJlbG9hZGluZ1wiPkxvYWRpbmcgSGlnaCBSZXNvbHV0aW9uIDNEIE1vZGVsPC9kaXY+KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvYWRpbmcgPSAoPGRpdiBjbGFzc05hbWU9XCJwcmVsb2FkaW5nXCI+TG9hZGluZyAzRCBNb2RlbDwvZGl2Pik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlc2V0O1xuICAgICAgICBsZXQgcDNkID0gdGhpcy5zdGF0ZS5wM2Q7XG4gICAgICAgIGxldCBkZWZhdWx0M0QgPSBBcHBTdG9yZS5nZXREZWZhdWx0M0QoKTtcbiAgICAgICAgaWYgKHAzZC54ICE9IGRlZmF1bHQzRC54IHx8IHAzZC55ICE9IGRlZmF1bHQzRC55IHx8IHAzZC5hbHBoYSAhPSBkZWZhdWx0M0QuYWxwaGEpIHtcbiAgICAgICAgICAgIHJlc2V0ID0gKDxidXR0b24gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdyZXNldC1idXR0b24nLCB7aGlkZGVuOiAhdGhpcy5zdGF0ZS5zaG93UmVzZXR9KX0gb25DbGljaz17dGhpcy5oYW5kbGUzRFJlc2V0fT5SZXNldCB0byBsYXRlcmFsPC9idXR0b24+KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3RvcFNwaW5uaW5nO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zcGlubmluZykge1xuICAgICAgICAgICAgc3RvcFNwaW5uaW5nID0gKDxidXR0b24gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdzdG9wLWJ1dHRvbicpfSBvbkNsaWNrPXt0aGlzLmhhbmRsZVN0b3BTcGlubmluZ30+U3RvcCBTcGlubmluZzwvYnV0dG9uPik7XG4gICAgICAgICAgICBzdG9wU3Bpbm5pbmcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGxldCBhcmVhO1xuICAgICAgICBsZXQgbm9kZVBpY2tlZCA9IEFwcFN0b3JlLmdldE5vZGVQaWNrZWQoKTtcbiAgICAgICAgbGV0IGluamVjdGlvbl9uYW1lID0gdGhpcy5wcm9wcy5pbmplY3Rpb24uZGlzcGxheV9uYW1lID8gdGhpcy5wcm9wcy5pbmplY3Rpb24uZGlzcGxheV9uYW1lIDogdGhpcy5wcm9wcy5pbmplY3Rpb25fbmFtZTtcbiAgICAgICAgbGV0IHRpdGxlID0gKDxkaXYgY2xhc3NOYW1lPVwibWFpbi10aXRsZVwiPntpbmplY3Rpb25fbmFtZX0sICBJbmplY3Rpb24gaW50byB0aGUgPHNwYW4gY2xhc3NOYW1lPVwiYXJlYS1mdWxsbmFtZVwiPntub2RlUGlja2VkLmZ1bGxuYW1lfTwvc3Bhbj4sIHtub2RlUGlja2VkLmFiYnJldn08L2Rpdj4pO1xuICAgICAgICBsZXQganVtcF9ocmVmID0gJ2h0dHA6Ly93d3cubWFybW9zZXRicmFpbi5vcmcvZ290by8nICsgdGhpcy5wcm9wcy5jYXNlX2lkICsgJy8nXG4gICAgICAgICAgICArIHRoaXMucHJvcHMuaW5qZWN0aW9uLnNlY3Rpb24gKyAnLydcbiAgICAgICAgICAgICsgdGhpcy5wcm9wcy5pbmplY3Rpb24uc2VjdGlvbl94ICsgJy8nXG4gICAgICAgICAgICArIHRoaXMucHJvcHMuaW5qZWN0aW9uLnNlY3Rpb25feVxuICAgICAgICAgICAgKyAnLzMnO1xuIFxuICAgICAgICBsZXQgc3ViX3RpdGxlID0gKDxkaXYgY2xhc3NOYW1lPVwic3ViLXRpdGxlXCI+XG4gICAgICAgICAgICA8YSBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ2p1bXAnLCB0aGlzLnByb3BzLnRyYWNlcl9pZCl9IGhyZWY9e2p1bXBfaHJlZn0gdGFyZ2V0PVwiX2JsYW5rXCIgdGl0bGU9XCJDbGljayB0byBqdW1wIHRvIGluamVjdGlvbiBpbiBoaWdoIHJlc29sdXRpb24gdmlld2VyXCI+PHNwYW4gY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdpY29uLWp1bXAnLCB0aGlzLnByb3BzLnRyYWNlcl9pZCl9Lz48L2E+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJjb29yZGluYXRlc1wiIG9uTW91c2VFbnRlcj17dGhpcy5oYW5kbGVTaG93VGlwfSBvbk1vdXNlTGVhdmU9e3RoaXMuaGFuZGxlSGlkZVRpcH0+XG4gICAgICAgICAgICAgICAgTUw6IHtwYXJzZUZsb2F0KHRoaXMucHJvcHMubWV0YS5sKS50b0ZpeGVkKDEpfSBtbSxcbiAgICAgICAgICAgICAgICBBUDoge3BhcnNlRmxvYXQodGhpcy5wcm9wcy5tZXRhLmEpLnRvRml4ZWQoMSl9IG1tLFxuICAgICAgICAgICAgICAgIERWOiB7cGFyc2VGbG9hdCh0aGlzLnByb3BzLm1ldGEuaCkudG9GaXhlZCgxKX0gbW08L3NwYW4+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndG9vbHRpcCcsIHtoaWRkZW46ICF0aGlzLnN0YXRlLnNob3dUaXB9KX0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0aXAtdGl0bGVcIj5cbiAgICAgICAgICAgICAgICAgICAgU3RlcmVvdGF4aWMgY29vcmRpbmF0ZXMgKG1tKVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGlwLWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgTUw6IE1lZGlvbGF0ZXJhbCwgbGF0ZXJhbCB0byB0aGUgbWlkc2FnaXR0YWwgcGxhbmVcbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRpcC1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgIEFQOiBSb3N0cm9jYXVkYWwsXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGlwLXN1Yml0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIFBvc2l0aXZlOiBDYXVkYWwgdG8gaW50ZXJhdXJhbCBsaW5lPGJyLz5cbiAgICAgICAgICAgICAgICAgICAgICAgIE5lZ2F0aXZlOiBSb3N0cmFsIHRvIGludGVyYXVyYWwgbGluZVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRpcC1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgIERWOiBEb3Jzb3ZlbnRyYWwsIERvcnNhbCB0byB0aGUgaW50ZXJhdXJhbCBsaW5lXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgICAgIGxldCBzcGluTGVmdCA9ICg8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbiBjdXJzb3ItcG9pbnRlciBzcGluLWJ1dHRvblwiIHRpdGxlPVwiU3BpbiB0aGUgM0QgbW9kZWwgYW50aS1jbG9ja3dpc2VcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZVNwaW5MZWZ0fSBkYXRhLWRlc3Q9XCJsZWZ0XCI+JiN4MjFiYTs8L2Rpdj4pO1xuICAgICAgICBsZXQgc3BpblJpZ2h0ID0gKDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uIGN1cnNvci1wb2ludGVyIHNwaW4tYnV0dG9uXCIgdGl0bGU9XCJTcGluIHRoZSAzRCBtb2RlbCBjbG9ja3dpc2VcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZVNwaW5SaWdodH0gZGF0YS1kZXN0PVwicmlnaHRcIj4mI3gyMWJiOzwvZGl2Pik7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNwaW5uaW5nKSB7XG4gICAgICAgICAgICBzcGluTGVmdCA9ICg8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbiBjdXJzb3ItcG9pbnRlclwiIG9uQ2xpY2s9e3RoaXMuaGFuZGxlU3RvcFNwaW5uaW5nfSB0aXRsZT1cIlN0b3Agc3Bpbm5pbmdcIiBkYXRhLWRlc3Q9XCJsZWZ0XCI+4pe7PC9kaXY+KTtcbiAgICAgICAgICAgIHNwaW5SaWdodCA9ICg8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbiBjdXJzb3ItcG9pbnRlclwiIG9uQ2xpY2s9e3RoaXMuaGFuZGxlU3RvcFNwaW5uaW5nfSB0aXRsZT1cIlN0b3Agc3Bpbm5pbmdcIiBkYXRhLWRlc3Q9XCJyaWdodFwiPuKXuzwvZGl2Pik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtdGl0bGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0aXRsZS1ib3hcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0aXRsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtzdWJfdGl0bGV9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxhdG1hcC1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXB0aW9uXCI+TGFiZWxsZWQgY2VsbHMgcHJvamVjdGVkIG9udG8gdGhlIGZsYXRtYXAgPHNwYW4gY2xhc3NOYW1lPVwiY3Vyc29yLXBvaW50ZXJcIiBvbk1vdXNlRW50ZXI9e3RoaXMuaGFuZGxlU2hvd0ZsYXRtYXBUaXB9IG9uTW91c2VMZWF2ZT17dGhpcy5oYW5kbGVIaWRlRmxhdG1hcFRpcH0+Wz9dPC9zcGFuPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3NOYW1lcygndG9vbHRpcCcsICdmbGF0bWFwLXRpcCcsIHtoaWRkZW46ICF0aGlzLnN0YXRlLnNob3dGbGF0bWFwVGlwfSl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgRmxhdHRlbmVkIG1pZC10aGlja25lc3MgY29ydGljYWwgc3VyZmFjZS48YnIvPkRpZmZlcmVudCBjb2xvcnMgY29ycmVzcG9uZCB0byB2YXJpb3VzIGFyZWFzLiBCbGFjayBkb3RzIGRlbm90ZSBpbmRpdmlkdWFsIGNlbGxzIHByb2plY3RlZCBvbnRvIHRoZSBmbGF0IG1hcCwgd2hpbGUgdGhlIHNwaGVyZSBpbmRpY2F0ZXMgdGhlIGluamVjdGlvbiBsb2NhdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3NOYW1lPVwiZmxhdG1hcFwiIHNyYz17J2h0dHA6Ly9kMTNyZ24yaXh1bWNjaC5jbG91ZGZyb250Lm5ldC9mbGF0bWFwLycgKyB0aGlzLnByb3BzLmNhc2VfaWQgKyAnLycgKyB0aGlzLnByb3BzLnRyYWNlcl9pZCArICcucG5nJ30vPlxuICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzTmFtZT1cImZsYXRtYXAtYm9yZGVyXCIgc3JjPVwiaHR0cDovL2QxM3JnbjJpeHVtY2NoLmNsb3VkZnJvbnQubmV0L2ZsYXRtYXAvZmxhdG1hcF9ib3JkZXIucG5nXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7b3BhY2l0eTogYm9yZGVyT3BhY2l0eX19IC8+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3BhY2l0eS1zbGlkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid3JhcHBlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiB2YWx1ZT1cIjFcIiBjaGVja2VkPXt0aGlzLnN0YXRlLnAzZC5ib3JkZXJBbHBoYSA9PSAnMTAwJ30gb25DaGFuZ2U9e3RoaXMuaGFuZGxlRW5oYW5jZUJvcmRlcn0gLz48c3BhbiBjbGFzc05hbWU9XCJlbmhhbmNlLWJvcmRlclwiPkVuaGFuY2UgYm9yZGVyczwvc3Bhbj48YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImRvd25sb2FkLWNzdlwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17J2h0dHA6Ly9kMTNyZ24yaXh1bWNjaC5jbG91ZGZyb250Lm5ldC9mbGF0bWFwLycgKyB0aGlzLnByb3BzLmNhc2VfaWQgKyAnLycgKyB0aGlzLnByb3BzLnRyYWNlcl9pZCArICcucG5nJ30gdGFyZ2V0PVwiX2JsYW5rXCIgdGl0bGU9eydEb3dubG9hZCB0aGUgZmxhdG1hcCBpbWFnZSBmb3IgaW5qZWN0aW9uICcgKyB0aGlzLnByb3BzLmluamVjdGlvbl9uYW1lfT5Eb3dubG9hZCB0aGUgaW1hZ2U8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibm90ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgSGl0IFs8c3Ryb25nPkVzYzwvc3Ryb25nPl0gdG8gY2xvc2UgdGhlIHdpbmRvdy48YnIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgU2VlIHRoZSBNYWprYSBldCBhbC4gKDIwMTYpIGFydGljbGUsIGZpZ3MuIDcgYW5kIDggKDxhIGhyZWY9XCJodHRwczovL2RvaS5vcmcvMTAuMTAwMi9jbmUuMjQwMjNcIiB0YXJnZXQ9XCJfYmxhbmtcIj4xMC4xMDAyL2NuZS4yNDAyMzwvYT4pPGJyLz5mb3IgZGV0YWlsZWQgZGVzY3JpcHRpb24gb2YgdGhlIG1hcHBpbmcgcHJvY2VkdXJlLlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBzZXVkby0zZC1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXB0aW9uXCI+M0QgdmlzdWFsaXphdGlvbiBvZiB0aGUgcHJvamVjdGlvbiBwYXR0ZXJuPGJyLz52aXN1YWxpemVkIGFnYWluc3QgdGhlIG1pZHRoaWNrbmVzcyBzdXJmYWNlIDxzcGFuIGNsYXNzTmFtZT1cIlwiIG9uTW91c2VFbnRlcj17dGhpcy5oYW5kbGVTaG93M0RUaXB9IG9uTW91c2VMZWF2ZT17dGhpcy5oYW5kbGVIaWRlM0RUaXB9Pls/XTwvc3Bhbj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoJ3Rvb2x0aXAnLCAncDNkLXRpcCcsIHtoaWRkZW46ICF0aGlzLnN0YXRlLnNob3czRFRpcH0pfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIEluZGl2aWR1YWwgY2VsbHMgcGxvdHRlZCBhZ2FpbnN0IHRoZSBtaWQtdGhpY2tuZXNzIGNvcnRpY2FsIHN1cmZhY2UuPGJyLz5UaGUgdGlwIG9mIHRoZSBjb25lIGRlbm90ZXMgdGhlIGNlbnRlciBvZiBtYXNzIG9mIHRoZSBpbmplY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBzZXVkby0zZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Nb3VzZUVudGVyPXt0aGlzLmhhbmRsZTNERW50ZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXt0aGlzLmhhbmRsZTNETGVhdmV9XG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBzZXVkby0zZC10b3BcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTW91c2VEb3duPXt0aGlzLmhhbmRsZURyYWdTdGFydH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlVXA9e3RoaXMuaGFuZGxlRHJhZ0VuZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk1vdXNlTW92ZT17dGhpcy5oYW5kbGVNb3VzZU1vdmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiB0b3BfaW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRQb3NpdGlvbjogYmdfcG9zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBvcGFjaXR5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBzZXVkby0zZC1ib3R0b21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogYm90dG9tX2ltYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246IGJnX3Bvc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAge2xvYWRpbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICB7cmVzZXR9XG4gICAgICAgICAgICAgICAgICAgICAgICB7c3RvcFNwaW5uaW5nfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwc2V1ZG8tM2QtaG9yaXpvbnRhbC1zbGlkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGVmdC1sZWdlbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3BpbkxlZnR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b24gY3Vyc29yLXBvaW50ZXJcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZVNldDNEfSB0aXRsZT1cIk1lZGlhbCB2aWV3XCIgZGF0YS1kZXN0PVwibGVmdFwiPiYjeDI1YzE7PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxTbGlkZXIgYXhpcz1cInhcIiBtaW49ey0xMn0gbWF4PXsxMn0gc3RlcD17MX0gb3JpZW50PVwiaG9yaXpvbnRhbFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJpZ2h0LWxlZ2VuZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uIGN1cnNvci1wb2ludGVyXCIgb25DbGljaz17dGhpcy5oYW5kbGVTZXQzRH0gdGl0bGU9XCJNZWRpYWwgdmlld1wiIGRhdGEtZGVzdD1cInJpZ2h0XCI+JiN4MjViNzs8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3BpblJpZ2h0fVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBzZXVkby0zZC12ZXJ0aWNhbC1zbGlkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidG9wLWxlZ2VuZC1yb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRvcC1sZWdlbmQgY3Vyc29yLXBvaW50ZXJcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZVNldDNEfSB0aXRsZT1cIlZlbnRyYWwgdmlld1wiICBkYXRhLWRlc3Q9XCJ2ZW50cmFsXCI+VmVudHJhbDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNsaWRlci1yb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8U2xpZGVyIGF4aXM9XCJ5XCIgbWluPXswfSBtYXg9ezZ9IHN0ZXA9ey0xfSBvcmllbnQ9XCJ2ZXJ0aWNhbFwiIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYm90dG9tLWxlZ2VuZC1yb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJvdHRvbS1sZWdlbmQgY3Vyc29yLXBvaW50ZXJcIiBvbkNsaWNrPXt0aGlzLmhhbmRsZVNldDNEfSB0aXRsZT1cIkRvcnNhbCB2aWV3XCIgZGF0YS1kZXN0PVwiZG9yc2FsXCI+RG9yc2FsPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicHNldWRvLTNkLW9wYWNpdHktc2xpZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxlZnQtbGVnZW5kIGN1cnNvci1wb2ludGVyXCIgb25DbGljaz17dGhpcy5oYW5kbGVTZXQzRH0gZGF0YS1kZXN0PVwib3BhcXVlXCI+T3BhcXVlPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8U2xpZGVyIGF4aXM9XCJhbHBoYVwiIG1pbj17MH0gbWF4PXsxMDB9IHN0ZXA9ezEwfSBvcmllbnQ9XCJob3Jpem9udGFsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L1NsaWRlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmlnaHQtbGVnZW5kIGN1cnNvci1wb2ludGVyXCIgb25DbGljaz17dGhpcy5oYW5kbGVTZXQzRH0gZGF0YS1kZXN0PVwidHJhbnNwYXJlbnRcIj5UcmFuc3BhcmVudDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2Pik7XG4gICAgfVxuICAgIC8vPGRpdiBjbGFzc05hbWU9XCJwc2V1ZG8tM2QtbGFiZWwtb3BhcXVlXCI+T3BhcXVlPC9kaXY+XG4gICAgLy88ZGl2IGNsYXNzTmFtZT1cInBzZXVkby0zZC1sYWJlbC10cmFuc3BhcmVudFwiPlRyYW5zcGFyZW50PC9kaXY+XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8ganMvY29tcG9uZW50cy9Qc2V1ZG8zRC5yZWFjdC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFTQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7Ozs7O0FBbEJBOzs7Ozs7Ozs7QUFtQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQU9BOzs7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEzQkE7QUE0QkE7QUFDQTs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUdBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsQkE7QUFxQkE7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFFQTtBQUZBO0FBR0E7QUFIQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBRkE7QUFPQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBZEE7QUFOQTtBQXlCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSEE7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBQ0E7QUFEQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQUVBO0FBRkE7QUFBQTtBQWZBO0FBb0JBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSkE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUF0QkE7QUF3QkE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUZBO0FBTkE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBUEE7QUFXQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSkE7QUFuREE7QUEzQkE7QUFzRkE7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQTFaQSIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ }),

/***/ 76:
/* unknown exports provided */
/* all exports used */
/*!****************************************!*\
  !*** ./~/domkit/appendVendorPrefix.js ***!
  \****************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar getVendorPropertyName = __webpack_require__(/*! ./getVendorPropertyName */ 233);\n\nmodule.exports = function(target, sources) {\n  var to = Object(target);\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  for (var nextIndex = 1; nextIndex < arguments.length; nextIndex++) {\n    var nextSource = arguments[nextIndex];\n    if (nextSource == null) {\n      continue;\n    }\n\n    var from = Object(nextSource);\n\n    for (var key in from) {\n      if (hasOwnProperty.call(from, key)) {\n        to[key] = from[key];\n      }\n    }\n  }\n\n  var prefixed = {};\n  for (var key in to) {\n    prefixed[getVendorPropertyName(key)] = to[key]\n  }\n\n  return prefixed\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9+L2RvbWtpdC9hcHBlbmRWZW5kb3JQcmVmaXguanM/ZWZmZCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBnZXRWZW5kb3JQcm9wZXJ0eU5hbWUgPSByZXF1aXJlKCcuL2dldFZlbmRvclByb3BlcnR5TmFtZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRhcmdldCwgc291cmNlcykge1xuICB2YXIgdG8gPSBPYmplY3QodGFyZ2V0KTtcbiAgdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuICBmb3IgKHZhciBuZXh0SW5kZXggPSAxOyBuZXh0SW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBuZXh0SW5kZXgrKykge1xuICAgIHZhciBuZXh0U291cmNlID0gYXJndW1lbnRzW25leHRJbmRleF07XG4gICAgaWYgKG5leHRTb3VyY2UgPT0gbnVsbCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFyIGZyb20gPSBPYmplY3QobmV4dFNvdXJjZSk7XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gZnJvbSkge1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoZnJvbSwga2V5KSkge1xuICAgICAgICB0b1trZXldID0gZnJvbVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBwcmVmaXhlZCA9IHt9O1xuICBmb3IgKHZhciBrZXkgaW4gdG8pIHtcbiAgICBwcmVmaXhlZFtnZXRWZW5kb3JQcm9wZXJ0eU5hbWUoa2V5KV0gPSB0b1trZXldXG4gIH1cblxuICByZXR1cm4gcHJlZml4ZWRcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9kb21raXQvYXBwZW5kVmVuZG9yUHJlZml4LmpzXG4vLyBtb2R1bGUgaWQgPSA3NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=");

/***/ }),

/***/ 9:
/* unknown exports provided */
/* all exports used */
/*!*******************************!*\
  !*** ./js/stores/AppStore.js ***!
  \*******************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _AppDispatcher = __webpack_require__(/*! ../dispatcher/AppDispatcher */ 18);\n\nvar _AppDispatcher2 = _interopRequireDefault(_AppDispatcher);\n\nvar _events = __webpack_require__(/*! events */ 237);\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _connectivity = __webpack_require__(/*! ../lib/connectivity */ 30);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /*\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Copyright (c) 2014, Facebook, Inc.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * All rights reserved.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * This source code is licensed under the BSD-style license found in the\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * LICENSE file in the root directory of this source tree. An additional grant\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * of patent rights can be found in the PATENTS file in the same directory.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                *\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * Store\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\nvar appState = {\n    nodePicked: null,\n    injectionsToShow: [],\n    injectionToExpand: null,\n    pseudo3D: { x: 0, y: 3, alpha: 50, borderAlpha: 0 },\n    areas: {},\n    download: {},\n    connectivity: new _connectivity.Connectivity()\n};\n\nvar AppStore = function (_EventEmitter) {\n    _inherits(AppStore, _EventEmitter);\n\n    function AppStore() {\n        _classCallCheck(this, AppStore);\n\n        return _possibleConstructorReturn(this, (AppStore.__proto__ || Object.getPrototypeOf(AppStore)).apply(this, arguments));\n    }\n\n    _createClass(AppStore, [{\n        key: 'getAll',\n        value: function getAll() {\n            return appState;\n        }\n    }, {\n        key: 'emitChange',\n        value: function emitChange() {\n            this.emit('change');\n        }\n    }, {\n        key: 'getNodePicked',\n        value: function getNodePicked() {\n            return appState.nodePicked;\n        }\n    }, {\n        key: 'getTargetAreaPicked',\n        value: function getTargetAreaPicked() {\n            return appState.nodePicked;\n        }\n    }, {\n        key: 'getInjectionsToShow',\n        value: function getInjectionsToShow() {\n            var injs = void 0;\n            if (appState.nodePicked) {\n\n                if (appState.nodePicked.area) {\n                    injs = _.filter(appState.injectionsStatic, { abbrev: appState.nodePicked.nodeName });\n                } else {\n                    injs = _.filter(appState.injectionsStatic, { abbrev: appState.nodePicked.abbrev });\n                }\n            } else {\n                injs = [];\n            }\n            return injs;\n        }\n    }, {\n        key: 'getInjectionToExpand',\n        value: function getInjectionToExpand() {\n            return appState.injectionToExpand;\n        }\n    }, {\n        key: 'findInjection',\n        value: function findInjection(case_id, tracer_id) {\n            var inj = _.find(appState.injectionsStatic, _defineProperty({ case_id: case_id, tracer_id: tracer_id }, 'tracer_id', tracer_id));\n            return inj;\n        }\n    }, {\n        key: 'getPseudo3D',\n        value: function getPseudo3D() {\n            return appState.pseudo3D;\n        }\n    }, {\n        key: 'getDefault3D',\n        value: function getDefault3D() {\n            return {\n                x: 0, y: 3, alpha: 50, borderAlpha: 0\n            };\n        }\n    }, {\n        key: 'getAreas',\n        value: function getAreas() {\n            return appState.areas;\n        }\n    }, {\n        key: 'getConnectivity',\n        value: function getConnectivity() {\n            return appState.connectivity;\n        }\n    }, {\n        key: 'getDownloadHref',\n        value: function getDownloadHref() {\n            return appState.download.href;\n        }\n    }, {\n        key: 'getDownloadEvent',\n        value: function getDownloadEvent() {\n            return appState.download.event;\n        }\n    }, {\n        key: 'getDownloadFilename',\n        value: function getDownloadFilename() {\n            return appState.download.filename;\n        }\n    }, {\n        key: 'getDataOverlay',\n        value: function getDataOverlay() {\n            return appState.dataOverlay;\n        }\n        /**\n          * @param {function} callback\n          */\n\n    }, {\n        key: 'addChangeListener',\n        value: function addChangeListener(callback) {\n            this.on('change', callback);\n        }\n\n        /**\n          * @param {function} callback\n          */\n\n    }, {\n        key: 'removeChangeListener',\n        value: function removeChangeListener(callback) {\n            this.removeListener('change', callback);\n        }\n        /*\n        addListener(event, callback) {\n            this.on(event, callback);\n        }\n        removeListener(event, callback) {\n            this.removeListener(event, callback);\n        }\n        */\n\n    }]);\n\n    return AppStore;\n}(_events2.default);\n\nvar appStoreInstance = new AppStore();\n\n// Register callback to handle all updates\nappStoreInstance.dispatchToken = _AppDispatcher2.default.register(function (action) {\n    switch (action.actionType) {\n        case 'SAVE':\n            appState = action.state;\n            break;\n        case 'PICK_NODE':\n            appState.nodePicked = action.node;\n            appStoreInstance.emitChange();\n            break;\n        case 'PICK_TARGET_AREA':\n            appState.nodePicked = action.node;\n            appStoreInstance.emitChange();\n            break;\n        case 'NODE_DETAIL':\n            appStoreInstance.emitChange();\n            break;\n        case 'SAVE_INJECTIONS_STATIC':\n            appState.injectionsStatic = action.injections;\n            break;\n        case 'EXPAND_INJECTION':\n            appState.injectionToExpand = action.injection;\n            var injs = _.filter(appState.injectionsStatic, { abbrev: appState.nodePicked.nodeName });\n            _.each(injs, function (inj) {\n                inj.collapse = true;\n            });\n            action.injection.collapse = false;\n            appStoreInstance.emitChange();\n            break;\n        case 'HIDE_INJECTION':\n            //appState.injectionToExpand = action.injection;\n            action.injection.collapse = true;\n            appStoreInstance.emitChange();\n            break;\n        case 'AJAX_PROGRESS':\n            appStoreInstance.emit('ajax');\n            break;\n        case 'SET_3D_INDEX':\n            appState.pseudo3D[action.axis] = action.value;\n            appStoreInstance.emitChange();\n            break;\n        case 'SAVE_AREAS':\n            _.assign(appState.areas, action.areas);\n            break;\n        case 'MODAL_HIDE':\n            appStoreInstance.emit('modal_hide');\n            break;\n        case 'SET_DOWNLOAD_LINK':\n            appState.download.href = action.href;\n            appState.download.event = action.event;\n            appState.download.filename = action.filename;\n            appStoreInstance.emit('download');\n            break;\n        case 'SET_DATA_OVERLAY':\n            appState.dataOverlay = action.overlay;\n            appStoreInstance.emitChange();\n            break;\n        case 'PROCESS_CONNECTIVITY':\n            appState.connectivity = (0, _connectivity.processConnectivity)(action.data, action.injectionInfo);\n            appStoreInstance.emitChange();\n            break;\n        case 'PROCESS_AREAS':\n            appState.areas = (0, _connectivity.processAreas)(action.data);\n            appStoreInstance.emitChange();\n            break;\n        default:\n\n            // no op\n            break;\n    }\n    //sessionStorage.setItem('appState', JSON.stringify(appStoreInstance.getAll()));\n});\n\nexports.default = appStoreInstance;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9qcy9zdG9yZXMvQXBwU3RvcmUuanM/OWRlMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogU3RvcmVcbiAqL1xuXG5pbXBvcnQgQXBwRGlzcGF0Y2hlciBmcm9tICcuLi9kaXNwYXRjaGVyL0FwcERpc3BhdGNoZXInO1xuaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICdldmVudHMnO1xuaW1wb3J0IHtwcm9jZXNzQXJlYXMsIHByb2Nlc3NDb25uZWN0aXZpdHl9IGZyb20gJy4uL2xpYi9jb25uZWN0aXZpdHknO1xuaW1wb3J0IHtDb25uZWN0aXZpdHl9IGZyb20gJy4uL2xpYi9jb25uZWN0aXZpdHknO1xubGV0IGFwcFN0YXRlID0ge1xuICAgIG5vZGVQaWNrZWQ6IG51bGwsXG4gICAgaW5qZWN0aW9uc1RvU2hvdzogW10sXG4gICAgaW5qZWN0aW9uVG9FeHBhbmQ6IG51bGwsXG4gICAgcHNldWRvM0Q6IHt4OiAwLCB5OiAzLCBhbHBoYTogNTAsIGJvcmRlckFscGhhOiAwfSxcbiAgICBhcmVhczoge30sXG4gICAgZG93bmxvYWQ6IHt9LFxuICAgIGNvbm5lY3Rpdml0eTogbmV3IENvbm5lY3Rpdml0eSgpLFxufTtcblxuY2xhc3MgQXBwU3RvcmUgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICAgIGdldEFsbCgpIHtcbiAgICAgICAgcmV0dXJuIGFwcFN0YXRlO1xuICAgIH1cbiAgICBlbWl0Q2hhbmdlKCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2NoYW5nZScpO1xuICAgIH1cblxuICAgIGdldE5vZGVQaWNrZWQoKSB7XG4gICAgICAgIHJldHVybiBhcHBTdGF0ZS5ub2RlUGlja2VkO1xuICAgIH1cbiAgICBnZXRUYXJnZXRBcmVhUGlja2VkKCkge1xuICAgICAgICByZXR1cm4gYXBwU3RhdGUubm9kZVBpY2tlZDtcbiAgICB9XG4gICAgZ2V0SW5qZWN0aW9uc1RvU2hvdygpIHtcbiAgICAgICAgbGV0IGluanM7XG4gICAgICAgIGlmIChhcHBTdGF0ZS5ub2RlUGlja2VkKSB7XG5cbiAgICAgICAgICAgIGlmIChhcHBTdGF0ZS5ub2RlUGlja2VkLmFyZWEpIHtcbiAgICAgICAgICAgICAgICBpbmpzID0gXy5maWx0ZXIoYXBwU3RhdGUuaW5qZWN0aW9uc1N0YXRpYywge2FiYnJldjogYXBwU3RhdGUubm9kZVBpY2tlZC5ub2RlTmFtZX0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbmpzID0gXy5maWx0ZXIoYXBwU3RhdGUuaW5qZWN0aW9uc1N0YXRpYywge2FiYnJldjogYXBwU3RhdGUubm9kZVBpY2tlZC5hYmJyZXZ9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluanMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5qcztcbiAgICB9XG4gICAgZ2V0SW5qZWN0aW9uVG9FeHBhbmQoKSB7XG4gICAgICAgIHJldHVybiBhcHBTdGF0ZS5pbmplY3Rpb25Ub0V4cGFuZDtcbiAgICB9XG4gICAgZmluZEluamVjdGlvbihjYXNlX2lkLCB0cmFjZXJfaWQpIHtcbiAgICAgICAgbGV0IGluaiA9IF8uZmluZChhcHBTdGF0ZS5pbmplY3Rpb25zU3RhdGljLCB7Y2FzZV9pZDogY2FzZV9pZCwgdHJhY2VyX2lkLCB0cmFjZXJfaWR9KTtcbiAgICAgICAgcmV0dXJuIGluajtcbiAgICB9XG4gICAgZ2V0UHNldWRvM0QoKSB7XG4gICAgICAgIHJldHVybiBhcHBTdGF0ZS5wc2V1ZG8zRDtcbiAgICB9XG4gICAgZ2V0RGVmYXVsdDNEKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgeDogMCwgeTogMywgYWxwaGE6IDUwLCBib3JkZXJBbHBoYTogMFxuICAgICAgICB9XG4gICAgfVxuICAgIGdldEFyZWFzKCkge1xuICAgICAgICByZXR1cm4gYXBwU3RhdGUuYXJlYXM7XG4gICAgfVxuICAgIGdldENvbm5lY3Rpdml0eSgpIHtcbiAgICAgICAgcmV0dXJuIGFwcFN0YXRlLmNvbm5lY3Rpdml0eTtcbiAgICB9XG4gICAgZ2V0RG93bmxvYWRIcmVmKCkge1xuICAgICAgICByZXR1cm4gYXBwU3RhdGUuZG93bmxvYWQuaHJlZjtcbiAgICB9XG4gICAgZ2V0RG93bmxvYWRFdmVudCgpIHtcbiAgICAgICAgcmV0dXJuIGFwcFN0YXRlLmRvd25sb2FkLmV2ZW50O1xuICAgIH1cbiAgICBnZXREb3dubG9hZEZpbGVuYW1lKCkge1xuICAgICAgICByZXR1cm4gYXBwU3RhdGUuZG93bmxvYWQuZmlsZW5hbWU7XG4gICAgfVxuICAgIGdldERhdGFPdmVybGF5KCkge1xuICAgICAgICByZXR1cm4gYXBwU3RhdGUuZGF0YU92ZXJsYXk7XG4gICAgfVxuICAgIC8qKlxuICAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAgKi9cbiAgICBhZGRDaGFuZ2VMaXN0ZW5lcihjYWxsYmFjaykge1xuICAgICAgICB0aGlzLm9uKCdjaGFuZ2UnLCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICAqL1xuICAgIHJlbW92ZUNoYW5nZUxpc3RlbmVyKGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoJ2NoYW5nZScsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLypcbiAgICBhZGRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5vbihldmVudCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICByZW1vdmVMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICAqL1xufVxuXG5sZXQgYXBwU3RvcmVJbnN0YW5jZSA9IG5ldyBBcHBTdG9yZSgpO1xuXG4vLyBSZWdpc3RlciBjYWxsYmFjayB0byBoYW5kbGUgYWxsIHVwZGF0ZXNcbmFwcFN0b3JlSW5zdGFuY2UuZGlzcGF0Y2hUb2tlbiA9IEFwcERpc3BhdGNoZXIucmVnaXN0ZXIoYWN0aW9uID0+IHtcbiAgICBzd2l0Y2ggKGFjdGlvbi5hY3Rpb25UeXBlKSB7XG4gICAgICAgIGNhc2UgJ1NBVkUnOlxuICAgICAgICAgICAgYXBwU3RhdGUgPSBhY3Rpb24uc3RhdGU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnUElDS19OT0RFJzpcbiAgICAgICAgICAgIGFwcFN0YXRlLm5vZGVQaWNrZWQgPSBhY3Rpb24ubm9kZTtcbiAgICAgICAgICAgIGFwcFN0b3JlSW5zdGFuY2UuZW1pdENoYW5nZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1BJQ0tfVEFSR0VUX0FSRUEnOlxuICAgICAgICAgICAgYXBwU3RhdGUubm9kZVBpY2tlZCA9IGFjdGlvbi5ub2RlO1xuICAgICAgICAgICAgYXBwU3RvcmVJbnN0YW5jZS5lbWl0Q2hhbmdlKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTk9ERV9ERVRBSUwnOlxuICAgICAgICAgICAgYXBwU3RvcmVJbnN0YW5jZS5lbWl0Q2hhbmdlKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnU0FWRV9JTkpFQ1RJT05TX1NUQVRJQyc6XG4gICAgICAgICAgICBhcHBTdGF0ZS5pbmplY3Rpb25zU3RhdGljID0gYWN0aW9uLmluamVjdGlvbnM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRVhQQU5EX0lOSkVDVElPTic6XG4gICAgICAgICAgICBhcHBTdGF0ZS5pbmplY3Rpb25Ub0V4cGFuZCA9IGFjdGlvbi5pbmplY3Rpb247XG4gICAgICAgICAgICBsZXQgaW5qcyA9IF8uZmlsdGVyKGFwcFN0YXRlLmluamVjdGlvbnNTdGF0aWMsIHthYmJyZXY6IGFwcFN0YXRlLm5vZGVQaWNrZWQubm9kZU5hbWV9KTtcbiAgICAgICAgICAgIF8uZWFjaChpbmpzLCBpbmogPT4ge1xuICAgICAgICAgICAgICAgIGluai5jb2xsYXBzZSA9IHRydWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFjdGlvbi5pbmplY3Rpb24uY29sbGFwc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIGFwcFN0b3JlSW5zdGFuY2UuZW1pdENoYW5nZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0hJREVfSU5KRUNUSU9OJzpcbiAgICAgICAgICAgIC8vYXBwU3RhdGUuaW5qZWN0aW9uVG9FeHBhbmQgPSBhY3Rpb24uaW5qZWN0aW9uO1xuICAgICAgICAgICAgYWN0aW9uLmluamVjdGlvbi5jb2xsYXBzZSA9IHRydWU7XG4gICAgICAgICAgICBhcHBTdG9yZUluc3RhbmNlLmVtaXRDaGFuZ2UoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdBSkFYX1BST0dSRVNTJzpcbiAgICAgICAgICAgIGFwcFN0b3JlSW5zdGFuY2UuZW1pdCgnYWpheCcpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1NFVF8zRF9JTkRFWCc6XG4gICAgICAgICAgICBhcHBTdGF0ZS5wc2V1ZG8zRFthY3Rpb24uYXhpc10gPSBhY3Rpb24udmFsdWU7XG4gICAgICAgICAgICBhcHBTdG9yZUluc3RhbmNlLmVtaXRDaGFuZ2UoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdTQVZFX0FSRUFTJzpcbiAgICAgICAgICAgIF8uYXNzaWduKGFwcFN0YXRlLmFyZWFzLCBhY3Rpb24uYXJlYXMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ01PREFMX0hJREUnOlxuICAgICAgICAgICAgYXBwU3RvcmVJbnN0YW5jZS5lbWl0KCdtb2RhbF9oaWRlJyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnU0VUX0RPV05MT0FEX0xJTksnOlxuICAgICAgICAgICAgYXBwU3RhdGUuZG93bmxvYWQuaHJlZiA9IGFjdGlvbi5ocmVmO1xuICAgICAgICAgICAgYXBwU3RhdGUuZG93bmxvYWQuZXZlbnQgPSBhY3Rpb24uZXZlbnQ7XG4gICAgICAgICAgICBhcHBTdGF0ZS5kb3dubG9hZC5maWxlbmFtZSA9IGFjdGlvbi5maWxlbmFtZTtcbiAgICAgICAgICAgIGFwcFN0b3JlSW5zdGFuY2UuZW1pdCgnZG93bmxvYWQnKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdTRVRfREFUQV9PVkVSTEFZJzpcbiAgICAgICAgICAgIGFwcFN0YXRlLmRhdGFPdmVybGF5ID0gYWN0aW9uLm92ZXJsYXk7XG4gICAgICAgICAgICBhcHBTdG9yZUluc3RhbmNlLmVtaXRDaGFuZ2UoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdQUk9DRVNTX0NPTk5FQ1RJVklUWSc6XG4gICAgICAgICAgICBhcHBTdGF0ZS5jb25uZWN0aXZpdHkgPSBwcm9jZXNzQ29ubmVjdGl2aXR5KGFjdGlvbi5kYXRhLCBhY3Rpb24uaW5qZWN0aW9uSW5mbyk7XG4gICAgICAgICAgICBhcHBTdG9yZUluc3RhbmNlLmVtaXRDaGFuZ2UoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdQUk9DRVNTX0FSRUFTJzpcbiAgICAgICAgICAgIGFwcFN0YXRlLmFyZWFzID0gcHJvY2Vzc0FyZWFzKGFjdGlvbi5kYXRhKTtcbiAgICAgICAgICAgIGFwcFN0b3JlSW5zdGFuY2UuZW1pdENoYW5nZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG5cbiAgICAgICAgICAgIC8vIG5vIG9wXG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgLy9zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdhcHBTdGF0ZScsIEpTT04uc3RyaW5naWZ5KGFwcFN0b3JlSW5zdGFuY2UuZ2V0QWxsKCkpKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBhcHBTdG9yZUluc3RhbmNlO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGpzL3N0b3Jlcy9BcHBTdG9yZS5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFXQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7Ozs7QUFkQTs7Ozs7Ozs7Ozs7QUFlQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFDQTtBQVNBOzs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OztBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsRUE7QUFvRUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==");

/***/ })

},[343]);